cscope 15 $HOME/go/src/github.com/jazzsir/minio-go               0000751293
	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/.travis.yml

1 
	gsudo
: 
çl£


2 
Ïnguage
: 
go


4 
os
:

5 - 
lšux


7 
’v
:

8 - 
ARCH
=
x86_64


9 - 
ARCH
=
i686


11 
go
:

13 - 
t


15 
m©rix
:

16 
ç¡_fšish
: 
Œue


17 
®low_çu»s
:

18 - 
go
: 
t


20 
addÚs
:

21 
­t
:

22 
·ckages
:

23 - 
devsüts


25 
süt
:

26 - 
diff
 -
au
 <(
gofmt
 -
d
 .è<(
´štf
 "")

27 - 
diff
 -
au
 <(
liûn£check
 --
check
 '.go$' --
»cursive
 --
lšes
 0 * | 
g»p
 -
v
 -
w
 'A·ch(v2.0)'è<(
´štf
 "")

28 - 
make


	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-compose-object.go

18 
·ckage
 
mšio


20 
impÜt
 (

37 
ty³
 
De¡š©iÚInfo
 struct {

38 
	mbuck‘
, 
objeù
 
¡ršg


39 
’üy±iÚ
 
	m’üy±
.
S”v”Side


44 
u£rM‘ad©a
 
	mm­
[
¡ršg
]
	m¡ršg


58 
func
 
	$NewDe¡š©iÚInfo
(
buck‘
, 
objeù
 
¡ršg
, 
s£
 
’üy±
.
S”v”Side
, 
u£rM‘a
 
m­
[¡ršg]¡ršgè(
d
 
De¡š©iÚInfo
, 
”r
 
”rÜ
) {

60 
”r
 = 
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘
);ƒ¼ !ğ
n
 {

61  
d
, 
”r


63 
”r
 = 
s3uts
.
	`CheckV®idObjeùName
(
objeù
);ƒ¼ !ğ
n
 {

64  
d
, 
”r


70 
m
 :ğ
	`make
(
m­
[
¡ršg
]string)

71 
k
, 
v
 :ğ
¿nge
 
u£rM‘a
 {

72 
¡ršgs
.
	`HasP»fix
(¡ršgs.
	`ToLow”
(
k
), "x-amz-meta-") {

73 
k
 = k[
	`Ën
("x-amz-meta-"):]

75 
_
, 
ok
 :ğ
m
[
k
]; ok {

76  
d
, 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("CªnÙ‡dd bÙh % ªd x-amz-m‘a-% key a cu¡om m‘ad©a", 
k
, k))

78 
m
[
k
] = 
v


81  
De¡š©iÚInfo
{

82 
buck‘
: bucket,

83 
objeù
: object,

84 
’üy±iÚ
: 
s£
,

85 
u£rM‘ad©a
: 
m
,

86 }, 
n


87 
	}
}

95 
	$func
 (
d
 *
De¡š©iÚInfo
è
	$g‘U£rM‘aH—d”sM­
(
w™hCİyDœeùiveH—d”
 
boŞ
è
m­
[
¡ršg
]string {

96 
	`Ën
(
d
.
u£rM‘ad©a
) == 0 {

97  
n


99 
r
 :ğ
	`make
(
m­
[
¡ršg
]string)

100 
w™hCİyDœeùiveH—d”
 {

101 
r
["x-amz-metadata-directive"] = "REPLACE"

103 
k
, 
v
 :ğ
¿nge
 
d
.
u£rM‘ad©a
 {

104 
	`isAmzH—d”
(
k
è|| 
	`isSnd¬dH—d”
(kè|| 
	`isStÜageCÏssH—d”
(k) {

105 
r
[
k
] = 
v


107 
r
["x-amz-m‘a-"+
k
] = 
v


110  
r


111 
	}
}

115 
ty³
 
SourûInfo
 struct {

116 
buck‘
, 
objeù
 
¡ršg


117 
	m¡¬t
, 
’d
 
št64


118 
’üy±iÚ
 
	m’üy±
.
S”v”Side


121 
H—d”s
 
	mh‰p
.
	mH—d”


130 
func
 
	$NewSourûInfo
(
buck‘
, 
objeù
 
¡ršg
, 
s£
 
’üy±
.
S”v”Side
è
SourûInfo
 {

131 
r
 :ğ
SourûInfo
{

132 
buck‘
: bucket,

133 
objeù
: object,

134 
¡¬t
: -1,

135 
’üy±iÚ
: 
s£
,

136 
H—d”s
: 
	`make
(
h‰p
.
H—d”
),

140 
r
.
H—d”s
.
	`S‘
("x-amz-cİy-sourû", 
s3uts
.
	`EncodeP©h
(
buck‘
+"/"+
objeù
))

141  
r


142 
	}
}

147 
	$func
 (
s
 *
SourûInfo
è
	$S‘Rªge
(
¡¬t
, 
’d
 
št64
è
”rÜ
 {

148 
¡¬t
 > 
’d
 || start < 0 {

149  
	`E¼Inv®idArgum’t
("start must be‚on-negative,‡nd start must be‡t mostƒnd.")

152 
s
.
¡¬t
, s.
’d
 = start,ƒnd

153  
n


154 
	}
}

158 
	$func
 (
s
 *
SourûInfo
è
	$S‘M©chETagCÚd
(
‘ag
 
¡ršg
è
”rÜ
 {

159 
‘ag
 == "" {

160  
	`E¼Inv®idArgum’t
("ETag cannot beƒmpty.")

162 
s
.
H—d”s
.
	`S‘
("x-amz-cİy-sourû-if-m©ch", 
‘ag
)

163  
n


164 
	}
}

169 
	$func
 (
s
 *
SourûInfo
è
	$S‘M©chETagExû±CÚd
(
‘ag
 
¡ršg
è
”rÜ
 {

170 
‘ag
 == "" {

171  
	`E¼Inv®idArgum’t
("ETag cannot beƒmpty.")

173 
s
.
H—d”s
.
	`S‘
("x-amz-cİy-sourû-if-nÚe-m©ch", 
‘ag
)

174  
n


175 
	}
}

178 
	$func
 (
s
 *
SourûInfo
è
	$S‘Modif›dSšûCÚd
(
modTime
 
time
.
Time
è
”rÜ
 {

179 
modTime
.
	`IsZ”o
() {

180  
	`E¼Inv®idArgum’t
("Inputime cannot be 0.")

182 
s
.
H—d”s
.
	`S‘
("x-amz-cİy-sourû-if-modif›d-sšû", 
modTime
.
	`FÜm©
(
h‰p
.
TimeFÜm©
))

183  
n


184 
	}
}

187 
	$func
 (
s
 *
SourûInfo
è
	$S‘Unmodif›dSšûCÚd
(
modTime
 
time
.
Time
è
”rÜ
 {

188 
modTime
.
	`IsZ”o
() {

189  
	`E¼Inv®idArgum’t
("Inputime cannot be 0.")

191 
s
.
H—d”s
.
	`S‘
("x-amz-cİy-sourû-if-unmodif›d-sšû", 
modTime
.
	`FÜm©
(
h‰p
.
TimeFÜm©
))

192  
n


193 
	}
}

196 
	$func
 (
s
 *
SourûInfo
è
	$g‘Prİs
(
c
 
Cl›Á
è(
size
 
št64
, 
‘ag
 
¡ršg
, 
u£rM‘a
 
m­
[¡ršg]¡ršg, 
”r
 
”rÜ
) {

199 
v¬
 
objInfo
 
ObjeùInfo


200 
İts
 :ğ
StObjeùO±iÚs
{
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
’üy±
.
	`SSE
(
s
.
’üy±iÚ
)}}

201 
objInfo
, 
”r
 = 
c
.
	`¡©Objeù
(
cÚ‹xt
.
	`Background
(), 
s
.
buck‘
, s.
objeù
, 
İts
)

202 
”r
 !ğ
n
 {

203 
”r
 = 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Could‚Ù sˆobjeù - %s/%s: %v", 
s
.
buck‘
, s.
objeù
,ƒrr))

205 
size
 = 
objInfo
.
Size


206 
‘ag
 = 
objInfo
.
ETag


207 
u£rM‘a
 = 
	`make
(
m­
[
¡ršg
]string)

208 
k
, 
v
 :ğ
¿nge
 
objInfo
.
M‘ad©a
 {

209 
¡ršgs
.
	`HasP»fix
(
k
, "x-amz-meta-") {

210 
	`Ën
(
v
) > 0 {

211 
u£rM‘a
[
k
] = 
v
[0]

217 
	}
}

220 
	$func
 (
c
 
Cl›Á
è
	$cİyObjeùDo
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
¤cBuck‘
, 
¤cObjeù
, 
de¡Buck‘
, 
de¡Objeù
 
¡ršg
,

221 
m‘ad©a
 
m­
[
¡ršg
]¡ršgè(
ObjeùInfo
, 
”rÜ
) {

224 
h—d”s
 :ğ
	`make
(
h‰p
.
H—d”
)

227 
k
, 
v
 :ğ
¿nge
 
m‘ad©a
 {

228 
h—d”s
.
	`S‘
(
k
, 
v
)

232 
h—d”s
.
	`S‘
("x-amz-cİy-sourû", 
s3uts
.
	`EncodeP©h
(
¤cBuck‘
+"/"+
¤cObjeù
))

235 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "PUT", 
»que¡M‘ad©a
{

236 
buck‘Name
: 
de¡Buck‘
,

237 
objeùName
: 
de¡Objeù
,

238 
cu¡omH—d”
: 
h—d”s
,

240 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

241 
”r
 !ğ
n
 {

242  
ObjeùInfo
{}, 
”r


246 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

247  
ObjeùInfo
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
¤cBuck‘
, 
¤cObjeù
)

250 
ıObjRes
 :ğ
cİyObjeùResuÉ
{}

251 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
ıObjRes
)

252 
”r
 !ğ
n
 {

253  
ObjeùInfo
{}, 
”r


256 
objInfo
 :ğ
ObjeùInfo
{

257 
Key
: 
de¡Objeù
,

258 
ETag
: 
¡ršgs
.
	`Trim
(
ıObjRes
.ETag, "\""),

259 
La¡Modif›d
: 
ıObjRes
.LastModified,

261  
objInfo
, 
n


262 
	}
}

264 
	$func
 (
c
 
Cl›Á
è
	$cİyObjeùP¬tDo
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
¤cBuck‘
, 
¤cObjeù
, 
de¡Buck‘
, 
de¡Objeù
 
¡ršg
, 
u¶ßdID
 string,

265 
·¹ID
 , 
¡¬tOff£t
 
št64
, 
Ëngth
 iÁ64, 
m‘ad©a
 
m­
[
¡ršg
]¡ršgè(
p
 
Com¶‘eP¬t
, 
”r
 
”rÜ
) {

267 
h—d”s
 :ğ
	`make
(
h‰p
.
H—d”
)

270 
h—d”s
.
	`S‘
("x-amz-cİy-sourû", 
s3uts
.
	`EncodeP©h
(
¤cBuck‘
+"/"+
¤cObjeù
))

272 
¡¬tOff£t
 < 0 {

273  
p
, 
	`E¼Inv®idArgum’t
("startOffset must be‚on-negative")

276 
Ëngth
 >= 0 {

277 
h—d”s
.
	`S‘
("x-amz-cİy-sourû-¿nge", 
fmt
.
	`S´štf
("by‹s=%d-%d", 
¡¬tOff£t
, s¹Off£t+
Ëngth
-1))

280 
k
, 
v
 :ğ
¿nge
 
m‘ad©a
 {

281 
h—d”s
.
	`S‘
(
k
, 
v
)

284 
qu”yV®ues
 :ğ
	`make
(
u¾
.
V®ues
)

285 
qu”yV®ues
.
	`S‘
("·¹Numb”", 
¡rcÚv
.
	`Itß
(
·¹ID
))

286 
qu”yV®ues
.
	`S‘
("u¶ßdId", 
u¶ßdID
)

288 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "PUT", 
»que¡M‘ad©a
{

289 
buck‘Name
: 
de¡Buck‘
,

290 
objeùName
: 
de¡Objeù
,

291 
cu¡omH—d”
: 
h—d”s
,

292 
qu”yV®ues
: queryValues,

294 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

295 
”r
 !ğ
n
 {

300 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

301  
p
, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
de¡Buck‘
, 
de¡Objeù
)

305 
ıObjRes
 :ğ
cİyObjeùResuÉ
{}

306 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
ıObjRes
)

307 
”r
 !ğ
n
 {

308  
p
, 
”r


310 
p
.
P¬tNumb”
,….
ETag
 = 
·¹ID
, 
ıObjRes
.ETag

311  
p
, 
n


312 
	}
}

317 
	$func
 (
c
 
Cl›Á
è
	$u¶ßdP¬tCİy
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘
, 
objeù
, 
u¶ßdID
 
¡ršg
, 
·¹Numb”
 ,

318 
h—d”s
 
h‰p
.
H—d”
è(
p
 
Com¶‘eP¬t
, 
”r
 
”rÜ
) {

321 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

322 
u¾V®ues
.
	`S‘
("·¹Numb”", 
¡rcÚv
.
	`Itß
(
·¹Numb”
))

323 
u¾V®ues
.
	`S‘
("u¶ßdId", 
u¶ßdID
)

326 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "PUT", 
»que¡M‘ad©a
{

327 
buck‘Name
: 
buck‘
,

328 
objeùName
: 
objeù
,

329 
cu¡omH—d”
: 
h—d”s
,

330 
qu”yV®ues
: 
u¾V®ues
,

332 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

333 
”r
 !ğ
n
 {

334  
p
, 
”r


338 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

339  
p
, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘
, 
objeù
)

343 
ıObjRes
 :ğ
cİyObjeùResuÉ
{}

344 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
ıObjRes
)

345 
”r
 !ğ
n
 {

346  
p
, 
”r


348 
p
.
P¬tNumb”
,….
ETag
 = 
·¹Numb”
, 
ıObjRes
.ETag

349  
p
, 
n


350 
	}
}

357 
	$func
 (
c
 
Cl›Á
è
	$Compo£ObjeùW™hProg»ss
(
d¡
 
De¡š©iÚInfo
, 
¤cs
 []
SourûInfo
, 
´og»ss
 
io
.
R—d”
è
”rÜ
 {

358 
	`Ën
(
¤cs
è< 1 ||†’(¤csè> 
maxP¬tsCouÁ
 {

359  
	`E¼Inv®idArgum’t
("There must be‡s†east one‡nd upo 10000 source objects.")

361 
ùx
 :ğ
cÚ‹xt
.
	`Background
()

362 
¤cSizes
 :ğ
	`make
([]
št64
, 
	`Ën
(
¤cs
))

363 
v¬
 
tÙ®Size
, 
size
, 
tÙ®P¬ts
 
št64


364 
v¬
 
¤cU£rM‘a
 
m­
[
¡ršg
]string

365 
‘ags
 :ğ
	`make
([]
¡ršg
, 
	`Ën
(
¤cs
))

366 
v¬
 
”r
 
”rÜ


367 
i
, 
¤c
 :ğ
¿nge
 
¤cs
 {

368 
size
, 
‘ags
[
i
], 
¤cU£rM‘a
, 
”r
 = 
¤c
.
	`g‘Prİs
(
c
)

369 
”r
 !ğ
n
 {

370  
”r


375 
	`Ën
(
¤cs
è> 1 && 
¤c
.
H—d”s
.
	`G‘
("x-amz-meta-x-amz-key") != "" {

376  
	`E¼Inv®idArgum’t
(

377 
fmt
.
	`S´štf
("Cl›Á sid’üy±iÚ i u£d iÀsourû objeù %s/%s", 
¤c
.
buck‘
, src.
objeù
))

382 
¤c
.
¡¬t
 != -1 {

386 
¤c
.
’d
 >ğ
size
 {

387  
	`E¼Inv®idArgum’t
(

388 
fmt
.
	`S´štf
("SourceInfo %d has invalid segment-to-copy [%d, %d] (size is %d)",

389 
i
, 
¤c
.
¡¬t
, src.
’d
, 
size
))

391 
size
 = 
¤c
.
’d
 - src.
¡¬t
 + 1

395 
size
 < 
absMšP¬tSize
 && 
i
 < 
	`Ën
(
¤cs
)-1 {

396  
	`E¼Inv®idArgum’t
(

397 
fmt
.
	`S´štf
("SourûInfØ%d i toØsm®È(%dèªd iˆi nÙhÏ¡…¬t", 
i
, 
size
))

401 
tÙ®Size
 +ğ
size


402 
tÙ®Size
 > 
maxMuÉ¬tPutObjeùSize
 {

403  
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("CªnÙ compo£‡Àobjeù oàsiz%d (> 5TiB)", 
tÙ®Size
))

407 
¤cSizes
[
i
] = 
size


410 
tÙ®P¬ts
 +ğ
	`·¹sRequœed
(
size
)

412 
tÙ®P¬ts
 > 
maxP¬tsCouÁ
 {

413  
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
(

414 "You¸´İo£d compo£ objeù„equœe mÜthª %d…¬ts", 
maxP¬tsCouÁ
))

421 ià(
tÙ®P¬ts
 =ğ1 && 
¤cs
[0].
¡¬t
 =ğ-1 && 
tÙ®Size
 <ğ
maxP¬tSize
) || (totalSize == 0) {

422  
c
.
	`CİyObjeùW™hProg»ss
(
d¡
, 
¤cs
[0], 
´og»ss
)

429 
i
, 
¤c
 :ğ
¿nge
 
¤cs
 {

430 
¤c
.
H—d”s
.
	`G‘
("x-amz-copy-source-if-match") == "" {

431 
¤c
.
	`S‘M©chETagCÚd
(
‘ags
[
i
])

440 
u£rM‘a
 :ğ
d¡
.
	`g‘U£rM‘aH—d”sM­
(
çl£
)

441 
m‘aM­
 :ğ
u£rM‘a


442 
	`Ën
(
u£rM‘a
è=ğ0 &&†’(
¤cs
) == 1 {

443 
m‘aM­
 = 
¤cU£rM‘a


445 
m‘aH—d”s
 :ğ
	`make
(
m­
[
¡ršg
]string)

446 
k
, 
v
 :ğ
¿nge
 
m‘aM­
 {

447 
m‘aH—d”s
[
k
] = 
v


450 
u¶ßdID
, 
”r
 :ğ
c
.
	`ÃwU¶ßdID
(
ùx
, 
d¡
.
buck‘
, d¡.
objeù
, 
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: d¡.
’üy±iÚ
, 
U£rM‘ad©a
: 
m‘aH—d”s
})

451 
”r
 !ğ
n
 {

452  
”r


456 
objP¬ts
 :ğ[]
Com¶‘eP¬t
{}

457 
·¹Index
 := 1

458 
i
, 
¤c
 :ğ
¿nge
 
¤cs
 {

459 
h
 :ğ
¤c
.
H—d”s


460 
¤c
.
’üy±iÚ
 !ğ
n
 {

461 
’üy±
.
	`SSECİy
(
¤c
.
’üy±iÚ
).
	`M¬sh®
(
h
)

464 
d¡
.
’üy±iÚ
 !ğ
n
 {

465 
d¡
.
’üy±iÚ
.
	`M¬sh®
(
h
)

470 
¡¬tIdx
, 
’dIdx
 :ğ
	`ÿlcuÏ‹Ev’S¶™s
(
¤cSizes
[
i
], 
¤c
)

471 
j
, 
¡¬t
 :ğ
¿nge
 
¡¬tIdx
 {

472 
’d
 :ğ
’dIdx
[
j
]

476 
h
.
	`S‘
("x-amz-copy-source-range",

477 
fmt
.
	`S´štf
("by‹s=%d-%d", 
¡¬t
, 
’d
))

480 
com¶P¬t
, 
”r
 :ğ
c
.
	`u¶ßdP¬tCİy
(
ùx
, 
d¡
.
buck‘
,

481 
d¡
.
objeù
, 
u¶ßdID
, 
·¹Index
, 
h
)

482 
”r
 !ğ
n
 {

483  
”r


485 
´og»ss
 !ğ
n
 {

486 
io
.
	`CİyN
(
iout
.
Disÿrd
, 
´og»ss
, 
’d
-
¡¬t
+1)

488 
objP¬ts
 = 
	`­³nd
(objP¬ts, 
com¶P¬t
)

489 
·¹Index
++

494 
_
, 
”r
 = 
c
.
	`com¶‘eMuÉ¬tU¶ßd
(
ùx
, 
d¡
.
buck‘
, d¡.
objeù
, 
u¶ßdID
,

495 
com¶‘eMuÉ¬tU¶ßd
{
P¬ts
: 
objP¬ts
})

496 
”r
 !ğ
n
 {

497  
”r


499  
n


500 
	}
}

506 
	$func
 (
c
 
Cl›Á
è
	$Compo£Objeù
(
d¡
 
De¡š©iÚInfo
, 
¤cs
 []
SourûInfo
è
”rÜ
 {

507  
c
.
	`Compo£ObjeùW™hProg»ss
(
d¡
, 
¤cs
, 
n
)

508 
	}
}

512 
func
 
	$·¹sRequœed
(
size
 
št64
) int64 {

513 
maxP¬tSize
 :ğ
maxMuÉ¬tPutObjeùSize
 / (
maxP¬tsCouÁ
 - 1)

514 
r
 :ğ
size
 / 
	`št64
(
maxP¬tSize
)

515 
size
%
	`št64
(
maxP¬tSize
) > 0 {

516 
r
++

518  
r


519 
	}
}

525 
func
 
	$ÿlcuÏ‹Ev’S¶™s
(
size
 
št64
, 
¤c
 
SourûInfo
è(
¡¬tIndex
, 
’dIndex
 []int64) {

526 
size
 == 0 {

530 
»qP¬ts
 :ğ
	`·¹sRequœed
(
size
)

531 
¡¬tIndex
 = 
	`make
([]
št64
, 
»qP¬ts
)

532 
’dIndex
 = 
	`make
([]
št64
, 
»qP¬ts
)

546 
¡¬t
 :ğ
¤c
.start

547 
¡¬t
 == -1 {

548 
¡¬t
 = 0

550 
quÙ
, 
»m
 :ğ
size
/
»qP¬ts
, size%reqParts

551 
ÃxtS¹
 :ğ
¡¬t


552 
j
 :ğ
	`št64
(0); j < 
»qP¬ts
; j++ {

553 
curP¬tSize
 :ğ
quÙ


554 
j
 < 
»m
 {

555 
curP¬tSize
++

558 
cS¹
 :ğ
ÃxtS¹


559 
cEnd
 :ğ
cS¹
 + 
curP¬tSize
 - 1

560 
ÃxtS¹
 = 
cEnd
 + 1

562 
¡¬tIndex
[
j
], 
’dIndex
[j] = 
cS¹
, 
cEnd


565 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-compose-object_test.go

17 
·ckage
 
mšio


19 
impÜt
 (

26 
	ggb1
 = 1024 * 1024 * 1024

27 
gb5
 = 5 * 
gb1


28 
gb5p1
 = 
gb5
 + 1

29 
gb10p1
 = 2*
gb5
 + 1

30 
gb10p2
 = 2*
gb5
 + 2

33 
func
 
	$Te¡P¬tsRequœed
(
t
 *
‹¡šg
.
T
) {

34 
‹¡Ca£s
 := []struct {

35 
size
, 
»f
 
št64


39 {
gb5
, 10},

40 {
gb5p1
, 10},

41 {2 * 
gb5
, 20},

42 {
gb10p1
, 20},

43 {
gb10p2
, 20},

44 {
gb10p1
 + 
gb10p2
, 40},

45 {
maxMuÉ¬tPutObjeùSize
, 10000},

48 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

49 
»s
 :ğ
	`·¹sRequœed
(
‹¡Ca£
.
size
)

50 
»s
 !ğ
‹¡Ca£
.
»f
 {

51 
t
.
	`E¼Üf
("Te¡ %d - ouuˆdid‚Ù m©ch w™h„eã»nû„esuÉs, Ex³ùed %d, gÙ %d", 
i
+1, 
‹¡Ca£
.
»f
, 
»s
)

54 
	}
}

56 
func
 
	$Te¡C®cuÏ‹Ev’S¶™s
(
t
 *
‹¡šg
.
T
) {

58 
‹¡Ca£s
 := []struct {

60 
size
 
št64


61 
¤c
 
SourûInfo


64 
¡¬ts
, 
’ds
 []
št64


66 {0, 
SourûInfo
{
¡¬t
: -1}, 
n
,‚il},

67 {1, 
SourûInfo
{
¡¬t
: -1}, []
št64
{0}, []int64{0}},

68 {1, 
SourûInfo
{
¡¬t
: 0}, []
št64
{0}, []int64{0}},

70 {
gb1
, 
SourûInfo
{
¡¬t
: -1}, []
št64
{0, 536870912}, []int64{536870911, 1073741823}},

71 {
gb5
, 
SourûInfo
{
¡¬t
: -1},

72 []
št64
{0, 536870912, 1073741824, 1610612736, 2147483648, 2684354560,

74 []
št64
{536870911, 1073741823, 1610612735, 2147483647, 2684354559, 3221225471,

79 {
gb5p1
, 
SourûInfo
{
¡¬t
: -1},

80 []
št64
{0, 536870913, 1073741825, 1610612737, 2147483649, 2684354561,

82 []
št64
{536870912, 1073741824, 1610612736, 2147483648, 2684354560, 3221225472,

85 {
gb5p1
, 
SourûInfo
{
¡¬t
: -1},

86 []
št64
{0, 536870913, 1073741825, 1610612737, 2147483649, 2684354561,

88 []
št64
{536870912, 1073741824, 1610612736, 2147483648, 2684354560, 3221225472,

93 {
gb10p1
, 
SourûInfo
{
¡¬t
: -1},

94 []
št64
{0, 536870913, 1073741825, 1610612737, 2147483649, 2684354561,

98 []
št64
{536870912, 1073741824, 1610612736, 2147483648, 2684354560,

103 {
gb10p2
, 
SourûInfo
{
¡¬t
: -1},

104 []
št64
{0, 536870913, 1073741826, 1610612738, 2147483650, 2684354562,

108 []
št64
{536870912, 1073741825, 1610612737, 2147483649, 2684354561,

115 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

116 
»sS¹
, 
»sEnd
 :ğ
	`ÿlcuÏ‹Ev’S¶™s
(
‹¡Ca£
.
size
,e¡Ca£.
¤c
)

117 !
»æeù
.
	`D“pEqu®
(
‹¡Ca£
.
¡¬ts
, 
»sS¹
è|| !»æeù.D“pEqu®Ñe¡Ca£.
’ds
, 
»sEnd
) {

118 
t
.
	`E¼Üf
("Te¡ %d - ouuˆdid‚Ù m©ch w™h„eã»nû„esuÉs, Ex³ùed %d/%d, gÙ %d/%d", 
i
+1, 
‹¡Ca£
.
¡¬ts
,e¡Ca£.
’ds
, 
»sS¹
, 
»sEnd
)

121 
	}
}

123 
func
 
	$Te¡G‘U£rM‘aH—d”sM­
(
t
 *
‹¡šg
.
T
) {

125 
u£rM‘ad©a
 :ğ
m­
[
¡ršg
]string{

133 
de¡Info
 :ğ&
De¡š©iÚInfo
{"buck‘", "objeù", 
n
, 
u£rM‘ad©a
}

135 
r
 :ğ
de¡Info
.
	`g‘U£rM‘aH—d”sM­
(
Œue
)

137 
i
 := 0

139 
_
, 
ok
 :ğ
r
["x-amz-metadata-directive"]; !ok {

140 
t
.
	`E¼Üf
("Te¡ %d - m‘ad©¨dœeùivwa ex³ùed buˆi missšg", 
i
)

141 
i
++

144 
k
 :ğ
¿nge
 
r
 {

145 
¡ršgs
.
	`HasSuffix
(
k
, "‹¡"è&& !¡ršgs.
	`HasP»fix
(k, "x-amz-meta-") {

146 
t
.
	`E¼Üf
("Te¡ %d - m‘¨%q wa ex³ùed‡ ª x‡mz m‘a", 
i
, 
k
)

147 
i
++

150 !
¡ršgs
.
	`HasSuffix
(
k
, "‹¡"è&& sŒšgs.
	`HasP»fix
(k, "x-amz-meta-") {

151 
t
.
	`E¼Üf
("Te¡ %d -‡Àamz/¡ªd¬d/¡ÜageCÏs H—d” wa ex³ùed buˆgÙ‡Àx‡mz m‘¨d©a", 
i
)

152 
i
++

155 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-datatypes.go

18 
·ckage
 
mšio


20 
impÜt
 (

26 
ty³
 
Buck‘Info
 struct {

28 
Name
 
	m¡ršg
 `
	mjsÚ
:"name"`

30 
C»©iÚD©e
 
time
.
Time
 `
jsÚ
:"creationDate"`

34 
ty³
 
ObjeùInfo
 struct {

38 
ETag
 
¡ršg
 `
jsÚ
:"etag"`

40 
Key
 
¡ršg
 `
jsÚ
:"name"`

41 
La¡Modif›d
 
time
.
Time
 `
jsÚ
:"lastModified"`

42 
Size
 
št64
 `
jsÚ
:"size"`

43 
CÚ‹ÁTy³
 
¡ršg
 `
jsÚ
:"contentType"`

47 
M‘ad©a
 
h‰p
.
H—d”
 `
jsÚ
:"m‘ad©a" 
xml
:"-"`

50 
OwÃr
 struct {

51 
Di¥ÏyName
 
¡ršg
 `
jsÚ
:"name"`

52 
ID
 
¡ršg
 `
jsÚ
:"id"`

53 } `
jsÚ
:"owner"`

56 
StÜageCÏss
 
¡ršg
 `
jsÚ
:"storageClass"`

59 
E¼
 
”rÜ
 `
jsÚ
:"-"`

63 
ty³
 
ObjeùMuÉ¬tInfo
 struct {

65 
In™Ÿ‹d
 
time
.
Time
 `
ty³
:"time¡amp" 
time¡ampFÜm©
:"iso8601"`

67 
In™ŸtÜ
 
š™ŸtÜ


68 
OwÃr
 
owÃr


71 
StÜageCÏss
 
¡ršg


74 
Key
 
¡ršg


77 
Size
 
št64


80 
U¶ßdID
 
¡ršg
 `
xml
:"UploadId"`

83 
E¼
 
”rÜ


	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-error-response.go

18 
·ckage
 
mšio


20 
impÜt
 (

41 
ty³
 
E¼ÜRe¥Ú£
 struct {

42 
XMLName
 
	mxml
.
	mName
 `xml:"E¼Ü" 
jsÚ
:"-"`

43 
Code
 
¡ršg


44 
Mes§ge
 
¡ršg


45 
Buck‘Name
 
¡ršg


46 
Key
 
¡ršg


47 
Reque¡ID
 
¡ršg
 `
xml
:"RequestId"`

48 
Ho¡ID
 
¡ršg
 `
xml
:"HostId"`

52 
RegiÚ
 
¡ršg


55 
StusCode
 `
xml
:"-" 
jsÚ
:"-"`

71 
func
 
	$ToE¼ÜRe¥Ú£
(
”r
 
”rÜ
è
E¼ÜRe¥Ú£
 {

72 
”r
 :ğ”r.(
ty³
) {

73 
E¼ÜRe¥Ú£
:

74  
”r


76  
E¼ÜRe¥Ú£
{}

78 
	}
}

81 
	$func
 (
e
 
E¼ÜRe¥Ú£
è
	$E¼Ü
(è
¡ršg
 {

82 
e
.
Mes§ge
 == "" {

83 
msg
, 
ok
 :ğ
s3E¼ÜRe¥Ú£M­
[
e
.
Code
]

84 !
ok
 {

85 
msg
 = 
fmt
.
	`S´štf
("E¼Ü„e¥Ú£ cod%s.", 
e
.
Code
)

87  
msg


89  
e
.
Mes§ge


90 
	}
}

95 
	g»pÜtIssue
 = "Please„eporthis issue‡t https://github.com/minio/minio-go/issues."

100 
func
 
	$h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
 *
h‰p
.
Re¥Ú£
, 
buck‘Name
, 
objeùName
 
¡ršg
è
”rÜ
 {

101 
»¥
 =ğ
n
 {

102 
msg
 :ğ"Re¥Ú£ i em±y. " + 
»pÜtIssue


103  
	`E¼Inv®idArgum’t
(
msg
)

106 
”rRe¥
 :ğ
E¼ÜRe¥Ú£
{

107 
StusCode
: 
»¥
.StatusCode,

110 
”r
 :ğ
	`xmlDecod”
(
»¥
.
Body
, &
”rRe¥
)

112 
”r
 !ğ
n
 {

113 
»¥
.
StusCode
 {

114 
h‰p
.
StusNÙFound
:

115 
objeùName
 == "" {

116 
”rRe¥
 = 
E¼ÜRe¥Ú£
{

117 
StusCode
: 
»¥
.StatusCode,

118 
Code
: "NoSuchBucket",

119 
Mes§ge
: "The specified bucket does‚otƒxist.",

120 
Buck‘Name
: 
buck‘Name
,

123 
”rRe¥
 = 
E¼ÜRe¥Ú£
{

124 
StusCode
: 
»¥
.StatusCode,

125 
Code
: "NoSuchKey",

126 
Mes§ge
: "The specified key does‚otƒxist.",

127 
Buck‘Name
: 
buck‘Name
,

128 
Key
: 
objeùName
,

131 
h‰p
.
StusFÜbidd’
:

132 
”rRe¥
 = 
E¼ÜRe¥Ú£
{

133 
StusCode
: 
»¥
.StatusCode,

134 
Code
: "AccessDenied",

135 
Mes§ge
: "Access Denied.",

136 
Buck‘Name
: 
buck‘Name
,

137 
Key
: 
objeùName
,

139 
h‰p
.
StusCÚæiù
:

140 
”rRe¥
 = 
E¼ÜRe¥Ú£
{

141 
StusCode
: 
»¥
.StatusCode,

142 
Code
: "Conflict",

143 
Mes§ge
: "Bucket‚otƒmpty.",

144 
Buck‘Name
: 
buck‘Name
,

146 
h‰p
.
StusP»cÚd™iÚFaed
:

147 
”rRe¥
 = 
E¼ÜRe¥Ú£
{

148 
StusCode
: 
»¥
.StatusCode,

149 
Code
: "PreconditionFailed",

150 
Mes§ge
: 
s3E¼ÜRe¥Ú£M­
["PreconditionFailed"],

151 
Buck‘Name
: 
buck‘Name
,

152 
Key
: 
objeùName
,

155 
”rRe¥
 = 
E¼ÜRe¥Ú£
{

156 
StusCode
: 
»¥
.StatusCode,

157 
Code
: 
»¥
.
Stus
,

158 
Mes§ge
: 
»¥
.
Stus
,

159 
Buck‘Name
: 
buck‘Name
,

166 
”rRe¥
.
Reque¡ID
 == "" {

167 
”rRe¥
.
Reque¡ID
 = 
»¥
.
H—d”
.
	`G‘
("x-amz-request-id")

169 
”rRe¥
.
Ho¡ID
 == "" {

170 
”rRe¥
.
Ho¡ID
 = 
»¥
.
H—d”
.
	`G‘
("x-amz-id-2")

172 
”rRe¥
.
RegiÚ
 == "" {

173 
”rRe¥
.
RegiÚ
 = 
»¥
.
H—d”
.
	`G‘
("x-amz-bucket-region")

175 
”rRe¥
.
Code
 =ğ"Inv®idRegiÚ" &&ƒ¼Re¥.
RegiÚ
 != "" {

176 
”rRe¥
.
Mes§ge
 = 
fmt
.
	`S´štf
("RegiÚ dÛ nÙ m©ch,ƒx³ùšg„egiÚ â€˜%sâ€™.",ƒ¼Re¥.
RegiÚ
)

179  
”rRe¥


180 
	}
}

183 
func
 
	$E¼T¿nsãrAcûË¿tiÚBuck‘
(
buck‘Name
 
¡ršg
è
”rÜ
 {

184  
E¼ÜRe¥Ú£
{

185 
StusCode
: 
h‰p
.
StusBadReque¡
,

186 
Code
: "InvalidArgument",

187 
Mes§ge
: "The‚ame ofhe bucket used for Transfer Acceleration must be DNS-compliant‡nd must‚ot contain…eriods â€˜.â€™.",

188 
Buck‘Name
: 
buck‘Name
,

190 
	}
}

193 
func
 
	$E¼EÁ™yTooL¬ge
(
tÙ®Size
, 
maxObjeùSize
 
št64
, 
buck‘Name
, 
objeùName
 
¡ršg
è
”rÜ
 {

194 
msg
 :ğ
fmt
.
	`S´štf
("You¸´İo£d u¶ßd sizâ€˜%dâ€™ƒxûed thmaximum‡Îowed objeù sizâ€˜%dâ€™ fÜ sšgË PUT o³¿tiÚ.", 
tÙ®Size
, 
maxObjeùSize
)

195  
E¼ÜRe¥Ú£
{

196 
StusCode
: 
h‰p
.
StusBadReque¡
,

197 
Code
: "EntityTooLarge",

198 
Mes§ge
: 
msg
,

199 
Buck‘Name
: 
buck‘Name
,

200 
Key
: 
objeùName
,

202 
	}
}

205 
func
 
	$E¼EÁ™yTooSm®l
(
tÙ®Size
 
št64
, 
buck‘Name
, 
objeùName
 
¡ršg
è
”rÜ
 {

206 
msg
 :ğ
fmt
.
	`S´štf
("You¸´İo£d u¶ßd sizâ€˜%dâ€™ i b–owhmšimum‡Îowed objeù sizâ€˜0Bâ€™ fÜ sšgË PUT o³¿tiÚ.", 
tÙ®Size
)

207  
E¼ÜRe¥Ú£
{

208 
StusCode
: 
h‰p
.
StusBadReque¡
,

209 
Code
: "EntityTooSmall",

210 
Mes§ge
: 
msg
,

211 
Buck‘Name
: 
buck‘Name
,

212 
Key
: 
objeùName
,

214 
	}
}

217 
func
 
	$E¼UÃx³ùedEOF
(
tÙ®R—d
, 
tÙ®Size
 
št64
, 
buck‘Name
, 
objeùName
 
¡ršg
è
”rÜ
 {

218 
msg
 :ğ
fmt
.
	`S´štf
("D©¨»ad â€˜%dâ€™ i nÙƒqu®Øthsizâ€˜%dâ€™ oàthšpuˆR—d”.", 
tÙ®R—d
, 
tÙ®Size
)

219  
E¼ÜRe¥Ú£
{

220 
StusCode
: 
h‰p
.
StusBadReque¡
,

221 
Code
: "UnexpectedEOF",

222 
Mes§ge
: 
msg
,

223 
Buck‘Name
: 
buck‘Name
,

224 
Key
: 
objeùName
,

226 
	}
}

229 
func
 
	$E¼Inv®idBuck‘Name
(
mes§ge
 
¡ršg
è
”rÜ
 {

230  
E¼ÜRe¥Ú£
{

231 
StusCode
: 
h‰p
.
StusBadReque¡
,

232 
Code
: "InvalidBucketName",

233 
Mes§ge
: 
mes§ge
,

234 
Reque¡ID
: "minio",

236 
	}
}

239 
func
 
	$E¼Inv®idObjeùName
(
mes§ge
 
¡ršg
è
”rÜ
 {

240  
E¼ÜRe¥Ú£
{

241 
StusCode
: 
h‰p
.
StusNÙFound
,

242 
Code
: "NoSuchKey",

243 
Mes§ge
: 
mes§ge
,

244 
Reque¡ID
: "minio",

246 
	}
}

250 
v¬
 
	gE¼Inv®idObjeùP»fix
 = 
E¼Inv®idObjeùName


253 
func
 
	$E¼Inv®idArgum’t
(
mes§ge
 
¡ršg
è
”rÜ
 {

254  
E¼ÜRe¥Ú£
{

255 
StusCode
: 
h‰p
.
StusBadReque¡
,

256 
Code
: "InvalidArgument",

257 
Mes§ge
: 
mes§ge
,

258 
Reque¡ID
: "minio",

260 
	}
}

264 
func
 
	$E¼NoSuchBuck‘PŞicy
(
mes§ge
 
¡ršg
è
”rÜ
 {

265  
E¼ÜRe¥Ú£
{

266 
StusCode
: 
h‰p
.
StusNÙFound
,

267 
Code
: "NoSuchBucketPolicy",

268 
Mes§ge
: 
mes§ge
,

269 
Reque¡ID
: "minio",

271 
	}
}

275 
func
 
	$E¼APINÙSuµÜ‹d
(
mes§ge
 
¡ršg
è
”rÜ
 {

276  
E¼ÜRe¥Ú£
{

277 
StusCode
: 
h‰p
.
StusNÙIm¶em’‹d
,

278 
Code
: "APINotSupported",

279 
Mes§ge
: 
mes§ge
,

280 
Reque¡ID
: "minio",

282 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-error-response_test.go

18 
·ckage
 
mšio


20 
impÜt
 (

32 
func
 
	$Te¡H‰pRe¥ToE¼ÜRe¥Ú£
(
t
 *
‹¡šg
.
T
) {

35 
g’APIE¼ÜRe¥Ú£
 :ğ
	`func
(
”r
 
APIE¼Ü
, 
buck‘Name
 
¡ršg
è
E¼ÜRe¥Ú£
 {

36  
E¼ÜRe¥Ú£
{

37 
Code
: 
”r
.Code,

38 
Mes§ge
: 
”r
.
DesütiÚ
,

39 
Buck‘Name
: 
buck‘Name
,

44 
’codeE¼
 :ğ
	`func
(
»¥Ú£
 
E¼ÜRe¥Ú£
è[]
by‹
 {

45 
buf
 :ğ&
by‹s
.
Bufãr
{}

46 
buf
.
	`Wr™eSŒšg
(
xml
.
H—d”
)

47 
’cod”
 :ğ
xml
.
	`NewEncod”
(
buf
)

48 
”r
 :ğ
’cod”
.
	`Encode
(
»¥Ú£
)

49 
”r
 !ğ
n
 {

50 
t
.
	`F©®f
("”rÜƒncodšg„e¥Ú£: %v", 
”r
)

52  
buf
.
	`By‹s
()

56 
ü—‹APIE¼ÜRe¥Ú£
 :ğ
	`func
(
APIE¼
 
APIE¼Ü
, 
buck‘Name
 
¡ršg
è*
h‰p
.
Re¥Ú£
 {

59 
»¥
 :ğ&
h‰p
.
Re¥Ú£
{}

60 
”rÜRe¥Ú£
 :ğ
	`g’APIE¼ÜRe¥Ú£
(
APIE¼
, 
buck‘Name
)

61 
’codedE¼ÜRe¥Ú£
 :ğ
	`’codeE¼
(
”rÜRe¥Ú£
)

63 
»¥
.
StusCode
 = 
APIE¼
.
HTTPStusCode


64 
»¥
.
Body
 = 
iout
.
	`NİClo£r
(
by‹s
.
	`NewBufãr
(
’codedE¼ÜRe¥Ú£
))

66  
»¥


70 
g’E¼Re¥Ú£
 :ğ
	`func
(
»¥
 *
h‰p
.
Re¥Ú£
, 
code
, 
mes§ge
, 
buck‘Name
, 
objeùName
 
¡ršg
è
E¼ÜRe¥Ú£
 {

71 
”rRe¥
 :ğ
E¼ÜRe¥Ú£
{

72 
StusCode
: 
»¥
.StatusCode,

73 
Code
: 
code
,

74 
Mes§ge
: 
mes§ge
,

75 
Buck‘Name
: 
buck‘Name
,

76 
Key
: 
objeùName
,

77 
Reque¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-request-id"),

78 
Ho¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-id-2"),

79 
RegiÚ
: 
»¥
.
H—d”
.
	`G‘
("x-amz-bucket-region"),

81  
”rRe¥


85 
g’Inv®idE¼Ü
 :ğ
	`func
(
mes§ge
 
¡ršg
è
”rÜ
 {

86 
”rRe¥
 :ğ
E¼ÜRe¥Ú£
{

87 
StusCode
: 
h‰p
.
StusBadReque¡
,

88 
Code
: "InvalidArgument",

89 
Mes§ge
: 
mes§ge
,

90 
Reque¡ID
: "minio",

92  
”rRe¥


96 
£tCommÚH—d”s
 :ğ
	`func
(
»¥
 *
h‰p
.
Re¥Ú£
) *http.Response {

98 
»¥
.
H—d”
 = 
	`make
(
h‰p
.Header)

99 
»¥
.
H—d”
.
	`S‘
("x-amz-request-id", "xyz")

100 
»¥
.
H—d”
.
	`S‘
("x-amz-id-2", "abc")

101 
»¥
.
H—d”
.
	`S‘
("x-amz-bucket-region", "us-east-1")

102  
»¥


108 
g’Em±yBodyRe¥Ú£
 :ğ
	`func
(
¡©usCode
 è*
h‰p
.
Re¥Ú£
 {

109 
»¥
 :ğ&
h‰p
.
Re¥Ú£
{

110 
StusCode
: 
¡©usCode
,

111 
Body
: 
iout
.
	`NİClo£r
(
by‹s
.
	`NewR—d”
(
n
)),

113 
	`£tCommÚH—d”s
(
»¥
)

114  
»¥


118 
decodeXMLE¼Ü
 :ğ
	`func
(
»¥
 *
h‰p
.
Re¥Ú£
è
”rÜ
 {

119 
”rRe¥
 :ğ
E¼ÜRe¥Ú£
{

120 
StusCode
: 
»¥
.StatusCode,

122 
”r
 :ğ
	`xmlDecod”
(
»¥
.
Body
, &
”rRe¥
)

123 
”r
 !ğ
n
 {

124 
t
.
	`F©®f
("XML decodšg oà»¥Ú£ body faed: %v", 
”r
)

126  
”rRe¥


130 
APIE¼Üs
 :ğ[]
APIE¼Ü
{

132 
Code
: "NoSuchBucketPolicy",

133 
DesütiÚ
: "The specified bucket does‚ot have‡ bucket…olicy.",

134 
HTTPStusCode
: 
h‰p
.
StusNÙFound
,

140 
ex³ùedE¼Re¥Ú£
 :ğ[]
”rÜ
{

141 
	`g’Inv®idE¼Ü
("Response isƒmpty. " + "Please„eporthis issue‡t https://github.com/minio/minio-go/issues."),

142 
	`decodeXMLE¼Ü
(
	`ü—‹APIE¼ÜRe¥Ú£
(
APIE¼Üs
[0], "minio-bucket")),

143 
	`g’E¼Re¥Ú£
(
	`£tCommÚH—d”s
(&
h‰p
.
Re¥Ú£
{
StusCode
: h‰p.
StusNÙFound
}), "NoSuchBucket", "The specified bucket does‚otƒxist.", "minio-bucket", ""),

144 
	`g’E¼Re¥Ú£
(
	`£tCommÚH—d”s
(&
h‰p
.
Re¥Ú£
{
StusCode
: h‰p.
StusNÙFound
}), "NoSuchKey", "The specified key does‚otƒxist.", "minio-bucket", "Asia/"),

145 
	`g’E¼Re¥Ú£
(
	`£tCommÚH—d”s
(&
h‰p
.
Re¥Ú£
{
StusCode
: h‰p.
StusFÜbidd’
}), "AccessDenied", "Access Denied.", "minio-bucket", ""),

146 
	`g’E¼Re¥Ú£
(
	`£tCommÚH—d”s
(&
h‰p
.
Re¥Ú£
{
StusCode
: h‰p.
StusCÚæiù
}), "Conflict", "Bucket‚otƒmpty.", "minio-bucket", ""),

147 
	`g’E¼Re¥Ú£
(
	`£tCommÚH—d”s
(&
h‰p
.
Re¥Ú£
{
StusCode
: h‰p.
StusBadReque¡
}), "Bad Request", "Bad Request", "minio-bucket", ""),

151 
šputRe¥Ú£s
 :ğ[]*
h‰p
.
Re¥Ú£
{

152 
n
,

153 
	`ü—‹APIE¼ÜRe¥Ú£
(
APIE¼Üs
[0], "minio-bucket"),

154 
	`g’Em±yBodyRe¥Ú£
(
h‰p
.
StusNÙFound
),

155 
	`g’Em±yBodyRe¥Ú£
(
h‰p
.
StusNÙFound
),

156 
	`g’Em±yBodyRe¥Ú£
(
h‰p
.
StusFÜbidd’
),

157 
	`g’Em±yBodyRe¥Ú£
(
h‰p
.
StusCÚæiù
),

158 
	`g’Em±yBodyRe¥Ú£
(
h‰p
.
StusBadReque¡
),

161 
‹¡Ca£s
 := []struct {

162 
buck‘Name
 
¡ršg


163 
objeùName
 
¡ršg


164 
šputHTTPRe¥
 *
h‰p
.
Re¥Ú£


166 
ex³ùedResuÉ
 
”rÜ


170 {"mšio-buck‘", "", 
šputRe¥Ú£s
[0], 
ex³ùedE¼Re¥Ú£
[0]},

171 {"mšio-buck‘", "", 
šputRe¥Ú£s
[1], 
ex³ùedE¼Re¥Ú£
[1]},

172 {"mšio-buck‘", "", 
šputRe¥Ú£s
[2], 
ex³ùedE¼Re¥Ú£
[2]},

173 {"mšio-buck‘", "AsŸ/", 
šputRe¥Ú£s
[3], 
ex³ùedE¼Re¥Ú£
[3]},

174 {"mšio-buck‘", "", 
šputRe¥Ú£s
[4], 
ex³ùedE¼Re¥Ú£
[4]},

175 {"mšio-buck‘", "", 
šputRe¥Ú£s
[5], 
ex³ùedE¼Re¥Ú£
[5]},

178 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

179 
aùu®ResuÉ
 :ğ
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
‹¡Ca£
.
šputHTTPRe¥
,e¡Ca£.
buck‘Name
,e¡Ca£.
objeùName
)

180 !
»æeù
.
	`D“pEqu®
(
‹¡Ca£
.
ex³ùedResuÉ
, 
aùu®ResuÉ
) {

181 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed„esuÉØb'%#v', buˆš¡—d gÙ '%#v'", 
i
+1, 
‹¡Ca£
.
ex³ùedResuÉ
, 
aùu®ResuÉ
)

184 
	}
}

187 
func
 
	$Te¡E¼EÁ™yTooL¬ge
(
t
 *
‹¡šg
.
T
) {

188 
msg
 :ğ
fmt
.
	`S´štf
("Your…roposed upload size â€˜%dâ€™ƒxceedshe maximum‡llowed object size â€˜%dâ€™ for single PUT operation.", 1000000, 99999)

189 
ex³ùedResuÉ
 :ğ
E¼ÜRe¥Ú£
{

190 
StusCode
: 
h‰p
.
StusBadReque¡
,

191 
Code
: "EntityTooLarge",

192 
Mes§ge
: 
msg
,

193 
Buck‘Name
: "minio-bucket",

194 
Key
: "Asia/",

196 
aùu®ResuÉ
 :ğ
	`E¼EÁ™yTooL¬ge
(1000000, 99999, "minio-bucket", "Asia/")

197 !
»æeù
.
	`D“pEqu®
(
ex³ùedResuÉ
, 
aùu®ResuÉ
) {

198 
t
.
	`E¼Üf
("Ex³ùed„esuÉØb'%#v', buˆš¡—d gÙ '%#v'", 
ex³ùedResuÉ
, 
aùu®ResuÉ
)

200 
	}
}

203 
func
 
	$Te¡E¼EÁ™yTooSm®l
(
t
 *
‹¡šg
.
T
) {

204 
msg
 :ğ
fmt
.
	`S´štf
("Your…roposed upload size â€˜%dâ€™ is belowhe minimum‡llowed object size â€˜0Bâ€™ for single PUT operation.", -1)

205 
ex³ùedResuÉ
 :ğ
E¼ÜRe¥Ú£
{

206 
StusCode
: 
h‰p
.
StusBadReque¡
,

207 
Code
: "EntityTooSmall",

208 
Mes§ge
: 
msg
,

209 
Buck‘Name
: "minio-bucket",

210 
Key
: "Asia/",

212 
aùu®ResuÉ
 :ğ
	`E¼EÁ™yTooSm®l
(-1, "minio-bucket", "Asia/")

213 !
»æeù
.
	`D“pEqu®
(
ex³ùedResuÉ
, 
aùu®ResuÉ
) {

214 
t
.
	`E¼Üf
("Ex³ùed„esuÉØb'%#v', buˆš¡—d gÙ '%#v'", 
ex³ùedResuÉ
, 
aùu®ResuÉ
)

216 
	}
}

219 
func
 
	$Te¡E¼UÃx³ùedEOF
(
t
 *
‹¡šg
.
T
) {

220 
msg
 :ğ
fmt
.
	`S´štf
("Data„ead â€˜%sâ€™ is‚otƒqualohe size â€˜%sâ€™ ofhe input Reader.",

221 
¡rcÚv
.
	`FÜm©IÁ
(100, 10), strconv.FormatInt(101, 10))

222 
ex³ùedResuÉ
 :ğ
E¼ÜRe¥Ú£
{

223 
StusCode
: 
h‰p
.
StusBadReque¡
,

224 
Code
: "UnexpectedEOF",

225 
Mes§ge
: 
msg
,

226 
Buck‘Name
: "minio-bucket",

227 
Key
: "Asia/",

229 
aùu®ResuÉ
 :ğ
	`E¼UÃx³ùedEOF
(100, 101, "minio-bucket", "Asia/")

230 !
»æeù
.
	`D“pEqu®
(
ex³ùedResuÉ
, 
aùu®ResuÉ
) {

231 
t
.
	`E¼Üf
("Ex³ùed„esuÉØb'%#v', buˆš¡—d gÙ '%#v'", 
ex³ùedResuÉ
, 
aùu®ResuÉ
)

233 
	}
}

236 
func
 
	$Te¡E¼Inv®idBuck‘Name
(
t
 *
‹¡šg
.
T
) {

237 
ex³ùedResuÉ
 :ğ
E¼ÜRe¥Ú£
{

238 
StusCode
: 
h‰p
.
StusBadReque¡
,

239 
Code
: "InvalidBucketName",

240 
Mes§ge
: "Invalid Bucket‚ame",

241 
Reque¡ID
: "minio",

243 
aùu®ResuÉ
 :ğ
	`E¼Inv®idBuck‘Name
("Invalid Bucket‚ame")

244 !
»æeù
.
	`D“pEqu®
(
ex³ùedResuÉ
, 
aùu®ResuÉ
) {

245 
t
.
	`E¼Üf
("Ex³ùed„esuÉØb'%#v', buˆš¡—d gÙ '%#v'", 
ex³ùedResuÉ
, 
aùu®ResuÉ
)

247 
	}
}

250 
func
 
	$Te¡E¼Inv®idObjeùName
(
t
 *
‹¡šg
.
T
) {

251 
ex³ùedResuÉ
 :ğ
E¼ÜRe¥Ú£
{

252 
StusCode
: 
h‰p
.
StusNÙFound
,

253 
Code
: "NoSuchKey",

254 
Mes§ge
: "Invalid Object Key",

255 
Reque¡ID
: "minio",

257 
aùu®ResuÉ
 :ğ
	`E¼Inv®idObjeùName
("Invalid Object Key")

258 !
»æeù
.
	`D“pEqu®
(
ex³ùedResuÉ
, 
aùu®ResuÉ
) {

259 
t
.
	`E¼Üf
("Ex³ùed„esuÉØb'%#v', buˆš¡—d gÙ '%#v'", 
ex³ùedResuÉ
, 
aùu®ResuÉ
)

261 
	}
}

264 
func
 
	$Te¡E¼Inv®idArgum’t
(
t
 *
‹¡šg
.
T
) {

265 
ex³ùedResuÉ
 :ğ
E¼ÜRe¥Ú£
{

266 
StusCode
: 
h‰p
.
StusBadReque¡
,

267 
Code
: "InvalidArgument",

268 
Mes§ge
: "Invalid Argument",

269 
Reque¡ID
: "minio",

271 
aùu®ResuÉ
 :ğ
	`E¼Inv®idArgum’t
("Invalid Argument")

272 !
»æeù
.
	`D“pEqu®
(
ex³ùedResuÉ
, 
aùu®ResuÉ
) {

273 
t
.
	`E¼Üf
("Ex³ùed„esuÉØb'%#v', buˆš¡—d gÙ '%#v'", 
ex³ùedResuÉ
, 
aùu®ResuÉ
)

275 
	}
}

278 
func
 
	$Te¡E¼W™houtMes§ge
(
t
 *
‹¡šg
.
T
) {

279 
”rRe¥
 :ğ
E¼ÜRe¥Ú£
{

280 
Code
: "AccessDenied",

281 
Reque¡ID
: "minio",

283 
”rRe¥
.
	`E¼Ü
() != "Access Denied." {

284 
t
.
	`E¼Üf
("Ex³ùed \"Acûs D’›d.\", gÙ %s", 
”rRe¥
)

286 
”rRe¥
 = 
E¼ÜRe¥Ú£
{

287 
Code
: "InvalidArgument",

288 
Reque¡ID
: "minio",

290 
”rRe¥
.
	`E¼Ü
() != "Error„esponse code InvalidArgument." {

291 
t
.
	`E¼Üf
("Ex³ùed \"E¼Ü„e¥Ú£ codInv®idArgum’t.\", gÙ %s", 
”rRe¥
)

293 
	}
}

297 
func
 
	$Te¡E¼ÜRe¥Ú£Com·¿bË
(
t
 *
‹¡šg
.
T
) {

298 
v¬
 
e1
 
š‹rçû
{} = 
E¼ÜRe¥Ú£
{}

299 
v¬
 
e2
 
š‹rçû
{} = 
E¼ÜRe¥Ú£
{}

300 
e1
 !ğ
e2
 {

301 
t
.
	`F©®f
("ErrorResponse should be comparable")

303 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-lifecycle.go

18 
·ckage
 
mšio


20 
impÜt
 (

30 
	$func
 (
c
 
Cl›Á
è
	$G‘Buck‘Liãcyşe
(
buck‘Name
 
¡ršg
è(¡ršg, 
”rÜ
) {

32 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

33  "", 
”r


35 
buck‘Liãcyşe
, 
”r
 :ğ
c
.
	`g‘Buck‘Liãcyşe
(
buck‘Name
)

36 
”r
 !ğ
n
 {

37 
”rRe¥Ú£
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
)

38 
”rRe¥Ú£
.
Code
 == "NoSuchLifecycleConfiguration" {

39  "", 
n


41  "", 
”r


43  
buck‘Liãcyşe
, 
n


44 
	}
}

47 
	$func
 (
c
 
Cl›Á
è
	$g‘Buck‘Liãcyşe
(
buck‘Name
 
¡ršg
è(¡ršg, 
”rÜ
) {

50 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

51 
u¾V®ues
.
	`S‘
("lifecycle", "")

54 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

55 
buck‘Name
: bucketName,

56 
qu”yV®ues
: 
u¾V®ues
,

59 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

60 
”r
 !ğ
n
 {

61  "", 
”r


64 
»¥
 !ğ
n
 {

65 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

66  "", 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

70 
buck‘LiãcyşeBuf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»¥
.
Body
)

71 
”r
 !ğ
n
 {

72  "", 
”r


75 
liãcyşe
 :ğ
	`¡ršg
(
buck‘LiãcyşeBuf
)

76  
liãcyşe
, 
”r


77 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-object-acl.go

18 
·ckage
 
mšio


20 
impÜt
 (

26 
ty³
 
acûssCÚŒŞPŞicy
 struct {

27 
OwÃr
 struct {

28 
ID
 
	m¡ršg
 `
	mxml
:"ID"`

29 
Di¥ÏyName
 
¡ršg
 `
xml
:"DisplayName"`

30 } `
xml
:"Owner"`

31 
AcûssCÚŒŞLi¡
 struct {

32 
G¿Á
 []struct {

33 
G¿Á“
 struct {

34 
ID
 
¡ršg
 `
xml
:"ID"`

35 
Di¥ÏyName
 
¡ršg
 `
xml
:"DisplayName"`

36 
URI
 
¡ršg
 `
xml
:"URI"`

37 } `
xml
:"Grantee"`

38 
P”missiÚ
 
¡ršg
 `
xml
:"Permission"`

39 } `
xml
:"Grant"`

40 } `
xml
:"AccessControlList"`

44 
	$func
 (
c
 
Cl›Á
è
	`G‘ObjeùACL
(
buck‘Name
, 
objeùName
 
¡ršg
è(*
ObjeùInfo
, 
”rÜ
) {

46 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

47 
buck‘Name
: bucketName,

48 
objeùName
: objectName,

49 
qu”yV®ues
: 
u¾
.
V®ues
{

50 "aş": []
¡ršg
{""},

53 
”r
 !ğ
n
 {

54  
n
, 
”r


56 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

58 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

59  
n
, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

62 
»s
 :ğ&
acûssCÚŒŞPŞicy
{}

64 
”r
 :ğ
	`xmlDecod”
(
»¥
.
Body
, 
»s
);ƒ¼ !ğ
n
 {

65  
n
, 
”r


68 
objInfo
, 
”r
 :ğ
c
.
	`¡©Objeù
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
StObjeùO±iÚs
{})

69 
”r
 !ğ
n
 {

70  
n
, 
”r


73 
ÿÂedACL
 :ğ
	`g‘CªÃdACL
(
»s
)

74 
ÿÂedACL
 != "" {

75 
objInfo
.
M‘ad©a
.
	`Add
("X-Amz-Aş", 
ÿÂedACL
)

76  &
objInfo
, 
n


79 
g¿ÁACL
 :ğ
	`g‘AmzG¿ÁACL
(
»s
)

80 
k
, 
v
 :ğ
¿nge
 
g¿ÁACL
 {

81 
objInfo
.
M‘ad©a
[
k
] = 
v


84  &
objInfo
, 
n


85 
	}
}

87 
func
 
	$g‘CªÃdACL
(
aCPŞicy
 *
acûssCÚŒŞPŞicy
è
¡ršg
 {

88 
g¿Ás
 :ğ
aCPŞicy
.
AcûssCÚŒŞLi¡
.
G¿Á


91 
	`Ën
(
g¿Ás
) == 1:

92 
g¿Ás
[0].
G¿Á“
.
URI
 =ğ"" && g¿Ás[0].
P”missiÚ
 == "FULL_CONTROL" {

95 
	`Ën
(
g¿Ás
) == 2:

96 
_
, 
g
 :ğ
¿nge
 
g¿Ás
 {

97 
g
.
G¿Á“
.
URI
 =ğ"h‰p://acs.amazÚaws.com/groups/glob®/Auth’tiÿ‹dU£rs" && g.
P”missiÚ
 == "READ" {

100 
g
.
G¿Á“
.
URI
 =ğ"h‰p://acs.amazÚaws.com/groups/glob®/AÎU£rs" && g.
P”missiÚ
 == "READ" {

103 
g
.
P”missiÚ
 =ğ"READ" && g.
G¿Á“
.
ID
 =ğ
aCPŞicy
.
OwÃr
.ID {

107 
	`Ën
(
g¿Ás
) == 3:

108 
_
, 
g
 :ğ
¿nge
 
g¿Ás
 {

109 
g
.
G¿Á“
.
URI
 =ğ"h‰p://acs.amazÚaws.com/groups/glob®/AÎU£rs" && g.
P”missiÚ
 == "WRITE" {

115 
	}
}

117 
func
 
	$g‘AmzG¿ÁACL
(
aCPŞicy
 *
acûssCÚŒŞPŞicy
è
m­
[
¡ršg
][]string {

118 
g¿Ás
 :ğ
aCPŞicy
.
AcûssCÚŒŞLi¡
.
G¿Á


119 
»s
 :ğ
m­
[
¡ršg
][]string{}

121 
_
, 
g
 :ğ
¿nge
 
g¿Ás
 {

123 
g
.
P”missiÚ
 == "READ":

124 
»s
["X-Amz-G¿Á-R—d"] = 
	`­³nd
Ôes["X-Amz-G¿Á-R—d"], "id="+
g
.
G¿Á“
.
ID
)

125 
g
.
P”missiÚ
 == "WRITE":

126 
»s
["X-Amz-G¿Á-Wr™e"] = 
	`­³nd
Ôes["X-Amz-G¿Á-Wr™e"], "id="+
g
.
G¿Á“
.
ID
)

127 
g
.
P”missiÚ
 == "READ_ACP":

128 
»s
["X-Amz-G¿Á-R—d-Aı"] = 
	`­³nd
Ôes["X-Amz-G¿Á-R—d-Aı"], "id="+
g
.
G¿Á“
.
ID
)

129 
g
.
P”missiÚ
 == "WRITE_ACP":

130 
»s
["X-Amz-G¿Á-Wr™e-Aı"] = 
	`­³nd
Ôes["X-Amz-G¿Á-Wr™e-Aı"], "id="+
g
.
G¿Á“
.
ID
)

131 
g
.
P”missiÚ
 == "FULL_CONTROL":

132 
»s
["X-Amz-G¿Á-FuÎ-CÚŒŞ"] = 
	`­³nd
Ôes["X-Amz-G¿Á-FuÎ-CÚŒŞ"], "id="+
g
.
G¿Á“
.
ID
)

135  
»s


136 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-object-context.go

18 
·ckage
 
mšio


20 
	gimpÜt
 "context"

24 
	$func
 (
c
 
Cl›Á
è
	`G‘ObjeùW™hCÚ‹xt
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
G‘ObjeùO±iÚs
è(*
Objeù
, 
”rÜ
) {

25  
c
.
	`g‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

26 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-object-file.go

18 
·ckage
 
mšio


20 
impÜt
 (

31 
	$func
 (
c
 
Cl›Á
è
	$FG‘ObjeùW™hCÚ‹xt
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
, 
feP©h
 
¡ršg
, 
İts
 
G‘ObjeùO±iÚs
è
”rÜ
 {

32  
c
.
	`fG‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
feP©h
, 
İts
)

33 
	}
}

36 
	$func
 (
c
 
Cl›Á
è
	$FG‘Objeù
(
buck‘Name
, 
objeùName
, 
feP©h
 
¡ršg
, 
İts
 
G‘ObjeùO±iÚs
è
”rÜ
 {

37  
c
.
	`fG‘ObjeùW™hCÚ‹xt
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
feP©h
, 
İts
)

38 
	}
}

41 
	$func
 (
c
 
Cl›Á
è
	$fG‘ObjeùW™hCÚ‹xt
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
, 
feP©h
 
¡ršg
, 
İts
 
G‘ObjeùO±iÚs
è
”rÜ
 {

43 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

44  
”r


46 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

47  
”r


51 
¡
, 
”r
 :ğ
os
.
	`St
(
feP©h
)

52 
”r
 =ğ
n
 {

54 
¡
.
	`IsDœ
() {

55  
	`E¼Inv®idArgum’t
("fileName is‡ directory.")

60 
”r
 !ğ
n
 {

61 !
os
.
	`IsNÙExi¡
(
”r
) {

62  
”r


67 
objeùDœ
, 
_
 :ğ
f•©h
.
	`S¶™
(
feP©h
)

68 
objeùDœ
 != "" {

70 
”r
 :ğ
os
.
	`MkdœAÎ
(
objeùDœ
, 0700);ƒ¼ !ğ
n
 {

71  
”r


76 
objeùSt
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
, 
StObjeùO±iÚs
{
İts
})

77 
”r
 !ğ
n
 {

78  
”r


82 
feP¬tP©h
 :ğ
feP©h
 + 
objeùSt
.
ETag
 + ".part.minio"

85 
feP¬t
, 
”r
 :ğ
os
.
	`O³nFe
(
feP¬tP©h
, os.
O_CREATE
|os.
O_APPEND
|os.
O_WRONLY
, 0600)

86 
”r
 !ğ
n
 {

87  
”r


91 
¡
, 
”r
 = 
feP¬t
.
	`St
()

92 
”r
 !ğ
n
 {

93  
”r


98 
¡
.
	`Size
() > 0 {

99 
İts
.
	`S‘Rªge
(
¡
.
	`Size
(), 0)

103 
objeùR—d”
, 
objeùSt
, 
”r
 :ğ
c
.
	`g‘Objeù
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

104 
”r
 !ğ
n
 {

105  
”r


109 
_
, 
”r
 = 
io
.
	`CİyN
(
feP¬t
, 
objeùR—d”
, 
objeùSt
.
Size
);ƒ¼ !ğ
n
 {

110  
”r


114 
”r
 = 
feP¬t
.
	`Clo£
();ƒ¼ !ğ
n
 {

115  
”r


119 
”r
 = 
os
.
	`R’ame
(
feP¬tP©h
, 
feP©h
);ƒ¼ !ğ
n
 {

120  
”r


124  
n


125 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-object.go

18 
·ckage
 
mšio


20 
impÜt
 (

34 
	$func
 (
c
 
Cl›Á
è
	`G‘Objeù
(
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
G‘ObjeùO±iÚs
è(*
Objeù
, 
”rÜ
) {

35  
c
.
	`g‘ObjeùW™hCÚ‹xt
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
İts
)

36 
	}
}

39 
	$func
 (
c
 
Cl›Á
è
	`g‘ObjeùW™hCÚ‹xt
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
G‘ObjeùO±iÚs
è(*
Objeù
, 
”rÜ
) {

41 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

42  
n
, 
”r


44 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

45  
n
, 
”r


48 
v¬
 
h‰pR—d”
 
io
.
R—dClo£r


49 
v¬
 
objeùInfo
 
ObjeùInfo


50 
v¬
 
”r
 
”rÜ


53 
»qCh
 :ğ
	`make
(
chª
 
g‘Reque¡
)

55 
»sCh
 :ğ
	`make
(
chª
 
g‘Re¥Ú£
)

57 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

60 
go
 
	`func
() {

61 
deãr
 
	`şo£
(
»qCh
)

62 
deãr
 
	`şo£
(
»sCh
)

65 
v¬
 
‘ag
 
¡ršg


69 
£Ëù
 {

71 <-
dÚeCh
:

74 
h‰pR—d”
 !ğ
n
 {

75 
h‰pR—d”
.
	`Clo£
()

80 
»q
 :ğ<-
»qCh
:

82 
»q
.
isFœ¡Req
 {

84 
»q
.
isR—dOp
 {

86 
»q
.
isR—dAt
 {

91 
İts
.
	`S‘Rªge
(
»q
.
Off£t
,„eq.Off£t+
	`št64
(
	`Ën
Ôeq.
Bufãr
))-1)

92 } 
»q
.
Off£t
 > 0 {

93 
İts
.
	`S‘Rªge
(
»q
.
Off£t
, 0)

95 
h‰pR—d”
, 
objeùInfo
, 
”r
 = 
c
.
	`g‘Objeù
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

96 
”r
 !ğ
n
 {

97 
»sCh
 <- 
g‘Re¥Ú£
{
E¼Ü
: 
”r
}

100 
‘ag
 = 
objeùInfo
.
ETag


103 
size
, 
”r
 :ğ
io
.
	`R—dFuÎ
(
h‰pR—d”
, 
»q
.
Bufãr
)

104 
size
 > 0 && 
”r
 =ğ
io
.
E¼UÃx³ùedEOF
 {

107 
”r
 = 
io
.
EOF


110 
»sCh
 <- 
g‘Re¥Ú£
{

111 
objeùInfo
: objectInfo,

112 
Size
: (
size
),

113 
E¼Ü
: 
”r
,

114 
didR—d
: 
Œue
,

121 
	`d–‘e
(
İts
.
h—d”s
, "Range")

122 
objeùInfo
, 
”r
 = 
c
.
	`¡©Objeù
(
ùx
, 
buck‘Name
, 
objeùName
, 
StObjeùO±iÚs
{
İts
})

123 
”r
 !ğ
n
 {

124 
»sCh
 <- 
g‘Re¥Ú£
{

125 
E¼Ü
: 
”r
,

130 
‘ag
 = 
objeùInfo
.
ETag


132 
»sCh
 <- 
g‘Re¥Ú£
{

133 
objeùInfo
: objectInfo,

136 } 
»q
.
£‰šgObjeùInfo
 {

138 
	`d–‘e
(
İts
.
h—d”s
, "Range")

139 
‘ag
 != "" {

140 
İts
.
	`S‘M©chETag
(
‘ag
)

142 
objeùInfo
, 
”r
 :ğ
c
.
	`¡©Objeù
(
ùx
, 
buck‘Name
, 
objeùName
, 
StObjeùO±iÚs
{
İts
})

143 
”r
 !ğ
n
 {

144 
»sCh
 <- 
g‘Re¥Ú£
{

145 
E¼Ü
: 
”r
,

151 
»sCh
 <- 
g‘Re¥Ú£
{

152 
objeùInfo
: objectInfo,

161 
»q
.
DidOff£tChªge
 || !»q.
b“nR—d
 {

162 
‘ag
 != "" {

163 
İts
.
	`S‘M©chETag
(
‘ag
)

165 
h‰pR—d”
 !ğ
n
 {

167 
h‰pR—d”
.
	`Clo£
()

170 
»q
.
isR—dAt
 {

172 
İts
.
	`S‘Rªge
(
»q
.
Off£t
,„eq.Off£t+
	`št64
(
	`Ën
Ôeq.
Bufãr
))-1)

173 } 
»q
.
Off£t
 > 0 {

174 
İts
.
	`S‘Rªge
(
»q
.
Off£t
, 0)

176 
h‰pR—d”
, 
objeùInfo
, 
”r
 = 
c
.
	`g‘Objeù
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

177 
”r
 !ğ
n
 {

178 
»sCh
 <- 
g‘Re¥Ú£
{

179 
E¼Ü
: 
”r
,

187 
size
, 
”r
 :ğ
io
.
	`R—dFuÎ
(
h‰pR—d”
, 
»q
.
Bufãr
)

188 
”r
 =ğ
io
.
E¼UÃx³ùedEOF
 {

191 
”r
 = 
io
.
EOF


194 
»sCh
 <- 
g‘Re¥Ú£
{

195 
Size
: (
size
),

196 
E¼Ü
: 
”r
,

197 
didR—d
: 
Œue
,

198 
objeùInfo
: objectInfo,

206  
	`ÃwObjeù
(
»qCh
, 
»sCh
, 
dÚeCh
), 
n


207 
	}
}

211 
ty³
 
g‘Reque¡
 struct {

212 
	mBufãr
 []
by‹


213 
Off£t
 
št64


214 
DidOff£tChªge
 
boŞ


215 
b“nR—d
 
boŞ


216 
isR—dAt
 
boŞ


217 
isR—dOp
 
boŞ


218 
isFœ¡Req
 
boŞ


219 
£‰šgObjeùInfo
 
	mboŞ


223 
ty³
 
g‘Re¥Ú£
 struct {

224 
Size
 

225 
E¼Ü
 
”rÜ


226 
didR—d
 
boŞ


227 
objeùInfo
 
	mObjeùInfo


232 
ty³
 
Objeù
 struct {

234 
mu‹x
 *
	msync
.
Mu‹x


237 
»qCh
 
	mchª
<- 
g‘Reque¡


238 
	m»sCh
 <-
chª
 
g‘Re¥Ú£


239 
dÚeCh
 
	mchª
<- struct{}

240 
cu¼Off£t
 
št64


241 
objeùInfo
 
ObjeùInfo


244 
£ekD©a
 
boŞ


247 
isClo£d
 
boŞ


250 
isS¹ed
 
boŞ


253 
´evE¼
 
”rÜ


256 
b“nR—d
 
boŞ


259 
objeùInfoS‘
 
	mboŞ


266 
	$func
 (
o
 *
Objeù
è
	$doG‘Reque¡
(
»que¡
 
g‘Reque¡
è(
g‘Re¥Ú£
, 
”rÜ
) {

267 
o
.
»qCh
 <- 
»que¡


268 
»¥Ú£
 :ğ<-
o
.
»sCh


271 
»¥Ú£
.
E¼Ü
 !ğ
n
 {

272  
»¥Ú£
,„e¥Ú£.
E¼Ü


276 !
o
.
isS¹ed
 {

278 
o
.
isS¹ed
 = 
Œue


282 !
o
.
objeùInfoS‘
 && !
»que¡
.
isR—dAt
 {

283 
o
.
objeùInfo
 = 
»¥Ú£
.objectInfo

284 
o
.
objeùInfoS‘
 = 
Œue


287 !
o
.
b“nR—d
 {

288 
o
.
b“nR—d
 = 
»¥Ú£
.
didR—d


291 
o
.
£ekD©a
 = 
çl£


293  
»¥Ú£
, 
n


294 
	}
}

298 
	$func
 (
o
 *
Objeù
è
	$£tOff£t
(
by‹sR—d
 
št64
è
”rÜ
 {

300 
o
.
cu¼Off£t
 +ğ
by‹sR—d


302 
o
.
objeùInfo
.
Size
 > -1 && o.
cu¼Off£t
 >= o.objectInfo.Size {

303  
io
.
EOF


305  
n


306 
	}
}

311 
	$func
 (
o
 *
Objeù
è
	$R—d
(
b
 []
by‹
è(
n
 , 
”r
 
”rÜ
) {

312 
o
 =ğ
n
 {

313  0, 
	`E¼Inv®idArgum’t
("Object is‚il")

317 
o
.
mu‹x
.
	`Lock
()

318 
deãr
 
o
.
mu‹x
.
	`UÆock
()

321 
o
.
´evE¼
 !ğ
n
 || o.
isClo£d
 {

322  0, 
o
.
´evE¼


325 
»adReq
 :ğ
g‘Reque¡
{

326 
isR—dOp
: 
Œue
,

327 
b“nR—d
: 
o
.beenRead,

328 
Bufãr
: 
b
,

332 !
o
.
isS¹ed
 {

333 
»adReq
.
isFœ¡Req
 = 
Œue


337 
»adReq
.
DidOff£tChªge
 = 
o
.
£ekD©a


338 
»adReq
.
Off£t
 = 
o
.
cu¼Off£t


341 
»¥Ú£
, 
”r
 :ğ
o
.
	`doG‘Reque¡
(
»adReq
)

342 
”r
 !ğ
n
 &&ƒ¼ !ğ
io
.
EOF
 {

344 
o
.
´evE¼
 = 
”r


345  
»¥Ú£
.
Size
, 
”r


349 
by‹sR—d
 :ğ
	`št64
(
»¥Ú£
.
Size
)

352 
Û¼
 :ğ
o
.
	`£tOff£t
(
by‹sR—d
)

353 
Û¼
 !ğ
n
 {

355 
o
.
´evE¼
 = 
Û¼


356  
»¥Ú£
.
Size
, 
Û¼


360  
»¥Ú£
.
Size
, 
”r


361 
	}
}

364 
	$func
 (
o
 *
Objeù
è
	$St
(è(
ObjeùInfo
, 
”rÜ
) {

365 
o
 =ğ
n
 {

366  
ObjeùInfo
{}, 
	`E¼Inv®idArgum’t
("Object is‚il")

369 
o
.
mu‹x
.
	`Lock
()

370 
deãr
 
o
.
mu‹x
.
	`UÆock
()

372 
o
.
´evE¼
 !ğ
n
 && o.´evE¼ !ğ
io
.
EOF
 || o.
isClo£d
 {

373  
ObjeùInfo
{}, 
o
.
´evE¼


377 !
o
.
isS¹ed
 || !o.
objeùInfoS‘
 {

379 
_
, 
”r
 :ğ
o
.
	`doG‘Reque¡
(
g‘Reque¡
{

380 
isFœ¡Req
: !
o
.
isS¹ed
,

381 
£‰šgObjeùInfo
: !
o
.
objeùInfoS‘
,

383 
”r
 !ğ
n
 {

384 
o
.
´evE¼
 = 
”r


385  
ObjeùInfo
{}, 
”r


389  
o
.
objeùInfo
, 
n


390 
	}
}

396 
	$func
 (
o
 *
Objeù
è
	$R—dAt
(
b
 []
by‹
, 
off£t
 
št64
è(
n
 , 
”r
 
”rÜ
) {

397 
o
 =ğ
n
 {

398  0, 
	`E¼Inv®idArgum’t
("Object is‚il")

402 
o
.
mu‹x
.
	`Lock
()

403 
deãr
 
o
.
mu‹x
.
	`UÆock
()

406 
o
.
´evE¼
 !ğ
n
 || o.
isClo£d
 {

407  0, 
o
.
´evE¼


411 
o
.
objeùInfoS‘
 {

414 ià(
o
.
objeùInfo
.
Size
 > -1 && 
off£t
 >= o.objectInfo.Size) || offset < 0 {

415  0, 
io
.
EOF


420 
»adAtReq
 :ğ
g‘Reque¡
{

421 
isR—dOp
: 
Œue
,

422 
isR—dAt
: 
Œue
,

423 
DidOff£tChªge
: 
Œue
,

424 
b“nR—d
: 
o
.beenRead,

425 
Off£t
: 
off£t
,

426 
Bufãr
: 
b
,

430 !
o
.
isS¹ed
 {

431 
»adAtReq
.
isFœ¡Req
 = 
Œue


435 
»¥Ú£
, 
”r
 :ğ
o
.
	`doG‘Reque¡
(
»adAtReq
)

436 
”r
 !ğ
n
 &&ƒ¼ !ğ
io
.
EOF
 {

438 
o
.
´evE¼
 = 
”r


439  
»¥Ú£
.
Size
, 
”r


442 
by‹sR—d
 :ğ
	`št64
(
»¥Ú£
.
Size
)

445 !
o
.
objeùInfoS‘
 {

447 
o
.
cu¼Off£t
 +ğ
by‹sR—d


452 
Û¼
 :ğ
o
.
	`£tOff£t
(
by‹sR—d
)

453 
Û¼
 !ğ
n
 {

454 
o
.
´evE¼
 = 
Û¼


455  
»¥Ú£
.
Size
, 
Û¼


458  
»¥Ú£
.
Size
, 
”r


459 
	}
}

470 
	$func
 (
o
 *
Objeù
è
	$S“k
(
off£t
 
št64
, 
wh’û
 è(
n
 iÁ64, 
”r
 
”rÜ
) {

471 
o
 =ğ
n
 {

472  0, 
	`E¼Inv®idArgum’t
("Object is‚il")

476 
o
.
mu‹x
.
	`Lock
()

477 
deãr
 
o
.
mu‹x
.
	`UÆock
()

479 
o
.
´evE¼
 !ğ
n
 {

481 
o
.
´evE¼
 !ğ
io
.
EOF
 {

482  0, 
o
.
´evE¼


487 
off£t
 < 0 && 
wh’û
 != 2 {

488  0, 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Neg©ivpos™iÚ‚Ù‡Îowed fÜ %d", 
wh’û
))

493 !
o
.
isS¹ed
 || !o.
objeùInfoS‘
 {

495 
£ekReq
 :ğ
g‘Reque¡
{

496 
isR—dOp
: 
çl£
,

497 
Off£t
: 
off£t
,

498 
isFœ¡Req
: 
Œue
,

501 
_
, 
”r
 :ğ
o
.
	`doG‘Reque¡
(
£ekReq
)

502 
”r
 !ğ
n
 {

504 
o
.
´evE¼
 = 
”r


505  0, 
”r


510 
wh’û
 {

512  0, 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Inv®id wh’û %d", 
wh’û
))

514 
o
.
objeùInfo
.
Size
 > -1 && 
off£t
 > o.objectInfo.Size {

515  0, 
io
.
EOF


517 
o
.
cu¼Off£t
 = 
off£t


519 
o
.
objeùInfo
.
Size
 > -1 && o.
cu¼Off£t
+
off£t
 > o.objectInfo.Size {

520  0, 
io
.
EOF


522 
o
.
cu¼Off£t
 +ğ
off£t


525 
o
.
objeùInfo
.
Size
 < 0 {

526  0, 
	`E¼Inv®idArgum’t
("Whence END is‚ot supported whenhe object size is unknown")

531 
off£t
 > 0 {

532  0, 
io
.
EOF


535 
o
.
objeùInfo
.
Size
+
off£t
 < 0 {

536  0, 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("S“kšg‡ˆÃg©ivoff£ˆnÙ‡Îowed fÜ %d", 
wh’û
))

538 
o
.
cu¼Off£t
 = o.
objeùInfo
.
Size
 + 
off£t


542 
o
.
´evE¼
 =ğ
io
.
EOF
 {

543 
o
.
´evE¼
 = 
n


547 
o
.
£ekD©a
 = 
Œue


550  
o
.
cu¼Off£t
, 
n


551 
	}
}

555 
	$func
 (
o
 *
Objeù
è
	$Clo£
(è(
”r
 
”rÜ
) {

556 
o
 =ğ
n
 {

557  
	`E¼Inv®idArgum’t
("Object is‚il")

560 
o
.
mu‹x
.
	`Lock
()

561 
deãr
 
o
.
mu‹x
.
	`UÆock
()

564 
o
.
isClo£d
 {

565  
o
.
´evE¼


569 
	`şo£
(
o
.
dÚeCh
)

572 
”rMsg
 := "Object is‡lready closed. Bad file descriptor."

573 
o
.
´evE¼
 = 
”rÜs
.
	`New
(
”rMsg
)

575 
o
.
isClo£d
 = 
Œue


576  
n


577 
	}
}

581 
func
 
ÃwObjeù
(
»qCh
 
chª
<- 
g‘Reque¡
, 
»sCh
 <-chª 
g‘Re¥Ú£
, 
dÚeCh
 chª<- sŒuù{}è*
	gObjeù
 {

582  &
	gObjeù
{

583 
	gmu‹x
: &
sync
.
Mu‹x
{},

584 
	g»qCh
: 
»qCh
,

585 
	g»sCh
: 
»sCh
,

586 
	gdÚeCh
: 
dÚeCh
,

597 
	$func
 (
c
 
Cl›Á
è
	$g‘Objeù
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
G‘ObjeùO±iÚs
è(
io
.
R—dClo£r
, 
ObjeùInfo
, 
”rÜ
) {

599 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

600  
n
, 
ObjeùInfo
{}, 
”r


602 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

603  
n
, 
ObjeùInfo
{}, 
”r


607 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "GET", 
»que¡M‘ad©a
{

608 
buck‘Name
: bucketName,

609 
objeùName
: objectName,

610 
cu¡omH—d”
: 
İts
.
	`H—d”
(),

611 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

613 
”r
 !ğ
n
 {

614  
n
, 
ObjeùInfo
{}, 
”r


616 
»¥
 !ğ
n
 {

617 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 &&„e¥.StusCod!ğh‰p.
StusP¬tŸlCÚ‹Á
 {

618  
n
, 
ObjeùInfo
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

623 
md5sum
 :ğ
¡ršgs
.
	`TrimP»fix
(
»¥
.
H—d”
.
	`G‘
("ETag"), "\"")

624 
md5sum
 = 
¡ršgs
.
	`TrimSuffix
(md5sum, "\"")

627 
d©e
, 
”r
 :ğ
time
.
	`P¬£
(
h‰p
.
TimeFÜm©
, 
»¥
.
H—d”
.
	`G‘
("Last-Modified"))

628 
”r
 !ğ
n
 {

629 
msg
 :ğ"La¡-Modif›dimfÜm©‚Ù„ecognized. " + 
»pÜtIssue


630  
n
, 
ObjeùInfo
{}, 
E¼ÜRe¥Ú£
{

631 
Code
: "InternalError",

632 
Mes§ge
: 
msg
,

633 
Reque¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-request-id"),

634 
Ho¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-id-2"),

635 
RegiÚ
: 
»¥
.
H—d”
.
	`G‘
("x-amz-bucket-region"),

640 
cÚ‹ÁTy³
 :ğ
¡ršgs
.
	`TrimS·û
(
»¥
.
H—d”
.
	`G‘
("Content-Type"))

641 
cÚ‹ÁTy³
 == "" {

642 
cÚ‹ÁTy³
 = "application/octet-stream"

645 
objeùSt
 :ğ
ObjeùInfo
{

646 
ETag
: 
md5sum
,

647 
Key
: 
objeùName
,

648 
Size
: 
»¥
.
CÚ‹ÁL’gth
,

649 
La¡Modif›d
: 
d©e
,

650 
CÚ‹ÁTy³
: 
cÚ‹ÁTy³
,

654 
M‘ad©a
: 
	`exŒaùObjM‘ad©a
(
»¥
.
H—d”
),

658  
»¥
.
Body
, 
objeùSt
, 
n


659 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-options.go

18 
·ckage
 
mšio


20 
impÜt
 (

30 
ty³
 
G‘ObjeùO±iÚs
 struct {

31 
h—d”s
 
	mm­
[
¡ršg
]string

32 
S”v”SideEnüy±iÚ
 
	m’üy±
.
	mS”v”Side


37 
ty³
 
StObjeùO±iÚs
 struct {

38 
	mG‘ObjeùO±iÚs


42 
	$func
 (
o
 
G‘ObjeùO±iÚs
è
	$H—d”
(è
h‰p
.
H—d”
 {

43 
h—d”s
 :ğ
	`make
(
h‰p
.
H—d”
, 
	`Ën
(
o
.headers))

44 
k
, 
v
 :ğ
¿nge
 
o
.
h—d”s
 {

45 
h—d”s
.
	`S‘
(
k
, 
v
)

47 
o
.
S”v”SideEnüy±iÚ
 !ğ
n
 && o.S”v”SideEnüy±iÚ.
	`Ty³
(è=ğ
’üy±
.
SSEC
 {

48 
o
.
S”v”SideEnüy±iÚ
.
	`M¬sh®
(
h—d”s
)

50  
h—d”s


51 
	}
}

56 
	$func
 (
o
 *
G‘ObjeùO±iÚs
è
	$S‘
(
key
, 
v®ue
 
¡ršg
) {

57 
o
.
h—d”s
 =ğ
n
 {

58 
o
.
h—d”s
 = 
	`make
(
m­
[
¡ršg
]string)

60 
o
.
h—d”s
[
h‰p
.
	`CªÚiÿlH—d”Key
(
key
)] = 
v®ue


61 
	}
}

64 
	$func
 (
o
 *
G‘ObjeùO±iÚs
è
	$S‘M©chETag
(
‘ag
 
¡ršg
è
”rÜ
 {

65 
‘ag
 == "" {

66  
	`E¼Inv®idArgum’t
("ETag cannot beƒmpty.")

68 
o
.
	`S‘
("If-M©ch", "\""+
‘ag
+"\"")

69  
n


70 
	}
}

73 
	$func
 (
o
 *
G‘ObjeùO±iÚs
è
	$S‘M©chETagExû±
(
‘ag
 
¡ršg
è
”rÜ
 {

74 
‘ag
 == "" {

75  
	`E¼Inv®idArgum’t
("ETag cannot beƒmpty.")

77 
o
.
	`S‘
("If-NÚe-M©ch", "\""+
‘ag
+"\"")

78  
n


79 
	}
}

82 
	$func
 (
o
 *
G‘ObjeùO±iÚs
è
	$S‘Unmodif›d
(
modTime
 
time
.
Time
è
”rÜ
 {

83 
modTime
.
	`IsZ”o
() {

84  
	`E¼Inv®idArgum’t
("Modified since cannot beƒmpty.")

86 
o
.
	`S‘
("If-Unmodif›d-Sšû", 
modTime
.
	`FÜm©
(
h‰p
.
TimeFÜm©
))

87  
n


88 
	}
}

91 
	$func
 (
o
 *
G‘ObjeùO±iÚs
è
	$S‘Modif›d
(
modTime
 
time
.
Time
è
”rÜ
 {

92 
modTime
.
	`IsZ”o
() {

93  
	`E¼Inv®idArgum’t
("Modified since cannot beƒmpty.")

95 
o
.
	`S‘
("If-Modif›d-Sšû", 
modTime
.
	`FÜm©
(
h‰p
.
TimeFÜm©
))

96  
n


97 
	}
}

101 
	$func
 (
o
 *
G‘ObjeùO±iÚs
è
	$S‘Rªge
(
¡¬t
, 
’d
 
št64
è
”rÜ
 {

103 
¡¬t
 =ğ0 && 
’d
 < 0:

105 
o
.
	`S‘
("Rªge", 
fmt
.
	`S´štf
("by‹s=%d", 
’d
))

106 0 < 
¡¬t
 && 
’d
 == 0:

109 
o
.
	`S‘
("Rªge", 
fmt
.
	`S´štf
("by‹s=%d-", 
¡¬t
))

110 0 <ğ
¡¬t
 && s¹ <ğ
’d
:

113 
o
.
	`S‘
("Rªge", 
fmt
.
	`S´štf
("by‹s=%d-%d", 
¡¬t
, 
’d
))

122  
	`E¼Inv®idArgum’t
(

123 
fmt
.
	`S´štf
(

125 
¡¬t
, 
’d
))

127  
n


128 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-policy.go

18 
·ckage
 
mšio


20 
impÜt
 (

30 
	$func
 (
c
 
Cl›Á
è
	$G‘Buck‘PŞicy
(
buck‘Name
 
¡ršg
è(¡ršg, 
”rÜ
) {

32 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

33  "", 
”r


35 
buck‘PŞicy
, 
”r
 :ğ
c
.
	`g‘Buck‘PŞicy
(
buck‘Name
)

36 
”r
 !ğ
n
 {

37 
”rRe¥Ú£
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
)

38 
”rRe¥Ú£
.
Code
 == "NoSuchBucketPolicy" {

39  "", 
n


41  "", 
”r


43  
buck‘PŞicy
, 
n


44 
	}
}

47 
	$func
 (
c
 
Cl›Á
è
	$g‘Buck‘PŞicy
(
buck‘Name
 
¡ršg
è(¡ršg, 
”rÜ
) {

50 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

51 
u¾V®ues
.
	`S‘
("policy", "")

54 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

55 
buck‘Name
: bucketName,

56 
qu”yV®ues
: 
u¾V®ues
,

57 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

60 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

61 
”r
 !ğ
n
 {

62  "", 
”r


65 
»¥
 !ğ
n
 {

66 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

67  "", 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

71 
buck‘PŞicyBuf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»¥
.
Body
)

72 
”r
 !ğ
n
 {

73  "", 
”r


76 
pŞicy
 :ğ
	`¡ršg
(
buck‘PŞicyBuf
)

77  
pŞicy
, 
”r


78 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-list.go

18 
·ckage
 
mšio


20 
impÜt
 (

41 
	$func
 (
c
 
Cl›Á
è
	`Li¡Buck‘s
(è([]
Buck‘Info
, 
”rÜ
) {

43 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
})

44 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

45 
”r
 !ğ
n
 {

46  
n
, 
”r


48 
»¥
 !ğ
n
 {

49 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

50  
n
, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, "", "")

53 
li¡AÎMyBuck‘sResuÉ
 :=†istAllMyBucketsResult{}

54 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
li¡AÎMyBuck‘sResuÉ
)

55 
”r
 !ğ
n
 {

56  
n
, 
”r


58  
li¡AÎMyBuck‘sResuÉ
.
Buck‘s
.
Buck‘
, 
n


59 
	}
}

83 
	$func
 (
c
 
Cl›Á
è
	`Li¡ObjeùsV2
(
buck‘Name
, 
objeùP»fix
 
¡ršg
, 
»cursive
 
boŞ
, 
dÚeCh
 <-
chª
 sŒuù{}è<-chª 
ObjeùInfo
 {

85 
objeùStCh
 :ğ
	`make
(
chª
 
ObjeùInfo
, 1)

87 
d–im™”
 := "/"

88 
»cursive
 {

90 
d–im™”
 = ""

94 
ãtchOwÃr
 :ğ
Œue


97 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

98 
deãr
 
	`şo£
(
objeùStCh
)

99 
objeùStCh
 <- 
ObjeùInfo
{

100 
E¼
: 
”r
,

102  
objeùStCh


106 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùNameP»fix
(
objeùP»fix
);ƒ¼ !ğ
n
 {

107 
deãr
 
	`şo£
(
objeùStCh
)

108 
objeùStCh
 <- 
ObjeùInfo
{

109 
E¼
: 
”r
,

111  
objeùStCh


115 
go
 
	`func
(
objeùStCh
 
chª
<- 
ObjeùInfo
) {

116 
deãr
 
	`şo£
(
objeùStCh
)

118 
v¬
 
cÚtšu©iÚTok’
 
¡ršg


121 
»suÉ
, 
”r
 :ğ
c
.
	`li¡ObjeùsV2Qu”y
(
buck‘Name
, 
objeùP»fix
, 
cÚtšu©iÚTok’
, 
ãtchOwÃr
, 
d–im™”
, 1000, "")

122 
”r
 !ğ
n
 {

123 
objeùStCh
 <- 
ObjeùInfo
{

124 
E¼
: 
”r
,

130 
_
, 
objeù
 :ğ
¿nge
 
»suÉ
.
CÚ‹Ás
 {

131 
£Ëù
 {

133 
objeùStCh
 <- 
objeù
:

135 <-
dÚeCh
:

142 
_
, 
obj
 :ğ
¿nge
 
»suÉ
.
CommÚP»fixes
 {

143 
£Ëù
 {

145 
objeùStCh
 <- 
ObjeùInfo
{

146 
Key
: 
obj
.
P»fix
,

147 
Size
: 0,

150 <-
dÚeCh
:

156 
»suÉ
.
NextCÚtšu©iÚTok’
 != "" {

157 
cÚtšu©iÚTok’
 = 
»suÉ
.
NextCÚtšu©iÚTok’


161 !
»suÉ
.
IsTrunÿ‹d
 {

165 }(
objeùStCh
)

166  
objeùStCh


167 
	}
}

179 
	$func
 (
c
 
Cl›Á
è
	$li¡ObjeùsV2Qu”y
(
buck‘Name
, 
objeùP»fix
, 
cÚtšu©iÚTok’
 
¡ršg
, 
ãtchOwÃr
 
boŞ
, 
d–im™”
 sŒšg, 
maxkeys
 , 
¡¬tAá”
 sŒšgè(
Li¡Buck‘V2ResuÉ
, 
”rÜ
) {

181 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

182  
Li¡Buck‘V2ResuÉ
{}, 
”r


185 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùNameP»fix
(
objeùP»fix
);ƒ¼ !ğ
n
 {

186  
Li¡Buck‘V2ResuÉ
{}, 
”r


190 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

193 
u¾V®ues
.
	`S‘
("list-type", "2")

196 
u¾V®ues
.
	`S‘
("´efix", 
objeùP»fix
)

199 
u¾V®ues
.
	`S‘
("d–im™”", 
d–im™”
)

202 
cÚtšu©iÚTok’
 != "" {

203 
u¾V®ues
.
	`S‘
("cÚtšu©iÚ-tok’", 
cÚtšu©iÚTok’
)

207 
ãtchOwÃr
 {

208 
u¾V®ues
.
	`S‘
("fetch-owner", "true")

212 
maxkeys
 == 0 || maxkeys > 1000 {

213 
maxkeys
 = 1000

216 
u¾V®ues
.
	`S‘
("max-keys", 
fmt
.
	`S´štf
("%d", 
maxkeys
))

219 
¡¬tAá”
 != "" {

220 
u¾V®ues
.
	`S‘
("¡¬t-aá”", 
¡¬tAá”
)

224 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

225 
buck‘Name
: bucketName,

226 
qu”yV®ues
: 
u¾V®ues
,

227 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

229 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

230 
”r
 !ğ
n
 {

231  
Li¡Buck‘V2ResuÉ
{}, 
”r


233 
»¥
 !ğ
n
 {

234 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

235  
Li¡Buck‘V2ResuÉ
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

240 
li¡Buck‘ResuÉ
 :ğ
Li¡Buck‘V2ResuÉ
{}

241 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
li¡Buck‘ResuÉ
);ƒ¼ !ğ
n
 {

242  
li¡Buck‘ResuÉ
, 
”r


247 
li¡Buck‘ResuÉ
.
IsTrunÿ‹d
 &&†i¡Buck‘ResuÉ.
NextCÚtšu©iÚTok’
 == "" {

248  
li¡Buck‘ResuÉ
, 
”rÜs
.
	`New
("Truncated„esponse should have continuationoken set")

252  
li¡Buck‘ResuÉ
, 
n


253 
	}
}

277 
	$func
 (
c
 
Cl›Á
è
	`Li¡Objeùs
(
buck‘Name
, 
objeùP»fix
 
¡ršg
, 
»cursive
 
boŞ
, 
dÚeCh
 <-
chª
 sŒuù{}è<-chª 
ObjeùInfo
 {

279 
objeùStCh
 :ğ
	`make
(
chª
 
ObjeùInfo
, 1)

281 
d–im™”
 := "/"

282 
»cursive
 {

284 
d–im™”
 = ""

287 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

288 
deãr
 
	`şo£
(
objeùStCh
)

289 
objeùStCh
 <- 
ObjeùInfo
{

290 
E¼
: 
”r
,

292  
objeùStCh


295 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùNameP»fix
(
objeùP»fix
);ƒ¼ !ğ
n
 {

296 
deãr
 
	`şo£
(
objeùStCh
)

297 
objeùStCh
 <- 
ObjeùInfo
{

298 
E¼
: 
”r
,

300  
objeùStCh


304 
go
 
	`func
(
objeùStCh
 
chª
<- 
ObjeùInfo
) {

305 
deãr
 
	`şo£
(
objeùStCh
)

307 
v¬
 
m¬k”
 
¡ršg


310 
»suÉ
, 
”r
 :ğ
c
.
	`li¡ObjeùsQu”y
(
buck‘Name
, 
objeùP»fix
, 
m¬k”
, 
d–im™”
, 1000)

311 
”r
 !ğ
n
 {

312 
objeùStCh
 <- 
ObjeùInfo
{

313 
E¼
: 
”r
,

319 
_
, 
objeù
 :ğ
¿nge
 
»suÉ
.
CÚ‹Ás
 {

321 
m¬k”
 = 
objeù
.
Key


322 
£Ëù
 {

324 
objeùStCh
 <- 
objeù
:

326 <-
dÚeCh
:

333 
_
, 
obj
 :ğ
¿nge
 
»suÉ
.
CommÚP»fixes
 {

334 
objeù
 :ğ
ObjeùInfo
{}

335 
objeù
.
Key
 = 
obj
.
P»fix


336 
objeù
.
Size
 = 0

337 
£Ëù
 {

339 
objeùStCh
 <- 
objeù
:

341 <-
dÚeCh
:

347 
»suÉ
.
NextM¬k”
 != "" {

348 
m¬k”
 = 
»suÉ
.
NextM¬k”


352 !
»suÉ
.
IsTrunÿ‹d
 {

356 }(
objeùStCh
)

357  
objeùStCh


358 
	}
}

369 
	$func
 (
c
 
Cl›Á
è
	$li¡ObjeùsQu”y
(
buck‘Name
, 
objeùP»fix
, 
objeùM¬k”
, 
d–im™”
 
¡ršg
, 
maxkeys
 è(
Li¡Buck‘ResuÉ
, 
”rÜ
) {

371 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

372  
Li¡Buck‘ResuÉ
{}, 
”r


375 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùNameP»fix
(
objeùP»fix
);ƒ¼ !ğ
n
 {

376  
Li¡Buck‘ResuÉ
{}, 
”r


380 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

383 
u¾V®ues
.
	`S‘
("´efix", 
objeùP»fix
)

386 
u¾V®ues
.
	`S‘
("d–im™”", 
d–im™”
)

389 
objeùM¬k”
 != "" {

390 
u¾V®ues
.
	`S‘
("m¬k”", 
objeùM¬k”
)

394 
maxkeys
 == 0 || maxkeys > 1000 {

395 
maxkeys
 = 1000

398 
u¾V®ues
.
	`S‘
("max-keys", 
fmt
.
	`S´štf
("%d", 
maxkeys
))

401 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

402 
buck‘Name
: bucketName,

403 
qu”yV®ues
: 
u¾V®ues
,

404 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

406 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

407 
”r
 !ğ
n
 {

408  
Li¡Buck‘ResuÉ
{}, 
”r


410 
»¥
 !ğ
n
 {

411 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

412  
Li¡Buck‘ResuÉ
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

416 
li¡Buck‘ResuÉ
 :ğ
Li¡Buck‘ResuÉ
{}

417 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
li¡Buck‘ResuÉ
)

418 
”r
 !ğ
n
 {

419  
li¡Buck‘ResuÉ
, 
”r


421  
li¡Buck‘ResuÉ
, 
n


422 
	}
}

445 
	$func
 (
c
 
Cl›Á
è
	`Li¡Incom¶‘eU¶ßds
(
buck‘Name
, 
objeùP»fix
 
¡ršg
, 
»cursive
 
boŞ
, 
dÚeCh
 <-
chª
 sŒuù{}è<-chª 
ObjeùMuÉ¬tInfo
 {

447 
isAgg»g©eSize
 :ğ
Œue


448  
c
.
	`li¡Incom¶‘eU¶ßds
(
buck‘Name
, 
objeùP»fix
, 
»cursive
, 
isAgg»g©eSize
, 
dÚeCh
)

449 
	}
}

452 
	$func
 (
c
 
Cl›Á
è
	`li¡Incom¶‘eU¶ßds
(
buck‘Name
, 
objeùP»fix
 
¡ršg
, 
»cursive
, 
agg»g©eSize
 
boŞ
, 
dÚeCh
 <-
chª
 sŒuù{}è<-chª 
ObjeùMuÉ¬tInfo
 {

454 
objeùMuÉ¬tStCh
 :ğ
	`make
(
chª
 
ObjeùMuÉ¬tInfo
, 1)

456 
d–im™”
 := "/"

457 
»cursive
 {

459 
d–im™”
 = ""

462 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

463 
deãr
 
	`şo£
(
objeùMuÉ¬tStCh
)

464 
objeùMuÉ¬tStCh
 <- 
ObjeùMuÉ¬tInfo
{

465 
E¼
: 
”r
,

467  
objeùMuÉ¬tStCh


470 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùNameP»fix
(
objeùP»fix
);ƒ¼ !ğ
n
 {

471 
deãr
 
	`şo£
(
objeùMuÉ¬tStCh
)

472 
objeùMuÉ¬tStCh
 <- 
ObjeùMuÉ¬tInfo
{

473 
E¼
: 
”r
,

475  
objeùMuÉ¬tStCh


477 
go
 
	`func
(
objeùMuÉ¬tStCh
 
chª
<- 
ObjeùMuÉ¬tInfo
) {

478 
deãr
 
	`şo£
(
objeùMuÉ¬tStCh
)

480 
v¬
 
objeùM¬k”
 
¡ršg


481 
v¬
 
u¶ßdIDM¬k”
 
¡ršg


484 
»suÉ
, 
”r
 :ğ
c
.
	`li¡MuÉ¬tU¶ßdsQu”y
(
buck‘Name
, 
objeùM¬k”
, 
u¶ßdIDM¬k”
, 
objeùP»fix
, 
d–im™”
, 1000)

485 
”r
 !ğ
n
 {

486 
objeùMuÉ¬tStCh
 <- 
ObjeùMuÉ¬tInfo
{

487 
E¼
: 
”r
,

492 
objeùM¬k”
 = 
»suÉ
.
NextKeyM¬k”


493 
u¶ßdIDM¬k”
 = 
»suÉ
.
NextU¶ßdIDM¬k”


495 
_
, 
obj
 :ğ
¿nge
 
»suÉ
.
U¶ßds
 {

497 
agg»g©eSize
 {

499 
obj
.
Size
, 
”r
 = 
c
.
	`g‘TÙ®MuÉ¬tSize
(
buck‘Name
, obj.
Key
, obj.
U¶ßdID
)

500 
”r
 !ğ
n
 {

501 
objeùMuÉ¬tStCh
 <- 
ObjeùMuÉ¬tInfo
{

502 
E¼
: 
”r
,

507 
£Ëù
 {

509 
objeùMuÉ¬tStCh
 <- 
obj
:

511 <-
dÚeCh
:

517 
_
, 
obj
 :ğ
¿nge
 
»suÉ
.
CommÚP»fixes
 {

518 
objeù
 :ğ
ObjeùMuÉ¬tInfo
{}

519 
objeù
.
Key
 = 
obj
.
P»fix


520 
objeù
.
Size
 = 0

521 
£Ëù
 {

523 
objeùMuÉ¬tStCh
 <- 
objeù
:

525 <-
dÚeCh
:

530 !
»suÉ
.
IsTrunÿ‹d
 {

534 }(
objeùMuÉ¬tStCh
)

536  
objeùMuÉ¬tStCh


537 
	}
}

550 
	$func
 (
c
 
Cl›Á
è
	$li¡MuÉ¬tU¶ßdsQu”y
(
buck‘Name
, 
keyM¬k”
, 
u¶ßdIDM¬k”
, 
´efix
, 
d–im™”
 
¡ršg
, 
maxU¶ßds
 è(
Li¡MuÉ¬tU¶ßdsResuÉ
, 
”rÜ
) {

552 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

554 
u¾V®ues
.
	`S‘
("uploads", "")

556 
keyM¬k”
 != "" {

557 
u¾V®ues
.
	`S‘
("key-m¬k”", 
keyM¬k”
)

560 
u¶ßdIDM¬k”
 != "" {

561 
u¾V®ues
.
	`S‘
("u¶ßd-id-m¬k”", 
u¶ßdIDM¬k”
)

565 
u¾V®ues
.
	`S‘
("´efix", 
´efix
)

568 
u¾V®ues
.
	`S‘
("d–im™”", 
d–im™”
)

571 
maxU¶ßds
 == 0 || maxUploads > 1000 {

572 
maxU¶ßds
 = 1000

575 
u¾V®ues
.
	`S‘
("max-u¶ßds", 
fmt
.
	`S´štf
("%d", 
maxU¶ßds
))

578 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

579 
buck‘Name
: bucketName,

580 
qu”yV®ues
: 
u¾V®ues
,

581 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

583 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

584 
”r
 !ğ
n
 {

585  
Li¡MuÉ¬tU¶ßdsResuÉ
{}, 
”r


587 
»¥
 !ğ
n
 {

588 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

589  
Li¡MuÉ¬tU¶ßdsResuÉ
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

593 
li¡MuÉ¬tU¶ßdsResuÉ
 :ğ
Li¡MuÉ¬tU¶ßdsResuÉ
{}

594 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
li¡MuÉ¬tU¶ßdsResuÉ
)

595 
”r
 !ğ
n
 {

596  
li¡MuÉ¬tU¶ßdsResuÉ
, 
”r


598  
li¡MuÉ¬tU¶ßdsResuÉ
, 
n


599 
	}
}

602 
	$func
 (
c
 
Cl›Á
è
	$li¡ObjeùP¬ts
(
buck‘Name
, 
objeùName
, 
u¶ßdID
 
¡ršg
è(
·¹sInfo
 
m­
[]
ObjeùP¬t
, 
”r
 
”rÜ
) {

604 
v¬
 
ÃxtP¬tNumb”M¬k”
 

605 
·¹sInfo
 = 
	`make
(
m­
[]
ObjeùP¬t
)

608 
li¡ObjP¬tsResuÉ
, 
”r
 :ğ
c
.
	`li¡ObjeùP¬tsQu”y
(
buck‘Name
, 
objeùName
, 
u¶ßdID
, 
ÃxtP¬tNumb”M¬k”
, 1000)

609 
”r
 !ğ
n
 {

610  
n
, 
”r


613 
_
, 
·¹
 :ğ
¿nge
 
li¡ObjP¬tsResuÉ
.
ObjeùP¬ts
 {

615 
·¹
.
ETag
 = 
¡ršgs
.
	`TrimP»fix
(part.ETag, "\"")

616 
·¹
.
ETag
 = 
¡ršgs
.
	`TrimSuffix
(part.ETag, "\"")

617 
·¹sInfo
[
·¹
.
P¬tNumb”
] =…art

620 
ÃxtP¬tNumb”M¬k”
 = 
li¡ObjP¬tsResuÉ
.
NextP¬tNumb”M¬k”


622 !
li¡ObjP¬tsResuÉ
.
IsTrunÿ‹d
 {

628  
·¹sInfo
, 
n


629 
	}
}

632 
	$func
 (
c
 
Cl›Á
è
	`fšdU¶ßdIDs
(
buck‘Name
, 
objeùName
 
¡ršg
è([]¡ršg, 
”rÜ
) {

633 
v¬
 
u¶ßdIDs
 []
¡ršg


635 
isRecursive
 :ğ
Œue


637 
isAgg»g©eSize
 :ğ
çl£


639 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

640 
deãr
 
	`şo£
(
dÚeCh
)

642 
mpU¶ßd
 :ğ
¿nge
 
c
.
	`li¡Incom¶‘eU¶ßds
(
buck‘Name
, 
objeùName
, 
isRecursive
, 
isAgg»g©eSize
, 
dÚeCh
) {

643 
mpU¶ßd
.
E¼
 !ğ
n
 {

644  
n
, 
mpU¶ßd
.
E¼


646 
objeùName
 =ğ
mpU¶ßd
.
Key
 {

647 
u¶ßdIDs
 = 
	`­³nd
(u¶ßdIDs, 
mpU¶ßd
.
U¶ßdID
)

651  
u¶ßdIDs
, 
n


652 
	}
}

655 
	$func
 (
c
 
Cl›Á
è
	$g‘TÙ®MuÉ¬tSize
(
buck‘Name
, 
objeùName
, 
u¶ßdID
 
¡ršg
è(
size
 
št64
, 
”r
 
”rÜ
) {

657 
·¹sInfo
, 
”r
 :ğ
c
.
	`li¡ObjeùP¬ts
(
buck‘Name
, 
objeùName
, 
u¶ßdID
)

658 
”r
 !ğ
n
 {

659  0, 
”r


661 
_
, 
·¹Info
 :ğ
¿nge
 
·¹sInfo
 {

662 
size
 +ğ
·¹Info
.
Size


664  
size
, 
n


665 
	}
}

677 
	$func
 (
c
 
Cl›Á
è
	$li¡ObjeùP¬tsQu”y
(
buck‘Name
, 
objeùName
, 
u¶ßdID
 
¡ršg
, 
·¹Numb”M¬k”
, 
maxP¬ts
 è(
Li¡ObjeùP¬tsResuÉ
, 
”rÜ
) {

679 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

681 
u¾V®ues
.
	`S‘
("·¹-numb”-m¬k”", 
fmt
.
	`S´štf
("%d", 
·¹Numb”M¬k”
))

683 
u¾V®ues
.
	`S‘
("u¶ßdId", 
u¶ßdID
)

686 
maxP¬ts
 == 0 || maxParts > 1000 {

687 
maxP¬ts
 = 1000

690 
u¾V®ues
.
	`S‘
("max-·¹s", 
fmt
.
	`S´štf
("%d", 
maxP¬ts
))

693 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

694 
buck‘Name
: bucketName,

695 
objeùName
: objectName,

696 
qu”yV®ues
: 
u¾V®ues
,

697 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

699 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

700 
”r
 !ğ
n
 {

701  
Li¡ObjeùP¬tsResuÉ
{}, 
”r


703 
»¥
 !ğ
n
 {

704 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

705  
Li¡ObjeùP¬tsResuÉ
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

709 
li¡ObjeùP¬tsResuÉ
 :ğ
Li¡ObjeùP¬tsResuÉ
{}

710 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
li¡ObjeùP¬tsResuÉ
)

711 
”r
 !ğ
n
 {

712  
li¡ObjeùP¬tsResuÉ
, 
”r


714  
li¡ObjeùP¬tsResuÉ
, 
n


715 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-notification.go

18 
·ckage
 
mšio


20 
impÜt
 (

33 
	$func
 (
c
 
Cl›Á
è
	$G‘Buck‘NÙifiÿtiÚ
(
buck‘Name
 
¡ršg
è(
buck‘NÙifiÿtiÚ
 
Buck‘NÙifiÿtiÚ
, 
”r
 
”rÜ
) {

35 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

36  
Buck‘NÙifiÿtiÚ
{}, 
”r


38 
nÙifiÿtiÚ
, 
”r
 :ğ
c
.
	`g‘Buck‘NÙifiÿtiÚ
(
buck‘Name
)

39 
”r
 !ğ
n
 {

40  
Buck‘NÙifiÿtiÚ
{}, 
”r


42  
nÙifiÿtiÚ
, 
n


43 
	}
}

46 
	$func
 (
c
 
Cl›Á
è
	$g‘Buck‘NÙifiÿtiÚ
(
buck‘Name
 
¡ršg
è(
Buck‘NÙifiÿtiÚ
, 
”rÜ
) {

47 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

48 
u¾V®ues
.
	`S‘
("notification", "")

51 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

52 
buck‘Name
: bucketName,

53 
qu”yV®ues
: 
u¾V®ues
,

54 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

57 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

58 
”r
 !ğ
n
 {

59  
Buck‘NÙifiÿtiÚ
{}, 
”r


61  
	`´oûssBuck‘NÙifiÿtiÚRe¥Ú£
(
buck‘Name
, 
»¥
)

63 
	}
}

66 
func
 
	$´oûssBuck‘NÙifiÿtiÚRe¥Ú£
(
buck‘Name
 
¡ršg
, 
»¥
 *
h‰p
.
Re¥Ú£
è(
Buck‘NÙifiÿtiÚ
, 
”rÜ
) {

67 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

68 
”rRe¥Ú£
 :ğ
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

69  
Buck‘NÙifiÿtiÚ
{}, 
”rRe¥Ú£


71 
v¬
 
buck‘NÙifiÿtiÚ
 
Buck‘NÙifiÿtiÚ


72 
”r
 :ğ
	`xmlDecod”
(
»¥
.
Body
, &
buck‘NÙifiÿtiÚ
)

73 
”r
 !ğ
n
 {

74  
Buck‘NÙifiÿtiÚ
{}, 
”r


76  
buck‘NÙifiÿtiÚ
, 
n


77 
	}
}

80 
ty³
 
id’t™y
 struct {

81 
Pršc®ID
 
	m¡ršg
 `
	mjsÚ
:"principalId"`

85 
ty³
 
buck‘M‘a
 struct {

86 
Name
 
¡ršg
 `
jsÚ
:"name"`

87 
OwÃrId’t™y
 
id’t™y
 `
jsÚ
:"ownerIdentity"`

88 
ARN
 
¡ršg
 `
jsÚ
:"arn"`

92 
ty³
 
objeùM‘a
 struct {

93 
Key
 
¡ršg
 `
jsÚ
:"key"`

94 
Size
 
št64
 `
jsÚ
:"size,omitempty"`

95 
ETag
 
¡ršg
 `
jsÚ
:"eTag,omitempty"`

96 
V”siÚID
 
¡ršg
 `
jsÚ
:"versionId,omitempty"`

97 
Sequ’ûr
 
¡ršg
 `
jsÚ
:"sequencer"`

101 
ty³
 
ev’tM‘a
 struct {

102 
SchemaV”siÚ
 
¡ršg
 `
jsÚ
:"s3SchemaVersion"`

103 
CÚfigu¿tiÚID
 
¡ršg
 `
jsÚ
:"configurationId"`

104 
Buck‘
 
buck‘M‘a
 `
jsÚ
:"bucket"`

105 
Objeù
 
objeùM‘a
 `
jsÚ
:"object"`

110 
ty³
 
sourûInfo
 struct {

111 
Ho¡
 
¡ršg
 `
jsÚ
:"host"`

112 
PÜt
 
¡ršg
 `
jsÚ
:"port"`

113 
U£rAg’t
 
¡ršg
 `
jsÚ
:"userAgent"`

117 
ty³
 
NÙifiÿtiÚEv’t
 struct {

118 
Ev’tV”siÚ
 
¡ršg
 `
jsÚ
:"eventVersion"`

119 
Ev’tSourû
 
¡ršg
 `
jsÚ
:"eventSource"`

120 
AwsRegiÚ
 
¡ršg
 `
jsÚ
:"awsRegion"`

121 
Ev’tTime
 
¡ršg
 `
jsÚ
:"eventTime"`

122 
Ev’tName
 
¡ršg
 `
jsÚ
:"eventName"`

123 
U£rId’t™y
 
id’t™y
 `
jsÚ
:"userIdentity"`

124 
Reque¡P¬am‘”s
 
m­
[
¡ršg
]¡ršg `
jsÚ
:"requestParameters"`

125 
Re¥Ú£EËm’ts
 
m­
[
¡ršg
]¡ršg `
jsÚ
:"responseElements"`

126 
S3
 
ev’tM‘a
 `
jsÚ
:"s3"`

127 
Sourû
 
sourûInfo
 `
jsÚ
:"source"`

132 
ty³
 
NÙifiÿtiÚInfo
 struct {

133 
RecÜds
 []
NÙifiÿtiÚEv’t


134 
E¼
 
”rÜ


138 
	$func
 (
c
 
Cl›Á
è
	`Li¡’Buck‘NÙifiÿtiÚ
(
buck‘Name
, 
´efix
, 
suffix
 
¡ršg
, 
ev’ts
 []¡ršg, 
dÚeCh
 <-
chª
 sŒuù{}è<-chª 
NÙifiÿtiÚInfo
 {

139 
nÙifiÿtiÚInfoCh
 :ğ
	`make
(
chª
 
NÙifiÿtiÚInfo
, 1)

141 
go
 
	`func
(
nÙifiÿtiÚInfoCh
 
chª
<- 
NÙifiÿtiÚInfo
) {

142 
deãr
 
	`şo£
(
nÙifiÿtiÚInfoCh
)

145 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

146 
nÙifiÿtiÚInfoCh
 <- 
NÙifiÿtiÚInfo
{

147 
E¼
: 
”r
,

153 
s3uts
.
	`IsAmazÚEndpošt
(*
c
.
’dpoštURL
è|| s3uts.
	`IsGoogËEndpošt
(*c.endpointURL) {

154 
nÙifiÿtiÚInfoCh
 <- 
NÙifiÿtiÚInfo
{

155 
E¼
: 
	`E¼APINÙSuµÜ‹d
("Listening for bucket‚otification is specific onlyo `minio` serverƒndpoints"),

162 
»ŒyDÚeCh
 :ğ
	`make
(
chª
 struct{}, 1)

165 
deãr
 
	`şo£
(
»ŒyDÚeCh
)

168 
¿nge
 
c
.
	`ÃwR‘ryTim”CÚtšous
(
time
.
SecÚd
,ime.SecÚd*30, 
MaxJ™‹r
, 
»ŒyDÚeCh
) {

169 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

170 
u¾V®ues
.
	`S‘
("´efix", 
´efix
)

171 
u¾V®ues
.
	`S‘
("suffix", 
suffix
)

172 
u¾V®ues
["ev’ts"] = 
ev’ts


175 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "GET", 
»que¡M‘ad©a
{

176 
buck‘Name
: bucketName,

177 
qu”yV®ues
: 
u¾V®ues
,

178 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

180 
”r
 !ğ
n
 {

181 
nÙifiÿtiÚInfoCh
 <- 
NÙifiÿtiÚInfo
{

182 
E¼
: 
”r
,

188 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

189 
”rRe¥Ú£
 :ğ
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

190 
nÙifiÿtiÚInfoCh
 <- 
NÙifiÿtiÚInfo
{

191 
E¼
: 
”rRe¥Ú£
,

197 
bio
 :ğ
bufio
.
	`NewSÿÂ”
(
»¥
.
Body
)

200 
deãr
 
»¥
.
Body
.
	`Clo£
()

203 
bio
.
	`Sÿn
() {

204 
v¬
 
nÙifiÿtiÚInfo
 
NÙifiÿtiÚInfo


205 
”r
 = 
jsÚ
.
	`Unm¬sh®
(
bio
.
	`By‹s
(), &
nÙifiÿtiÚInfo
);ƒ¼ !ğ
n
 {

209 
£Ëù
 {

210 
nÙifiÿtiÚInfoCh
 <- 
nÙifiÿtiÚInfo
:

211 <-
dÚeCh
:

216 
”r
 = 
bio
.
	`E¼
();ƒ¼ !ğ
n
 {

219 
”r
 =ğ
io
.
E¼UÃx³ùedEOF
 {

220 
»¥
.
Body
.
	`Clo£
()

224 }(
nÙifiÿtiÚInfoCh
)

227  
nÙifiÿtiÚInfoCh


228 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-presigned.go

18 
·ckage
 
mšio


20 
impÜt
 (

32 
	$func
 (
c
 
Cl›Á
è
	$´esignURL
(
m‘hod
 
¡ršg
, 
buck‘Name
 sŒšg, 
objeùName
 sŒšg, 
expœes
 
time
.
Du¿tiÚ
, 
»qP¬ams
 
u¾
.
V®ues
è(
u
 *u¾.
URL
, 
”r
 
”rÜ
) {

34 
m‘hod
 == "" {

35  
n
, 
	`E¼Inv®idArgum’t
("method cannot beƒmpty.")

37 
”r
 = 
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

38  
n
, 
”r


40 
”r
 = 
	`isV®idExpœy
(
expœes
);ƒ¼ !ğ
n
 {

41  
n
, 
”r


45 
expœeSecÚds
 :ğ
	`št64
(
expœes
 / 
time
.
SecÚd
)

46 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

47 
´esignURL
: 
Œue
,

48 
buck‘Name
: bucketName,

49 
objeùName
: objectName,

50 
expœes
: 
expœeSecÚds
,

51 
qu”yV®ues
: 
»qP¬ams
,

56 
v¬
 
»q
 *
h‰p
.
Reque¡


57 
»q
, 
”r
 = 
c
.
	`ÃwReque¡
(
m‘hod
, 
»qM‘ad©a
);ƒ¼ !ğ
n
 {

58  
n
, 
”r


60  
»q
.
URL
, 
n


61 
	}
}

67 
	$func
 (
c
 
Cl›Á
è
	$P»sigÃdG‘Objeù
(
buck‘Name
 
¡ršg
, 
objeùName
 sŒšg, 
expœes
 
time
.
Du¿tiÚ
, 
»qP¬ams
 
u¾
.
V®ues
è(
u
 *u¾.
URL
, 
”r
 
”rÜ
) {

68 
”r
 = 
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

69  
n
, 
”r


71  
c
.
	`´esignURL
("GET", 
buck‘Name
, 
objeùName
, 
expœes
, 
»qP¬ams
)

72 
	}
}

78 
	$func
 (
c
 
Cl›Á
è
	$P»sigÃdH—dObjeù
(
buck‘Name
 
¡ršg
, 
objeùName
 sŒšg, 
expœes
 
time
.
Du¿tiÚ
, 
»qP¬ams
 
u¾
.
V®ues
è(
u
 *u¾.
URL
, 
”r
 
”rÜ
) {

79 
”r
 = 
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

80  
n
, 
”r


82  
c
.
	`´esignURL
("HEAD", 
buck‘Name
, 
objeùName
, 
expœes
, 
»qP¬ams
)

83 
	}
}

88 
	$func
 (
c
 
Cl›Á
è
	$P»sigÃdPutObjeù
(
buck‘Name
 
¡ršg
, 
objeùName
 sŒšg, 
expœes
 
time
.
Du¿tiÚ
è(
u
 *
u¾
.
URL
, 
”r
 
”rÜ
) {

89 
”r
 = 
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

90  
n
, 
”r


92  
c
.
	`´esignURL
("PUT", 
buck‘Name
, 
objeùName
, 
expœes
, 
n
)

93 
	}
}

98 
	$func
 (
c
 
Cl›Á
è
	$P»sign
(
m‘hod
 
¡ršg
, 
buck‘Name
 sŒšg, 
objeùName
 sŒšg, 
expœes
 
time
.
Du¿tiÚ
, 
»qP¬ams
 
u¾
.
V®ues
è(
u
 *u¾.
URL
, 
”r
 
”rÜ
) {

99  
c
.
	`´esignURL
(
m‘hod
, 
buck‘Name
, 
objeùName
, 
expœes
, 
»qP¬ams
)

100 
	}
}

103 
	$func
 (
c
 
Cl›Á
è
	$P»sigÃdPo¡PŞicy
(
p
 *
Po¡PŞicy
è(
u
 *
u¾
.
URL
, 
fÜmD©a
 
m­
[
¡ršg
]¡ršg, 
”r
 
”rÜ
) {

105 
p
.
expœ©iÚ
.
	`IsZ”o
() {

106  
n
,‚, 
”rÜs
.
	`New
("Expirationime must be specified")

108 
_
, 
ok
 :ğ
p
.
fÜmD©a
["key"]; !ok {

109  
n
,‚, 
”rÜs
.
	`New
("object key must be specified")

111 
_
, 
ok
 :ğ
p
.
fÜmD©a
["bucket"]; !ok {

112  
n
,‚, 
”rÜs
.
	`New
("bucket‚ame must be specified")

115 
buck‘Name
 :ğ
p
.
fÜmD©a
["bucket"]

117 
loÿtiÚ
, 
”r
 :ğ
c
.
	`g‘Buck‘LoÿtiÚ
(
buck‘Name
)

118 
”r
 !ğ
n
 {

119  
n
,‚, 
”r


122 
isVœtu®Ho¡
 :ğ
c
.
	`isVœtu®Ho¡StyËReque¡
(*c.
’dpoštURL
, 
buck‘Name
)

124 
u
, 
”r
 = 
c
.
	`makeT¬g‘URL
(
buck‘Name
, "", 
loÿtiÚ
, 
isVœtu®Ho¡
, 
n
)

125 
”r
 !ğ
n
 {

126  
n
,‚, 
”r


130 
üedV®ues
, 
”r
 :ğ
c
.
üedsProvid”
.
	`G‘
()

131 
”r
 !ğ
n
 {

132  
n
,‚, 
”r


135 
	`v¬
 (

136 
sigÃrTy³
 = 
üedV®ues
.
SigÃrTy³


137 
£ssiÚTok’
 = 
üedV®ues
.
SessiÚTok’


138 
acûssKeyID
 = 
üedV®ues
.
AcûssKeyID


139 
£ü‘AcûssKey
 = 
üedV®ues
.
Seü‘AcûssKey


142 
sigÃrTy³
.
	`IsAnÚymous
() {

143  
n
,‚, 
	`E¼Inv®idArgum’t
("Presigned operations‡re‚ot supported for‡nonymous credentials")

147 
t
 :ğ
time
.
	`Now
().
	`UTC
()

149 
sigÃrTy³
.
	`IsV2
() {

150 
pŞicyBa£64
 :ğ
p
.
	`ba£64
()

151 
p
.
fÜmD©a
["pŞicy"] = 
pŞicyBa£64


153 
s3uts
.
	`IsGoogËEndpošt
(*
c
.
’dpoštURL
) {

154 
p
.
fÜmD©a
["GoogËAcûssId"] = 
acûssKeyID


157 
p
.
fÜmD©a
["AWSAcûssKeyId"] = 
acûssKeyID


160 
p
.
fÜmD©a
["sigÇtu»"] = 
s3sigÃr
.
	`Po¡P»signSigÇtu»V2
(
pŞicyBa£64
, 
£ü‘AcûssKey
)

161  
u
, 
p
.
fÜmD©a
, 
n


165 
”r
 = 
p
.
	`addNewPŞicy
(
pŞicyCÚd™iÚ
{

166 
m©chTy³
: "eq",

167 
cÚd™iÚ
: "$x-amz-date",

168 
v®ue
: 
t
.
	`FÜm©
(
iso8601D©eFÜm©
),

169 }); 
”r
 !ğ
n
 {

170  
n
,‚, 
”r


174 
”r
 = 
p
.
	`addNewPŞicy
(
pŞicyCÚd™iÚ
{

175 
m©chTy³
: "eq",

176 
cÚd™iÚ
: "$x-amz-algorithm",

177 
v®ue
: 
signV4AlgÜ™hm
,

178 }); 
”r
 !ğ
n
 {

179  
n
,‚, 
”r


183 
üed’tŸl
 :ğ
s3sigÃr
.
	`G‘C»d’tŸl
(
acûssKeyID
, 
loÿtiÚ
, 
t
)

184 
”r
 = 
p
.
	`addNewPŞicy
(
pŞicyCÚd™iÚ
{

185 
m©chTy³
: "eq",

186 
cÚd™iÚ
: "$x-amz-credential",

187 
v®ue
: 
üed’tŸl
,

188 }); 
”r
 !ğ
n
 {

189  
n
,‚, 
”r


192 
£ssiÚTok’
 != "" {

193 
”r
 = 
p
.
	`addNewPŞicy
(
pŞicyCÚd™iÚ
{

194 
m©chTy³
: "eq",

195 
cÚd™iÚ
: "$x-amz-security-token",

196 
v®ue
: 
£ssiÚTok’
,

197 }); 
”r
 !ğ
n
 {

198  
n
,‚, 
”r


203 
pŞicyBa£64
 :ğ
p
.
	`ba£64
()

206 
p
.
fÜmD©a
["pŞicy"] = 
pŞicyBa£64


207 
p
.
fÜmD©a
["x-amz-®gÜ™hm"] = 
signV4AlgÜ™hm


208 
p
.
fÜmD©a
["x-amz-üed’tŸl"] = 
üed’tŸl


209 
p
.
fÜmD©a
["x-amz-d©e"] = 
t
.
	`FÜm©
(
iso8601D©eFÜm©
)

210 
£ssiÚTok’
 != "" {

211 
p
.
fÜmD©a
["x-amz-£cur™y-tok’"] = 
£ssiÚTok’


213 
p
.
fÜmD©a
["x-amz-sigÇtu»"] = 
s3sigÃr
.
	`Po¡P»signSigÇtu»V4
(
pŞicyBa£64
, 
t
, 
£ü‘AcûssKey
, 
loÿtiÚ
)

214  
u
, 
p
.
fÜmD©a
, 
n


215 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-bucket.go

18 
·ckage
 
mšio


20 
impÜt
 (

41 
	$func
 (
c
 
Cl›Á
è
	$MakeBuck‘
(
buck‘Name
 
¡ršg
, 
loÿtiÚ
 sŒšgè(
”r
 
”rÜ
) {

42 
deãr
 
	`func
() {

44 
”r
 =ğ
n
 {

45 
c
.
buck‘LocCache
.
	`S‘
(
buck‘Name
, 
loÿtiÚ
)

50 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘NameSŒiù
(
buck‘Name
);ƒ¼ !ğ
n
 {

51  
”r


55 
loÿtiÚ
 == "" {

56 
loÿtiÚ
 = "us-east-1"

59 
c
.
»giÚ
 != "" {

60 
loÿtiÚ
 = 
c
.
»giÚ


64 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

65 
buck‘Name
: bucketName,

66 
buck‘LoÿtiÚ
: 
loÿtiÚ
,

70 
loÿtiÚ
 != "us-east-1" &&†ocation != "" {

71 
ü—‹Buck‘CÚfig
 :ğ
ü—‹Buck‘CÚfigu¿tiÚ
{}

72 
ü—‹Buck‘CÚfig
.
LoÿtiÚ
 = 
loÿtiÚ


73 
v¬
 
ü—‹Buck‘CÚfigBy‹s
 []
by‹


74 
ü—‹Buck‘CÚfigBy‹s
, 
”r
 = 
xml
.
	`M¬sh®
(
ü—‹Buck‘CÚfig
)

75 
”r
 !ğ
n
 {

76  
”r


78 
»qM‘ad©a
.
cÚ‹ÁMD5Ba£64
 = 
	`sumMD5Ba£64
(
ü—‹Buck‘CÚfigBy‹s
)

79 
»qM‘ad©a
.
cÚ‹ÁSHA256Hex
 = 
	`sum256Hex
(
ü—‹Buck‘CÚfigBy‹s
)

80 
»qM‘ad©a
.
cÚ‹ÁBody
 = 
by‹s
.
	`NewR—d”
(
ü—‹Buck‘CÚfigBy‹s
)

81 
»qM‘ad©a
.
cÚ‹ÁL’gth
 = 
	`št64
(
	`Ën
(
ü—‹Buck‘CÚfigBy‹s
))

85 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "PUT", 
»qM‘ad©a
)

86 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

87 
”r
 !ğ
n
 {

88  
”r


91 
»¥
 !ğ
n
 {

92 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

93  
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

98  
n


99 
	}
}

102 
	$func
 (
c
 
Cl›Á
è
	$S‘Buck‘PŞicy
(
buck‘Name
, 
pŞicy
 
¡ršg
è
”rÜ
 {

104 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

105  
”r


109 
pŞicy
 == "" {

110  
c
.
	`»moveBuck‘PŞicy
(
buck‘Name
)

114  
c
.
	`putBuck‘PŞicy
(
buck‘Name
, 
pŞicy
)

115 
	}
}

118 
	$func
 (
c
 
Cl›Á
è
	$putBuck‘PŞicy
(
buck‘Name
, 
pŞicy
 
¡ršg
è
”rÜ
 {

120 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

121  
”r


126 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

127 
u¾V®ues
.
	`S‘
("policy", "")

130 
pŞicyR—d”
 :ğ
¡ršgs
.
	`NewR—d”
(
pŞicy
)

131 
b
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
pŞicyR—d”
)

132 
”r
 !ğ
n
 {

133  
”r


136 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

137 
buck‘Name
: bucketName,

138 
qu”yV®ues
: 
u¾V®ues
,

139 
cÚ‹ÁBody
: 
pŞicyR—d”
,

140 
cÚ‹ÁL’gth
: 
	`št64
(
	`Ën
(
b
)),

144 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "PUT", 
»qM‘ad©a
)

145 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

146 
”r
 !ğ
n
 {

147  
”r


149 
»¥
 !ğ
n
 {

150 
»¥
.
StusCode
 !ğ
h‰p
.
StusNoCÚ‹Á
 {

151  
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

154  
n


155 
	}
}

158 
	$func
 (
c
 
Cl›Á
è
	$»moveBuck‘PŞicy
(
buck‘Name
 
¡ršg
è
”rÜ
 {

160 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

161  
”r


165 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

166 
u¾V®ues
.
	`S‘
("policy", "")

169 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "DELETE", 
»que¡M‘ad©a
{

170 
buck‘Name
: bucketName,

171 
qu”yV®ues
: 
u¾V®ues
,

172 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

174 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

175 
”r
 !ğ
n
 {

176  
”r


178  
n


179 
	}
}

182 
	$func
 (
c
 
Cl›Á
è
	$S‘Buck‘Liãcyşe
(
buck‘Name
, 
liãcyşe
 
¡ršg
è
”rÜ
 {

184 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

185  
”r


189 
liãcyşe
 == "" {

190  
c
.
	`»moveBuck‘Liãcyşe
(
buck‘Name
)

194  
c
.
	`putBuck‘Liãcyşe
(
buck‘Name
, 
liãcyşe
)

195 
	}
}

198 
	$func
 (
c
 
Cl›Á
è
	$putBuck‘Liãcyşe
(
buck‘Name
, 
liãcyşe
 
¡ršg
è
”rÜ
 {

200 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

201  
”r


206 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

207 
u¾V®ues
.
	`S‘
("lifecycle", "")

210 
liãcyşeR—d”
 :ğ
¡ršgs
.
	`NewR—d”
(
liãcyşe
)

211 
b
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
liãcyşeR—d”
)

212 
”r
 !ğ
n
 {

213  
”r


216 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

217 
buck‘Name
: bucketName,

218 
qu”yV®ues
: 
u¾V®ues
,

219 
cÚ‹ÁBody
: 
liãcyşeR—d”
,

220 
cÚ‹ÁL’gth
: 
	`št64
(
	`Ën
(
b
)),

221 
cÚ‹ÁMD5Ba£64
: 
	`sumMD5Ba£64
(
b
),

225 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "PUT", 
»qM‘ad©a
)

226 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

227 
”r
 !ğ
n
 {

228  
”r


230 
»¥
 !ğ
n
 {

231 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

232  
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

235  
n


236 
	}
}

239 
	$func
 (
c
 
Cl›Á
è
	$»moveBuck‘Liãcyşe
(
buck‘Name
 
¡ršg
è
”rÜ
 {

241 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

242  
”r


246 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

247 
u¾V®ues
.
	`S‘
("lifecycle", "")

250 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "DELETE", 
»que¡M‘ad©a
{

251 
buck‘Name
: bucketName,

252 
qu”yV®ues
: 
u¾V®ues
,

253 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

255 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

256 
”r
 !ğ
n
 {

257  
”r


259  
n


260 
	}
}

263 
	$func
 (
c
 
Cl›Á
è
	$S‘Buck‘NÙifiÿtiÚ
(
buck‘Name
 
¡ršg
, 
buck‘NÙifiÿtiÚ
 
Buck‘NÙifiÿtiÚ
è
”rÜ
 {

265 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

266  
”r


271 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

272 
u¾V®ues
.
	`S‘
("notification", "")

274 
nÙifBy‹s
, 
”r
 :ğ
xml
.
	`M¬sh®
(
buck‘NÙifiÿtiÚ
)

275 
”r
 !ğ
n
 {

276  
”r


279 
nÙifBufãr
 :ğ
by‹s
.
	`NewR—d”
(
nÙifBy‹s
)

280 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

281 
buck‘Name
: bucketName,

282 
qu”yV®ues
: 
u¾V®ues
,

283 
cÚ‹ÁBody
: 
nÙifBufãr
,

284 
cÚ‹ÁL’gth
: 
	`št64
(
	`Ën
(
nÙifBy‹s
)),

285 
cÚ‹ÁMD5Ba£64
: 
	`sumMD5Ba£64
(
nÙifBy‹s
),

286 
cÚ‹ÁSHA256Hex
: 
	`sum256Hex
(
nÙifBy‹s
),

290 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "PUT", 
»qM‘ad©a
)

291 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

292 
”r
 !ğ
n
 {

293  
”r


295 
»¥
 !ğ
n
 {

296 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

297  
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

300  
n


301 
	}
}

304 
	$func
 (
c
 
Cl›Á
è
	$RemoveAÎBuck‘NÙifiÿtiÚ
(
buck‘Name
 
¡ršg
è
”rÜ
 {

305  
c
.
	`S‘Buck‘NÙifiÿtiÚ
(
buck‘Name
, 
Buck‘NÙifiÿtiÚ
{})

306 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-common.go

18 
·ckage
 
mšio


20 
impÜt
 (

30 
func
 
	$isObjeù
(
»ad”
 
io
.
R—d”
è(
ok
 
boŞ
) {

31 
_
, 
ok
 = 
»ad”
.(*
Objeù
)

33 
	}
}

36 
func
 
	$isR—dAt
(
»ad”
 
io
.
R—d”
è(
ok
 
boŞ
) {

37 
_
, 
ok
 = 
»ad”
.(
io
.
R—d”At
)

38 
ok
 {

39 
v¬
 
v
 *
os
.
Fe


40 
v
, 
ok
 = 
»ad”
.(*
os
.
Fe
)

41 
ok
 {

46 
_
, 
f
 :ğ
¿nge
 []
¡ršg
{

51 
f
 =ğ
v
.
	`Name
() {

52 
ok
 = 
çl£


59 
	}
}

71 
func
 
	$İtim®P¬tInfo
(
objeùSize
 
št64
è(
tÙ®P¬tsCouÁ
 , 
·¹Size
 iÁ64, 
Ï¡P¬tSize
 iÁ64, 
”r
 
”rÜ
) {

73 
objeùSize
 == -1 {

74 
objeùSize
 = 
maxMuÉ¬tPutObjeùSize


77 
objeùSize
 > 
maxMuÉ¬tPutObjeùSize
 {

78 
”r
 = 
	`E¼EÁ™yTooL¬ge
(
objeùSize
, 
maxMuÉ¬tPutObjeùSize
, "", "")

83 
·¹SizeFÉ
 :ğ
m©h
.
	`Ce
(
	`æßt64
(
objeùSize
 / 
maxP¬tsCouÁ
))

84 
·¹SizeFÉ
 = 
m©h
.
	`Ce
Õ¬tSizeFÉ/
mšP¬tSize
) * minPartSize

86 
tÙ®P¬tsCouÁ
 = (
m©h
.
	`Ce
(
	`æßt64
(
objeùSize
è/ 
·¹SizeFÉ
))

88 
·¹Size
 = 
	`št64
(
·¹SizeFÉ
)

90 
Ï¡P¬tSize
 = 
objeùSize
 - 
	`št64
(
tÙ®P¬tsCouÁ
-1)*
·¹Size


91  
tÙ®P¬tsCouÁ
, 
·¹Size
, 
Ï¡P¬tSize
, 
n


92 
	}
}

96 
	$func
 (
c
 
Cl›Á
è
	$ÃwU¶ßdID
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
PutObjeùO±iÚs
è(
u¶ßdID
 sŒšg, 
”r
 
”rÜ
) {

98 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

99  "", 
”r


101 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

102  "", 
”r


106 
š™MuÉ¬tU¶ßdResuÉ
, 
”r
 :ğ
c
.
	`š™Ÿ‹MuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

107 
”r
 !ğ
n
 {

108  "", 
”r


110  
š™MuÉ¬tU¶ßdResuÉ
.
U¶ßdID
, 
n


111 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-context.go

18 
·ckage
 
mšio


20 
impÜt
 (

26 
	$func
 (
c
 
Cl›Á
è
	$PutObjeùW™hCÚ‹xt
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
»ad”
 
io
.
R—d”
, 
objeùSize
 
št64
,

27 
İts
 
PutObjeùO±iÚs
è(
n
 
št64
, 
”r
 
”rÜ
) {

28 
”r
 = 
İts
.
	`v®id©e
()

29 
”r
 !ğ
n
 {

30  0, 
”r


32  
c
.
	`putObjeùCommÚ
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
objeùSize
, 
İts
)

33 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-copy.go

18 
·ckage
 
mšio


20 
impÜt
 (

30 
	$func
 (
c
 
Cl›Á
è
	$CİyObjeù
(
d¡
 
De¡š©iÚInfo
, 
¤c
 
SourûInfo
è
”rÜ
 {

31  
c
.
	`CİyObjeùW™hProg»ss
(
d¡
, 
¤c
, 
n
)

32 
	}
}

36 
	$func
 (
c
 
Cl›Á
è
	$CİyObjeùW™hProg»ss
(
d¡
 
De¡š©iÚInfo
, 
¤c
 
SourûInfo
, 
´og»ss
 
io
.
R—d”
è
”rÜ
 {

37 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

38 
k
, 
v
 :ğ
¿nge
 
¤c
.
H—d”s
 {

39 
h—d”
[
k
] = 
v


42 
v¬
 
”r
 
”rÜ


43 
v¬
 
size
 
št64


45 
´og»ss
 !ğ
n
 {

46 
size
, 
_
, _, 
”r
 = 
¤c
.
	`g‘Prİs
(
c
)

47 
”r
 !ğ
n
 {

48  
”r


52 
¤c
.
’üy±iÚ
 !ğ
n
 {

53 
’üy±
.
	`SSECİy
(
¤c
.
’üy±iÚ
).
	`M¬sh®
(
h—d”
)

56 
d¡
.
’üy±iÚ
 !ğ
n
 {

57 
d¡
.
’üy±iÚ
.
	`M¬sh®
(
h—d”
)

59 
k
, 
v
 :ğ
¿nge
 
d¡
.
	`g‘U£rM‘aH—d”sM­
(
Œue
) {

60 
h—d”
.
	`S‘
(
k
, 
v
)

63 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "PUT", 
»que¡M‘ad©a
{

64 
buck‘Name
: 
d¡
.
buck‘
,

65 
objeùName
: 
d¡
.
objeù
,

66 
cu¡omH—d”
: 
h—d”
,

68 
”r
 !ğ
n
 {

69  
”r


71 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

73 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

74  
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
d¡
.
buck‘
, d¡.
objeù
)

78 
´og»ss
 !ğ
n
 {

79 
io
.
	`CİyN
(
iout
.
Disÿrd
, 
´og»ss
, 
size
)

82  
n


83 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-file-context.go

18 
·ckage
 
mšio


20 
impÜt
 (

30 
	$func
 (
c
 
Cl›Á
è
	$FPutObjeùW™hCÚ‹xt
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
, 
feP©h
 
¡ršg
, 
İts
 
PutObjeùO±iÚs
è(
n
 
št64
, 
”r
 
”rÜ
) {

32 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

33  0, 
”r


35 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

36  0, 
”r


40 
feR—d”
, 
”r
 :ğ
os
.
	`O³n
(
feP©h
)

42 
”r
 !ğ
n
 {

43  0, 
”r


45 
deãr
 
feR—d”
.
	`Clo£
()

48 
feSt
, 
”r
 :ğ
feR—d”
.
	`St
()

49 
”r
 !ğ
n
 {

50  0, 
”r


54 
feSize
 :ğ
feSt
.
	`Size
()

58 
İts
.
CÚ‹ÁTy³
 == "" {

59 
İts
.
CÚ‹ÁTy³
 = 
mime
.
	`Ty³ByEx‹nsiÚ
(
f•©h
.
	`Ext
(
feP©h
)); opts.ContentType == "" {

60 
İts
.
CÚ‹ÁTy³
 = "application/octet-stream"

63  
c
.
	`PutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
feR—d”
, 
feSize
, 
İts
)

64 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-file.go

18 
·ckage
 
mšio


20 
impÜt
 (

25 
	$func
 (
c
 
Cl›Á
è
	$FPutObjeù
(
buck‘Name
, 
objeùName
, 
feP©h
 
¡ršg
, 
İts
 
PutObjeùO±iÚs
è(
n
 
št64
, 
”r
 
”rÜ
) {

26  
c
.
	`FPutObjeùW™hCÚ‹xt
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
feP©h
, 
İts
)

27 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-multipart.go

18 
·ckage
 
mšio


20 
impÜt
 (

40 
	$func
 (
c
 
Cl›Á
è
	$putObjeùMuÉ¬t
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
»ad”
 
io
.
R—d”
, 
size
 
št64
,

41 
İts
 
PutObjeùO±iÚs
è(
n
 
št64
, 
”r
 
”rÜ
) {

42 
n
, 
”r
 = 
c
.
	`putObjeùMuÉ¬tNoSŒ—m
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
İts
)

43 
”r
 !ğ
n
 {

44 
”rRe¥
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
)

47 
”rRe¥
.
Code
 =ğ"AcûssD’›d" && 
¡ršgs
.
	`CÚšs
Ó¼Re¥.
Mes§ge
, "Access Denied") {

49 
size
 > 
maxSšgËPutObjeùSize
 {

50  0, 
	`E¼EÁ™yTooL¬ge
(
size
, 
maxSšgËPutObjeùSize
, 
buck‘Name
, 
objeùName
)

53  
c
.
	`putObjeùNoChecksum
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
size
, 
İts
)

56  
n
, 
”r


57 
	}
}

59 
	$func
 (
c
 
Cl›Á
è
	$putObjeùMuÉ¬tNoSŒ—m
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
»ad”
 
io
.
R—d”
, 
İts
 
PutObjeùO±iÚs
è(
n
 
št64
, 
”r
 
”rÜ
) {

61 
”r
 = 
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

62  0, 
”r


64 
”r
 = 
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

65  0, 
”r


70 
v¬
 
tÙ®U¶ßdedSize
 
št64


73 
v¬
 
com¶MuÉ¬tU¶ßd
 
com¶‘eMuÉ¬tU¶ßd


76 
tÙ®P¬tsCouÁ
, 
·¹Size
, 
_
, 
”r
 :ğ
	`İtim®P¬tInfo
(-1)

77 
”r
 !ğ
n
 {

78  0, 
”r


82 
u¶ßdID
, 
”r
 :ğ
c
.
	`ÃwU¶ßdID
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

83 
”r
 !ğ
n
 {

84  0, 
”r


87 
deãr
 
	`func
() {

88 
”r
 !ğ
n
 {

89 
c
.
	`abÜtMuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
)

94 
·¹Numb”
 := 1

97 
·¹sInfo
 :ğ
	`make
(
m­
[]
ObjeùP¬t
)

100 
buf
 :ğ
	`make
([]
by‹
, 
·¹Size
)

101 
deãr
 
debug
.
	`F»eOSMemÜy
()

103 
·¹Numb”
 <ğ
tÙ®P¬tsCouÁ
 {

107 
hashAlgos
, 
hashSums
 :ğ
c
.
	`hashM©”Ÿls
()

109 
Ëngth
, 
rE¼
 :ğ
io
.
	`R—dFuÎ
(
»ad”
, 
buf
)

110 
rE¼
 =ğ
io
.
EOF
 {

113 
rE¼
 !ğ
n
 &&„E¼ !ğ
io
.
E¼UÃx³ùedEOF
 {

114  0, 
rE¼


118 
k
, 
v
 :ğ
¿nge
 
hashAlgos
 {

119 
v
.
	`Wr™e
(
buf
[:
Ëngth
])

120 
hashSums
[
k
] = 
v
.
	`Sum
(
n
)

125 
rd
 :ğ
	`ÃwHook
(
by‹s
.
	`NewR—d”
(
buf
[:
Ëngth
]), 
İts
.
Prog»ss
)

128 
	`v¬
 (

129 
md5Ba£64
 
¡ršg


130 
sha256Hex
 
¡ršg


132 
hashSums
["md5"] !ğ
n
 {

133 
md5Ba£64
 = 
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
hashSums
["md5"])

135 
hashSums
["sha256"] !ğ
n
 {

136 
sha256Hex
 = 
hex
.
	`EncodeToSŒšg
(
hashSums
["sha256"])

140 
v¬
 
objP¬t
 
ObjeùP¬t


141 
objP¬t
, 
”r
 = 
c
.
	`u¶ßdP¬t
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
, 
rd
, 
·¹Numb”
,

142 
md5Ba£64
, 
sha256Hex
, 
	`št64
(
Ëngth
), 
İts
.
S”v”SideEnüy±iÚ
)

143 
”r
 !ğ
n
 {

144  
tÙ®U¶ßdedSize
, 
”r


148 
·¹sInfo
[
·¹Numb”
] = 
objP¬t


151 
tÙ®U¶ßdedSize
 +ğ
	`št64
(
Ëngth
)

154 
·¹Numb”
++

158 
rE¼
 =ğ
io
.
EOF
 {

165 
i
 :ğ1; i < 
·¹Numb”
; i++ {

166 
·¹
, 
ok
 :ğ
·¹sInfo
[
i
]

167 !
ok
 {

168  0, 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Missšg…¬ˆnumb” %d", 
i
))

170 
com¶MuÉ¬tU¶ßd
.
P¬ts
 = 
	`­³nd
(com¶MuÉ¬tU¶ßd.P¬ts, 
Com¶‘eP¬t
{

171 
ETag
: 
·¹
.ETag,

172 
P¬tNumb”
: 
·¹
.PartNumber,

177 
sÜt
.
	`SÜt
(
	`com¶‘edP¬ts
(
com¶MuÉ¬tU¶ßd
.
P¬ts
))

178 
_
, 
”r
 = 
c
.
	`com¶‘eMuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
, 
com¶MuÉ¬tU¶ßd
);ƒ¼ !ğ
n
 {

179  
tÙ®U¶ßdedSize
, 
”r


183  
tÙ®U¶ßdedSize
, 
n


184 
	}
}

187 
	$func
 (
c
 
Cl›Á
è
	$š™Ÿ‹MuÉ¬tU¶ßd
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
PutObjeùO±iÚs
è(
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
, 
”rÜ
) {

189 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

190  
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
{}, 
”r


192 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

193  
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
{}, 
”r


197 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

198 
u¾V®ues
.
	`S‘
("uploads", "")

201 
cu¡omH—d”
 :ğ
İts
.
	`H—d”
()

203 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

204 
buck‘Name
: bucketName,

205 
objeùName
: objectName,

206 
qu”yV®ues
: 
u¾V®ues
,

207 
cu¡omH—d”
: customHeader,

211 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "POST", 
»qM‘ad©a
)

212 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

213 
”r
 !ğ
n
 {

214  
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
{}, 
”r


216 
»¥
 !ğ
n
 {

217 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

218  
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

222 
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
 := initiateMultipartUploadResult{}

223 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
)

224 
”r
 !ğ
n
 {

225  
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
, 
”r


227  
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
, 
n


228 
	}
}

231 
	$func
 (
c
 
Cl›Á
è
	$u¶ßdP¬t
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
 
¡ršg
, 
»ad”
 
io
.
R—d”
,

232 
·¹Numb”
 , 
md5Ba£64
, 
sha256Hex
 
¡ršg
, 
size
 
št64
, 
s£
 
’üy±
.
S”v”Side
è(
ObjeùP¬t
, 
”rÜ
) {

234 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

235  
ObjeùP¬t
{}, 
”r


237 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

238  
ObjeùP¬t
{}, 
”r


240 
size
 > 
maxP¬tSize
 {

241  
ObjeùP¬t
{}, 
	`E¼EÁ™yTooL¬ge
(
size
, 
maxP¬tSize
, 
buck‘Name
, 
objeùName
)

243 
size
 <= -1 {

244  
ObjeùP¬t
{}, 
	`E¼EÁ™yTooSm®l
(
size
, 
buck‘Name
, 
objeùName
)

246 
·¹Numb”
 <= 0 {

247  
ObjeùP¬t
{}, 
	`E¼Inv®idArgum’t
("Part‚umber cannot be‚egative orƒqualo zero.")

249 
u¶ßdID
 == "" {

250  
ObjeùP¬t
{}, 
	`E¼Inv®idArgum’t
("UploadID cannot beƒmpty.")

254 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

256 
u¾V®ues
.
	`S‘
("·¹Numb”", 
¡rcÚv
.
	`Itß
(
·¹Numb”
))

258 
u¾V®ues
.
	`S‘
("u¶ßdId", 
u¶ßdID
)

261 
cu¡omH—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

266 
s£
 !ğ
n
 && s£.
	`Ty³
(è=ğ
’üy±
.
SSEC
 {

267 
s£
.
	`M¬sh®
(
cu¡omH—d”
)

270 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

271 
buck‘Name
: bucketName,

272 
objeùName
: objectName,

273 
qu”yV®ues
: 
u¾V®ues
,

274 
cu¡omH—d”
: customHeader,

275 
cÚ‹ÁBody
: 
»ad”
,

276 
cÚ‹ÁL’gth
: 
size
,

277 
cÚ‹ÁMD5Ba£64
: 
md5Ba£64
,

278 
cÚ‹ÁSHA256Hex
: 
sha256Hex
,

282 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "PUT", 
»qM‘ad©a
)

283 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

284 
”r
 !ğ
n
 {

285  
ObjeùP¬t
{}, 
”r


287 
»¥
 !ğ
n
 {

288 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

289  
ObjeùP¬t
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

293 
objP¬t
 :ğ
ObjeùP¬t
{}

294 
objP¬t
.
Size
 = 
size


295 
objP¬t
.
P¬tNumb”
 = 
·¹Numb”


297 
objP¬t
.
ETag
 = 
¡ršgs
.
	`TrimP»fix
(
»¥
.
H—d”
.
	`G‘
("ETag"), "\"")

298 
objP¬t
.
ETag
 = 
¡ršgs
.
	`TrimSuffix
(objPart.ETag, "\"")

299  
objP¬t
, 
n


300 
	}
}

303 
	$func
 (
c
 
Cl›Á
è
	$com¶‘eMuÉ¬tU¶ßd
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
 
¡ršg
,

304 
com¶‘e
 
com¶‘eMuÉ¬tU¶ßd
è(
com¶‘eMuÉ¬tU¶ßdResuÉ
, 
”rÜ
) {

306 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

307  
com¶‘eMuÉ¬tU¶ßdResuÉ
{}, 
”r


309 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

310  
com¶‘eMuÉ¬tU¶ßdResuÉ
{}, 
”r


314 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

315 
u¾V®ues
.
	`S‘
("u¶ßdId", 
u¶ßdID
)

317 
com¶‘eMuÉ¬tU¶ßdBy‹s
, 
”r
 :ğ
xml
.
	`M¬sh®
(
com¶‘e
)

318 
”r
 !ğ
n
 {

319  
com¶‘eMuÉ¬tU¶ßdResuÉ
{}, 
”r


323 
com¶‘eMuÉ¬tU¶ßdBufãr
 :ğ
by‹s
.
	`NewR—d”
(
com¶‘eMuÉ¬tU¶ßdBy‹s
)

324 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

325 
buck‘Name
: bucketName,

326 
objeùName
: objectName,

327 
qu”yV®ues
: 
u¾V®ues
,

328 
cÚ‹ÁBody
: 
com¶‘eMuÉ¬tU¶ßdBufãr
,

329 
cÚ‹ÁL’gth
: 
	`št64
(
	`Ën
(
com¶‘eMuÉ¬tU¶ßdBy‹s
)),

330 
cÚ‹ÁSHA256Hex
: 
	`sum256Hex
(
com¶‘eMuÉ¬tU¶ßdBy‹s
),

334 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "POST", 
»qM‘ad©a
)

335 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

336 
”r
 !ğ
n
 {

337  
com¶‘eMuÉ¬tU¶ßdResuÉ
{}, 
”r


339 
»¥
 !ğ
n
 {

340 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

341  
com¶‘eMuÉ¬tU¶ßdResuÉ
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

346 
v¬
 
b
 []
by‹


347 
b
, 
”r
 = 
iout
.
	`R—dAÎ
(
»¥
.
Body
)

348 
”r
 !ğ
n
 {

349  
com¶‘eMuÉ¬tU¶ßdResuÉ
{}, 
”r


352 
com¶‘eMuÉ¬tU¶ßdResuÉ
 := completeMultipartUploadResult{}

353 
”r
 = 
	`xmlDecod”
(
by‹s
.
	`NewR—d”
(
b
), &
com¶‘eMuÉ¬tU¶ßdResuÉ
)

354 
”r
 !ğ
n
 {

356  
com¶‘eMuÉ¬tU¶ßdResuÉ
, 
”r


357 } 
com¶‘eMuÉ¬tU¶ßdResuÉ
.
Buck‘
 == "" {

363 
com¶‘eMuÉ¬tU¶ßdE¼
 :ğ
E¼ÜRe¥Ú£
{}

364 
”r
 = 
	`xmlDecod”
(
by‹s
.
	`NewR—d”
(
b
), &
com¶‘eMuÉ¬tU¶ßdE¼
)

365 
”r
 !ğ
n
 {

367  
com¶‘eMuÉ¬tU¶ßdResuÉ
, 
”r


369  
com¶‘eMuÉ¬tU¶ßdResuÉ
, 
com¶‘eMuÉ¬tU¶ßdE¼


371  
com¶‘eMuÉ¬tU¶ßdResuÉ
, 
n


372 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-streaming.go

18 
·ckage
 
mšio


20 
impÜt
 (

40 
	$func
 (
c
 
Cl›Á
è
	$putObjeùMuÉ¬tSŒ—m
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
,

41 
»ad”
 
io
.
R—d”
, 
size
 
št64
, 
İts
 
PutObjeùO±iÚs
è(
n
 iÁ64, 
”r
 
”rÜ
) {

43 !
	`isObjeù
(
»ad”
è&& 
	`isR—dAt
(reader) {

45 
n
, 
”r
 = 
c
.
	`putObjeùMuÉ¬tSŒ—mFromR—dAt
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
.(
io
.
R—d”At
), 
size
, 
İts
)

47 
n
, 
”r
 = 
c
.
	`putObjeùMuÉ¬tSŒ—mNoChecksum
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
size
, 
İts
)

49 
”r
 !ğ
n
 {

50 
”rRe¥
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
)

53 
”rRe¥
.
Code
 =ğ"AcûssD’›d" && 
¡ršgs
.
	`CÚšs
Ó¼Re¥.
Mes§ge
, "Access Denied") {

55 
size
 > 
maxSšgËPutObjeùSize
 {

56  0, 
	`E¼EÁ™yTooL¬ge
(
size
, 
maxSšgËPutObjeùSize
, 
buck‘Name
, 
objeùName
)

59  
c
.
	`putObjeùNoChecksum
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
size
, 
İts
)

62  
n
, 
”r


63 
	}
}

66 
ty³
 
u¶ßdedP¬tRes
 struct {

67 
E¼Ü
 
”rÜ


68 
P¬tNum
 

69 
Size
 
št64


70 
P¬t
 *
	mObjeùP¬t


73 
ty³
 
u¶ßdP¬tReq
 struct {

74 
P¬tNum
 

75 
P¬t
 *
	mObjeùP¬t


89 
	$func
 (
c
 
Cl›Á
è
	$putObjeùMuÉ¬tSŒ—mFromR—dAt
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
,

90 
»ad”
 
io
.
R—d”At
, 
size
 
št64
, 
İts
 
PutObjeùO±iÚs
è(
n
 iÁ64, 
”r
 
”rÜ
) {

92 
”r
 = 
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

93  0, 
”r


95 
”r
 = 
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

96  0, 
”r


100 
tÙ®P¬tsCouÁ
, 
·¹Size
, 
Ï¡P¬tSize
, 
”r
 :ğ
	`İtim®P¬tInfo
(
size
)

101 
”r
 !ğ
n
 {

102  0, 
”r


106 
u¶ßdID
, 
”r
 :ğ
c
.
	`ÃwU¶ßdID
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

107 
”r
 !ğ
n
 {

108  0, 
”r


115 
deãr
 
	`func
() {

116 
”r
 !ğ
n
 {

117 
c
.
	`abÜtMuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
)

122 
v¬
 
tÙ®U¶ßdedSize
 
št64


125 
v¬
 
com¶MuÉ¬tU¶ßd
 
com¶‘eMuÉ¬tU¶ßd


130 
u¶ßdP¬tsCh
 :ğ
	`make
(
chª
 
u¶ßdP¬tReq
, 10000)

135 
u¶ßdedP¬tsCh
 :ğ
	`make
(
chª
 
u¶ßdedP¬tRes
, 10000)

138 
Ï¡P¬tNumb”
 :ğ
tÙ®P¬tsCouÁ


141 
p
 :ğ1;… <ğ
tÙ®P¬tsCouÁ
;…++ {

142 
u¶ßdP¬tsCh
 <- 
u¶ßdP¬tReq
{
P¬tNum
: 
p
, 
P¬t
: 
n
}

144 
	`şo£
(
u¶ßdP¬tsCh
)

146 
w
 :ğ1; w <ğ
İts
.
	`g‘NumTh»ads
(); w++ {

147 
go
 
	`func
(
·¹Size
 
št64
) {

149 
u¶ßdReq
 :ğ
¿nge
 
u¶ßdP¬tsCh
 {

154 
»adOff£t
 :ğ
	`št64
(
u¶ßdReq
.
P¬tNum
-1è* 
·¹Size


158 
u¶ßdReq
.
P¬tNum
 =ğ
Ï¡P¬tNumb”
 {

159 
»adOff£t
 = (
size
 - 
Ï¡P¬tSize
)

160 
·¹Size
 = 
Ï¡P¬tSize


164 
£ùiÚR—d”
 :ğ
	`ÃwHook
(
io
.
	`NewSeùiÚR—d”
(
»ad”
, 
»adOff£t
, 
·¹Size
), 
İts
.
Prog»ss
)

167 
v¬
 
objP¬t
 
ObjeùP¬t


168 
objP¬t
, 
”r
 = 
c
.
	`u¶ßdP¬t
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
,

169 
£ùiÚR—d”
, 
u¶ßdReq
.
P¬tNum
,

170 "", "", 
·¹Size
, 
İts
.
S”v”SideEnüy±iÚ
)

171 
”r
 !ğ
n
 {

172 
u¶ßdedP¬tsCh
 <- 
u¶ßdedP¬tRes
{

173 
Size
: 0,

174 
E¼Ü
: 
”r
,

181 
u¶ßdReq
.
P¬t
 = &
objP¬t


184 
u¶ßdedP¬tsCh
 <- 
u¶ßdedP¬tRes
{

185 
Size
: 
objP¬t
.Size,

186 
P¬tNum
: 
u¶ßdReq
.PartNum,

187 
P¬t
: 
u¶ßdReq
.Part,

188 
E¼Ü
: 
n
,

191 }(
·¹Size
)

196 
u
 :ğ1; u <ğ
tÙ®P¬tsCouÁ
; u++ {

197 
u¶ßdRes
 :ğ<-
u¶ßdedP¬tsCh


198 
u¶ßdRes
.
E¼Ü
 !ğ
n
 {

199  
tÙ®U¶ßdedSize
, 
u¶ßdRes
.
E¼Ü


203 
·¹
 :ğ
u¶ßdRes
.
P¬t


204 
·¹
 =ğ
n
 {

205  0, 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Missšg…¬ˆnumb” %d", 
u¶ßdRes
.
P¬tNum
))

208 
tÙ®U¶ßdedSize
 +ğ
u¶ßdRes
.
Size


210 
com¶MuÉ¬tU¶ßd
.
P¬ts
 = 
	`­³nd
(com¶MuÉ¬tU¶ßd.P¬ts, 
Com¶‘eP¬t
{

211 
ETag
: 
·¹
.ETag,

212 
P¬tNumb”
: 
·¹
.PartNumber,

217 
tÙ®U¶ßdedSize
 !ğ
size
 {

218  
tÙ®U¶ßdedSize
, 
	`E¼UÃx³ùedEOF
ÑÙ®U¶ßdedSize, 
size
, 
buck‘Name
, 
objeùName
)

222 
sÜt
.
	`SÜt
(
	`com¶‘edP¬ts
(
com¶MuÉ¬tU¶ßd
.
P¬ts
))

223 
_
, 
”r
 = 
c
.
	`com¶‘eMuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
, 
com¶MuÉ¬tU¶ßd
)

224 
”r
 !ğ
n
 {

225  
tÙ®U¶ßdedSize
, 
”r


229  
tÙ®U¶ßdedSize
, 
n


230 
	}
}

232 
	$func
 (
c
 
Cl›Á
è
	$putObjeùMuÉ¬tSŒ—mNoChecksum
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
,

233 
»ad”
 
io
.
R—d”
, 
size
 
št64
, 
İts
 
PutObjeùO±iÚs
è(
n
 iÁ64, 
”r
 
”rÜ
) {

235 
”r
 = 
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

236  0, 
”r


238 
”r
 = 
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

239  0, 
”r


243 
tÙ®P¬tsCouÁ
, 
·¹Size
, 
Ï¡P¬tSize
, 
”r
 :ğ
	`İtim®P¬tInfo
(
size
)

244 
”r
 !ğ
n
 {

245  0, 
”r


248 
u¶ßdID
, 
”r
 :ğ
c
.
	`ÃwU¶ßdID
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

249 
”r
 !ğ
n
 {

250  0, 
”r


257 
deãr
 
	`func
() {

258 
”r
 !ğ
n
 {

259 
c
.
	`abÜtMuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
)

264 
v¬
 
tÙ®U¶ßdedSize
 
št64


267 
·¹sInfo
 :ğ
	`make
(
m­
[]
ObjeùP¬t
)

270 
v¬
 
·¹Numb”
 

271 
·¹Numb”
 = 1;…¬tNumb” <ğ
tÙ®P¬tsCouÁ
;…artNumber++ {

274 
hookR—d”
 :ğ
	`ÃwHook
(
»ad”
, 
İts
.
Prog»ss
)

277 
·¹Numb”
 =ğ
tÙ®P¬tsCouÁ
 {

278 
·¹Size
 = 
Ï¡P¬tSize


280 
v¬
 
objP¬t
 
ObjeùP¬t


281 
objP¬t
, 
”r
 = 
c
.
	`u¶ßdP¬t
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
,

282 
io
.
	`Lim™R—d”
(
hookR—d”
, 
·¹Size
),

283 
·¹Numb”
, "", "", 
·¹Size
, 
İts
.
S”v”SideEnüy±iÚ
)

284 
”r
 !ğ
n
 {

285  
tÙ®U¶ßdedSize
, 
”r


289 
·¹sInfo
[
·¹Numb”
] = 
objP¬t


292 
tÙ®U¶ßdedSize
 +ğ
·¹Size


296 
size
 > 0 {

297 
tÙ®U¶ßdedSize
 !ğ
size
 {

298  
tÙ®U¶ßdedSize
, 
	`E¼UÃx³ùedEOF
ÑÙ®U¶ßdedSize, 
size
, 
buck‘Name
, 
objeùName
)

303 
v¬
 
com¶MuÉ¬tU¶ßd
 
com¶‘eMuÉ¬tU¶ßd


307 
i
 :ğ1; i < 
·¹Numb”
; i++ {

308 
·¹
, 
ok
 :ğ
·¹sInfo
[
i
]

309 !
ok
 {

310  0, 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Missšg…¬ˆnumb” %d", 
i
))

312 
com¶MuÉ¬tU¶ßd
.
P¬ts
 = 
	`­³nd
(com¶MuÉ¬tU¶ßd.P¬ts, 
Com¶‘eP¬t
{

313 
ETag
: 
·¹
.ETag,

314 
P¬tNumb”
: 
·¹
.PartNumber,

319 
sÜt
.
	`SÜt
(
	`com¶‘edP¬ts
(
com¶MuÉ¬tU¶ßd
.
P¬ts
))

320 
_
, 
”r
 = 
c
.
	`com¶‘eMuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
, 
com¶MuÉ¬tU¶ßd
)

321 
”r
 !ğ
n
 {

322  
tÙ®U¶ßdedSize
, 
”r


326  
tÙ®U¶ßdedSize
, 
n


327 
	}
}

331 
	$func
 (
c
 
Cl›Á
è
	$putObjeùNoChecksum
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
»ad”
 
io
.
R—d”
, 
size
 
št64
, 
İts
 
PutObjeùO±iÚs
è(
n
 iÁ64, 
”r
 
”rÜ
) {

333 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

334  0, 
”r


336 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

337  0, 
”r


342 
size
 < 0 && !
s3uts
.
	`IsGoogËEndpošt
(*
c
.
’dpoštURL
) {

343  0, 
	`E¼EÁ™yTooSm®l
(
size
, 
buck‘Name
, 
objeùName
)

345 
size
 > 0 {

346 
	`isR—dAt
(
»ad”
è&& !
	`isObjeù
(reader) {

347 
£ek”
, 
_
 :ğ
»ad”
.(
io
.
S“k”
)

348 
off£t
, 
”r
 :ğ
£ek”
.
	`S“k
(0, 
io
.
S“kCu¼’t
)

349 
”r
 !ğ
n
 {

350  0, 
	`E¼Inv®idArgum’t
(
”r
.
	`E¼Ü
())

352 
»ad”
 = 
io
.
	`NewSeùiÚR—d”
Ô—d”.(io.
R—d”At
), 
off£t
, 
size
)

358 
»adS“k”
 :ğ
	`ÃwHook
(
»ad”
, 
İts
.
Prog»ss
)

362 
¡
, 
”r
 :ğ
c
.
	`putObjeùDo
(
ùx
, 
buck‘Name
, 
objeùName
, 
»adS“k”
, "", "", 
size
, 
İts
)

363 
”r
 !ğ
n
 {

364  0, 
”r


366 
¡
.
Size
 !ğ
size
 {

367  0, 
	`E¼UÃx³ùedEOF
(
¡
.
Size
, 
size
, 
buck‘Name
, 
objeùName
)

369  
size
, 
n


370 
	}
}

374 
	$func
 (
c
 
Cl›Á
è
	$putObjeùDo
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
»ad”
 
io
.
R—d”
, 
md5Ba£64
, 
sha256Hex
 sŒšg, 
size
 
št64
, 
İts
 
PutObjeùO±iÚs
è(
ObjeùInfo
, 
”rÜ
) {

376 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

377  
ObjeùInfo
{}, 
”r


379 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

380  
ObjeùInfo
{}, 
”r


383 
cu¡omH—d”
 :ğ
İts
.
	`H—d”
()

386 
»qM‘ad©a
 :ğ
»que¡M‘ad©a
{

387 
buck‘Name
: bucketName,

388 
objeùName
: objectName,

389 
cu¡omH—d”
: customHeader,

390 
cÚ‹ÁBody
: 
»ad”
,

391 
cÚ‹ÁL’gth
: 
size
,

392 
cÚ‹ÁMD5Ba£64
: 
md5Ba£64
,

393 
cÚ‹ÁSHA256Hex
: 
sha256Hex
,

397 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "PUT", 
»qM‘ad©a
)

398 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

399 
”r
 !ğ
n
 {

400  
ObjeùInfo
{}, 
”r


402 
»¥
 !ğ
n
 {

403 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

404  
ObjeùInfo
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

408 
v¬
 
objInfo
 
ObjeùInfo


410 
objInfo
.
ETag
 = 
¡ršgs
.
	`TrimP»fix
(
»¥
.
H—d”
.
	`G‘
("ETag"), "\"")

411 
objInfo
.
ETag
 = 
¡ršgs
.
	`TrimSuffix
(objInfo.ETag, "\"")

413 
objInfo
.
Size
 = 
size


416  
objInfo
, 
n


417 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object.go

18 
·ckage
 
mšio


20 
impÜt
 (

35 
ty³
 
PutObjeùO±iÚs
 struct {

36 
U£rM‘ad©a
 
	mm­
[
¡ršg
]string

37 
Prog»ss
 
	mio
.
R—d”


38 
CÚ‹ÁTy³
 
¡ršg


39 
CÚ‹ÁEncodšg
 
¡ršg


40 
CÚ‹ÁDi¥os™iÚ
 
¡ršg


41 
CÚ‹ÁLªguage
 
¡ršg


42 
CacheCÚŒŞ
 
¡ršg


43 
S”v”SideEnüy±iÚ
 
	m’üy±
.
S”v”Side


44 
NumTh»ads
 
ušt


45 
StÜageCÏss
 
¡ršg


46 
Webs™eRedœeùLoÿtiÚ
 
	m¡ršg


51 
	$func
 (
İts
 
PutObjeùO±iÚs
è
	$g‘NumTh»ads
(è(
numTh»ads
 ) {

52 
İts
.
NumTh»ads
 > 0 {

53 
numTh»ads
 = (
İts
.
NumTh»ads
)

55 
numTh»ads
 = 
tÙ®WÜk”s


58 
	}
}

62 
	$func
 (
İts
 
PutObjeùO±iÚs
è
	$H—d”
(è(
h—d”
 
h‰p
.
H—d”
) {

63 
h—d”
 = 
	`make
(
h‰p
.
H—d”
)

65 
İts
.
CÚ‹ÁTy³
 != "" {

66 
h—d”
["CÚ‹Á-Ty³"] = []
¡ršg
{
İts
.
CÚ‹ÁTy³
}

68 
h—d”
["CÚ‹Á-Ty³"] = []
¡ršg
{"application/octet-stream"}

70 
İts
.
CÚ‹ÁEncodšg
 != "" {

71 
h—d”
["CÚ‹Á-Encodšg"] = []
¡ršg
{
İts
.
CÚ‹ÁEncodšg
}

73 
İts
.
CÚ‹ÁDi¥os™iÚ
 != "" {

74 
h—d”
["CÚ‹Á-Di¥os™iÚ"] = []
¡ršg
{
İts
.
CÚ‹ÁDi¥os™iÚ
}

76 
İts
.
CÚ‹ÁLªguage
 != "" {

77 
h—d”
["CÚ‹Á-Lªguage"] = []
¡ršg
{
İts
.
CÚ‹ÁLªguage
}

79 
İts
.
CacheCÚŒŞ
 != "" {

80 
h—d”
["Cache-CÚŒŞ"] = []
¡ršg
{
İts
.
CacheCÚŒŞ
}

82 
İts
.
S”v”SideEnüy±iÚ
 !ğ
n
 {

83 
İts
.
S”v”SideEnüy±iÚ
.
	`M¬sh®
(
h—d”
)

85 
İts
.
StÜageCÏss
 != "" {

86 
h—d”
[
amzStÜageCÏss
] = []
¡ršg
{
İts
.
StÜageCÏss
}

88 
İts
.
Webs™eRedœeùLoÿtiÚ
 != "" {

89 
h—d”
[
amzWebs™eRedœeùLoÿtiÚ
] = []
¡ršg
{
İts
.
Webs™eRedœeùLoÿtiÚ
}

91 
k
, 
v
 :ğ
¿nge
 
İts
.
U£rM‘ad©a
 {

92 !
	`isAmzH—d”
(
k
è&& !
	`isSnd¬dH—d”
(kè&& !
	`isStÜageCÏssH—d”
(k) {

93 
h—d”
["X-Amz-M‘a-"+
k
] = []
¡ršg
{
v
}

95 
h—d”
[
k
] = []
¡ršg
{
v
}

99 
	}
}

102 
	$func
 (
İts
 
PutObjeùO±iÚs
è
	$v®id©e
(è(
”r
 
”rÜ
) {

103 
k
, 
v
 :ğ
¿nge
 
İts
.
U£rM‘ad©a
 {

104 !
h‰pguts
.
	`V®idH—d”F›ldName
(
k
è|| 
	`isSnd¬dH—d”
(kè|| 
	`isSSEH—d”
(kè|| 
	`isStÜageCÏssH—d”
(k) {

105  
	`E¼Inv®idArgum’t
(
k
 + " unsupported user defined metadata‚ame")

107 !
h‰pguts
.
	`V®idH—d”F›ldV®ue
(
v
) {

108  
	`E¼Inv®idArgum’t
(
v
 + " unsupported user defined metadata value")

111  
n


112 
	}
}

116 
ty³
 
com¶‘edP¬ts
 []
Com¶‘eP¬t


118 
	$func
 (
a
 
com¶‘edP¬ts
è
	$L’
(è{  
	`Ën
(
a
è
	}
}

119 
	$func
 (
a
 
com¶‘edP¬ts
è
	$Sw­
(
i
, 
j
 è{ 
a
[i],‡[j] =‡[j],‡[i] 
	}
}

120 
	$func
 (
a
 
com¶‘edP¬ts
è
	$Less
(
i
, 
j
 è
boŞ
 {  
a
[i].
P¬tNumb”
 <‡[j].P¬tNumb” 
	}
}

133 
	$func
 (
c
 
Cl›Á
è
	$PutObjeù
(
buck‘Name
, 
objeùName
 
¡ršg
, 
»ad”
 
io
.
R—d”
, 
objeùSize
 
št64
,

134 
İts
 
PutObjeùO±iÚs
è(
n
 
št64
, 
”r
 
”rÜ
) {

135  
c
.
	`PutObjeùW™hCÚ‹xt
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
»ad”
, 
objeùSize
, 
İts
)

136 
	}
}

138 
	$func
 (
c
 
Cl›Á
è
	$putObjeùCommÚ
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
»ad”
 
io
.
R—d”
, 
size
 
št64
, 
İts
 
PutObjeùO±iÚs
è(
n
 iÁ64, 
”r
 
”rÜ
) {

140 
size
 > 
	`št64
(
maxMuÉ¬tPutObjeùSize
) {

141  0, 
	`E¼EÁ™yTooL¬ge
(
size
, 
maxMuÉ¬tPutObjeùSize
, 
buck‘Name
, 
objeùName
)

145 
s3uts
.
	`IsGoogËEndpošt
(*
c
.
’dpoštURL
) {

147  
c
.
	`putObjeùNoChecksum
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
size
, 
İts
)

150 
c
.
ov”rideSigÃrTy³
.
	`IsV2
() {

151 
size
 >ğ0 && siz< 
mšP¬tSize
 {

152  
c
.
	`putObjeùNoChecksum
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
size
, 
İts
)

154  
c
.
	`putObjeùMuÉ¬t
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
size
, 
İts
)

156 
size
 < 0 {

157  
c
.
	`putObjeùMuÉ¬tSŒ—mNoL’gth
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
İts
)

160 
size
 < 
mšP¬tSize
 {

161  
c
.
	`putObjeùNoChecksum
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
size
, 
İts
)

164  
c
.
	`putObjeùMuÉ¬tSŒ—m
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
size
, 
İts
)

165 
	}
}

167 
	$func
 (
c
 
Cl›Á
è
	$putObjeùMuÉ¬tSŒ—mNoL’gth
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
»ad”
 
io
.
R—d”
, 
İts
 
PutObjeùO±iÚs
è(
n
 
št64
, 
”r
 
”rÜ
) {

169 
”r
 = 
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

170  0, 
”r


172 
”r
 = 
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

173  0, 
”r


178 
v¬
 
tÙ®U¶ßdedSize
 
št64


181 
v¬
 
com¶MuÉ¬tU¶ßd
 
com¶‘eMuÉ¬tU¶ßd


184 
tÙ®P¬tsCouÁ
, 
·¹Size
, 
_
, 
”r
 :ğ
	`İtim®P¬tInfo
(-1)

185 
”r
 !ğ
n
 {

186  0, 
”r


189 
u¶ßdID
, 
”r
 :ğ
c
.
	`ÃwU¶ßdID
(
ùx
, 
buck‘Name
, 
objeùName
, 
İts
)

190 
”r
 !ğ
n
 {

191  0, 
”r


194 
deãr
 
	`func
() {

195 
”r
 !ğ
n
 {

196 
c
.
	`abÜtMuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
)

201 
·¹Numb”
 := 1

204 
·¹sInfo
 :ğ
	`make
(
m­
[]
ObjeùP¬t
)

207 
buf
 :ğ
	`make
([]
by‹
, 
·¹Size
)

208 
deãr
 
debug
.
	`F»eOSMemÜy
()

210 
·¹Numb”
 <ğ
tÙ®P¬tsCouÁ
 {

211 
Ëngth
, 
rE¼
 :ğ
io
.
	`R—dFuÎ
(
»ad”
, 
buf
)

212 
rE¼
 =ğ
io
.
EOF
 && 
·¹Numb”
 > 1 {

215 
rE¼
 !ğ
n
 &&„E¼ !ğ
io
.
E¼UÃx³ùedEOF
 &&„E¼ !ğio.
EOF
 {

216  0, 
rE¼


220 
rd
 :ğ
	`ÃwHook
(
by‹s
.
	`NewR—d”
(
buf
[:
Ëngth
]), 
İts
.
Prog»ss
)

223 
v¬
 
objP¬t
 
ObjeùP¬t


224 
objP¬t
, 
”r
 = 
c
.
	`u¶ßdP¬t
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
, 
rd
, 
·¹Numb”
,

225 "", "", 
	`št64
(
Ëngth
), 
İts
.
S”v”SideEnüy±iÚ
)

226 
”r
 !ğ
n
 {

227  
tÙ®U¶ßdedSize
, 
”r


231 
·¹sInfo
[
·¹Numb”
] = 
objP¬t


234 
tÙ®U¶ßdedSize
 +ğ
	`št64
(
Ëngth
)

237 
·¹Numb”
++

241 
rE¼
 =ğ
io
.
EOF
 {

248 
i
 :ğ1; i < 
·¹Numb”
; i++ {

249 
·¹
, 
ok
 :ğ
·¹sInfo
[
i
]

250 !
ok
 {

251  0, 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Missšg…¬ˆnumb” %d", 
i
))

253 
com¶MuÉ¬tU¶ßd
.
P¬ts
 = 
	`­³nd
(com¶MuÉ¬tU¶ßd.P¬ts, 
Com¶‘eP¬t
{

254 
ETag
: 
·¹
.ETag,

255 
P¬tNumb”
: 
·¹
.PartNumber,

260 
sÜt
.
	`SÜt
(
	`com¶‘edP¬ts
(
com¶MuÉ¬tU¶ßd
.
P¬ts
))

261 
_
, 
”r
 = 
c
.
	`com¶‘eMuÉ¬tU¶ßd
(
ùx
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
, 
com¶MuÉ¬tU¶ßd
);ƒ¼ !ğ
n
 {

262  
tÙ®U¶ßdedSize
, 
”r


266  
tÙ®U¶ßdedSize
, 
n


267 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object_test.go

17 
·ckage
 
mšio


19 
impÜt
 (

23 
func
 
	$Te¡PutObjeùO±iÚsV®id©e
(
t
 *
‹¡šg
.
T
) {

24 
‹¡Ca£s
 := []struct {

25 
Çme
, 
v®ue
 
¡ršg


26 
shouldPass
 
boŞ


29 {"X-Amz-M©desc", "bÏh", 
çl£
},

30 {"x-amz-m‘a-X-Amz-Iv", "bÏh", 
çl£
},

31 {"x-amz-m‘a-X-Amz-Key", "bÏh", 
çl£
},

32 {"x-amz-m‘a-X-Amz-M©desc", "bÏh", 
çl£
},

33 {"Iˆha ¥aûs", "v", 
çl£
},

34 {"It,has@Ëg®=ch¬aù”s", "v", 
çl£
},

35 {"X-Amz-Iv", "bÏh", 
çl£
},

36 {"X-Amz-Key", "bÏh", 
çl£
},

37 {"X-Amz-Key-´efixed-h—d”", "bÏh", 
çl£
},

38 {"CÚ‹Á-Ty³", "cu¡om/cÚ‹Á-ty³", 
çl£
},

39 {"cÚ‹Á-ty³", "cu¡om/cÚ‹Á-ty³", 
çl£
},

40 {"CÚ‹Á-Encodšg", "gz", 
çl£
},

41 {"Cache-CÚŒŞ", "bÏh", 
çl£
},

42 {"CÚ‹Á-Di¥os™iÚ", "som‘hšg", 
çl£
},

43 {"CÚ‹Á-Lªguage", "som–ªguage", 
çl£
},

46 {"my-cu¡om-h—d”", "bÏh", 
Œue
},

47 {"cu¡om-X-Amz-Key-middË", "bÏh", 
Œue
},

48 {"my-cu¡om-h—d”-X-Amz-Key", "bÏh", 
Œue
},

49 {"bÏh-X-Amz-M©desc", "bÏh", 
Œue
},

50 {"X-Amz-M©Desc-suffix", "bÏh", 
Œue
},

51 {"It-Is-Fše", "v", 
Œue
},

52 {"Numb”s-098987987-Should-WÜk", "v", 
Œue
},

53 {"C¿zy-!#$%&'*+-.^_`|~-Should-193832-Be-Fše", "v", 
Œue
},

55 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

56 
”r
 :ğ
PutObjeùO±iÚs
{
U£rM‘ad©a
: 
m­
[
¡ršg
]string{

57 
‹¡Ca£
.
Çme
:e¡Ca£.
v®ue
,

58 }}.
	`v®id©e
()

59 
‹¡Ca£
.
shouldPass
 && 
”r
 !ğ
n
 {

60 
t
.
	`E¼Üf
("Te¡ %d - ouuˆdid‚Ù m©ch w™h„eã»nû„esuÉs, %s", 
i
+1, 
”r
)

63 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-remove.go

18 
·ckage
 
mšio


20 
impÜt
 (

35 
	$func
 (
c
 
Cl›Á
è
	$RemoveBuck‘
(
buck‘Name
 
¡ršg
è
”rÜ
 {

37 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

38  
”r


41 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "DELETE", 
»que¡M‘ad©a
{

42 
buck‘Name
: bucketName,

43 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

45 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

46 
”r
 !ğ
n
 {

47  
”r


49 
»¥
 !ğ
n
 {

50 
»¥
.
StusCode
 !ğ
h‰p
.
StusNoCÚ‹Á
 {

51  
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

56 
c
.
buck‘LocCache
.
	`D–‘e
(
buck‘Name
)

58  
n


59 
	}
}

62 
	$func
 (
c
 
Cl›Á
è
	$RemoveObjeù
(
buck‘Name
, 
objeùName
 
¡ršg
è
”rÜ
 {

64 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

65  
”r


67 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

68  
”r


71 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "DELETE", 
»que¡M‘ad©a
{

72 
buck‘Name
: bucketName,

73 
objeùName
: objectName,

74 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

76 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

77 
”r
 !ğ
n
 {

78  
”r


80 
»¥
 !ğ
n
 {

82 
»¥
.
StusCode
 !ğ
h‰p
.
StusNoCÚ‹Á
 {

83  
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

90  
n


91 
	}
}

94 
ty³
 
RemoveObjeùE¼Ü
 struct {

95 
ObjeùName
 
¡ršg


96 
E¼
 
	m”rÜ


100 
func
 
g’”©eRemoveMuÉiObjeùsReque¡
(
objeùs
 []
¡ršg
è[]
	gby‹
 {

101 
	grmObjeùs
 :ğ[]
d–‘eObjeù
{}

102 
_
, 
	gobj
 :ğ
¿nge
 
objeùs
 {

103 
rmObjeùs
 = 
­³nd
ÔmObjeùs, 
d–‘eObjeù
{
Key
: 
obj
})

105 
xmlBy‹s
, 
	g_
 :ğ
xml
.
M¬sh®
(
d–‘eMuÉiObjeùs
{
Objeùs
: 
rmObjeùs
, 
Qu›t
: 
Œue
})

106  
xmlBy‹s


111 
func
 
´oûssRemoveMuÉiObjeùsRe¥Ú£
(
body
 
io
.
R—d”
, 
objeùs
 []
¡ršg
, 
”rÜCh
 
chª
<- 
RemoveObjeùE¼Ü
) {

113 
	grmResuÉ
 :ğ&
d–‘eMuÉiObjeùsResuÉ
{}

114 
”r
 :ğ
xmlDecod”
(
body
, 
rmResuÉ
)

115 
	g”r
 !ğ
n
 {

116 
”rÜCh
 <- 
RemoveObjeùE¼Ü
{
ObjeùName
: "", 
E¼
: 
”r
}

121 
_
, 
	gobj
 :ğ
¿nge
 
rmResuÉ
.
UnD–‘edObjeùs
 {

122 
”rÜCh
 <- 
RemoveObjeùE¼Ü
{

123 
ObjeùName
: 
obj
.
Key
,

124 
E¼
: 
E¼ÜRe¥Ú£
{

125 
Code
: 
obj
.Code,

126 
Mes§ge
: 
obj
.Message,

133 
	$func
 (
c
 
Cl›Á
è
	`RemoveObjeùsW™hCÚ‹xt
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
 
¡ršg
, 
objeùsCh
 <-
chª
 sŒšgè<-chª 
RemoveObjeùE¼Ü
 {

134 
”rÜCh
 :ğ
	`make
(
chª
 
RemoveObjeùE¼Ü
, 1)

137 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

138 
deãr
 
	`şo£
(
”rÜCh
)

139 
”rÜCh
 <- 
RemoveObjeùE¼Ü
{

140 
E¼
: 
”r
,

142  
”rÜCh


145 
objeùsCh
 =ğ
n
 {

146 
deãr
 
	`şo£
(
”rÜCh
)

147 
”rÜCh
 <- 
RemoveObjeùE¼Ü
{

148 
E¼
: 
	`E¼Inv®idArgum’t
("Objects channel cannot be‚il"),

150  
”rÜCh


154 
go
 
	`func
(
”rÜCh
 
chª
<- 
RemoveObjeùE¼Ü
) {

155 
maxEÁr›s
 := 1000

156 
fšish
 :ğ
çl£


157 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

158 
u¾V®ues
.
	`S‘
("delete", "")

161 
deãr
 
	`şo£
(
”rÜCh
)

165 
fšish
 {

168 
couÁ
 := 0

169 
v¬
 
b©ch
 []
¡ršg


172 
objeù
 :ğ
¿nge
 
objeùsCh
 {

173 
b©ch
 = 
	`­³nd
(b©ch, 
objeù
)

174 
couÁ
++; couÁ >ğ
maxEÁr›s
 {

178 
couÁ
 == 0 {

182 
couÁ
 < 
maxEÁr›s
 {

184 
fšish
 = 
Œue


188 
»moveBy‹s
 :ğ
	`g’”©eRemoveMuÉiObjeùsReque¡
(
b©ch
)

190 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "POST", 
»que¡M‘ad©a
{

191 
buck‘Name
: bucketName,

192 
qu”yV®ues
: 
u¾V®ues
,

193 
cÚ‹ÁBody
: 
by‹s
.
	`NewR—d”
(
»moveBy‹s
),

194 
cÚ‹ÁL’gth
: 
	`št64
(
	`Ën
(
»moveBy‹s
)),

195 
cÚ‹ÁMD5Ba£64
: 
	`sumMD5Ba£64
(
»moveBy‹s
),

196 
cÚ‹ÁSHA256Hex
: 
	`sum256Hex
(
»moveBy‹s
),

198 
»¥
 !ğ
n
 {

199 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

200 
e
 :ğ
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

201 
”rÜCh
 <- 
RemoveObjeùE¼Ü
{
ObjeùName
: "", 
E¼
: 
e
}

204 
”r
 !ğ
n
 {

205 
_
, 
b
 :ğ
¿nge
 
b©ch
 {

206 
”rÜCh
 <- 
RemoveObjeùE¼Ü
{
ObjeùName
: 
b
, 
E¼
: 
”r
}

212 
	`´oûssRemoveMuÉiObjeùsRe¥Ú£
(
»¥
.
Body
, 
b©ch
, 
”rÜCh
)

214 
	`şo£Re¥Ú£
(
»¥
)

216 }(
”rÜCh
)

217  
”rÜCh


218 
	}
}

223 
	$func
 (
c
 
Cl›Á
è
	`RemoveObjeùs
(
buck‘Name
 
¡ršg
, 
objeùsCh
 <-
chª
 sŒšgè<-chª 
RemoveObjeùE¼Ü
 {

224  
c
.
	`RemoveObjeùsW™hCÚ‹xt
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùsCh
)

225 
	}
}

228 
	$func
 (
c
 
Cl›Á
è
	$RemoveIncom¶‘eU¶ßd
(
buck‘Name
, 
objeùName
 
¡ršg
è
”rÜ
 {

230 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

231  
”r


233 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

234  
”r


237 
u¶ßdIDs
, 
”r
 :ğ
c
.
	`fšdU¶ßdIDs
(
buck‘Name
, 
objeùName
)

238 
”r
 !ğ
n
 {

239  
”r


242 
_
, 
u¶ßdID
 :ğ
¿nge
 
u¶ßdIDs
 {

244 
”r
 :ğ
c
.
	`abÜtMuÉ¬tU¶ßd
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
u¶ßdID
)

245 
”r
 !ğ
n
 {

246  
”r


250  
n


251 
	}
}

255 
	$func
 (
c
 
Cl›Á
è
	$abÜtMuÉ¬tU¶ßd
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
, 
u¶ßdID
 
¡ršg
è
”rÜ
 {

257 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

258  
”r


260 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

261  
”r


265 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

266 
u¾V®ues
.
	`S‘
("u¶ßdId", 
u¶ßdID
)

269 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "DELETE", 
»que¡M‘ad©a
{

270 
buck‘Name
: bucketName,

271 
objeùName
: objectName,

272 
qu”yV®ues
: 
u¾V®ues
,

273 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

275 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

276 
”r
 !ğ
n
 {

277  
”r


279 
»¥
 !ğ
n
 {

280 
»¥
.
StusCode
 !ğ
h‰p
.
StusNoCÚ‹Á
 {

282 
v¬
 
”rÜRe¥Ú£
 
E¼ÜRe¥Ú£


283 
»¥
.
StusCode
 {

284 
h‰p
.
StusNÙFound
:

287 
”rÜRe¥Ú£
 = 
E¼ÜRe¥Ú£
{

288 
Code
: "NoSuchUpload",

289 
Mes§ge
: "The specified multipart upload does‚otƒxist.",

290 
Buck‘Name
: 
buck‘Name
,

291 
Key
: 
objeùName
,

292 
Reque¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-request-id"),

293 
Ho¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-id-2"),

294 
RegiÚ
: 
»¥
.
H—d”
.
	`G‘
("x-amz-bucket-region"),

297  
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

299  
”rÜRe¥Ú£


302  
n


303 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-s3-datatypes.go

18 
·ckage
 
mšio


20 
impÜt
 (

26 
ty³
 
li¡AÎMyBuck‘sResuÉ
 struct {

28 
Buck‘s
 struct {

29 
	mBuck‘
 []
	mBuck‘Info


31 
OwÃr
 
	mowÃr


35 
ty³
 
owÃr
 struct {

36 
Di¥ÏyName
 
¡ršg


37 
ID
 
	m¡ršg


41 
ty³
 
CommÚP»fix
 struct {

42 
P»fix
 
	m¡ršg


46 
ty³
 
Li¡Buck‘V2ResuÉ
 struct {

49 
	mCommÚP»fixes
 []
CommÚP»fix


51 
	mCÚ‹Ás
 []
ObjeùInfo


52 
D–im™”
 
¡ršg


55 
EncodšgTy³
 
¡ršg


59 
IsTrunÿ‹d
 
boŞ


60 
MaxKeys
 
št64


61 
Name
 
¡ršg


64 
NextCÚtšu©iÚTok’
 
¡ršg


66 
CÚtšu©iÚTok’
 
¡ršg


67 
P»fix
 
¡ršg


70 
F‘chOwÃr
 
¡ršg


71 
S¹Aá”
 
	m¡ršg


75 
ty³
 
Li¡Buck‘ResuÉ
 struct {

78 
	mCommÚP»fixes
 []
CommÚP»fix


80 
	mCÚ‹Ás
 []
ObjeùInfo


81 
D–im™”
 
¡ršg


84 
EncodšgTy³
 
¡ršg


88 
IsTrunÿ‹d
 
boŞ


89 
M¬k”
 
¡ršg


90 
MaxKeys
 
št64


91 
Name
 
¡ršg


102 
NextM¬k”
 
¡ršg


103 
P»fix
 
	m¡ršg


107 
ty³
 
Li¡MuÉ¬tU¶ßdsResuÉ
 struct {

108 
Buck‘
 
¡ršg


109 
KeyM¬k”
 
¡ršg


110 
U¶ßdIDM¬k”
 
	m¡ršg
 `
	mxml
:"UploadIdMarker"`

111 
NextKeyM¬k”
 
¡ršg


112 
NextU¶ßdIDM¬k”
 
¡ršg
 `
xml
:"NextUploadIdMarker"`

113 
EncodšgTy³
 
¡ršg


114 
MaxU¶ßds
 
št64


115 
IsTrunÿ‹d
 
boŞ


116 
U¶ßds
 []
ObjeùMuÉ¬tInfo
 `
xml
:"Upload"`

117 
P»fix
 
¡ršg


118 
D–im™”
 
¡ršg


120 
CommÚP»fixes
 []
CommÚP»fix


124 
ty³
 
š™ŸtÜ
 struct {

125 
ID
 
¡ršg


126 
Di¥ÏyName
 
¡ršg


130 
ty³
 
cİyObjeùResuÉ
 struct {

131 
ETag
 
¡ršg


132 
La¡Modif›d
 
time
.
Time


136 
ty³
 
ObjeùP¬t
 struct {

138 
P¬tNumb”
 

141 
La¡Modif›d
 
time
.
Time


145 
ETag
 
¡ršg


148 
Size
 
št64


152 
ty³
 
Li¡ObjeùP¬tsResuÉ
 struct {

153 
Buck‘
 
¡ršg


154 
Key
 
¡ršg


155 
U¶ßdID
 
¡ršg
 `
xml
:"UploadId"`

157 
In™ŸtÜ
 
š™ŸtÜ


158 
OwÃr
 
owÃr


160 
StÜageCÏss
 
¡ršg


161 
P¬tNumb”M¬k”
 

162 
NextP¬tNumb”M¬k”
 

163 
MaxP¬ts
 

166 
IsTrunÿ‹d
 
boŞ


167 
ObjeùP¬ts
 []
ObjeùP¬t
 `
xml
:"Part"`

169 
EncodšgTy³
 
¡ršg


174 
ty³
 
š™Ÿ‹MuÉ¬tU¶ßdResuÉ
 struct {

175 
Buck‘
 
¡ršg


176 
Key
 
¡ršg


177 
U¶ßdID
 
¡ršg
 `
xml
:"UploadId"`

182 
ty³
 
com¶‘eMuÉ¬tU¶ßdResuÉ
 struct {

183 
LoÿtiÚ
 
¡ršg


184 
Buck‘
 
¡ršg


185 
Key
 
¡ršg


186 
ETag
 
¡ršg


191 
ty³
 
Com¶‘eP¬t
 struct {

192 
XMLName
 
xml
.
Name
 `xml:"h‰p://s3.amazÚaws.com/doc/2006-03-01/ P¬t" 
jsÚ
:"-"`

195 
P¬tNumb”
 

196 
ETag
 
¡ršg


200 
ty³
 
com¶‘eMuÉ¬tU¶ßd
 struct {

201 
XMLName
 
xml
.
Name
 `xml:"h‰p://s3.amazÚaws.com/doc/2006-03-01/ Com¶‘eMuÉ¬tU¶ßd" 
jsÚ
:"-"`

202 
P¬ts
 []
Com¶‘eP¬t
 `
xml
:"Part"`

206 
ty³
 
ü—‹Buck‘CÚfigu¿tiÚ
 struct {

207 
XMLName
 
xml
.
Name
 `xml:"h‰p://s3.amazÚaws.com/doc/2006-03-01/ C»©eBuck‘CÚfigu¿tiÚ" 
jsÚ
:"-"`

208 
LoÿtiÚ
 
¡ršg
 `
xml
:"LocationConstraint"`

212 
ty³
 
d–‘eObjeù
 struct {

213 
Key
 
¡ršg


214 
V”siÚID
 
¡ršg
 `
xml
:"VersionId,omitempty"`

218 
ty³
 
d–‘edObjeù
 struct {

219 
Key
 
¡ršg


220 
V”siÚID
 
¡ršg
 `
xml
:"VersionId,omitempty"`

222 
D–‘eM¬k”
 
boŞ


223 
D–‘eM¬k”V”siÚID
 
¡ršg


227 
ty³
 
nÚD–‘edObjeù
 struct {

228 
Key
 
¡ršg


229 
Code
 
¡ršg


230 
Mes§ge
 
¡ršg


234 
ty³
 
d–‘eMuÉiObjeùs
 struct {

235 
XMLName
 
xml
.
Name
 `xml:"Delete"`

236 
Qu›t
 
boŞ


237 
Objeùs
 []
d–‘eObjeù
 `
xml
:"Object"`

241 
ty³
 
d–‘eMuÉiObjeùsResuÉ
 struct {

242 
XMLName
 
xml
.
Name
 `xml:"DeleteResult"`

243 
D–‘edObjeùs
 []
d–‘edObjeù
 `
xml
:"Deleted"`

244 
UnD–‘edObjeùs
 []
nÚD–‘edObjeù
 `
xml
:"Error"`

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-select.go

18 
·ckage
 
mšio


20 
impÜt
 (

39 
ty³
 
CSVFeH—d”Info
 
¡ršg


43 
CSVFeH—d”InfoNÚe
 
	gCSVFeH—d”Info
 = "NONE"

44 
CSVFeH—d”InfoIgnÜe
 = "IGNORE"

45 
CSVFeH—d”InfoU£
 = "USE"

50 
ty³
 
S–eùCom´essiÚTy³
 
¡ršg


54 
S–eùCom´essiÚNONE
 
S–eùCom´essiÚTy³
 = "NONE"

55 
S–eùCom´essiÚGZIP
 = "GZIP"

56 
S–eùCom´essiÚBZIP
 = "BZIP2"

60 
ty³
 
CSVQuÙeF›lds
 
¡ršg


64 
CSVQuÙeF›ldsAlways
 
CSVQuÙeF›lds
 = "Always"

65 
CSVQuÙeF›ldsAsN“ded
 = "AsNeeded"

70 
ty³
 
Qu”yEx´essiÚTy³
 
¡ršg


74 
Qu”yEx´essiÚTy³SQL
 
Qu”yEx´essiÚTy³
 = "SQL"

78 
ty³
 
JSONTy³
 
¡ršg


82 
JSONDocum’tTy³
 
JSONTy³
 = "DOCUMENT"

83 
JSONLšesTy³
 = "LINES"

87 
ty³
 
P¬qu‘IÅutO±iÚs
 struct{}

90 
ty³
 
CSVIÅutO±iÚs
 struct {

91 
FeH—d”Info
 
CSVFeH—d”Info


92 
RecÜdD–im™”
 
¡ršg


93 
F›ldD–im™”
 
¡ršg


94 
QuÙeCh¬aù”
 
¡ršg


95 
QuÙeEsÿ³Ch¬aù”
 
¡ršg


96 
Comm’ts
 
¡ršg


100 
ty³
 
CSVOuutO±iÚs
 struct {

101 
QuÙeF›lds
 
CSVQuÙeF›lds


102 
RecÜdD–im™”
 
¡ršg


103 
F›ldD–im™”
 
¡ršg


104 
QuÙeCh¬aù”
 
¡ršg


105 
QuÙeEsÿ³Ch¬aù”
 
¡ršg


109 
ty³
 
JSONIÅutO±iÚs
 struct {

110 
Ty³
 
JSONTy³


114 
ty³
 
JSONOuutO±iÚs
 struct {

115 
RecÜdD–im™”
 
¡ršg


119 
ty³
 
S–eùObjeùIÅutS”Ÿliz©iÚ
 struct {

120 
Com´essiÚTy³
 
S–eùCom´essiÚTy³


121 
P¬qu‘
 *
P¬qu‘IÅutO±iÚs
 `
xml
:"Parquet,omitempty"`

122 
CSV
 *
CSVIÅutO±iÚs
 `
xml
:"CSV,omitempty"`

123 
JSON
 *
JSONIÅutO±iÚs
 `
xml
:"JSON,omitempty"`

127 
ty³
 
S–eùObjeùOuutS”Ÿliz©iÚ
 struct {

128 
CSV
 *
CSVOuutO±iÚs
 `
xml
:"CSV,omitempty"`

129 
JSON
 *
JSONOuutO±iÚs
 `
xml
:"JSON,omitempty"`

133 
ty³
 
S–eùObjeùO±iÚs
 struct {

134 
XMLName
 
xml
.
Name
 `xml:"S–eùObjeùCÚ‹ÁReque¡" 
jsÚ
:"-"`

135 
S”v”SideEnüy±iÚ
 
’üy±
.
S”v”Side
 `
xml
:"-"`

136 
Ex´essiÚ
 
¡ršg


137 
Ex´essiÚTy³
 
Qu”yEx´essiÚTy³


138 
IÅutS”Ÿliz©iÚ
 
S–eùObjeùIÅutS”Ÿliz©iÚ


139 
OuutS”Ÿliz©iÚ
 
S–eùObjeùOuutS”Ÿliz©iÚ


140 
Reque¡Prog»ss
 struct {

141 
EÇbËd
 
boŞ


146 
	$func
 (
o
 
S–eùObjeùO±iÚs
è
	$H—d”
(è
h‰p
.
H—d”
 {

147 
h—d”s
 :ğ
	`make
(
h‰p
.
H—d”
)

148 
o
.
S”v”SideEnüy±iÚ
 !ğ
n
 && o.S”v”SideEnüy±iÚ.
	`Ty³
(è=ğ
’üy±
.
SSEC
 {

149 
o
.
S”v”SideEnüy±iÚ
.
	`M¬sh®
(
h—d”s
)

151  
h—d”s


152 
	}
}

156 
ty³
 
S–eùObjeùTy³
 
¡ršg


160 
S–eùObjeùTy³CSV
 
S–eùObjeùTy³
 = "CSV"

161 
S–eùObjeùTy³JSON
 = "JSON"

162 
S–eùObjeùTy³P¬qu‘
 = "Parquet"

167 
ty³
 
´–udeInfo
 struct {

168 
tÙ®L’
 
ušt32


169 
h—d”L’
 
ušt32


173 
ty³
 
S–eùResuÉs
 struct {

174 
peR—d”
 *
io
.
PeR—d”


175 
»¥
 *
h‰p
.
Re¥Ú£


176 
¡©s
 *
StsMes§ge


177 
´og»ss
 *
Prog»ssMes§ge


181 
ty³
 
Prog»ssMes§ge
 struct {

182 
XMLName
 
xml
.
Name
 `xml:"Prog»ss" 
jsÚ
:"-"`

183 
StsMes§ge


187 
ty³
 
StsMes§ge
 struct {

188 
XMLName
 
xml
.
Name
 `xml:"Sts" 
jsÚ
:"-"`

189 
By‹sSÿÂed
 
št64


190 
By‹sProûs£d
 
št64


191 
By‹sR‘uºed
 
št64


195 
ty³
 
mes§geTy³
 
¡ršg


198 
”rÜMsg
 
mes§geTy³
 = "error"

199 
commÚMsg
 = "event"

203 
ty³
 
ev’tTy³
 
¡ršg


207 
’dEv’t
 
ev’tTy³
 = "End"

208 
»cÜdsEv’t
 = "Records"

209 
´og»ssEv’t
 = "Progress"

210 
¡©sEv’t
 = "Stats"

214 
ty³
 
cÚ‹ÁTy³
 
¡ršg


217 
xmlCÚ‹Á
 
cÚ‹ÁTy³
 = "text/xml"

221 
	$func
 (
c
 
Cl›Á
è
	`S–eùObjeùCÚ‹Á
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
S–eùObjeùO±iÚs
è(*
S–eùResuÉs
, 
”rÜ
) {

223 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

224  
n
, 
”r


226 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

227  
n
, 
”r


230 
£ËùReqBy‹s
, 
”r
 :ğ
xml
.
	`M¬sh®
(
İts
)

231 
”r
 !ğ
n
 {

232  
n
, 
”r


235 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

236 
u¾V®ues
.
	`S‘
("select", "")

237 
u¾V®ues
.
	`S‘
("select-type", "2")

240 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "POST", 
»que¡M‘ad©a
{

241 
buck‘Name
: bucketName,

242 
objeùName
: objectName,

243 
qu”yV®ues
: 
u¾V®ues
,

244 
cu¡omH—d”
: 
İts
.
	`H—d”
(),

245 
cÚ‹ÁMD5Ba£64
: 
	`sumMD5Ba£64
(
£ËùReqBy‹s
),

246 
cÚ‹ÁSHA256Hex
: 
	`sum256Hex
(
£ËùReqBy‹s
),

247 
cÚ‹ÁBody
: 
by‹s
.
	`NewR—d”
(
£ËùReqBy‹s
),

248 
cÚ‹ÁL’gth
: 
	`št64
(
	`Ën
(
£ËùReqBy‹s
)),

250 
”r
 !ğ
n
 {

251  
n
, 
”r


254 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

255  
n
, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

258 
peR—d”
, 
peWr™”
 :ğ
io
.
	`Pe
()

259 
¡»am”
 :ğ&
S–eùResuÉs
{

260 
»¥
:„esp,

261 
¡©s
: &
StsMes§ge
{},

262 
´og»ss
: &
Prog»ssMes§ge
{},

263 
peR—d”
:…ipeReader,

265 
¡»am”
.
	`¡¬t
(
peWr™”
)

266  
¡»am”
, 
n


267 
	}
}

270 
	$func
 (
s
 *
S–eùResuÉs
è
	$Clo£
(è
”rÜ
 {

271 
deãr
 
	`şo£Re¥Ú£
(
s
.
»¥
)

272  
s
.
peR—d”
.
	`Clo£
()

273 
	}
}

276 
	$func
 (
s
 *
S–eùResuÉs
è
	$R—d
(
b
 []
by‹
è(
n
 , 
”r
 
”rÜ
) {

277  
s
.
peR—d”
.
	`R—d
(
b
)

278 
	}
}

281 
	$func
 (
s
 *
S–eùResuÉs
è
	`Sts
(è*
StsMes§ge
 {

282  
s
.
¡©s


283 
	}
}

286 
	$func
 (
s
 *
S–eùResuÉs
è
	`Prog»ss
(è*
Prog»ssMes§ge
 {

287  
s
.
´og»ss


288 
	}
}

292 
	$func
 (
s
 *
S–eùResuÉs
è
	$¡¬t
(
peWr™”
 *
io
.
PeWr™”
) {

293 
go
 
	`func
() {

295 
v¬
 
´–ude
 
´–udeInfo


296 
v¬
 
h—d”s
 = 
	`make
(
h‰p
.
H—d”
)

297 
v¬
 
”r
 
”rÜ


300 
üc
 :ğ
üc32
.
	`New
(üc32.
IEEETabË
)

301 
ücR—d”
 :ğ
io
.
	`T“R—d”
(
s
.
»¥
.
Body
, 
üc
)

304 
´–ude
, 
”r
 = 
	`´oûssP»lude
(
ücR—d”
, 
üc
)

305 
”r
 !ğ
n
 {

306 
peWr™”
.
	`Clo£W™hE¼Ü
(
”r
)

307 
	`şo£Re¥Ú£
(
s
.
»¥
)

312 
´–ude
.
h—d”L’
 > 0 {

313 
”r
 = 
	`exŒaùH—d”
(
io
.
	`Lim™R—d”
(
ücR—d”
, 
	`št64
(
´–ude
.
h—d”L’
)), 
h—d”s
);ƒ¼ !ğ
n
 {

314 
peWr™”
.
	`Clo£W™hE¼Ü
(
”r
)

315 
	`şo£Re¥Ú£
(
s
.
»¥
)

322 
·ylßdL’
 :ğ
´–ude
.
	`PaylßdL’
()

324 
m
 :ğ
	`mes§geTy³
(
h—d”s
.
	`G‘
("message-type"))

326 
m
 {

327 
”rÜMsg
:

328 
peWr™”
.
	`Clo£W™hE¼Ü
(
”rÜs
.
	`New
("E¼Ü Ty³ oà" + 
h—d”s
.
	`G‘
("error-type") + " " + headers.Get("error-message")))

329 
	`şo£Re¥Ú£
(
s
.
»¥
)

331 
commÚMsg
:

333 
c
 :ğ
	`cÚ‹ÁTy³
(
h—d”s
.
	`G‘
("content-type"))

336 
e
 :ğ
	`ev’tTy³
(
h—d”s
.
	`G‘
("event-type"))

339 
e
 {

340 
’dEv’t
:

341 
peWr™”
.
	`Clo£
()

342 
	`şo£Re¥Ú£
(
s
.
»¥
)

344 
»cÜdsEv’t
:

345 
_
, 
”r
 = 
io
.
	`Cİy
(
peWr™”
, io.
	`Lim™R—d”
(
ücR—d”
, 
·ylßdL’
));ƒ¼ !ğ
n
 {

346 
peWr™”
.
	`Clo£W™hE¼Ü
(
”r
)

347 
	`şo£Re¥Ú£
(
s
.
»¥
)

350 
´og»ssEv’t
:

351 
c
 {

352 
xmlCÚ‹Á
:

353 
”r
 = 
	`xmlDecod”
(
io
.
	`Lim™R—d”
(
ücR—d”
, 
·ylßdL’
), 
s
.
´og»ss
);ƒ¼ !ğ
n
 {

354 
peWr™”
.
	`Clo£W™hE¼Ü
(
”r
)

355 
	`şo£Re¥Ú£
(
s
.
»¥
)

359 
peWr™”
.
	`Clo£W™hE¼Ü
(
fmt
.
	`E¼Üf
("UÃx³ùed cÚ‹Á-ty³ % £Á fÜƒv’t-ty³ %s", 
c
, 
´og»ssEv’t
))

360 
	`şo£Re¥Ú£
(
s
.
»¥
)

363 
¡©sEv’t
:

364 
c
 {

365 
xmlCÚ‹Á
:

366 
”r
 = 
	`xmlDecod”
(
io
.
	`Lim™R—d”
(
ücR—d”
, 
·ylßdL’
), 
s
.
¡©s
);ƒ¼ !ğ
n
 {

367 
peWr™”
.
	`Clo£W™hE¼Ü
(
”r
)

368 
	`şo£Re¥Ú£
(
s
.
»¥
)

372 
peWr™”
.
	`Clo£W™hE¼Ü
(
fmt
.
	`E¼Üf
("UÃx³ùed cÚ‹Á-ty³ % £Á fÜƒv’t-ty³ %s", 
c
, 
¡©sEv’t
))

373 
	`şo£Re¥Ú£
(
s
.
»¥
)

381 
”r
 :ğ
	`checkCRC
(
s
.
»¥
.
Body
, 
üc
.
	`Sum32
());ƒ¼ !ğ
n
 {

382 
peWr™”
.
	`Clo£W™hE¼Ü
(
”r
)

383 
	`şo£Re¥Ú£
(
s
.
»¥
)

389 
	}
}

392 
	$func
 (
p
 
´–udeInfo
è
	$PaylßdL’
(è
št64
 {

393  
	`št64
(
p
.
tÙ®L’
 -….
h—d”L’
 - 16)

394 
	}
}

399 
func
 
	$´oûssP»lude
(
´–ude
 
io
.
R—d”
, 
üc
 
hash
.
Hash32
è(
´–udeInfo
, 
”rÜ
) {

400 
v¬
 
”r
 
”rÜ


401 
v¬
 
pInfo
 = 
´–udeInfo
{}

404 
pInfo
.
tÙ®L’
, 
”r
 = 
	`exŒaùUšt32
(
´–ude
)

405 
”r
 !ğ
n
 {

406  
pInfo
, 
”r


410 
pInfo
.
h—d”L’
, 
”r
 = 
	`exŒaùUšt32
(
´–ude
)

411 
”r
 !ğ
n
 {

412  
pInfo
, 
”r


416 
´eCRC
 :ğ
üc
.
	`Sum32
()

417 
”r
 :ğ
	`checkCRC
(
´–ude
, 
´eCRC
);ƒ¼ !ğ
n
 {

418  
pInfo
, 
”r


421  
pInfo
, 
n


422 
	}
}

425 
func
 
	$exŒaùH—d”
(
body
 
io
.
R—d”
, 
myH—d”s
 
h‰p
.
H—d”
è
”rÜ
 {

428 
h—d”Ty³Name
, 
”r
 :ğ
	`exŒaùH—d”Ty³
(
body
)

429 
”r
 !ğ
n
 {

431 
”r
 =ğ
io
.
EOF
 {

434  
”r


438 
	`exŒaùUšt8
(
body
)

440 
h—d”V®ueName
, 
”r
 :ğ
	`exŒaùH—d”V®ue
(
body
)

441 
”r
 !ğ
n
 {

442  
”r


445 
myH—d”s
.
	`S‘
(
h—d”Ty³Name
, 
h—d”V®ueName
)

448  
n


449 
	}
}

452 
func
 
	$exŒaùH—d”Ty³
(
body
 
io
.
R—d”
è(
¡ršg
, 
”rÜ
) {

454 
h—d”NameL’
, 
”r
 :ğ
	`exŒaùUšt8
(
body
)

455 
”r
 !ğ
n
 {

456  "", 
”r


459 
h—d”Name
, 
”r
 :ğ
	`exŒaùSŒšg
(
body
, (
h—d”NameL’
))

460 
”r
 !ğ
n
 {

461  "", 
”r


463  
¡ršgs
.
	`TrimP»fix
(
h—d”Name
, ":"), 
n


464 
	}
}

468 
func
 
	$exŒaùH—d”V®ue
(
body
 
io
.
R—d”
è(
¡ršg
, 
”rÜ
) {

469 
bodyL’
, 
”r
 :ğ
	`exŒaùUšt16
(
body
)

470 
”r
 !ğ
n
 {

471  "", 
”r


473 
bodyName
, 
”r
 :ğ
	`exŒaùSŒšg
(
body
, (
bodyL’
))

474 
”r
 !ğ
n
 {

475  "", 
”r


477  
bodyName
, 
n


478 
	}
}

481 
func
 
	$exŒaùSŒšg
(
sourû
 
io
.
R—d”
, 
ËnBy‹s
 è(
¡ršg
, 
”rÜ
) {

482 
myV®
 :ğ
	`make
([]
by‹
, 
ËnBy‹s
)

483 
_
, 
”r
 :ğ
sourû
.
	`R—d
(
myV®
)

484 
”r
 !ğ
n
 {

485  "", 
”r


487  
	`¡ršg
(
myV®
), 
n


488 
	}
}

491 
func
 
	$exŒaùUšt32
(
r
 
io
.
R—d”
è(
ušt32
, 
”rÜ
) {

492 
buf
 :ğ
	`make
([]
by‹
, 4)

493 
_
, 
”r
 :ğ
io
.
	`R—dFuÎ
(
r
, 
buf
)

494 
”r
 !ğ
n
 {

495  0, 
”r


497  
bš¬y
.
BigEndŸn
.
	`Ušt32
(
buf
), 
n


498 
	}
}

501 
func
 
	$exŒaùUšt16
(
r
 
io
.
R—d”
è(
ušt16
, 
”rÜ
) {

502 
buf
 :ğ
	`make
([]
by‹
, 2)

503 
_
, 
”r
 :ğ
io
.
	`R—dFuÎ
(
r
, 
buf
)

504 
”r
 !ğ
n
 {

505  0, 
”r


507  
bš¬y
.
BigEndŸn
.
	`Ušt16
(
buf
), 
n


508 
	}
}

511 
func
 
	$exŒaùUšt8
(
r
 
io
.
R—d”
è(
ušt8
, 
”rÜ
) {

512 
buf
 :ğ
	`make
([]
by‹
, 1)

513 
_
, 
”r
 :ğ
io
.
	`R—dFuÎ
(
r
, 
buf
)

514 
”r
 !ğ
n
 {

515  0, 
”r


517  
buf
[0], 
n


518 
	}
}

521 
func
 
	$checkCRC
(
r
 
io
.
R—d”
, 
ex³ù
 
ušt32
è
”rÜ
 {

522 
msgCRC
, 
”r
 :ğ
	`exŒaùUšt32
(
r
)

523 
”r
 !ğ
n
 {

524  
”r


527 
msgCRC
 !ğ
ex³ù
 {

528  
fmt
.
	`E¼Üf
("Checksum Mism©ch, Mes§geCRC oà0x%X dÛ nÙƒqu®ƒx³ùed CRC oà0x%X", 
msgCRC
, 
ex³ù
)

531  
n


532 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-stat.go

18 
·ckage
 
mšio


20 
impÜt
 (

31 
	$func
 (
c
 
Cl›Á
è
	$Buck‘Exi¡s
(
buck‘Name
 
¡ršg
è(
boŞ
, 
”rÜ
) {

33 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

34  
çl£
, 
”r


38 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
cÚ‹xt
.
	`Background
(), "HEAD", 
»que¡M‘ad©a
{

39 
buck‘Name
: bucketName,

40 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

42 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

43 
”r
 !ğ
n
 {

44 
	`ToE¼ÜRe¥Ú£
(
”r
).
Code
 == "NoSuchBucket" {

45  
çl£
, 
n


47  
çl£
, 
”r


49 
»¥
 !ğ
n
 {

50 
»¥”r
 :ğ
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

51 
	`ToE¼ÜRe¥Ú£
(
»¥”r
).
Code
 == "NoSuchBucket" {

52  
çl£
, 
n


54 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

55  
çl£
, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

58  
Œue
, 
n


59 
	}
}

63 
v¬
 
	gdeçuÉF‹rKeys
 = []
¡ršg
{

81 
func
 
	$exŒaùObjM‘ad©a
(
h—d”
 
h‰p
.
H—d”
) http.Header {

82 
f‹rKeys
 :ğ
	`­³nd
([]
¡ršg
{

87 }, 
deçuÉF‹rKeys
...)

88  
	`f‹rH—d”
(
h—d”
, 
f‹rKeys
)

89 
	}
}

92 
	$func
 (
c
 
Cl›Á
è
	$StObjeù
(
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
StObjeùO±iÚs
è(
ObjeùInfo
, 
”rÜ
) {

94 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

95  
ObjeùInfo
{}, 
”r


97 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

98  
ObjeùInfo
{}, 
”r


100  
c
.
	`¡©Objeù
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
İts
)

101 
	}
}

104 
	$func
 (
c
 
Cl›Á
è
	$¡©Objeù
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
StObjeùO±iÚs
è(
ObjeùInfo
, 
”rÜ
) {

106 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

107  
ObjeùInfo
{}, 
”r


109 
”r
 :ğ
s3uts
.
	`CheckV®idObjeùName
(
objeùName
);ƒ¼ !ğ
n
 {

110  
ObjeùInfo
{}, 
”r


114 
»¥
, 
”r
 :ğ
c
.
	`execu‹M‘hod
(
ùx
, "HEAD", 
»que¡M‘ad©a
{

115 
buck‘Name
: bucketName,

116 
objeùName
: objectName,

117 
cÚ‹ÁSHA256Hex
: 
em±ySHA256Hex
,

118 
cu¡omH—d”
: 
İts
.
	`H—d”
(),

120 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

121 
”r
 !ğ
n
 {

122  
ObjeùInfo
{}, 
”r


124 
»¥
 !ğ
n
 {

125 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 &&„e¥.StusCod!ğh‰p.
StusP¬tŸlCÚ‹Á
 {

126  
ObjeùInfo
{}, 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, 
objeùName
)

131 
md5sum
 :ğ
¡ršgs
.
	`TrimP»fix
(
»¥
.
H—d”
.
	`G‘
("ETag"), "\"")

132 
md5sum
 = 
¡ršgs
.
	`TrimSuffix
(md5sum, "\"")

135 
v¬
 
size
 
št64
 = -1

136 
cÚ‹ÁL’gthSŒ
 :ğ
»¥
.
H—d”
.
	`G‘
("Content-Length")

137 
cÚ‹ÁL’gthSŒ
 != "" {

138 
size
, 
”r
 = 
¡rcÚv
.
	`P¬£IÁ
(
cÚ‹ÁL’gthSŒ
, 10, 64)

139 
”r
 !ğ
n
 {

141  
ObjeùInfo
{}, 
E¼ÜRe¥Ú£
{

142 
Code
: "InternalError",

143 
Mes§ge
: "CÚ‹Á-L’gth i šv®id. " + 
»pÜtIssue
,

144 
Buck‘Name
: 
buck‘Name
,

145 
Key
: 
objeùName
,

146 
Reque¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-request-id"),

147 
Ho¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-id-2"),

148 
RegiÚ
: 
»¥
.
H—d”
.
	`G‘
("x-amz-bucket-region"),

154 
d©e
, 
”r
 :ğ
time
.
	`P¬£
(
h‰p
.
TimeFÜm©
, 
»¥
.
H—d”
.
	`G‘
("Last-Modified"))

155 
”r
 !ğ
n
 {

156  
ObjeùInfo
{}, 
E¼ÜRe¥Ú£
{

157 
Code
: "InternalError",

158 
Mes§ge
: "La¡-Modif›dimfÜm© i šv®id. " + 
»pÜtIssue
,

159 
Buck‘Name
: 
buck‘Name
,

160 
Key
: 
objeùName
,

161 
Reque¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-request-id"),

162 
Ho¡ID
: 
»¥
.
H—d”
.
	`G‘
("x-amz-id-2"),

163 
RegiÚ
: 
»¥
.
H—d”
.
	`G‘
("x-amz-bucket-region"),

168 
cÚ‹ÁTy³
 :ğ
¡ršgs
.
	`TrimS·û
(
»¥
.
H—d”
.
	`G‘
("Content-Type"))

169 
cÚ‹ÁTy³
 == "" {

170 
cÚ‹ÁTy³
 = "application/octet-stream"

174  
ObjeùInfo
{

175 
ETag
: 
md5sum
,

176 
Key
: 
objeùName
,

177 
Size
: 
size
,

178 
La¡Modif›d
: 
d©e
,

179 
CÚ‹ÁTy³
: 
cÚ‹ÁTy³
,

183 
M‘ad©a
: 
	`exŒaùObjM‘ad©a
(
»¥
.
H—d”
),

184 }, 
n


185 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api.go

18 
·ckage
 
mšio


20 
impÜt
 (

50 
ty³
 
Cl›Á
 struct {

54 
’dpoštURL
 *
	mu¾
.
URL


57 
üedsProvid”
 *
	müed’tŸls
.
C»d’tŸls


60 
ov”rideSigÃrTy³
 
	müed’tŸls
.
SigÇtu»Ty³


63 
­pInfo
 struct {

64 
­pName
 
¡ršg


65 
­pV”siÚ
 
	m¡ršg


69 
£cu»
 
boŞ


72 
h‰pCl›Á
 *
	mh‰p
.
Cl›Á


73 
buck‘LocCache
 *
buck‘LoÿtiÚCache


76 
isT¿ûEÇbËd
 
boŞ


77 
ŒaûOuut
 
	mio
.
Wr™”


80 
s3AcûË¿‹Endpošt
 
¡ršg


83 
»giÚ
 
¡ršg


86 
¿ndom
 *
	m¿nd
.
Rªd


90 
lookup
 
	mBuck‘LookupTy³


94 
ty³
 
O±iÚs
 struct {

95 
C»ds
 *
	müed’tŸls
.
C»d’tŸls


96 
Secu»
 
boŞ


97 
RegiÚ
 
¡ršg


98 
Buck‘Lookup
 
	mBuck‘LookupTy³


104 
	glib¿ryName
 = "minio-go"

105 
lib¿ryV”siÚ
 = "v6.0.14"

113 
lib¿ryU£rAg’tP»fix
 = "MšiØ(" + 
ruÁime
.
GOOS
 + "; " +„uÁime.
GOARCH
 + ") "

114 
lib¿ryU£rAg’t
 = 
lib¿ryU£rAg’tP»fix
 + 
lib¿ryName
 + "/" + 
lib¿ryV”siÚ


118 
ty³
 
Buck‘LookupTy³
 

122 
Buck‘LookupAuto
 
Buck‘LookupTy³
 = 
iÙa


123 
Buck‘LookupDNS


124 
Buck‘LookupP©h


129 
func
 
	`NewV2
(
’dpošt
 
¡ršg
, 
acûssKeyID
, 
£ü‘AcûssKey
 sŒšg, 
£cu»
 
boŞ
è(*
Cl›Á
, 
”rÜ
) {

130 
üeds
 :ğ
üed’tŸls
.
	`NewSticV2
(
acûssKeyID
, 
£ü‘AcûssKey
, "")

131 
şÁ
, 
”r
 :ğ
	`´iv©eNew
(
’dpošt
, 
üeds
, 
£cu»
, "", 
Buck‘LookupAuto
)

132 
”r
 !ğ
n
 {

133  
n
, 
”r


135 
şÁ
.
ov”rideSigÃrTy³
 = 
üed’tŸls
.
SigÇtu»V2


136  
şÁ
, 
n


137 
	}
}

141 
func
 
NewV4
(
’dpošt
 
¡ršg
, 
acûssKeyID
, 
£ü‘AcûssKey
 sŒšg, 
£cu»
 
boŞ
è(*
	gCl›Á
, 
	g”rÜ
) {

142 
	güeds
 :ğ
üed’tŸls
.
NewSticV4
(
acûssKeyID
, 
£ü‘AcûssKey
, "")

143 
	gşÁ
, 
	g”r
 :ğ
´iv©eNew
(
’dpošt
, 
üeds
, 
£cu»
, "", 
Buck‘LookupAuto
)

144 
	g”r
 !ğ
n
 {

145  
n
, 
”r


147 
şÁ
.
ov”rideSigÃrTy³
 = 
üed’tŸls
.
SigÇtu»V4


148  
şÁ
, 
	gn


152 
func
 
New
(
’dpošt
, 
acûssKeyID
, 
£ü‘AcûssKey
 
¡ršg
, 
£cu»
 
boŞ
è(*
	gCl›Á
, 
	g”rÜ
) {

153 
	güeds
 :ğ
üed’tŸls
.
NewSticV4
(
acûssKeyID
, 
£ü‘AcûssKey
, "")

154 
	gşÁ
, 
	g”r
 :ğ
´iv©eNew
(
’dpošt
, 
üeds
, 
£cu»
, "", 
Buck‘LookupAuto
)

155 
	g”r
 !ğ
n
 {

156  
n
, 
”r


159 
s3uts
.
IsGoogËEndpošt
(*
şÁ
.
’dpoštURL
) {

160 
şÁ
.
ov”rideSigÃrTy³
 = 
üed’tŸls
.
SigÇtu»V2


163 
	gs3uts
.
IsAmazÚEndpošt
(*
şÁ
.
’dpoštURL
) {

164 
	gşÁ
.
	gov”rideSigÃrTy³
 = 
üed’tŸls
.
SigÇtu»V4


166  
	gşÁ
, 
	gn


172 
func
 
NewW™hC»d’tŸls
(
’dpošt
 
¡ršg
, 
üeds
 *
üed’tŸls
.
C»d’tŸls
, 
£cu»
 
boŞ
, 
»giÚ
 sŒšgè(*
	gCl›Á
, 
	g”rÜ
) {

173  
´iv©eNew
(
’dpošt
, 
üeds
, 
£cu»
, 
»giÚ
, 
Buck‘LookupAuto
)

179 
func
 
NewW™hRegiÚ
(
’dpošt
, 
acûssKeyID
, 
£ü‘AcûssKey
 
¡ršg
, 
£cu»
 
boŞ
, 
»giÚ
 sŒšgè(*
	gCl›Á
, 
	g”rÜ
) {

180 
	güeds
 :ğ
üed’tŸls
.
NewSticV4
(
acûssKeyID
, 
£ü‘AcûssKey
, "")

181  
´iv©eNew
(
’dpošt
, 
üeds
, 
£cu»
, 
»giÚ
, 
Buck‘LookupAuto
)

185 
func
 
NewW™hO±iÚs
(
’dpošt
 
¡ršg
, 
İts
 *
O±iÚs
è(*
	gCl›Á
, 
	g”rÜ
) {

186  
´iv©eNew
(
’dpošt
, 
İts
.
C»ds
, o±s.
Secu»
, o±s.
RegiÚ
, o±s.
Buck‘Lookup
)

190 
ty³
 
lockedRªdSourû
 struct {

191 
lk
 
	msync
.
Mu‹x


192 
¤c
 
	m¿nd
.
	mSourû


196 
	$func
 (
r
 *
lockedRªdSourû
è
	$IÁ63
(è(
n
 
št64
) {

197 
r
.
lk
.
	`Lock
()

198 
n
 = 
r
.
¤c
.
	`IÁ63
()

199 
r
.
lk
.
	`UÆock
()

201 
	}
}

205 
	$func
 (
r
 *
lockedRªdSourû
è
	$S“d
(
£ed
 
št64
) {

206 
r
.
lk
.
	`Lock
()

207 
r
.
¤c
.
	`S“d
(
£ed
)

208 
r
.
lk
.
	`UÆock
()

209 
	}
}

212 
	$func
 (
c
 *
Cl›Á
è
	$»dœeùH—d”s
(
»q
 *
h‰p
.
Reque¡
, 
vŸ
 []*h‰p.Reque¡è
”rÜ
 {

213 
	`Ën
(
vŸ
) >= 5 {

214  
”rÜs
.
	`New
("stopped‡fter 5„edirects")

216 
	`Ën
(
vŸ
) == 0 {

217  
n


219 
Ï¡Reque¡
 :ğ
vŸ
[
	`Ën
(via)-1]

220 
v¬
 
»Auth
 
boŞ


221 
©Œ
, 
v®
 :ğ
¿nge
 
Ï¡Reque¡
.
H—d”
 {

223 
©Œ
 =ğ"AuthÜiz©iÚ" && 
»q
.
Ho¡
 !ğ
Ï¡Reque¡
.Host {

224 
»Auth
 = 
Œue


227 
_
, 
ok
 :ğ
»q
.
H—d”
[
©Œ
]; !ok {

228 
»q
.
H—d”
[
©Œ
] = 
v®


232 *
c
.
’dpoštURL
 = *
»q
.
URL


234 
v®ue
, 
”r
 :ğ
c
.
üedsProvid”
.
	`G‘
()

235 
”r
 !ğ
n
 {

236  
”r


238 
	`v¬
 (

239 
sigÃrTy³
 = 
v®ue
.
SigÃrTy³


240 
acûssKeyID
 = 
v®ue
.
AcûssKeyID


241 
£ü‘AcûssKey
 = 
v®ue
.
Seü‘AcûssKey


242 
£ssiÚTok’
 = 
v®ue
.
SessiÚTok’


243 
»giÚ
 = 
c
.region

247 
c
.
ov”rideSigÃrTy³
 !ğ
üed’tŸls
.
SigÇtu»DeçuÉ
 {

248 
sigÃrTy³
 = 
c
.
ov”rideSigÃrTy³


253 
v®ue
.
SigÃrTy³
 =ğ
üed’tŸls
.
SigÇtu»AnÚymous
 {

254 
sigÃrTy³
 = 
üed’tŸls
.
SigÇtu»AnÚymous


257 
»Auth
 {

259 
»giÚ
 == "" {

260 
»giÚ
 = 
s3uts
.
	`G‘RegiÚFromURL
(*
c
.
’dpoštURL
)

263 
sigÃrTy³
.
	`IsV2
():

264  
”rÜs
.
	`New
("signature V2 cannot support„edirection")

265 
sigÃrTy³
.
	`IsV4
():

266 
»q
 = 
s3sigÃr
.
	`SignV4
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£ssiÚTok’
, 
	`g‘DeçuÉLoÿtiÚ
(*
c
.
’dpoštURL
, 
»giÚ
))

269  
n


270 
	}
}

272 
func
 
´iv©eNew
(
’dpošt
 
¡ršg
, 
üeds
 *
üed’tŸls
.
C»d’tŸls
, 
£cu»
 
boŞ
, 
»giÚ
 sŒšg, 
lookup
 
Buck‘LookupTy³
è(*
	gCl›Á
, 
	g”rÜ
) {

274 
	g’dpoštURL
, 
	g”r
 :ğ
g‘EndpoštURL
(
’dpošt
, 
£cu»
)

275 
	g”r
 !ğ
n
 {

276  
n
, 
”r


281 
j¬
, 
	g”r
 :ğ
cook›j¬
.
New
(&cook›j¬.
O±iÚs
{
PublicSuffixLi¡
: 
publicsuffix
.
Li¡
})

282 
”r
 !ğ
n
 {

283  
n
, 
”r


287 
şÁ
 :ğ
Ãw
(
Cl›Á
)

290 
şÁ
.
üedsProvid”
 = 
üeds


293 
şÁ
.
£cu»
 = secure

296 
şÁ
.
’dpoštURL
 =ƒndpointURL

299 
şÁ
.
h‰pCl›Á
 = &
h‰p
.
Cl›Á
{

300 
J¬
: 
j¬
,

301 
T¿n¥Üt
: 
DeçuÉT¿n¥Üt
,

302 
CheckRedœeù
: 
şÁ
.
»dœeùH—d”s
,

306 
»giÚ
 == "" {

307 
»giÚ
 = 
s3uts
.
G‘RegiÚFromURL
(*
şÁ
.
’dpoštURL
)

309 
	gşÁ
.
	g»giÚ
 = 
»giÚ


312 
şÁ
.
buck‘LocCache
 = 
ÃwBuck‘LoÿtiÚCache
()

315 
şÁ
.
¿ndom
 = 
¿nd
.
New
(&
lockedRªdSourû
{
¤c
:„ªd.
NewSourû
(
time
.
Now
().
UTC
().
UnixNªo
())})

319 
şÁ
.
lookup
 =†ookup

321  
şÁ
, 
	gn


325 
	$func
 (
c
 *
Cl›Á
è
	$S‘AµInfo
(
­pName
 
¡ršg
, 
­pV”siÚ
 string) {

327 
­pName
 !ğ"" && 
­pV”siÚ
 != "" {

328 
c
.
­pInfo
 = struct {

329 
­pName
 
¡ršg


330 
­pV”siÚ
 
¡ršg


332 
c
.
­pInfo
.
­pName
 =‡ppName

333 
c
.
­pInfo
.
­pV”siÚ
 =‡ppVersion

335 
	}
}

338 
	$func
 (
c
 *
Cl›Á
è
	$S‘Cu¡omT¿n¥Üt
(
cu¡omHTTPT¿n¥Üt
 
h‰p
.
RoundTr³r
) {

353 
c
.
h‰pCl›Á
 !ğ
n
 {

354 
c
.
h‰pCl›Á
.
T¿n¥Üt
 = 
cu¡omHTTPT¿n¥Üt


356 
	}
}

359 
	$func
 (
c
 *
Cl›Á
è
	$T¿ûOn
(
ouutSŒ—m
 
io
.
Wr™”
) {

361 
ouutSŒ—m
 =ğ
n
 {

362 
ouutSŒ—m
 = 
os
.
Stdout


365 
c
.
ŒaûOuut
 = 
ouutSŒ—m


368 
c
.
isT¿ûEÇbËd
 = 
Œue


369 
	}
}

372 
	$func
 (
c
 *
Cl›Á
è
	$T¿ûOff
() {

374 
c
.
isT¿ûEÇbËd
 = 
çl£


375 
	}
}

382 
	$func
 (
c
 *
Cl›Á
è
	$S‘S3T¿nsãrAcûË¿‹
(
acûË¿‹Endpošt
 
¡ršg
) {

383 
s3uts
.
	`IsAmazÚEndpošt
(*
c
.
’dpoštURL
) {

384 
c
.
s3AcûË¿‹Endpošt
 = 
acûË¿‹Endpošt


386 
	}
}

394 
	$func
 (
c
 *
Cl›Á
è
	$hashM©”Ÿls
(è(
hashAlgos
 
m­
[
¡ršg
]
hash
.
Hash
, 
hashSums
 m­[¡ršg][]
by‹
) {

395 
hashSums
 = 
	`make
(
m­
[
¡ršg
][]
by‹
)

396 
hashAlgos
 = 
	`make
(
m­
[
¡ršg
]
hash
.
Hash
)

397 
c
.
ov”rideSigÃrTy³
.
	`IsV4
() {

398 
c
.
£cu»
 {

399 
hashAlgos
["md5"] = 
md5
.
	`New
()

401 
hashAlgos
["sha256"] = 
sha256
.
	`New
()

404 
c
.
ov”rideSigÃrTy³
.
	`IsAnÚymous
() {

405 
hashAlgos
["md5"] = 
md5
.
	`New
()

408  
hashAlgos
, 
hashSums


409 
	}
}

412 
ty³
 
»que¡M‘ad©a
 struct {

414 
´esignURL
 
boŞ


417 
buck‘Name
 
¡ršg


418 
objeùName
 
¡ršg


419 
qu”yV®ues
 
	mu¾
.
V®ues


420 
cu¡omH—d”
 
	mh‰p
.
H—d”


421 
expœes
 
št64


424 
buck‘LoÿtiÚ
 
¡ršg


425 
cÚ‹ÁBody
 
	mio
.
R—d”


426 
cÚ‹ÁL’gth
 
št64


427 
cÚ‹ÁMD5Ba£64
 
¡ršg


428 
cÚ‹ÁSHA256Hex
 
	m¡ršg


432 
	$func
 (
c
 
Cl›Á
è
	$dumpHTTP
(
»q
 *
h‰p
.
Reque¡
, 
»¥
 *h‰p.
Re¥Ú£
è
”rÜ
 {

434 
_
, 
”r
 :ğ
fmt
.
	`F´šn
(
c
.
ŒaûOuut
, "---------START-HTTP---------")

435 
”r
 !ğ
n
 {

436  
”r


440 
ÜigAuth
 :ğ
»q
.
H—d”
.
	`G‘
("Authorization")

441 
ÜigAuth
 != "" {

442 
»q
.
H—d”
.
	`S‘
("AuthÜiz©iÚ", 
	`»daùSigÇtu»
(
ÜigAuth
))

446 
»qT¿û
, 
”r
 :ğ
h‰put
.
	`DumpReque¡Out
(
»q
, 
çl£
)

447 
”r
 !ğ
n
 {

448  
”r


452 
_
, 
”r
 = 
fmt
.
	`F´št
(
c
.
ŒaûOuut
, 
	`¡ršg
(
»qT¿û
))

453 
”r
 !ğ
n
 {

454  
”r


458 
v¬
 
»¥T¿û
 []
by‹


461 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 &&

462 
»¥
.
StusCode
 !ğ
h‰p
.
StusP¬tŸlCÚ‹Á
 &&

463 
»¥
.
StusCode
 !ğ
h‰p
.
StusNoCÚ‹Á
 {

464 
»¥T¿û
, 
”r
 = 
h‰put
.
	`DumpRe¥Ú£
(
»¥
, 
Œue
)

465 
”r
 !ğ
n
 {

466  
”r


469 
»¥T¿û
, 
”r
 = 
h‰put
.
	`DumpRe¥Ú£
(
»¥
, 
çl£
)

470 
”r
 !ğ
n
 {

471  
”r


476 
_
, 
”r
 = 
fmt
.
	`F´št
(
c
.
ŒaûOuut
, 
¡ršgs
.
	`TrimSuffix
(
	`¡ršg
(
»¥T¿û
), "\r\n"))

477 
”r
 !ğ
n
 {

478  
”r


482 
_
, 
”r
 = 
fmt
.
	`F´šn
(
c
.
ŒaûOuut
, "---------END-HTTP---------")

483 
”r
 !ğ
n
 {

484  
”r


488  
n


489 
	}
}

492 
	$func
 (
c
 
Cl›Á
èdo(
»q
 *
h‰p
.
Reque¡
è(*h‰p.
Re¥Ú£
, 
”rÜ
) {

493 
»¥
, 
”r
 :ğ
c
.
h‰pCl›Á
.
	`Do
(
»q
)

494 
”r
 !ğ
n
 {

496 
u¾E¼
, 
ok
 :ğ
”r
.(*
u¾
.
E¼Ü
); ok {

497 
¡ršgs
.
	`CÚšs
(
u¾E¼
.
E¼
.
	`E¼Ü
(), "EOF") {

498  
n
, &
u¾
.
E¼Ü
{

499 
Op
: 
u¾E¼
.Op,

500 
URL
: 
u¾E¼
.URL,

501 
E¼
: 
”rÜs
.
	`New
("CÚÃùiÚ clo£d by fÜeigÀho¡ " + 
u¾E¼
.
URL
 + ". Retry‡gain."),

505  
n
, 
”r


509 
»¥
 =ğ
n
 {

510 
msg
 :ğ"Re¥Ú£ i em±y. " + 
»pÜtIssue


511  
n
, 
	`E¼Inv®idArgum’t
(
msg
)

515 
c
.
isT¿ûEÇbËd
 {

516 
”r
 = 
c
.
	`dumpHTTP
(
»q
, 
»¥
)

517 
”r
 !ğ
n
 {

518  
n
, 
”r


522  
»¥
, 
n


523 
	}
}

526 
v¬
 
	gsucûssStus
 = []{

527 
h‰p
.
StusOK
,

528 
h‰p
.
StusNoCÚ‹Á
,

529 
h‰p
.
StusP¬tŸlCÚ‹Á
,

535 
	$func
 (
c
 
Cl›Á
è
	$execu‹M‘hod
(
ùx
 
cÚ‹xt
.
CÚ‹xt
, 
m‘hod
 
¡ršg
, 
m‘ad©a
 
»que¡M‘ad©a
è(
»s
 *
h‰p
.
Re¥Ú£
, 
”r
 
”rÜ
) {

536 
v¬
 
isR‘ryabË
 
boŞ


537 
v¬
 
bodyS“k”
 
io
.
S“k”


538 
v¬
 
»qR‘ry
 = 
MaxR‘ry


540 
m‘ad©a
.
cÚ‹ÁBody
 !ğ
n
 {

542 
bodyS“k”
, 
isR‘ryabË
 = 
m‘ad©a
.
cÚ‹ÁBody
.(
io
.
S“k”
)

543 
bodyS“k”
 {

544 
os
.
Stdš
, os.
Stdout
, os.
Std”r
:

545 
isR‘ryabË
 = 
çl£


548 !
isR‘ryabË
 {

549 
»qR‘ry
 = 1

555 
bodyClo£r
, 
ok
 :ğ
m‘ad©a
.
cÚ‹ÁBody
.(
io
.
Clo£r
)

556 
ok
 {

557 
deãr
 
bodyClo£r
.
	`Clo£
()

562 
dÚeCh
 :ğ
	`make
(
chª
 struct{}, 1)

565 
deãr
 
	`şo£
(
dÚeCh
)

570 
¿nge
 
c
.
	`ÃwR‘ryTim”
(
»qR‘ry
, 
DeçuÉR‘ryUn™
, 
DeçuÉR‘ryC­
, 
MaxJ™‹r
, 
dÚeCh
) {

575 
isR‘ryabË
 {

577 
_
, 
”r
 = 
bodyS“k”
.
	`S“k
(0, 0);ƒ¼ !ğ
n
 {

579  
n
, 
”r


584 
v¬
 
»q
 *
h‰p
.
Reque¡


585 
»q
, 
”r
 = 
c
.
	`ÃwReque¡
(
m‘hod
, 
m‘ad©a
)

586 
”r
 !ğ
n
 {

587 
”rRe¥Ú£
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
)

588 
	`isS3CodeR‘ryabË
(
”rRe¥Ú£
.
Code
) {

591  
n
, 
”r


595 
»q
 =„eq.
	`W™hCÚ‹xt
(
ùx
)

598 
»s
, 
”r
 = 
c
.do(
»q
)

599 
”r
 !ğ
n
 {

601 
	`isHTTPReqE¼ÜR‘ryabË
(
”r
) {

605  
n
, 
”r


609 
_
, 
h‰pStus
 :ğ
¿nge
 
sucûssStus
 {

610 
h‰pStus
 =ğ
»s
.
StusCode
 {

611  
»s
, 
n


616 
”rBodyBy‹s
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»s
.
Body
)

618 
	`şo£Re¥Ú£
(
»s
)

619 
”r
 !ğ
n
 {

620  
n
, 
”r


624 
”rBodyS“k”
 :ğ
by‹s
.
	`NewR—d”
(
”rBodyBy‹s
)

625 
»s
.
Body
 = 
iout
.
	`NİClo£r
(
”rBodyS“k”
)

628 
”rRe¥Ú£
 :ğ
	`ToE¼ÜRe¥Ú£
(
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»s
, 
m‘ad©a
.
buck‘Name
, m‘ad©a.
objeùName
))

631 
”rBodyS“k”
.
	`S“k
(0, 0)

632 
»s
.
Body
 = 
iout
.
	`NİClo£r
(
”rBodyS“k”
)

640 
m‘ad©a
.
buck‘LoÿtiÚ
 =ğ"" && 
c
.
»giÚ
 == "" {

641 
”rRe¥Ú£
.
Code
 == "AuthorizationHeaderMalformed" ||ƒrrResponse.Code == "InvalidRegion" {

642 
m‘ad©a
.
buck‘Name
 !ğ"" && 
”rRe¥Ú£
.
RegiÚ
 != "" {

644 
_
, 
ÿchedLoÿtiÚE¼Ü
 :ğ
c
.
buck‘LocCache
.
	`G‘
(
m‘ad©a
.
buck‘Name
); cachedLoÿtiÚE¼Ü !ğ
çl£
 {

645 
c
.
buck‘LocCache
.
	`S‘
(
m‘ad©a
.
buck‘Name
, 
”rRe¥Ú£
.
RegiÚ
)

653 
	`isS3CodeR‘ryabË
(
”rRe¥Ú£
.
Code
) {

658 
	`isHTTPStusR‘ryabË
(
»s
.
StusCode
) {

665  
»s
, 
”r


666 
	}
}

669 
	$func
 (
c
 
Cl›Á
è
	$ÃwReque¡
(
m‘hod
 
¡ršg
, 
m‘ad©a
 
»que¡M‘ad©a
è(
»q
 *
h‰p
.
Reque¡
, 
”r
 
”rÜ
) {

671 
m‘hod
 == "" {

672 
m‘hod
 = "POST"

675 
loÿtiÚ
 :ğ
m‘ad©a
.
buck‘LoÿtiÚ


676 
loÿtiÚ
 == "" {

677 
m‘ad©a
.
buck‘Name
 != "" {

679 
loÿtiÚ
, 
”r
 = 
c
.
	`g‘Buck‘LoÿtiÚ
(
m‘ad©a
.
buck‘Name
)

680 
”r
 !ğ
n
 {

681 
	`ToE¼ÜRe¥Ú£
(
”r
).
Code
 != "AccessDenied" {

682  
n
, 
”r


689 
loÿtiÚ
 == "" {

690 
loÿtiÚ
 = 
	`g‘DeçuÉLoÿtiÚ
(*
c
.
’dpoštURL
, c.
»giÚ
)

695 
isVœtu®Ho¡
 :ğ
c
.
	`isVœtu®Ho¡StyËReque¡
(*c.
’dpoštURL
, 
m‘ad©a
.
buck‘Name
)

698 
rg‘URL
, 
”r
 :ğ
c
.
	`makeT¬g‘URL
(
m‘ad©a
.
buck‘Name
, m‘ad©a.
objeùName
, 
loÿtiÚ
, 
isVœtu®Ho¡
, m‘ad©a.
qu”yV®ues
)

699 
”r
 !ğ
n
 {

700  
n
, 
”r


704 
»q
, 
”r
 = 
h‰p
.
	`NewReque¡
(
m‘hod
, 
rg‘URL
.
	`SŒšg
(), 
n
)

705 
”r
 !ğ
n
 {

706  
n
, 
”r


710 
v®ue
, 
”r
 :ğ
c
.
üedsProvid”
.
	`G‘
()

711 
”r
 !ğ
n
 {

712  
n
, 
”r


715 
	`v¬
 (

716 
sigÃrTy³
 = 
v®ue
.
SigÃrTy³


717 
acûssKeyID
 = 
v®ue
.
AcûssKeyID


718 
£ü‘AcûssKey
 = 
v®ue
.
Seü‘AcûssKey


719 
£ssiÚTok’
 = 
v®ue
.
SessiÚTok’


723 
c
.
ov”rideSigÃrTy³
 !ğ
üed’tŸls
.
SigÇtu»DeçuÉ
 {

724 
sigÃrTy³
 = 
c
.
ov”rideSigÃrTy³


729 
v®ue
.
SigÃrTy³
 =ğ
üed’tŸls
.
SigÇtu»AnÚymous
 {

730 
sigÃrTy³
 = 
üed’tŸls
.
SigÇtu»AnÚymous


734 
m‘ad©a
.
expœes
 !ğ0 && m‘ad©a.
´esignURL
 {

735 
sigÃrTy³
.
	`IsAnÚymous
() {

736  
n
, 
	`E¼Inv®idArgum’t
("Presigned URLs cannot be generated with‡nonymous credentials.")

738 
sigÃrTy³
.
	`IsV2
() {

740 
»q
 = 
s3sigÃr
.
	`P»SignV2
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
m‘ad©a
.
expœes
, 
isVœtu®Ho¡
)

741 } 
sigÃrTy³
.
	`IsV4
() {

743 
»q
 = 
s3sigÃr
.
	`P»SignV4
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£ssiÚTok’
, 
loÿtiÚ
, 
m‘ad©a
.
expœes
)

745  
»q
, 
n


749 
c
.
	`£tU£rAg’t
(
»q
)

752 
k
, 
v
 :ğ
¿nge
 
m‘ad©a
.
cu¡omH—d”
 {

753 
»q
.
H—d”
.
	`S‘
(
k
, 
v
[0])

760 
m‘ad©a
.
cÚ‹ÁL’gth
 == 0 {

761 
»q
.
Body
 = 
n


763 
»q
.
Body
 = 
iout
.
	`NİClo£r
(
m‘ad©a
.
cÚ‹ÁBody
)

767 
»q
.
CÚ‹ÁL’gth
 = 
m‘ad©a
.
cÚ‹ÁL’gth


768 
»q
.
CÚ‹ÁL’gth
 <= -1 {

770 
»q
.
T¿nsãrEncodšg
 = []
¡ršg
{"chunked"}

774 
	`Ën
(
m‘ad©a
.
cÚ‹ÁMD5Ba£64
) > 0 {

775 
»q
.
H—d”
.
	`S‘
("CÚ‹Á-Md5", 
m‘ad©a
.
cÚ‹ÁMD5Ba£64
)

779 
sigÃrTy³
.
	`IsAnÚymous
() {

780  
»q
, 
n


784 
sigÃrTy³
.
	`IsV2
():

786 
»q
 = 
s3sigÃr
.
	`SignV2
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
isVœtu®Ho¡
)

787 
m‘ad©a
.
objeùName
 !ğ"" && 
m‘hod
 =ğ"PUT" && m‘ad©a.
cu¡omH—d”
.
	`G‘
("X-Amz-Cİy-Sourû"è=ğ"" && !
c
.
£cu»
:

791 
»q
 = 
s3sigÃr
.
	`SŒ—mšgSignV4
Ôeq, 
acûssKeyID
,

792 
£ü‘AcûssKey
, 
£ssiÚTok’
, 
loÿtiÚ
, 
m‘ad©a
.
cÚ‹ÁL’gth
, 
time
.
	`Now
().
	`UTC
())

795 
shaH—d”
 :ğ
unsigÃdPaylßd


796 
m‘ad©a
.
cÚ‹ÁSHA256Hex
 != "" {

797 
shaH—d”
 = 
m‘ad©a
.
cÚ‹ÁSHA256Hex


799 
»q
.
H—d”
.
	`S‘
("X-Amz-CÚ‹Á-Sha256", 
shaH—d”
)

802 
»q
 = 
s3sigÃr
.
	`SignV4
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£ssiÚTok’
, 
loÿtiÚ
)

806  
»q
, 
n


807 
	}
}

810 
	$func
 (
c
 
Cl›Á
è
	$£tU£rAg’t
(
»q
 *
h‰p
.
Reque¡
) {

811 
»q
.
H—d”
.
	`S‘
("U£r-Ag’t", 
lib¿ryU£rAg’t
)

812 
c
.
­pInfo
.
­pName
 !ğ"" && c.­pInfo.
­pV”siÚ
 != "" {

813 
»q
.
H—d”
.
	`S‘
("U£r-Ag’t", 
lib¿ryU£rAg’t
+" "+
c
.
­pInfo
.
­pName
+"/"+c.­pInfo.
­pV”siÚ
)

815 
	}
}

818 
	$func
 (
c
 
Cl›Á
è
	`makeT¬g‘URL
(
buck‘Name
, 
objeùName
, 
buck‘LoÿtiÚ
 
¡ršg
, 
isVœtu®Ho¡StyË
 
boŞ
, 
qu”yV®ues
 
u¾
.
V®ues
è(*u¾.
URL
, 
”rÜ
) {

819 
ho¡
 :ğ
c
.
’dpoštURL
.
Ho¡


821 
s3uts
.
	`IsAmazÚEndpošt
(*
c
.
’dpoštURL
) {

822 
c
.
s3AcûË¿‹Endpošt
 !ğ"" && 
buck‘Name
 != "" {

825 
¡ršgs
.
	`CÚšs
(
buck‘Name
, ".") {

826  
n
, 
	`E¼T¿nsãrAcûË¿tiÚBuck‘
(
buck‘Name
)

831 
ho¡
 = 
c
.
s3AcûË¿‹Endpošt


834 !
s3uts
.
	`IsAmazÚFIPSEndpošt
(*
c
.
’dpoštURL
) {

836 
ho¡
 = 
	`g‘S3Endpošt
(
buck‘LoÿtiÚ
)

842 
scheme
 :ğ
c
.
’dpoštURL
.
Scheme


847 
h
, 
p
, 
”r
 :ğ
Ãt
.
	`S¶™Ho¡PÜt
(
ho¡
);ƒ¼ =ğ
n
 {

848 
scheme
 =ğ"h‰p" && 
p
 == "80" || scheme == "https" &&… == "443" {

849 
ho¡
 = 
h


853 
u¾SŒ
 :ğ
scheme
 + "://" + 
ho¡
 + "/"

856 
buck‘Name
 != "" {

860 
isVœtu®Ho¡StyË
 {

861 
u¾SŒ
 = 
scheme
 + "://" + 
buck‘Name
 + "." + 
ho¡
 + "/"

862 
objeùName
 != "" {

863 
u¾SŒ
 = u¾SŒ + 
s3uts
.
	`EncodeP©h
(
objeùName
)

867 
u¾SŒ
 = u¾SŒ + 
buck‘Name
 + "/"

868 
objeùName
 != "" {

869 
u¾SŒ
 = u¾SŒ + 
s3uts
.
	`EncodeP©h
(
objeùName
)

875 
	`Ën
(
qu”yV®ues
) > 0 {

876 
u¾SŒ
 = u¾SŒ + "?" + 
s3uts
.
	`Qu”yEncode
(
qu”yV®ues
)

879  
u¾
.
	`P¬£
(
u¾SŒ
)

880 
	}
}

883 
	$func
 (
c
 *
Cl›Á
è
	$isVœtu®Ho¡StyËReque¡
(
u¾
 u¾.
URL
, 
buck‘Name
 
¡ršg
è
boŞ
 {

884 
buck‘Name
 == "" {

885  
çl£


888 
c
.
lookup
 =ğ
Buck‘LookupDNS
 {

889  
Œue


891 
c
.
lookup
 =ğ
Buck‘LookupP©h
 {

892  
çl£


897  
s3uts
.
	`IsVœtu®Ho¡SuµÜ‹d
(
u¾
, 
buck‘Name
)

898 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api_unit_test.go

18 
·ckage
 
mšio


20 
impÜt
 (

29 
ty³
 
cu¡omR—d”
 struct{}

31 
	$func
 (
c
 *
cu¡omR—d”
è
	$R—d
(
p
 []
by‹
è(
n
 , 
”r
 
”rÜ
) {

32  0, 
n


33 
	}
}

35 
	$func
 (
c
 *
cu¡omR—d”
è
	$Size
(è(
n
 
št64
) {

37 
	}
}

40 
func
 
	$Te¡V®idBuck‘LoÿtiÚ
(
t
 *
‹¡šg
.
T
) {

41 
s3Ho¡s
 := []struct {

42 
buck‘LoÿtiÚ
 
¡ršg


43 
’dpošt
 
¡ršg


49 
_
, 
s3Ho¡
 :ğ
¿nge
 
s3Ho¡s
 {

50 
’dpošt
 :ğ
	`g‘S3Endpošt
(
s3Ho¡
.
buck‘LoÿtiÚ
)

51 
’dpošt
 !ğ
s3Ho¡
.endpoint {

52 
t
.
	`F©®
("E¼Ü: inv®id buck‘†oÿtiÚ", 
’dpošt
)

55 
	}
}

58 
func
 
	$Te¡E¼ÜRe¥Ú£
(
t
 *
‹¡šg
.
T
) {

59 
v¬
 
”r
 
”rÜ


60 
”r
 = 
E¼ÜRe¥Ú£
{

61 
Code
: "Testing",

63 
”rRe¥
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
)

64 
”rRe¥
.
Code
 != "Testing" {

65 
t
.
	`F©®
("Type conversion failed, we have‡nƒmpty struct.")

69 
v¬
 
h‰pRe¥Ú£
 *
h‰p
.
Re¥Ú£


71 
h‰pRe¥Ú£
 = 
n


72 
v¬
 
buck‘Name
, 
objeùName
 
¡ršg


75 
”r
 = 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
h‰pRe¥Ú£
, 
buck‘Name
, 
objeùName
)

76 
”rRe¥
 = 
	`ToE¼ÜRe¥Ú£
(
”r
)

77 
”rRe¥
.
Code
 != "InvalidArgument" {

78 
t
.
	`F©®
("Empty„esponse input should„eturn invalid‡rgument.")

80 
	}
}

83 
func
 
	$Te¡SigÇtu»Ty³
(
t
 *
‹¡šg
.
T
) {

84 
şÁ
 :ğ
Cl›Á
{}

85 !
şÁ
.
ov”rideSigÃrTy³
.
	`IsV4
() {

86 
t
.
	`F©®
("Error")

88 
şÁ
.
ov”rideSigÃrTy³
 = 
üed’tŸls
.
SigÇtu»V2


89 !
şÁ
.
ov”rideSigÃrTy³
.
	`IsV2
() {

90 
t
.
	`F©®
("Error")

92 
şÁ
.
ov”rideSigÃrTy³
.
	`IsV4
() {

93 
t
.
	`F©®
("Error")

95 
şÁ
.
ov”rideSigÃrTy³
 = 
üed’tŸls
.
SigÇtu»V4


96 !
şÁ
.
ov”rideSigÃrTy³
.
	`IsV4
() {

97 
t
.
	`F©®
("Error")

99 
	}
}

102 
func
 
	$Te¡Buck‘PŞicyTy³s
(
t
 *
‹¡šg
.
T
) {

103 
wªt
 :ğ
m­
[
¡ršg
]
boŞ
{

104 "nÚe": 
Œue
,

105 "»adÚly": 
Œue
,

106 "wr™eÚly": 
Œue
,

107 "»adwr™e": 
Œue
,

108 "šv®id": 
çl£
,

110 
buck‘PŞicy
, 
ok
 :ğ
¿nge
 
wªt
 {

111 
pŞicy
.
	`Buck‘PŞicy
(
buck‘PŞicy
).
	`IsV®idBuck‘PŞicy
(è!ğ
ok
 {

112 
t
.
	`F©®
("Error")

115 
	}
}

118 
func
 
	$Te¡P¬tSize
(
t
 *
‹¡šg
.
T
) {

119 
_
, _, _, 
”r
 :ğ
	`İtim®P¬tInfo
(5000000000000000000)

120 
”r
 =ğ
n
 {

121 
t
.
	`F©®
("Error: should fail")

123 
tÙ®P¬tsCouÁ
, 
·¹Size
, 
Ï¡P¬tSize
, 
”r
 :ğ
	`İtim®P¬tInfo
(5497558138880)

124 
”r
 !ğ
n
 {

125 
t
.
	`F©®
("E¼Ü: ", 
”r
)

127 
tÙ®P¬tsCouÁ
 != 9103 {

128 
t
.
	`F©®f
("E¼Ü:ƒx³ùšgÙ®…¬t couÁ oà9987: gÙ %v in¡—d", 
tÙ®P¬tsCouÁ
)

130 
·¹Size
 != 603979776 {

131 
t
.
	`F©®f
("E¼Ü:ƒx³ùšg…¬ˆsizoà550502400: gÙ %v in¡—d", 
·¹Size
)

133 
Ï¡P¬tSize
 != 134217728 {

134 
t
.
	`F©®f
("E¼Ü:ƒx³ùšg†a¡…¬ˆsizoà241172480: gÙ %v in¡—d", 
Ï¡P¬tSize
)

136 
_
, 
·¹Size
, _, 
”r
 = 
	`İtim®P¬tInfo
(5000000000)

137 
”r
 !ğ
n
 {

138 
t
.
	`F©®
("E¼Ü:", 
”r
)

140 
·¹Size
 !ğ
mšP¬tSize
 {

141 
t
.
	`F©®f
("E¼Ü:ƒx³ùšg…¬ˆsizoà%v: gÙ %v in¡—d", 
mšP¬tSize
, 
·¹Size
)

143 
tÙ®P¬tsCouÁ
, 
·¹Size
, 
Ï¡P¬tSize
, 
”r
 = 
	`İtim®P¬tInfo
(-1)

144 
”r
 !ğ
n
 {

145 
t
.
	`F©®
("E¼Ü:", 
”r
)

147 
tÙ®P¬tsCouÁ
 != 9103 {

148 
t
.
	`F©®f
("E¼Ü:ƒx³ùšgÙ®…¬t couÁ oà9987: gÙ %v in¡—d", 
tÙ®P¬tsCouÁ
)

150 
·¹Size
 != 603979776 {

151 
t
.
	`F©®f
("E¼Ü:ƒx³ùšg…¬ˆsizoà550502400: gÙ %v in¡—d", 
·¹Size
)

153 
Ï¡P¬tSize
 != 134217728 {

154 
t
.
	`F©®f
("E¼Ü:ƒx³ùšg†a¡…¬ˆsizoà241172480: gÙ %v in¡—d", 
Ï¡P¬tSize
)

156 
	}
}

159 
func
 
	$Te¡MakeT¬g‘URL
(
t
 *
‹¡šg
.
T
) {

160 
‹¡Ca£s
 := []struct {

161 
addr
 
¡ršg


162 
£cu»
 
boŞ


163 
buck‘Name
 
¡ršg


164 
objeùName
 
¡ršg


165 
buck‘LoÿtiÚ
 
¡ršg


166 
qu”yV®ues
 
m­
[
¡ršg
][]string

167 
ex³ùedURL
 
u¾
.
URL


168 
ex³ùedE¼
 
”rÜ


171 {"loÿlho¡:9000", 
çl£
, "", "", "", 
n
, 
u¾
.
URL
{
Ho¡
: "loÿlho¡:9000", 
Scheme
: "h‰p", 
P©h
: "/"},‚il},

173 {"loÿlho¡", 
Œue
, "", "", "", 
n
, 
u¾
.
URL
{
Ho¡
: "loÿlho¡", 
Scheme
: "h‰ps", 
P©h
: "/"},‚il},

175 {"loÿlho¡:9000", 
Œue
, "mybuck‘", "", "", 
n
, 
u¾
.
URL
{
Ho¡
: "loÿlho¡:9000", 
Scheme
: "h‰ps", 
P©h
: "/mybucket/"},‚il},

177 {"¡Üage.googË­is.com", 
Œue
, "mybuck‘", "", "", 
n
, 
u¾
.
URL
{
Ho¡
: "mybuck‘.¡Üage.googË­is.com", 
Scheme
: "h‰ps", 
P©h
: "/"},‚il},

179 {"s3.amazÚaws.com", 
Œue
, "mybuck‘", "myobjeù", "", 
n
, 
u¾
.
URL
{
Ho¡
: "mybuck‘.s3.du®¡ack.us-—¡-1.amazÚaws.com", 
Scheme
: "h‰ps", 
P©h
: "/myobject"},‚il},

181 {"loÿlho¡:9000", 
çl£
, "mybuck‘", "myobjeù", "", 
n
, 
u¾
.
URL
{
Ho¡
: "loÿlho¡:9000", 
Scheme
: "h‰p", 
P©h
: "/mybucket/myobject"},‚il},

183 {"loÿlho¡:9000", 
çl£
, "mybuck‘", "myobjeù", "", 
m­
[
¡ršg
][]¡ršg{"·¿m": {"v®"}}, 
u¾
.
URL
{
Ho¡
: "loÿlho¡:9000", 
Scheme
: "h‰p", 
P©h
: "/mybuck‘/myobjeù", 
RawQu”y
: "·¿m=v®"}, 
n
},

185 {"loÿlho¡:80", 
çl£
, "mybuck‘", "myobjeù", "", 
n
, 
u¾
.
URL
{
Ho¡
: "loÿlho¡", 
Scheme
: "h‰p", 
P©h
: "/mybucket/myobject"},‚il},

187 {"loÿlho¡:443", 
Œue
, "mybuck‘", "myobjeù", "", 
n
, 
u¾
.
URL
{
Ho¡
: "loÿlho¡", 
Scheme
: "h‰ps", 
P©h
: "/mybucket/myobject"},‚il},

190 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

192 
c
, 
_
 :ğ
	`New
(
‹¡Ca£
.
addr
, "foo", "b¬",e¡Ca£.
£cu»
)

193 
isVœtu®Ho¡
 :ğ
c
.
	`isVœtu®Ho¡StyËReque¡
(*c.
’dpoštURL
, 
‹¡Ca£
.
buck‘Name
)

194 
u
, 
”r
 :ğ
c
.
	`makeT¬g‘URL
(
‹¡Ca£
.
buck‘Name
,e¡Ca£.
objeùName
,e¡Ca£.
buck‘LoÿtiÚ
, 
isVœtu®Ho¡
,e¡Ca£.
qu”yV®ues
)

196 
‹¡Ca£
.
ex³ùedE¼
 =ğ
n
 && 
”r
 !=‚il {

197 
t
.
	`F©®f
("Te¡ %d: Should sucûed buˆçed w™hƒ¼ = %v", 
i
+1, 
”r
)

199 
‹¡Ca£
.
ex³ùedE¼
 !ğ
n
 && 
”r
 ==‚il {

200 
t
.
	`F©®f
("Te¡ %d: Should fa buˆsucûeded", 
i
+1)

202 
”r
 =ğ
n
 {

204 
u
.
	`SŒšg
(è!ğ
‹¡Ca£
.
ex³ùedURL
.String() {

205 
t
.
	`F©®f
("Test %d: Mismatchedarget url:ƒxpected = `%v`, found = `%v`",

206 
i
+1, 
‹¡Ca£
.
ex³ùedURL
.
	`SŒšg
(), 
u
.String())

210 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/appveyor.yml

1 #v”siÚ 
fÜm©


2 
	gv”siÚ
: "{build}"

4 #O³¿tšg 
sy¡em
 (
bud
 
VM
 
‹m¶©e
)

5 
os
: 
Wšdows
 
S”v”
 2012 
R2


7 
şÚe_fŞd”
: 
c
:\
gİ©h
\
¤c
\
g™hub
.
com
\
mšio
\mšio-
go


9 #’vœÚm’ˆ
v¬ŸbËs


10 
’vœÚm’t
:

11 
GOPATH
: 
c
:\
gİ©h


12 
GO15VENDOREXPERIMENT
: 1

14 #süt 
th©
 
run
 
aá”
 
şÚšg
 
»pos™Üy


15 
š¡®l
:

16 - 
£t
 
PATH
=%
GOPATH
%\
bš
;
	gc
:\
go
\bš;%
	gPATH
%

17 - 
go
 
	gv”siÚ


18 - 
go
 
	g’v


19 - 
go
 
	gg‘
 -
u
 
	ggŞªg
.
	gÜg
/
	gx
/
	glšt
/
	ggŞšt


20 - 
go
 
	gg‘
 -
u
 
	gg™hub
.
	gcom
/
	g»myoudomph’g
/
	ggo
-
	gmisc
/
	gd—dcode


21 - 
go
 
	gg‘
 -
u
 
	gg™hub
.
	gcom
/
	ggÜdÚkÏus
/
	gšefçssign


22 - 
go
 
	gg‘
 -
u
 
	ggŞªg
.
	gÜg
/
	gx
/
	güy±o
/
	g¬gÚ2


23 - 
go
 
	gg‘
 -
	gt
 ./...

25 #tØ
run
 
your
 
cu¡om
 
süts
 
š¡—d
 
of
 
autom©ic
 
MSBud


26 
	gbud_süt
:

27 - 
go
 
v‘
 ./...

28 - 
gofmt
 -
s
 -
l
 .

29 - 
gŞšt
 -
£t_ex™_¡©us
 
g™hub
.
com
/
mšio
/mšio-
go
...

30 - 
d—dcode


31 - 
šefçssign
 .

32 - 
go
 
‹¡
 --
v


33 - 
go
 
‹¡
 --
¿û
 -
v


35 #tØ
di§bË
 
autom©ic
 
‹¡s


36 
‹¡
: 
off


38 #tØ
di§bË
 
d•loym’t


39 
d•loy
: 
off


	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/bucket-cache.go

18 
·ckage
 
mšio


20 
impÜt
 (

33 
ty³
 
buck‘LoÿtiÚCache
 struct {

36 
	msync
.
RWMu‹x


39 
™ems
 
	mm­
[
¡ršg
]
	m¡ršg


44 
func
 
ÃwBuck‘LoÿtiÚCache
(è*
	gbuck‘LoÿtiÚCache
 {

45  &
	gbuck‘LoÿtiÚCache
{

46 
	g™ems
: 
make
(
m­
[
¡ršg
]string),

51 
	$func
 (
r
 *
buck‘LoÿtiÚCache
è
	$G‘
(
buck‘Name
 
¡ršg
è(
loÿtiÚ
 sŒšg, 
ok
 
boŞ
) {

52 
r
.
	`RLock
()

53 
deãr
 
r
.
	`RUÆock
()

54 
loÿtiÚ
, 
ok
 = 
r
.
™ems
[
buck‘Name
]

56 
	}
}

59 
	$func
 (
r
 *
buck‘LoÿtiÚCache
è
	$S‘
(
buck‘Name
 
¡ršg
, 
loÿtiÚ
 string) {

60 
r
.
	`Lock
()

61 
deãr
 
r
.
	`UÆock
()

62 
r
.
™ems
[
buck‘Name
] = 
loÿtiÚ


63 
	}
}

66 
	$func
 (
r
 *
buck‘LoÿtiÚCache
è
	$D–‘e
(
buck‘Name
 
¡ršg
) {

67 
r
.
	`Lock
()

68 
deãr
 
r
.
	`UÆock
()

69 
	`d–‘e
(
r
.
™ems
, 
buck‘Name
)

70 
	}
}

74 
	$func
 (
c
 
Cl›Á
è
	$G‘Buck‘LoÿtiÚ
(
buck‘Name
 
¡ršg
è(¡ršg, 
”rÜ
) {

75 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

76  "", 
”r


78  
c
.
	`g‘Buck‘LoÿtiÚ
(
buck‘Name
)

79 
	}
}

83 
	$func
 (
c
 
Cl›Á
è
	$g‘Buck‘LoÿtiÚ
(
buck‘Name
 
¡ršg
è(¡ršg, 
”rÜ
) {

84 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
buck‘Name
);ƒ¼ !ğ
n
 {

85  "", 
”r


89 
c
.
»giÚ
 != "" {

90  
c
.
»giÚ
, 
n


93 
loÿtiÚ
, 
ok
 :ğ
c
.
buck‘LocCache
.
	`G‘
(
buck‘Name
); ok {

94  
loÿtiÚ
, 
n


98 
»q
, 
”r
 :ğ
c
.
	`g‘Buck‘LoÿtiÚReque¡
(
buck‘Name
)

99 
”r
 !ğ
n
 {

100  "", 
”r


104 
»¥
, 
”r
 :ğ
c
.do(
»q
)

105 
deãr
 
	`şo£Re¥Ú£
(
»¥
)

106 
”r
 !ğ
n
 {

107  "", 
”r


109 
loÿtiÚ
, 
”r
 :ğ
	`´oûssBuck‘LoÿtiÚRe¥Ú£
(
»¥
, 
buck‘Name
)

110 
”r
 !ğ
n
 {

111  "", 
”r


113 
c
.
buck‘LocCache
.
	`S‘
(
buck‘Name
, 
loÿtiÚ
)

114  
loÿtiÚ
, 
n


115 
	}
}

118 
func
 
	$´oûssBuck‘LoÿtiÚRe¥Ú£
(
»¥
 *
h‰p
.
Re¥Ú£
, 
buck‘Name
 
¡ršg
è(
buck‘LoÿtiÚ
 sŒšg, 
”r
 
”rÜ
) {

119 
»¥
 !ğ
n
 {

120 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

121 
”r
 = 
	`h‰pRe¥ToE¼ÜRe¥Ú£
(
»¥
, 
buck‘Name
, "")

122 
”rRe¥
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
)

126 
”rRe¥
.
Code
 == "AccessDenied" {

127  "us-—¡-1", 
n


129  "", 
”r


134 
v¬
 
loÿtiÚCÚ¡¿št
 
¡ršg


135 
”r
 = 
	`xmlDecod”
(
»¥
.
Body
, &
loÿtiÚCÚ¡¿št
)

136 
”r
 !ğ
n
 {

137  "", 
”r


140 
loÿtiÚ
 :ğ
loÿtiÚCÚ¡¿št


142 
loÿtiÚ
 == "" {

143 
loÿtiÚ
 = "us-east-1"

147 
loÿtiÚ
 == "EU" {

148 
loÿtiÚ
 = "eu-west-1"

154  
loÿtiÚ
, 
n


155 
	}
}

158 
	$func
 (
c
 
Cl›Á
è
	`g‘Buck‘LoÿtiÚReque¡
(
buck‘Name
 
¡ršg
è(*
h‰p
.
Reque¡
, 
”rÜ
) {

160 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

161 
u¾V®ues
.
	`S‘
("location", "")

164 
rg‘URL
 :ğ
c
.
’dpoštURL


165 
rg‘URL
.
P©h
 = 
·th
.
	`Još
(
buck‘Name
, "") + "/"

166 
rg‘URL
.
RawQu”y
 = 
u¾V®ues
.
	`Encode
()

169 
»q
, 
”r
 :ğ
h‰p
.
	`NewReque¡
("GET", 
rg‘URL
.
	`SŒšg
(), 
n
)

170 
”r
 !ğ
n
 {

171  
n
, 
”r


175 
c
.
	`£tU£rAg’t
(
»q
)

178 
v®ue
, 
”r
 :ğ
c
.
üedsProvid”
.
	`G‘
()

179 
”r
 !ğ
n
 {

180  
n
, 
”r


183 
	`v¬
 (

184 
sigÃrTy³
 = 
v®ue
.
SigÃrTy³


185 
acûssKeyID
 = 
v®ue
.
AcûssKeyID


186 
£ü‘AcûssKey
 = 
v®ue
.
Seü‘AcûssKey


187 
£ssiÚTok’
 = 
v®ue
.
SessiÚTok’


191 
c
.
ov”rideSigÃrTy³
 !ğ
üed’tŸls
.
SigÇtu»DeçuÉ
 {

192 
sigÃrTy³
 = 
c
.
ov”rideSigÃrTy³


197 
v®ue
.
SigÃrTy³
 =ğ
üed’tŸls
.
SigÇtu»AnÚymous
 {

198 
sigÃrTy³
 = 
üed’tŸls
.
SigÇtu»AnÚymous


201 
sigÃrTy³
.
	`IsAnÚymous
() {

202  
»q
, 
n


205 
sigÃrTy³
.
	`IsV2
() {

207 
isVœtu®Ho¡
 :ğ
çl£


208 
»q
 = 
s3sigÃr
.
	`SignV2
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
isVœtu®Ho¡
)

209  
»q
, 
n


213 
cÚ‹ÁSha256
 :ğ
em±ySHA256Hex


214 
c
.
£cu»
 {

215 
cÚ‹ÁSha256
 = 
unsigÃdPaylßd


218 
»q
.
H—d”
.
	`S‘
("X-Amz-CÚ‹Á-Sha256", 
cÚ‹ÁSha256
)

219 
»q
 = 
s3sigÃr
.
	`SignV4
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£ssiÚTok’
, "us-east-1")

220  
»q
, 
n


221 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/bucket-cache_test.go

18 
·ckage
 
mšio


20 
impÜt
 (

35 
func
 
	$Te¡NewBuck‘LoÿtiÚCache
(
t
 *
‹¡šg
.
T
) {

36 
ex³ùedBuck‘LoÿtiÚÿche
 :ğ&
buck‘LoÿtiÚCache
{

37 
™ems
: 
	`make
(
m­
[
¡ršg
]string),

39 
aùu®Buck‘LoÿtiÚCache
 :ğ
	`ÃwBuck‘LoÿtiÚCache
()

41 !
»æeù
.
	`D“pEqu®
(
aùu®Buck‘LoÿtiÚCache
, 
ex³ùedBuck‘LoÿtiÚÿche
) {

42 
t
.
	`E¼Üf
("Unexpected„eturn value")

44 
	}
}

47 
func
 
	$Te¡Buck‘LoÿtiÚCacheOps
(
t
 *
‹¡šg
.
T
) {

48 
‹¡Buck‘LoÿtiÚCache
 :ğ
	`ÃwBuck‘LoÿtiÚCache
()

49 
ex³ùedBuck‘Name
 := "minio-bucket"

50 
ex³ùedLoÿtiÚ
 := "us-east-1"

51 
‹¡Buck‘LoÿtiÚCache
.
	`S‘
(
ex³ùedBuck‘Name
, 
ex³ùedLoÿtiÚ
)

52 
aùu®LoÿtiÚ
, 
ok
 :ğ
‹¡Buck‘LoÿtiÚCache
.
	`G‘
(
ex³ùedBuck‘Name
)

53 !
ok
 {

54 
t
.
	`E¼Üf
("Bucket†ocation cache‚ot set")

56 
ex³ùedLoÿtiÚ
 !ğ
aùu®LoÿtiÚ
 {

57 
t
.
	`E¼Üf
("Bucket†ocation cache‚ot setoƒxpected value")

59 
‹¡Buck‘LoÿtiÚCache
.
	`D–‘e
(
ex³ùedBuck‘Name
)

60 
_
, 
ok
 = 
‹¡Buck‘LoÿtiÚCache
.
	`G‘
(
ex³ùedBuck‘Name
)

61 
ok
 {

62 
t
.
	`E¼Üf
("Bucket†ocation cache‚ot deleted‡sƒxpected")

64 
	}
}

67 
func
 
	$Te¡G‘Buck‘LoÿtiÚReque¡
(
t
 *
‹¡šg
.
T
) {

70 
ü—‹Ex³ùedReque¡
 :ğ
	`func
(
c
 *
Cl›Á
, 
buck‘Name
 
¡ršg
, 
»q
 *
h‰p
.
Reque¡
è(*h‰p.Reque¡, 
”rÜ
) {

72 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

73 
u¾V®ues
.
	`S‘
("location", "")

76 
rg‘URL
 :ğ
c
.
’dpoštURL


77 
rg‘URL
.
P©h
 = 
·th
.
	`Još
(
buck‘Name
, "") + "/"

78 
rg‘URL
.
RawQu”y
 = 
u¾V®ues
.
	`Encode
()

81 
v¬
 
”r
 
”rÜ


82 
»q
, 
”r
 = 
h‰p
.
	`NewReque¡
("GET", 
rg‘URL
.
	`SŒšg
(), 
n
)

83 
”r
 !ğ
n
 {

84  
n
, 
”r


88 
c
.
	`£tU£rAg’t
(
»q
)

91 
v®ue
, 
”r
 :ğ
c
.
üedsProvid”
.
	`G‘
()

92 
”r
 !ğ
n
 {

93  
n
, 
”r


96 
	`v¬
 (

97 
sigÃrTy³
 = 
v®ue
.
SigÃrTy³


98 
acûssKeyID
 = 
v®ue
.
AcûssKeyID


99 
£ü‘AcûssKey
 = 
v®ue
.
Seü‘AcûssKey


100 
£ssiÚTok’
 = 
v®ue
.
SessiÚTok’


104 
c
.
ov”rideSigÃrTy³
 !ğ
üed’tŸls
.
SigÇtu»DeçuÉ
 {

105 
sigÃrTy³
 = 
c
.
ov”rideSigÃrTy³


110 
v®ue
.
SigÃrTy³
 =ğ
üed’tŸls
.
SigÇtu»AnÚymous
 {

111 
sigÃrTy³
 = 
üed’tŸls
.
SigÇtu»AnÚymous


117 
sigÃrTy³
.
	`IsV4
():

118 
cÚ‹ÁSha256
 :ğ
em±ySHA256Hex


119 
c
.
£cu»
 {

120 
cÚ‹ÁSha256
 = 
unsigÃdPaylßd


122 
»q
.
H—d”
.
	`S‘
("X-Amz-CÚ‹Á-Sha256", 
cÚ‹ÁSha256
)

123 
»q
 = 
s3sigÃr
.
	`SignV4
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£ssiÚTok’
, "us-east-1")

124 
sigÃrTy³
.
	`IsV2
():

125 
»q
 = 
s3sigÃr
.
	`SignV2
(*»q, 
acûssKeyID
, 
£ü‘AcûssKey
, 
çl£
)

128  
»q
, 
n


133 
ty³
 
šfoFÜCl›Á
 struct {

134 
’dPošt
 
¡ršg


135 
acûssKey
 
¡ršg


136 
£ü‘Key
 
¡ršg


137 
’abËIn£cu»
 
boŞ


140 
šfo
 :ğ[]
šfoFÜCl›Á
{

143 {"loÿlho¡:9000", "", "", 
çl£
},

145 {"loÿlho¡:9000", "my-acûss-key", "my-£ü‘-key", 
çl£
},

147 {"loÿlho¡:9000", "", "my-£ü‘-key", 
çl£
},

150 {"s3.amazÚaws.com", "", "", 
çl£
},

151 {"s3.amazÚaws.com", "my-acûss-key", "my-£ü‘-key", 
çl£
},

152 {"s3.amazÚaws.com", "my-aûss-key", "", 
çl£
},

155 {"¡Üage.googË­is.com", "", "", 
çl£
},

156 {"¡Üage.googË­is.com", "my-acûss-key", "my-£ü‘-key", 
çl£
},

157 {"¡Üage.googË­is.com", "", "my-£ü‘-key", 
çl£
},

160 {"¶ay.mšio.io", "", "", 
çl£
},

161 {"¶ay.mšio.io", "my-acûss-key", "my-£ü‘-key", 
çl£
},

162 {"¶ay.mšio.io", "my-aûss-key", "", 
çl£
},

164 
‹¡Ca£s
 := []struct {

165 
buck‘Name
 
¡ršg


167 
šfo
 
šfoFÜCl›Á


169 
”r
 
”rÜ


171 
shouldPass
 
boŞ


175 {"my-buck‘", 
šfo
[0], 
n
, 
Œue
},

177 {"my-buck‘", 
šfo
[0], 
n
, 
Œue
},

179 {"my-buck‘", 
šfo
[0], 
n
, 
Œue
},

181 {"my-buck‘", 
šfo
[1], 
n
, 
Œue
},

182 {"my-buck‘", 
šfo
[1], 
n
, 
Œue
},

183 {"my-buck‘", 
šfo
[1], 
n
, 
Œue
},

185 {"my-buck‘", 
šfo
[2], 
n
, 
Œue
},

186 {"my-buck‘", 
šfo
[2], 
n
, 
Œue
},

187 {"my-buck‘", 
šfo
[2], 
n
, 
Œue
},

189 {"my-buck‘", 
šfo
[3], 
n
, 
Œue
},

190 {"my-buck‘", 
šfo
[3], 
n
, 
Œue
},

191 {"my-buck‘", 
šfo
[3], 
n
, 
Œue
},

193 {"my-buck‘", 
šfo
[4], 
n
, 
Œue
},

194 {"my-buck‘", 
šfo
[4], 
n
, 
Œue
},

195 {"my-buck‘", 
šfo
[4], 
n
, 
Œue
},

197 {"my-buck‘", 
šfo
[5], 
n
, 
Œue
},

198 {"my-buck‘", 
šfo
[5], 
n
, 
Œue
},

199 {"my-buck‘", 
šfo
[5], 
n
, 
Œue
},

201 {"my-buck‘", 
šfo
[6], 
n
, 
Œue
},

202 {"my-buck‘", 
šfo
[6], 
n
, 
Œue
},

203 {"my-buck‘", 
šfo
[6], 
n
, 
Œue
},

205 {"my-buck‘", 
šfo
[7], 
n
, 
Œue
},

206 {"my-buck‘", 
šfo
[7], 
n
, 
Œue
},

207 {"my-buck‘", 
šfo
[7], 
n
, 
Œue
},

209 {"my-buck‘", 
šfo
[8], 
n
, 
Œue
},

210 {"my-buck‘", 
šfo
[8], 
n
, 
Œue
},

211 {"my-buck‘", 
šfo
[8], 
n
, 
Œue
},

213 {"my-buck‘", 
šfo
[9], 
n
, 
Œue
},

214 {"my-buck‘", 
šfo
[9], 
n
, 
Œue
},

215 {"my-buck‘", 
šfo
[9], 
n
, 
Œue
},

217 {"my-buck‘", 
šfo
[10], 
n
, 
Œue
},

218 {"my-buck‘", 
šfo
[10], 
n
, 
Œue
},

219 {"my-buck‘", 
šfo
[10], 
n
, 
Œue
},

221 {"my-buck‘", 
šfo
[11], 
n
, 
Œue
},

222 {"my-buck‘", 
šfo
[11], 
n
, 
Œue
},

223 {"my-buck‘", 
šfo
[11], 
n
, 
Œue
},

225 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

228 
ş›Á
 :ğ&
Cl›Á
{}

229 
v¬
 
”r
 
”rÜ


230 
‹¡Ca£
.
šfo
.
’dPošt
 != "" {

232 
ş›Á
, 
”r
 = 
	`New
(
‹¡Ca£
.
šfo
.
’dPošt
,e¡Ca£.šfo.
acûssKey
,e¡Ca£.šfo.
£ü‘Key
,e¡Ca£.šfo.
’abËIn£cu»
)

233 
”r
 !ğ
n
 {

234 
t
.
	`F©®f
("Te¡ %d: FaedØü—‹‚ew Cl›Á: %s", 
i
+1, 
”r
.
	`E¼Ü
())

238 
aùu®Req
, 
”r
 :ğ
ş›Á
.
	`g‘Buck‘LoÿtiÚReque¡
(
‹¡Ca£
.
buck‘Name
)

239 
”r
 !ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

240 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
.
	`E¼Ü
())

242 
”r
 =ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

243 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™h <ERROR> \"%s\", buˆ·s£d in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
())

246 
”r
 !ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

247 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

248 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™hƒ¼Ü \"%s\", buˆš¡—d faed w™hƒ¼Ü \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
(),ƒrr.Error())

253 
”r
 =ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

254 
ex³ùedReq
 :ğ&
h‰p
.
Reque¡
{}

255 
ex³ùedReq
, 
”r
 = 
	`ü—‹Ex³ùedReque¡
(
ş›Á
, 
‹¡Ca£
.
buck‘Name
,ƒxpectedReq)

256 
”r
 !ğ
n
 {

257 
t
.
	`F©®f
("Te¡ %d: Ex³ùed„eque¡ C»©iÚ faed", 
i
+1)

259 
ex³ùedReq
.
M‘hod
 !ğ
aùu®Req
.Method {

260 
t
.
	`E¼Üf
("Te¡ %d: Thex³ùed Reque¡ m‘hod dÛ¢'ˆm©ch w™hhaùu® oÃ", 
i
+1)

262 
ex³ùedReq
.
URL
.
	`SŒšg
(è!ğ
aùu®Req
.URL.String() {

263 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedh»que¡ URLØb'%s', buˆš¡—d found '%s'", 
i
+1, 
ex³ùedReq
.
URL
.
	`SŒšg
(), 
aùu®Req
.URL.String())

265 
ex³ùedReq
.
CÚ‹ÁL’gth
 !ğ
aùu®Req
.ContentLength {

266 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedh»que¡ body CÚ‹Á-L’gthØb'%d', buˆfound '%d' in¡—d", 
i
+1, 
ex³ùedReq
.
CÚ‹ÁL’gth
, 
aùu®Req
.ContentLength)

269 
ex³ùedReq
.
H—d”
.
	`G‘
("X-Amz-CÚ‹Á-Sha256"è!ğ
aùu®Req
.Header.Get("X-Amz-Content-Sha256") {

270 
t
.
	`E¼Üf
("Te¡ %d: 'X-Amz-CÚ‹Á-Sha256' h—d” oàthex³ùed„eque¡ dÛ¢'ˆm©ch w™hh© oàthaùu®„eque¡", 
i
+1)

272 
ex³ùedReq
.
H—d”
.
	`G‘
("U£r-Ag’t"è!ğ
aùu®Req
.Header.Get("User-Agent") {

273 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed 'U£r-Ag’t' h—d”Øb\"%s\",buˆfound \"%s\" in¡—d", 
i
+1, 
ex³ùedReq
.
H—d”
.
	`G‘
("U£r-Ag’t"), 
aùu®Req
.Header.Get("User-Agent"))

277 
	}
}

280 
func
 
g’”©eLoÿtiÚRe¥Ú£
(
»¥
 *
h‰p
.
Re¥Ú£
, 
bodyCÚ‹Á
 []
by‹
è(*
	gh‰p
.
	gRe¥Ú£
, 
	g”rÜ
) {

281 
	g»¥
.
	gStusCode
 = 
h‰p
.
StusOK


282 
»¥
.
Body
 = 
iout
.
NİClo£r
(
by‹s
.
NewBufãr
(
bodyCÚ‹Á
))

283  
»¥
, 
	gn


287 
func
 
	$Te¡ProûssBuck‘LoÿtiÚRe¥Ú£
(
t
 *
‹¡šg
.
T
) {

289 
ty³
 
LoÿtiÚRe¥Ú£
 struct {

290 
XMLName
 
xml
.
Name
 `xml:"h‰p://s3.amazÚaws.com/doc/2006-03-01/ LoÿtiÚCÚ¡¿št" 
jsÚ
:"-"`

291 
LoÿtiÚ
 
¡ršg
 `
xml
:",chardata"`

294 
APIE¼Üs
 :ğ[]
APIE¼Ü
{

296 
Code
: "AccessDenied",

297 
DesütiÚ
: "Access Denied",

298 
HTTPStusCode
: 
h‰p
.
StusUÇuthÜized
,

301 
‹¡Ca£s
 := []struct {

302 
buck‘Name
 
¡ršg


303 
šputLoÿtiÚ
 
¡ršg


304 
isAPIE¼Ü
 
boŞ


305 
­iE¼
 
APIE¼Ü


307 
ex³ùedResuÉ
 
¡ršg


308 
”r
 
”rÜ


310 
shouldPass
 
boŞ


312 {"my-buck‘", "", 
Œue
, 
APIE¼Üs
[0], "us-—¡-1", 
n
,rue},

313 {"my-buck‘", "", 
çl£
, 
APIE¼Ü
{}, "us-—¡-1", 
n
, 
Œue
},

314 {"my-buck‘", "EU", 
çl£
, 
APIE¼Ü
{}, "eu-we¡-1", 
n
, 
Œue
},

315 {"my-buck‘", "eu-ûÁ¿l-1", 
çl£
, 
APIE¼Ü
{}, "eu-ûÁ¿l-1", 
n
, 
Œue
},

316 {"my-buck‘", "us-—¡-1", 
çl£
, 
APIE¼Ü
{}, "us-—¡-1", 
n
, 
Œue
},

319 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

320 
šputRe¥Ú£
 :ğ&
h‰p
.
Re¥Ú£
{}

321 
v¬
 
”r
 
”rÜ


322 
‹¡Ca£
.
isAPIE¼Ü
 {

323 
šputRe¥Ú£
 = 
	`g’”©eE¼ÜRe¥Ú£
(šputRe¥Ú£, 
‹¡Ca£
.
­iE¼
,e¡Ca£.
buck‘Name
)

325 
šputRe¥Ú£
, 
”r
 = 
	`g’”©eLoÿtiÚRe¥Ú£
(šputRe¥Ú£, 
	`’codeRe¥Ú£
(
LoÿtiÚRe¥Ú£
{

326 
LoÿtiÚ
: 
‹¡Ca£
.
šputLoÿtiÚ
,

328 
”r
 !ğ
n
 {

329 
t
.
	`F©®f
("Te¡ %d: C»©iÚ oàv®id„e¥Ú£ faed", 
i
+1)

332 
aùu®ResuÉ
, 
”r
 :ğ
	`´oûssBuck‘LoÿtiÚRe¥Ú£
(
šputRe¥Ú£
, "my-bucket")

333 
”r
 !ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

334 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
.
	`E¼Ü
())

336 
”r
 =ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

337 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™h <ERROR> \"%s\", buˆ·s£d in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
())

340 
”r
 !ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

341 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

342 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™hƒ¼Ü \"%s\", buˆš¡—d faed w™hƒ¼Ü \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
(),ƒrr.Error())

345 
”r
 =ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

346 !
»æeù
.
	`D“pEqu®
(
‹¡Ca£
.
ex³ùedResuÉ
, 
aùu®ResuÉ
) {

347 
t
.
	`E¼Üf
("Te¡ %d: Thex³ùed Buck‘PŞicy dÛ¢'ˆm©chhaùu® Buck‘PŞicy", 
i
+1)

351 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/bucket-notification.go

18 
·ckage
 
mšio


20 
impÜt
 (

27 
ty³
 
NÙifiÿtiÚEv’tTy³
 
¡ršg


32 
ObjeùC»©edAÎ
 
	gNÙifiÿtiÚEv’tTy³
 = "s3:ObjectCreated:*"

33 
ObjeùC»©edPut
 = "s3:ObjectCreated:Put"

34 
ObjeùC»©edPo¡
 = "s3:ObjectCreated:Post"

35 
ObjeùC»©edCİy
 = "s3:ObjectCreated:Copy"

36 
ObjeùC»©edCom¶‘eMuÉ¬tU¶ßd
 = "s3:ObjectCreated:CompleteMultipartUpload"

37 
ObjeùAcûs£dG‘
 = "s3:ObjectAccessed:Get"

38 
ObjeùAcûs£dH—d
 = "s3:ObjectAccessed:Head"

39 
ObjeùAcûs£dAÎ
 = "s3:ObjectAccessed:*"

40 
ObjeùRemovedAÎ
 = "s3:ObjectRemoved:*"

41 
ObjeùRemovedD–‘e
 = "s3:ObjectRemoved:Delete"

42 
ObjeùRemovedD–‘eM¬k”C»©ed
 = "s3:ObjectRemoved:DeleteMarkerCreated"

43 
ObjeùReduûdRedundªcyLo¡Objeù
 = "s3:ReducedRedundancyLostObject"

48 
ty³
 
F‹rRuË
 struct {

49 
Name
 
¡ršg
 `
xml
:"Name"`

50 
V®ue
 
¡ršg
 `
xml
:"Value"`

55 
ty³
 
S3Key
 struct {

56 
F‹rRuËs
 []
F‹rRuË
 `
xml
:"FilterRule,omitempty"`

61 
ty³
 
F‹r
 struct {

62 
S3Key
 S3Key `
xml
:"S3Key,omitempty"`

67 
ty³
 
Aº
 struct {

68 
P¬t™iÚ
 
¡ršg


69 
S”viû
 
¡ršg


70 
RegiÚ
 
¡ršg


71 
AccouÁID
 
¡ršg


72 
Resourû
 
¡ršg


76 
func
 
	$NewAº
(
·¹™iÚ
, 
£rviû
, 
»giÚ
, 
accouÁID
, 
»sourû
 
¡ršg
è
Aº
 {

77  
Aº
{
P¬t™iÚ
: 
·¹™iÚ
,

78 
S”viû
: 
£rviû
,

79 
RegiÚ
: 
»giÚ
,

80 
AccouÁID
: 
accouÁID
,

81 
Resourû
: 
»sourû
}

82 
	}
}

85 
	$func
 (
¬n
 
Aº
è
	$SŒšg
(è
¡ršg
 {

86  "¬n:" + 
¬n
.
P¬t™iÚ
 + ":" +‡º.
S”viû
 + ":" +‡º.
RegiÚ
 + ":" +‡º.
AccouÁID
 + ":" +‡º.
Resourû


87 
	}
}

91 
ty³
 
NÙifiÿtiÚCÚfig
 struct {

92 
ID
 
¡ršg
 `
xml
:"Id,omitempty"`

93 
Aº
 Aº `
xml
:"-"`

94 
Ev’ts
 []
NÙifiÿtiÚEv’tTy³
 `
xml
:"Event"`

95 
F‹r
 *F‹¸`
xml
:"Filter,omitempty"`

99 
func
 
	$NewNÙifiÿtiÚCÚfig
(
¬n
 
Aº
è
NÙifiÿtiÚCÚfig
 {

100  
NÙifiÿtiÚCÚfig
{
Aº
: 
¬n
, 
F‹r
: &Filter{}}

101 
	}
}

104 
	$func
 (
t
 *
NÙifiÿtiÚCÚfig
è
	$AddEv’ts
(
ev’ts
 ...
NÙifiÿtiÚEv’tTy³
) {

105 
t
.
Ev’ts
 = 
	`­³nd
Ñ.Ev’ts, 
ev’ts
...)

106 
	}
}

109 
	$func
 (
t
 *
NÙifiÿtiÚCÚfig
è
	$AddF‹rSuffix
(
suffix
 
¡ršg
) {

110 
t
.
F‹r
 =ğ
n
 {

111 
t
.
F‹r
 = &Filter{}

113 
ÃwF‹rRuË
 :ğ
F‹rRuË
{
Name
: "suffix", 
V®ue
: 
suffix
}

115 
šdex
 :ğ
¿nge
 
t
.
F‹r
.
S3Key
.
F‹rRuËs
 {

116 
t
.
F‹r
.
S3Key
.
F‹rRuËs
[
šdex
].
Name
 == "suffix" {

117 
t
.
F‹r
.
S3Key
.
F‹rRuËs
[
šdex
] = 
ÃwF‹rRuË


121 
t
.
F‹r
.
S3Key
.
F‹rRuËs
 = 
	`­³nd
Ñ.F‹r.S3Key.F‹rRuËs, 
ÃwF‹rRuË
)

122 
	}
}

125 
	$func
 (
t
 *
NÙifiÿtiÚCÚfig
è
	$AddF‹rP»fix
(
´efix
 
¡ršg
) {

126 
t
.
F‹r
 =ğ
n
 {

127 
t
.
F‹r
 = &Filter{}

129 
ÃwF‹rRuË
 :ğ
F‹rRuË
{
Name
: "´efix", 
V®ue
: 
´efix
}

131 
šdex
 :ğ
¿nge
 
t
.
F‹r
.
S3Key
.
F‹rRuËs
 {

132 
t
.
F‹r
.
S3Key
.
F‹rRuËs
[
šdex
].
Name
 == "prefix" {

133 
t
.
F‹r
.
S3Key
.
F‹rRuËs
[
šdex
] = 
ÃwF‹rRuË


137 
t
.
F‹r
.
S3Key
.
F‹rRuËs
 = 
	`­³nd
Ñ.F‹r.S3Key.F‹rRuËs, 
ÃwF‹rRuË
)

138 
	}
}

141 
ty³
 
TİicCÚfig
 struct {

142 
NÙifiÿtiÚCÚfig


143 
Tİic
 
	m¡ršg
 `
	mxml
:"Topic"`

147 
ty³
 
QueueCÚfig
 struct {

148 
NÙifiÿtiÚCÚfig


149 
Queue
 
¡ršg
 `
xml
:"Queue"`

153 
ty³
 
LambdaCÚfig
 struct {

154 
NÙifiÿtiÚCÚfig


155 
Lambda
 
¡ršg
 `
xml
:"CloudFunction"`

159 
ty³
 
Buck‘NÙifiÿtiÚ
 struct {

160 
XMLName
 
xml
.
Name
 `xml:"NotificationConfiguration"`

161 
LambdaCÚfigs
 []
LambdaCÚfig
 `
xml
:"CloudFunctionConfiguration"`

162 
TİicCÚfigs
 []
TİicCÚfig
 `
xml
:"TopicConfiguration"`

163 
QueueCÚfigs
 []
QueueCÚfig
 `
xml
:"QueueConfiguration"`

167 
	$func
 (
b
 *
Buck‘NÙifiÿtiÚ
è
	$AddTİic
(
tİicCÚfig
 
NÙifiÿtiÚCÚfig
è
boŞ
 {

168 
ÃwTİicCÚfig
 :ğ
TİicCÚfig
{
NÙifiÿtiÚCÚfig
: 
tİicCÚfig
, 
Tİic
:İicCÚfig.
Aº
.
	`SŒšg
()}

169 
_
, 
n
 :ğ
¿nge
 
b
.
TİicCÚfigs
 {

171 
n
.
Tİic
 =ğ
ÃwTİicCÚfig
.
Aº
.
	`SŒšg
(è&&‚ewTİicCÚfig.
F‹r
 ==‚.Filter {

173 
exi¡šgCÚfig
 :ğ
£t
.
	`NewSŒšgS‘
()

174 
_
, 
v
 :ğ
¿nge
 
n
.
Ev’ts
 {

175 
exi¡šgCÚfig
.
	`Add
(
	`¡ršg
(
v
))

178 
ÃwCÚfig
 :ğ
£t
.
	`NewSŒšgS‘
()

179 
_
, 
v
 :ğ
¿nge
 
tİicCÚfig
.
Ev’ts
 {

180 
ÃwCÚfig
.
	`Add
(
	`¡ršg
(
v
))

183 !
ÃwCÚfig
.
	`IÁ”£ùiÚ
(
exi¡šgCÚfig
).
	`IsEm±y
() {

184  
çl£


188 
b
.
TİicCÚfigs
 = 
	`­³nd
(b.TİicCÚfigs, 
ÃwTİicCÚfig
)

189  
Œue


190 
	}
}

193 
	$func
 (
b
 *
Buck‘NÙifiÿtiÚ
è
	$AddQueue
(
queueCÚfig
 
NÙifiÿtiÚCÚfig
è
boŞ
 {

194 
ÃwQueueCÚfig
 :ğ
QueueCÚfig
{
NÙifiÿtiÚCÚfig
: 
queueCÚfig
, 
Queue
: queueCÚfig.
Aº
.
	`SŒšg
()}

195 
_
, 
n
 :ğ
¿nge
 
b
.
QueueCÚfigs
 {

196 
n
.
Queue
 =ğ
ÃwQueueCÚfig
.
Aº
.
	`SŒšg
(è&&‚ewQueueCÚfig.
F‹r
 ==‚.Filter {

198 
exi¡šgCÚfig
 :ğ
£t
.
	`NewSŒšgS‘
()

199 
_
, 
v
 :ğ
¿nge
 
n
.
Ev’ts
 {

200 
exi¡šgCÚfig
.
	`Add
(
	`¡ršg
(
v
))

203 
ÃwCÚfig
 :ğ
£t
.
	`NewSŒšgS‘
()

204 
_
, 
v
 :ğ
¿nge
 
queueCÚfig
.
Ev’ts
 {

205 
ÃwCÚfig
.
	`Add
(
	`¡ršg
(
v
))

208 !
ÃwCÚfig
.
	`IÁ”£ùiÚ
(
exi¡šgCÚfig
).
	`IsEm±y
() {

209  
çl£


213 
b
.
QueueCÚfigs
 = 
	`­³nd
(b.QueueCÚfigs, 
ÃwQueueCÚfig
)

214  
Œue


215 
	}
}

218 
	$func
 (
b
 *
Buck‘NÙifiÿtiÚ
è
	$AddLambda
(
ÏmbdaCÚfig
 
NÙifiÿtiÚCÚfig
è
boŞ
 {

219 
ÃwLambdaCÚfig
 :ğ
LambdaCÚfig
{
NÙifiÿtiÚCÚfig
: 
ÏmbdaCÚfig
, 
Lambda
:†ambdaCÚfig.
Aº
.
	`SŒšg
()}

220 
_
, 
n
 :ğ
¿nge
 
b
.
LambdaCÚfigs
 {

221 
n
.
Lambda
 =ğ
ÃwLambdaCÚfig
.
Aº
.
	`SŒšg
(è&&‚ewLambdaCÚfig.
F‹r
 ==‚.Filter {

223 
exi¡šgCÚfig
 :ğ
£t
.
	`NewSŒšgS‘
()

224 
_
, 
v
 :ğ
¿nge
 
n
.
Ev’ts
 {

225 
exi¡šgCÚfig
.
	`Add
(
	`¡ršg
(
v
))

228 
ÃwCÚfig
 :ğ
£t
.
	`NewSŒšgS‘
()

229 
_
, 
v
 :ğ
¿nge
 
ÏmbdaCÚfig
.
Ev’ts
 {

230 
ÃwCÚfig
.
	`Add
(
	`¡ršg
(
v
))

233 !
ÃwCÚfig
.
	`IÁ”£ùiÚ
(
exi¡šgCÚfig
).
	`IsEm±y
() {

234  
çl£


238 
b
.
LambdaCÚfigs
 = 
	`­³nd
(b.LambdaCÚfigs, 
ÃwLambdaCÚfig
)

239  
Œue


240 
	}
}

243 
	$func
 (
b
 *
Buck‘NÙifiÿtiÚ
è
	$RemoveTİicByAº
(
¬n
 
Aº
) {

244 
v¬
 
tİics
 []
TİicCÚfig


245 
_
, 
tİic
 :ğ
¿nge
 
b
.
TİicCÚfigs
 {

246 
tİic
.
Tİic
 !ğ
¬n
.
	`SŒšg
() {

247 
tİics
 = 
	`­³nd
Ñİics, 
tİic
)

250 
b
.
TİicCÚfigs
 = 
tİics


251 
	}
}

254 
	$func
 (
b
 *
Buck‘NÙifiÿtiÚ
è
	$RemoveQueueByAº
(
¬n
 
Aº
) {

255 
v¬
 
queues
 []
QueueCÚfig


256 
_
, 
queue
 :ğ
¿nge
 
b
.
QueueCÚfigs
 {

257 
queue
.
Queue
 !ğ
¬n
.
	`SŒšg
() {

258 
queues
 = 
	`­³nd
(queues, 
queue
)

261 
b
.
QueueCÚfigs
 = 
queues


262 
	}
}

265 
	$func
 (
b
 *
Buck‘NÙifiÿtiÚ
è
	$RemoveLambdaByAº
(
¬n
 
Aº
) {

266 
v¬
 
Ïmbdas
 []
LambdaCÚfig


267 
_
, 
Ïmbda
 :ğ
¿nge
 
b
.
LambdaCÚfigs
 {

268 
Ïmbda
.
Lambda
 !ğ
¬n
.
	`SŒšg
() {

269 
Ïmbdas
 = 
	`­³nd
Öambdas, 
Ïmbda
)

272 
b
.
LambdaCÚfigs
 = 
Ïmbdas


273 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/constants.go

18 
·ckage
 
mšio


24 cÚ¡ 
	gabsMšP¬tSize
 = 1024 * 1024 * 5

28 cÚ¡ 
mšP¬tSize
 = 1024 * 1024 * 64

31 cÚ¡ 
maxP¬tsCouÁ
 = 10000

35 cÚ¡ 
maxP¬tSize
 = 1024 * 1024 * 1024 * 5

39 cÚ¡ 
maxSšgËPutObjeùSize
 = 1024 * 1024 * 1024 * 5

43 cÚ¡ 
maxMuÉ¬tPutObjeùSize
 = 1024 * 1024 * 1024 * 1024 * 5

47 cÚ¡ 
unsigÃdPaylßd
 = "UNSIGNED-PAYLOAD"

50 cÚ¡ 
tÙ®WÜk”s
 = 4

54 
signV4AlgÜ™hm
 = "AWS4-HMAC-SHA256"

55 
iso8601D©eFÜm©
 = "20060102T150405Z"

59 cÚ¡ 
amzStÜageCÏss
 = "X-Amz-Storage-Class"

62 cÚ¡ 
amzWebs™eRedœeùLoÿtiÚ
 = "X-Amz-Website-Redirect-Location"

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/core.go

18 
·ckage
 
mšio


20 
impÜt
 (

29 
ty³
 
CÜe
 struct {

30 *
	mCl›Á


36 
func
 
NewCÜe
(
’dpošt
 
¡ršg
, 
acûssKeyID
, 
£ü‘AcûssKey
 sŒšg, 
£cu»
 
boŞ
è(*
	gCÜe
, 
	g”rÜ
) {

37 
v¬
 
s3Cl›Á
 
CÜe


38 
	gş›Á
, 
	g”r
 :ğ
NewV4
(
’dpošt
, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£cu»
)

39 
	g”r
 !ğ
n
 {

40  
n
, 
”r


42 
s3Cl›Á
.
Cl›Á
 = 
ş›Á


43  &
s3Cl›Á
, 
	gn


48 
	$func
 (
c
 
CÜe
è
	$Li¡Objeùs
(
buck‘
, 
´efix
, 
m¬k”
, 
d–im™”
 
¡ršg
, 
maxKeys
 è(
»suÉ
 
Li¡Buck‘ResuÉ
, 
”r
 
”rÜ
) {

49  
c
.
	`li¡ObjeùsQu”y
(
buck‘
, 
´efix
, 
m¬k”
, 
d–im™”
, 
maxKeys
)

50 
	}
}

54 
	$func
 (
c
 
CÜe
è
	$Li¡ObjeùsV2
(
buck‘Name
, 
objeùP»fix
, 
cÚtšu©iÚTok’
 
¡ršg
, 
ãtchOwÃr
 
boŞ
, 
d–im™”
 sŒšg, 
maxkeys
 , 
¡¬tAá”
 sŒšgè(
Li¡Buck‘V2ResuÉ
, 
”rÜ
) {

55  
c
.
	`li¡ObjeùsV2Qu”y
(
buck‘Name
, 
objeùP»fix
, 
cÚtšu©iÚTok’
, 
ãtchOwÃr
, 
d–im™”
, 
maxkeys
, 
¡¬tAá”
)

56 
	}
}

59 
	$func
 (
c
 
CÜe
è
	$CİyObjeù
(
sourûBuck‘
, 
sourûObjeù
, 
de¡Buck‘
, 
de¡Objeù
 
¡ršg
, 
m‘ad©a
 
m­
[¡ršg]¡ršgè(
ObjeùInfo
, 
”rÜ
) {

60  
c
.
	`cİyObjeùDo
(
cÚ‹xt
.
	`Background
(), 
sourûBuck‘
, 
sourûObjeù
, 
de¡Buck‘
, 
de¡Objeù
, 
m‘ad©a
)

61 
	}
}

65 
	$func
 (
c
 
CÜe
è
	$CİyObjeùP¬t
(
¤cBuck‘
, 
¤cObjeù
, 
de¡Buck‘
, 
de¡Objeù
 
¡ršg
, 
u¶ßdID
 string,

66 
·¹ID
 , 
¡¬tOff£t
, 
Ëngth
 
št64
, 
m‘ad©a
 
m­
[
¡ršg
]¡ršgè(
p
 
Com¶‘eP¬t
, 
”r
 
”rÜ
) {

68  
c
.
	`cİyObjeùP¬tDo
(
cÚ‹xt
.
	`Background
(), 
¤cBuck‘
, 
¤cObjeù
, 
de¡Buck‘
, 
de¡Objeù
, 
u¶ßdID
,

69 
·¹ID
, 
¡¬tOff£t
, 
Ëngth
, 
m‘ad©a
)

70 
	}
}

73 
	$func
 (
c
 
CÜe
è
	$PutObjeù
(
buck‘
, 
objeù
 
¡ršg
, 
d©a
 
io
.
R—d”
, 
size
 
št64
, 
md5Ba£64
, 
sha256Hex
 sŒšg, 
m‘ad©a
 
m­
[¡ršg]¡ršg, 
s£
 
’üy±
.
S”v”Side
è(
ObjeùInfo
, 
”rÜ
) {

74 
İts
 :ğ
PutObjeùO±iÚs
{}

75 
m
 :ğ
	`make
(
m­
[
¡ršg
]string)

76 
k
, 
v
 :ğ
¿nge
 
m‘ad©a
 {

77 
¡ršgs
.
	`ToLow”
(
k
) == "content-encoding" {

78 
İts
.
CÚ‹ÁEncodšg
 = 
v


79 } 
¡ršgs
.
	`ToLow”
(
k
) == "content-disposition" {

80 
İts
.
CÚ‹ÁDi¥os™iÚ
 = 
v


81 } 
¡ršgs
.
	`ToLow”
(
k
) == "content-language" {

82 
İts
.
CÚ‹ÁLªguage
 = 
v


83 } 
¡ršgs
.
	`ToLow”
(
k
) == "content-type" {

84 
İts
.
CÚ‹ÁTy³
 = 
v


85 } 
¡ršgs
.
	`ToLow”
(
k
) == "cache-control" {

86 
İts
.
CacheCÚŒŞ
 = 
v


87 } 
¡ršgs
.
	`ToLow”
(
k
è=ğ¡ršgs.ToLow”(
amzWebs™eRedœeùLoÿtiÚ
) {

88 
İts
.
Webs™eRedœeùLoÿtiÚ
 = 
v


90 
m
[
k
] = 
m‘ad©a
[k]

93 
İts
.
U£rM‘ad©a
 = 
m


94 
İts
.
S”v”SideEnüy±iÚ
 = 
s£


95  
c
.
	`putObjeùDo
(
cÚ‹xt
.
	`Background
(), 
buck‘
, 
objeù
, 
d©a
, 
md5Ba£64
, 
sha256Hex
, 
size
, 
İts
)

96 
	}
}

99 
	$func
 (
c
 
CÜe
è
	$NewMuÉ¬tU¶ßd
(
buck‘
, 
objeù
 
¡ršg
, 
İts
 
PutObjeùO±iÚs
è(
u¶ßdID
 sŒšg, 
”r
 
”rÜ
) {

100 
»suÉ
, 
”r
 :ğ
c
.
	`š™Ÿ‹MuÉ¬tU¶ßd
(
cÚ‹xt
.
	`Background
(), 
buck‘
, 
objeù
, 
İts
)

101  
»suÉ
.
U¶ßdID
, 
”r


102 
	}
}

105 
	$func
 (
c
 
CÜe
è
	$Li¡MuÉ¬tU¶ßds
(
buck‘
, 
´efix
, 
keyM¬k”
, 
u¶ßdIDM¬k”
, 
d–im™”
 
¡ršg
, 
maxU¶ßds
 è(
»suÉ
 
Li¡MuÉ¬tU¶ßdsResuÉ
, 
”r
 
”rÜ
) {

106  
c
.
	`li¡MuÉ¬tU¶ßdsQu”y
(
buck‘
, 
keyM¬k”
, 
u¶ßdIDM¬k”
, 
´efix
, 
d–im™”
, 
maxU¶ßds
)

107 
	}
}

110 
	$func
 (
c
 
CÜe
è
	$PutObjeùP¬t
(
buck‘
, 
objeù
, 
u¶ßdID
 
¡ršg
, 
·¹ID
 , 
d©a
 
io
.
R—d”
, 
size
 
št64
, 
md5Ba£64
, 
sha256Hex
 sŒšg, 
s£
 
’üy±
.
S”v”Side
è(
ObjeùP¬t
, 
”rÜ
) {

111  
c
.
	`u¶ßdP¬t
(
cÚ‹xt
.
	`Background
(), 
buck‘
, 
objeù
, 
u¶ßdID
, 
d©a
, 
·¹ID
, 
md5Ba£64
, 
sha256Hex
, 
size
, 
s£
)

112 
	}
}

115 
	$func
 (
c
 
CÜe
è
	$Li¡ObjeùP¬ts
(
buck‘
, 
objeù
, 
u¶ßdID
 
¡ršg
, 
·¹Numb”M¬k”
 , 
maxP¬ts
 è(
»suÉ
 
Li¡ObjeùP¬tsResuÉ
, 
”r
 
”rÜ
) {

116  
c
.
	`li¡ObjeùP¬tsQu”y
(
buck‘
, 
objeù
, 
u¶ßdID
, 
·¹Numb”M¬k”
, 
maxP¬ts
)

117 
	}
}

120 
	$func
 (
c
 
CÜe
è
	$Com¶‘eMuÉ¬tU¶ßd
(
buck‘
, 
objeù
, 
u¶ßdID
 
¡ršg
, 
·¹s
 []
Com¶‘eP¬t
è(¡ršg, 
”rÜ
) {

121 
»s
, 
”r
 :ğ
c
.
	`com¶‘eMuÉ¬tU¶ßd
(
cÚ‹xt
.
	`Background
(), 
buck‘
, 
objeù
, 
u¶ßdID
, 
com¶‘eMuÉ¬tU¶ßd
{

122 
P¬ts
: 
·¹s
,

124  
»s
.
ETag
, 
”r


125 
	}
}

128 
	$func
 (
c
 
CÜe
è
	$AbÜtMuÉ¬tU¶ßd
(
buck‘
, 
objeù
, 
u¶ßdID
 
¡ršg
è
”rÜ
 {

129  
c
.
	`abÜtMuÉ¬tU¶ßd
(
cÚ‹xt
.
	`Background
(), 
buck‘
, 
objeù
, 
u¶ßdID
)

130 
	}
}

133 
	$func
 (
c
 
CÜe
è
	$G‘Buck‘PŞicy
(
buck‘
 
¡ršg
è(¡ršg, 
”rÜ
) {

134  
c
.
	`g‘Buck‘PŞicy
(
buck‘
)

135 
	}
}

138 
	$func
 (
c
 
CÜe
è
	$PutBuck‘PŞicy
(
buck‘
, 
buck‘PŞicy
 
¡ršg
è
”rÜ
 {

139  
c
.
	`putBuck‘PŞicy
(
buck‘
, 
buck‘PŞicy
)

140 
	}
}

145 
	$func
 (
c
 
CÜe
è
	$G‘Objeù
(
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
G‘ObjeùO±iÚs
è(
io
.
R—dClo£r
, 
ObjeùInfo
, 
”rÜ
) {

146  
c
.
	`g‘Objeù
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
İts
)

147 
	}
}

151 
	$func
 (
c
 
CÜe
è
	$StObjeù
(
buck‘Name
, 
objeùName
 
¡ršg
, 
İts
 
StObjeùO±iÚs
è(
ObjeùInfo
, 
”rÜ
) {

152  
c
.
	`¡©Objeù
(
cÚ‹xt
.
	`Background
(), 
buck‘Name
, 
objeùName
, 
İts
)

153 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/core_test.go

18 
·ckage
 
mšio


20 
impÜt
 (

32 
	g£rv”Endpošt
 = "SERVER_ENDPOINT"

33 
acûssKey
 = "ACCESS_KEY"

34 
£ü‘Key
 = "SECRET_KEY"

35 
’abËSecur™y
 = "ENABLE_HTTPS"

39 cÚ¡ 
MšP¬tSize
 = 1024 * 1024 * 64

40 cÚ¡ 
Ë‰”By‹s
 = "abcdefghijklmnopqrstuvwxyz01234569"

42 
Ë‰”IdxB™s
 = 6

43 
Ë‰”IdxMask
 = 1<<
Ë‰”IdxB™s
 - 1

44 
Ë‰”IdxMax
 = 63 / 
Ë‰”IdxB™s


48 
func
 
	$¿ndSŒšg
(
n
 , 
¤c
 
¿nd
.
Sourû
, 
´efix
 
¡ršg
) string {

49 
b
 :ğ
	`make
([]
by‹
, 
n
)

51 
i
, 
ÿche
, 
»maš
 :ğ
n
-1, 
¤c
.
	`IÁ63
(), 
Ë‰”IdxMax
; i >= 0; {

52 
»maš
 == 0 {

53 
ÿche
, 
»maš
 = 
¤c
.
	`IÁ63
(), 
Ë‰”IdxMax


55 
idx
 :ğ(
ÿche
 & 
Ë‰”IdxMask
); idx < 
	`Ën
(
Ë‰”By‹s
) {

56 
b
[
i
] = 
Ë‰”By‹s
[
idx
]

57 
i
--

59 
ÿche
 >>ğ
Ë‰”IdxB™s


60 
»maš
--

62  
´efix
 + 
	`¡ršg
(
b
[0:30-
	`Ën
(prefix)])

63 
	}
}

66 
func
 
	$Te¡G‘ObjeùCÜe
(
t
 *
‹¡šg
.
T
) {

67 
‹¡šg
.
	`ShÜt
() {

68 
t
.
	`Sk
("skipping functionalests forhe short„uns")

72 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

75 
c
, 
”r
 :ğ
	`NewCÜe
(

76 
os
.
	`G‘’v
(
£rv”Endpošt
),

77 
os
.
	`G‘’v
(
acûssKey
),

78 
os
.
	`G‘’v
(
£ü‘Key
),

79 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËSecur™y
)),

81 
”r
 !ğ
n
 {

82 
t
.
	`F©®
("E¼Ü:", 
”r
)

89 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

92 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

95 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

96 
”r
 !ğ
n
 {

97 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
)

101 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("3"), 
¿nd
.
	`IÁn
(1<<20)+32*1024)

104 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

105 
n
, 
”r
 :ğ
c
.
Cl›Á
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
PutObjeùO±iÚs
{

106 
CÚ‹ÁTy³
: "binary/octet-stream",

108 
”r
 !ğ
n
 {

109 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

112 
n
 !ğ
	`št64
(
	`Ën
(
buf
)) {

113 
t
.
	`F©®f
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
n
)

116 
off£t
 :ğ
	`št64
(2048)

119 
buf1
 :ğ
	`make
([]
by‹
, 512)

120 
buf2
 :ğ
	`make
([]
by‹
, 512)

121 
buf3
 :ğ
	`make
([]
by‹
, 
n
)

122 
buf4
 :ğ
	`make
([]
by‹
, 1)

124 
İts
 :ğ
G‘ObjeùO±iÚs
{}

125 
İts
.
	`S‘Rªge
(
off£t
, off£t+
	`št64
(
	`Ën
(
buf1
))-1)

126 
»ad”
, 
objeùInfo
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
İts
)

127 
”r
 !ğ
n
 {

128 
t
.
	`F©®
(
”r
)

130 
m
, 
”r
 :ğ
io
.
	`R—dFuÎ
(
»ad”
, 
buf1
)

131 
»ad”
.
	`Clo£
()

132 
”r
 !ğ
n
 {

133 
t
.
	`F©®
(
”r
)

136 
objeùInfo
.
Size
 !ğ
	`št64
(
m
) {

137 
t
.
	`F©®f
("E¼Ü: G‘Objeù„—d shÜ‹¸by‹ befÜ»achšg EOF, wªˆ%v, gÙ %v\n", 
objeùInfo
.
Size
, 
m
)

139 !
by‹s
.
	`Equ®
(
buf1
, 
buf
[
off£t
:offset+512]) {

140 
t
.
	`F©®
("Error: Incorrect„ead betweenwo GetObject from same offset.")

142 
off£t
 += 512

144 
İts
.
	`S‘Rªge
(
off£t
, off£t+
	`št64
(
	`Ën
(
buf2
))-1)

145 
»ad”
, 
objeùInfo
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
İts
)

146 
”r
 !ğ
n
 {

147 
t
.
	`F©®
(
”r
)

150 
m
, 
”r
 = 
io
.
	`R—dFuÎ
(
»ad”
, 
buf2
)

151 
»ad”
.
	`Clo£
()

152 
”r
 !ğ
n
 {

153 
t
.
	`F©®
(
”r
)

156 
objeùInfo
.
Size
 !ğ
	`št64
(
m
) {

157 
t
.
	`F©®f
("E¼Ü: G‘Objeù„—d shÜ‹¸by‹ befÜ»achšg EOF, wªˆ%v, gÙ %v\n", 
objeùInfo
.
Size
, 
m
)

159 !
by‹s
.
	`Equ®
(
buf2
, 
buf
[
off£t
:offset+512]) {

160 
t
.
	`F©®
("Error: Incorrect„ead betweenwo GetObject from same offset.")

163 
İts
.
	`S‘Rªge
(0, 
	`št64
(
	`Ën
(
buf3
)))

164 
»ad”
, 
objeùInfo
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
İts
)

165 
”r
 !ğ
n
 {

166 
t
.
	`F©®
(
”r
)

169 
m
, 
”r
 = 
io
.
	`R—dFuÎ
(
»ad”
, 
buf3
)

170 
”r
 !ğ
n
 {

171 
»ad”
.
	`Clo£
()

172 
t
.
	`F©®
(
”r
)

174 
»ad”
.
	`Clo£
()

176 
objeùInfo
.
Size
 !ğ
	`št64
(
m
) {

177 
t
.
	`F©®f
("E¼Ü: G‘Objeù„—d shÜ‹¸by‹ befÜ»achšg EOF, wªˆ%v, gÙ %v\n", 
objeùInfo
.
Size
, 
m
)

179 !
by‹s
.
	`Equ®
(
buf3
, 
buf
) {

180 
t
.
	`F©®
("Error: Incorrect data„ead in GetObject,han what was…reviously upoaded.")

183 
İts
 = 
G‘ObjeùO±iÚs
{}

184 
İts
.
	`S‘M©chETag
("etag")

185 
_
, _, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
İts
)

186 
”r
 =ğ
n
 {

187 
t
.
	`F©®
("Unexpected GetObject should fail with mismatchingƒtags")

189 
”rRe¥
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
);ƒ¼Re¥.
Code
 != "PreconditionFailed" {

190 
t
.
	`F©®f
("Ex³ùed \"P»cÚd™iÚFaed\"‡ code, gÙ % š¡—d", 
”rRe¥
.
Code
)

193 
İts
 = 
G‘ObjeùO±iÚs
{}

194 
İts
.
	`S‘M©chETagExû±
("etag")

195 
»ad”
, 
objeùInfo
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
İts
)

196 
”r
 !ğ
n
 {

197 
t
.
	`F©®
(
”r
)

200 
m
, 
”r
 = 
io
.
	`R—dFuÎ
(
»ad”
, 
buf3
)

201 
»ad”
.
	`Clo£
()

202 
”r
 !ğ
n
 {

203 
t
.
	`F©®
(
”r
)

206 
objeùInfo
.
Size
 !ğ
	`št64
(
m
) {

207 
t
.
	`F©®f
("E¼Ü: G‘Objeù„—d shÜ‹¸by‹ befÜ»achšg EOF, wªˆ%v, gÙ %v\n", 
objeùInfo
.
Size
, 
m
)

209 !
by‹s
.
	`Equ®
(
buf3
, 
buf
) {

210 
t
.
	`F©®
("Error: Incorrect data„ead in GetObject,han what was…reviously upoaded.")

213 
İts
 = 
G‘ObjeùO±iÚs
{}

214 
İts
.
	`S‘Rªge
(0, 0)

215 
»ad”
, 
objeùInfo
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
İts
)

216 
”r
 !ğ
n
 {

217 
t
.
	`F©®
(
”r
)

220 
m
, 
”r
 = 
io
.
	`R—dFuÎ
(
»ad”
, 
buf4
)

221 
»ad”
.
	`Clo£
()

222 
”r
 !ğ
n
 {

223 
t
.
	`F©®
(
”r
)

226 
objeùInfo
.
Size
 !ğ
	`št64
(
m
) {

227 
t
.
	`F©®f
("E¼Ü: G‘Objeù„—d shÜ‹¸by‹ befÜ»achšg EOF, wªˆ%v, gÙ %v\n", 
objeùInfo
.
Size
, 
m
)

230 
”r
 = 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
)

231 
”r
 !ğ
n
 {

232 
t
.
	`F©®
("E¼Ü: ", 
”r
)

234 
”r
 = 
c
.
	`RemoveBuck‘
(
buck‘Name
)

235 
”r
 !ğ
n
 {

236 
t
.
	`F©®
("E¼Ü:", 
”r
)

238 
	}
}

242 
func
 
	$Te¡G‘ObjeùCÚ‹ÁEncodšg
(
t
 *
‹¡šg
.
T
) {

243 
‹¡šg
.
	`ShÜt
() {

244 
t
.
	`Sk
("skipping functionalests forhe short„uns")

248 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

251 
c
, 
”r
 :ğ
	`NewCÜe
(

252 
os
.
	`G‘’v
(
£rv”Endpošt
),

253 
os
.
	`G‘’v
(
acûssKey
),

254 
os
.
	`G‘’v
(
£ü‘Key
),

255 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËSecur™y
)),

257 
”r
 !ğ
n
 {

258 
t
.
	`F©®
("E¼Ü:", 
”r
)

265 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

268 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

271 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

272 
”r
 !ğ
n
 {

273 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
)

277 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("3"), 
¿nd
.
	`IÁn
(1<<20)+32*1024)

280 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

281 
n
, 
”r
 :ğ
c
.
Cl›Á
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
PutObjeùO±iÚs
{

282 
CÚ‹ÁEncodšg
: "gzip",

284 
”r
 !ğ
n
 {

285 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

288 
n
 !ğ
	`št64
(
	`Ën
(
buf
)) {

289 
t
.
	`F©®f
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
n
)

292 
rwc
, 
objInfo
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
G‘ObjeùO±iÚs
{})

293 
”r
 !ğ
n
 {

294 
t
.
	`F©®f
("E¼Ü: %v", 
”r
)

296 
rwc
.
	`Clo£
()

297 
objInfo
.
Size
 <= 0 {

298 
t
.
	`F©®f
("UÃx³ùed sizoàthobjeù %v,ƒx³ùed %v", 
objInfo
.
Size
, 
n
)

300 
v®ue
, 
ok
 :ğ
objInfo
.
M‘ad©a
["Content-Encoding"]

301 !
ok
 {

302 
t
.
	`F©®f
("Expected Content-Encoding metadatao be set.")

304 
v®ue
[0] != "gzip" {

305 
t
.
	`F©®f
("UÃx³ùed cÚ‹Á-’codšg found, wªˆgz, gÙ %v", 
v®ue
)

308 
”r
 = 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
)

309 
”r
 !ğ
n
 {

310 
t
.
	`F©®
("E¼Ü: ", 
”r
)

312 
”r
 = 
c
.
	`RemoveBuck‘
(
buck‘Name
)

313 
”r
 !ğ
n
 {

314 
t
.
	`F©®
("E¼Ü:", 
”r
)

316 
	}
}

319 
func
 
	$Te¡G‘Buck‘PŞicy
(
t
 *
‹¡šg
.
T
) {

320 
‹¡šg
.
	`ShÜt
() {

321 
t
.
	`Sk
("skipping functionalests for short„uns")

325 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

328 
c
, 
”r
 :ğ
	`NewCÜe
(

329 
os
.
	`G‘’v
(
£rv”Endpošt
),

330 
os
.
	`G‘’v
(
acûssKey
),

331 
os
.
	`G‘’v
(
£ü‘Key
),

332 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËSecur™y
)),

334 
”r
 !ğ
n
 {

335 
t
.
	`F©®
("E¼Ü:", 
”r
)

342 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

345 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

348 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

349 
”r
 !ğ
n
 {

350 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
)

354 
v¬
 
exi¡s
 
boŞ


355 
exi¡s
, 
”r
 = 
c
.
	`Buck‘Exi¡s
(
buck‘Name
)

356 
”r
 !ğ
n
 {

357 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
)

359 !
exi¡s
 {

360 
t
.
	`F©®
("E¼Ü: could‚Ù fšd ", 
buck‘Name
)

364 
buck‘PŞicy
, 
”r
 :ğ
c
.
	`G‘Buck‘PŞicy
(
buck‘Name
)

365 
”r
 !ğ
n
 {

366 
”rRe¥
 :ğ
	`ToE¼ÜRe¥Ú£
(
”r
)

367 
”rRe¥
.
Code
 != "NoSuchBucketPolicy" {

368 
t
.
	`E¼Ü
("E¼Ü:", 
”r
, 
buck‘Name
)

371 
buck‘PŞicy
 != "" {

372 
t
.
	`E¼Üf
("Buck‘…Şicyƒx³ùed %#v, gÙ %#v", "", 
buck‘PŞicy
)

375 
”r
 = 
c
.
	`RemoveBuck‘
(
buck‘Name
)

376 
”r
 !ğ
n
 {

377 
t
.
	`F©®
("E¼Ü:", 
”r
)

379 
	}
}

382 
func
 
	$Te¡CÜeCİyObjeù
(
t
 *
‹¡šg
.
T
) {

383 
‹¡šg
.
	`ShÜt
() {

384 
t
.
	`Sk
("skipping functionalests for short„uns")

388 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

391 
c
, 
”r
 :ğ
	`NewCÜe
(

392 
os
.
	`G‘’v
(
£rv”Endpošt
),

393 
os
.
	`G‘’v
(
acûssKey
),

394 
os
.
	`G‘’v
(
£ü‘Key
),

395 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËSecur™y
)),

397 
”r
 !ğ
n
 {

398 
t
.
	`F©®
("E¼Ü:", 
”r
)

405 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

408 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

411 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

412 
”r
 !ğ
n
 {

413 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
)

416 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("a"), 32*1024)

419 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

420 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

422 }, 
n
)

423 
”r
 !ğ
n
 {

424 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

427 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

428 
t
.
	`F©®f
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
)

431 
de¡Buck‘Name
 :ğ
buck‘Name


432 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

434 
cobjInfo
, 
”r
 :ğ
c
.
	`CİyObjeù
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
m­
[
¡ršg
]string{

438 
”r
 !ğ
n
 {

439 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

441 
cobjInfo
.
ETag
 !ğ
objInfo
.ETag {

442 
t
.
	`F©®f
("E¼Ü:ƒx³ùedƒgØb§ma sourû objeù %s, buˆfound difã»Áƒg :%s", 
objInfo
.
ETag
, 
cobjInfo
.ETag)

446 
r
, 
”r
 :ğ
c
.
Cl›Á
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
G‘ObjeùO±iÚs
{})

447 
”r
 !ğ
n
 {

448 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

451 
¡
, 
”r
 :ğ
r
.
	`St
()

452 
”r
 !ğ
n
 {

453 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

456 
¡
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

457 
t
.
	`F©®f
("Error:‚umber of bytes in stat does‚ot match, want %v, got %v\n",

458 
	`Ën
(
buf
), 
¡
.
Size
)

461 
¡
.
CÚ‹ÁTy³
 != "application/javascript" {

462 
t
.
	`F©®f
("E¼Ü: CÚ‹Áy³ dÚ'ˆm©ch,ƒx³ùed:‡µliÿtiÚ/javasüt, found: %+v\n", 
¡
.
CÚ‹ÁTy³
)

465 
¡
.
ETag
 !ğ
objInfo
.ETag {

466 
t
.
	`F©®f
("E¼Ü:ƒx³ùedƒgØb§ma sourû objeù %s, buˆfound difã»Áƒg :%s", 
objInfo
.
ETag
, 
¡
.ETag)

469 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

470 
t
.
	`F©®
("E¼Ü:", 
”r
)

473 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ =ğ
n
 {

474 
t
.
	`F©®
("Error: object is‡lready closed, should„eturnƒrror")

477 
”r
 = 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
)

478 
”r
 !ğ
n
 {

479 
t
.
	`F©®
("E¼Ü: ", 
”r
)

482 
”r
 = 
c
.
	`RemoveObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
)

483 
”r
 !ğ
n
 {

484 
t
.
	`F©®
("E¼Ü: ", 
”r
)

487 
”r
 = 
c
.
	`RemoveBuck‘
(
buck‘Name
)

488 
”r
 !ğ
n
 {

489 
t
.
	`F©®
("E¼Ü:", 
”r
)

493 
	}
}

496 
func
 
	$Te¡CÜeCİyObjeùP¬t
(
t
 *
‹¡šg
.
T
) {

497 
‹¡šg
.
	`ShÜt
() {

498 
t
.
	`Sk
("skipping functionalests for short„uns")

502 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

505 
c
, 
”r
 :ğ
	`NewCÜe
(

506 
os
.
	`G‘’v
(
£rv”Endpošt
),

507 
os
.
	`G‘’v
(
acûssKey
),

508 
os
.
	`G‘’v
(
£ü‘Key
),

509 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËSecur™y
)),

511 
”r
 !ğ
n
 {

512 
t
.
	`F©®
("E¼Ü:", 
”r
)

519 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

522 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

525 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

526 
”r
 !ğ
n
 {

527 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
)

531 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

534 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

535 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

537 }, 
n
)

538 
”r
 !ğ
n
 {

539 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

542 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

543 
t
.
	`F©®f
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
)

546 
de¡Buck‘Name
 :ğ
buck‘Name


547 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

549 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
PutObjeùO±iÚs
{})

550 
”r
 !ğ
n
 {

551 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

559 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
n
)

560 
”r
 !ğ
n
 {

561 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

565 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
n
)

566 
”r
 !ğ
n
 {

567 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

571 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
n
)

572 
”r
 !ğ
n
 {

573 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

577 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

578 
”r
 !ğ
n
 {

579 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

583 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
StObjeùO±iÚs
{})

584 
”r
 !ğ
n
 {

585 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

588 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

589 
t
.
	`F©®
("Destination object has incorrect size!")

593 
g‘O±s
 :ğ
G‘ObjeùO±iÚs
{}

594 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

595 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

596 
”r
 !ğ
n
 {

597 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

599 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

600 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

601 
”r
 !ğ
n
 {

602 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

604 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

605 
t
.
	`F©®
("Got unexpected data in first 5MB")

608 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

609 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

610 
”r
 !ğ
n
 {

611 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

613 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

614 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

615 
”r
 !ğ
n
 {

616 
t
.
	`F©®
("E¼Ü:", 
”r
, 
de¡Buck‘Name
, 
de¡ObjeùName
)

618 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

619 
t
.
	`F©®
("Got unexpected data in second 5MB")

621 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

622 
t
.
	`F©®
("Got unexpected data in†ast byte of copied object!")

625 
”r
 :ğ
c
.
	`RemoveObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
);ƒ¼ !ğ
n
 {

626 
t
.
	`F©®
("E¼Ü: ", 
”r
)

629 
”r
 :ğ
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
);ƒ¼ !ğ
n
 {

630 
t
.
	`F©®
("E¼Ü: ", 
”r
)

633 
”r
 :ğ
c
.
	`RemoveBuck‘
(
buck‘Name
);ƒ¼ !ğ
n
 {

634 
t
.
	`F©®
("E¼Ü: ", 
”r
)

638 
	}
}

641 
func
 
	$Te¡CÜePutObjeù
(
t
 *
‹¡šg
.
T
) {

642 
‹¡šg
.
	`ShÜt
() {

643 
t
.
	`Sk
("skipping functionalests for short„uns")

647 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

650 
c
, 
”r
 :ğ
	`NewCÜe
(

651 
os
.
	`G‘’v
(
£rv”Endpošt
),

652 
os
.
	`G‘’v
(
acûssKey
),

653 
os
.
	`G‘’v
(
£ü‘Key
),

654 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËSecur™y
)),

656 
”r
 !ğ
n
 {

657 
t
.
	`F©®
("E¼Ü:", 
”r
)

664 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

667 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

670 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

671 
”r
 !ğ
n
 {

672 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
)

675 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("a"), 32*1024)

678 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

680 
objeùCÚ‹ÁTy³
 := "binary/octet-stream"

681 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

682 
m‘ad©a
["CÚ‹Á-Ty³"] = 
objeùCÚ‹ÁTy³


684 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "1B2M2Y8AsgTpgAmY7PhCfg==", "", 
m‘ad©a
, 
n
)

685 
”r
 =ğ
n
 {

686 
t
.
	`F©®
("Errorƒxpected:ƒrror, got:‚il(success)")

689 
objInfo
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m‘ad©a
, 
n
)

690 
”r
 !ğ
n
 {

691 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

694 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

695 
t
.
	`F©®f
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
)

699 
r
, 
”r
 :ğ
c
.
Cl›Á
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
G‘ObjeùO±iÚs
{})

700 
”r
 !ğ
n
 {

701 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

704 
¡
, 
”r
 :ğ
r
.
	`St
()

705 
”r
 !ğ
n
 {

706 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
, 
objeùName
)

709 
¡
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

710 
t
.
	`F©®f
("Error:‚umber of bytes in stat does‚ot match, want %v, got %v\n",

711 
	`Ën
(
buf
), 
¡
.
Size
)

714 
¡
.
CÚ‹ÁTy³
 !ğ
objeùCÚ‹ÁTy³
 {

715 
t
.
	`F©®f
("E¼Ü: CÚ‹Áy³ dÚ'ˆm©ch,ƒx³ùed: %+v, found: %+v\n", 
objeùCÚ‹ÁTy³
, 
¡
.
CÚ‹ÁTy³
)

718 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

719 
t
.
	`F©®
("E¼Ü:", 
”r
)

722 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ =ğ
n
 {

723 
t
.
	`F©®
("Error: object is‡lready closed, should„eturnƒrror")

726 
”r
 = 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
)

727 
”r
 !ğ
n
 {

728 
t
.
	`F©®
("E¼Ü: ", 
”r
)

731 
”r
 = 
c
.
	`RemoveBuck‘
(
buck‘Name
)

732 
”r
 !ğ
n
 {

733 
t
.
	`F©®
("E¼Ü:", 
”r
)

735 
	}
}

737 
func
 
	$Te¡CÜeG‘ObjeùM‘ad©a
(
t
 *
‹¡šg
.
T
) {

738 
‹¡šg
.
	`ShÜt
() {

739 
t
.
	`Sk
("skipping functionalests forhe short„uns")

742 
cÜe
, 
”r
 :ğ
	`NewCÜe
(

743 
os
.
	`G‘’v
(
£rv”Endpošt
),

744 
os
.
	`G‘’v
(
acûssKey
),

745 
os
.
	`G‘’v
(
£ü‘Key
),

746 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËSecur™y
)))

747 
”r
 !ğ
n
 {

748 
log
.
	`F©®Ê
(
”r
)

752 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

755 
”r
 = 
cÜe
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

756 
”r
 !ğ
n
 {

757 
t
.
	`F©®
("E¼Ü:", 
”r
, 
buck‘Name
)

760 
m‘ad©a
 :ğ
m­
[
¡ršg
]string{

764 
_
, 
”r
 = 
cÜe
.
	`PutObjeù
(
buck‘Name
, "my-objectname",

765 
by‹s
.
	`NewR—d”
([]
	`by‹
("h–lo")), 5, "", "", 
m‘ad©a
, 
n
)

766 
”r
 !ğ
n
 {

767 
log
.
	`F©®Ê
(
”r
)

770 
»ad”
, 
objInfo
, 
”r
 :ğ
cÜe
.
	`G‘Objeù
(
buck‘Name
, "my-objeùÇme", 
G‘ObjeùO±iÚs
{})

771 
”r
 !ğ
n
 {

772 
log
.
	`F©®Ê
(
”r
)

774 
deãr
 
»ad”
.
	`Clo£
()

776 
objInfo
.
M‘ad©a
.
	`G‘
("X-Amz-Meta-Key-1") != "Val-1" {

777 
log
.
	`F©®Ê
("Expected metadatao be‡vailable but wasn't")

780 
”r
 = 
cÜe
.
	`RemoveObjeù
(
buck‘Name
, "my-objectname")

781 
”r
 !ğ
n
 {

782 
t
.
	`F©®
("E¼Ü: ", 
”r
)

784 
”r
 = 
cÜe
.
	`RemoveBuck‘
(
buck‘Name
)

785 
”r
 !ğ
n
 {

786 
t
.
	`F©®
("E¼Ü:", 
”r
)

788 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/docs/validator.go

20 
·ckage
 
maš


22 
impÜt
 (

37 
func
 
	$š™
() {

39 
_
, 
”r
 :ğ
exec
.
	`LookP©h
("go");ƒ¼ !ğ
n
 {

40 
	`·nic
(
”r
)

42 
	}
}

44 
v¬
 
	gglob®FÏgs
 = []
şi
.
FÏg
{

45 
şi
.
SŒšgFÏg
{

46 
Name
: "m",

47 
V®ue
: "API.md",

48 
U§ge
: "Patho markdown‡pi documentation.",

50 
şi
.
SŒšgFÏg
{

51 
Name
: "t",

52 
V®ue
: "checker.go.template",

53 
U§ge
: "Template used for generatinghe…rograms.",

55 
şi
.
IÁFÏg
{

56 
Name
: "skip",

57 
V®ue
: 2,

58 
U§ge
: "Skipƒntries before validatinghe code.",

62 
func
 
	$runGofmt
(
·th
 
¡ršg
è(
msg
 sŒšg, 
”r
 
”rÜ
) {

63 
cmdArgs
 :ğ[]
¡ršg
{"-s", "-w", "-l", 
·th
}

64 
cmd
 :ğ
exec
.
	`Commªd
("gofmt", 
cmdArgs
...)

65 
¡doutStd”r
, 
”r
 :ğ
cmd
.
	`CombšedOuut
()

66 
”r
 !ğ
n
 {

67  "", 
”r


69  
	`¡ršg
(
¡doutStd”r
), 
n


70 
	}
}

72 
func
 
	$runGoImpÜts
(
·th
 
¡ršg
è(
msg
 sŒšg, 
”r
 
”rÜ
) {

73 
cmdArgs
 :ğ[]
¡ršg
{"-w", 
·th
}

74 
cmd
 :ğ
exec
.
	`Commªd
("goimpÜts", 
cmdArgs
...)

75 
¡doutStd”r
, 
”r
 :ğ
cmd
.
	`CombšedOuut
()

76 
”r
 !ğ
n
 {

77  
	`¡ršg
(
¡doutStd”r
), 
”r


79  
	`¡ršg
(
¡doutStd”r
), 
n


80 
	}
}

82 
func
 
	$runGoBud
(
·th
 
¡ršg
è(
msg
 sŒšg, 
”r
 
”rÜ
) {

84 
cmdArgs
 :ğ[]
¡ršg
{"bud", "-o", "/dev/nuÎ", 
·th
}

85 
cmd
 :ğ
exec
.
	`Commªd
("go", 
cmdArgs
...)

86 
¡doutStd”r
, 
”r
 :ğ
cmd
.
	`CombšedOuut
()

87 
”r
 !ğ
n
 {

88  
	`¡ršg
(
¡doutStd”r
), 
”r


90  
	`¡ršg
(
¡doutStd”r
), 
n


91 
	}
}

93 
func
 
	$v®id©ÜAùiÚ
(
ùx
 *
şi
.
CÚ‹xt
è
”rÜ
 {

94 !
ùx
.
	`IsS‘
("m") || !ctx.IsSet("t") {

95  
n


97 
docP©h
 :ğ
ùx
.
	`SŒšg
("m")

98 
v¬
 
”r
 
”rÜ


99 
docP©h
, 
”r
 = 
f•©h
.
	`Abs
(docPath)

100 
”r
 !ğ
n
 {

101  
”r


103 
d©a
, 
”r
 :ğ
iout
.
	`R—dFe
(
docP©h
)

104 
”r
 !ğ
n
 {

105  
”r


108 
‹m¶©eP©h
 :ğ
ùx
.
	`SŒšg
("t")

109 
‹m¶©eP©h
, 
”r
 = 
f•©h
.
	`Abs
(templatePath)

110 
”r
 !ğ
n
 {

111  
”r


114 
skEÁr›s
 :ğ
ùx
.
	`IÁ
("skip")

115 
m
 :ğ
m¬k
.
	`New
(
	`¡ršg
(
d©a
), &m¬k.
O±iÚs
{

116 
Gfm
: 
Œue
,

119 
t
, 
”r
 :ğ
‹m¶©e
.
	`P¬£Fes
(
‹m¶©eP©h
)

120 
”r
 !ğ
n
 {

121  
”r


124 
tmpDœ
, 
”r
 :ğ
iout
.
	`TempDœ
("", "md-verifier")

125 
”r
 !ğ
n
 {

126  
”r


128 
deãr
 
os
.
	`RemoveAÎ
(
tmpDœ
)

130 
’ŒyN
 := 1

131 
i
 :ğ
m¬k
.
NodeText
; i < m¬k.
NodeCheckbox
; i++ {

132 
m¬k
.
NodeCode
 !ğm¬k.
	`NodeTy³
(
i
) {

133 
m
.
	`AddR’d”Fn
(
m¬k
.
	`NodeTy³
(
i
), 
	`func
(
node
 m¬k.
Node
è(
s
 
¡ršg
) {

138 
m
.
	`AddR’d”Fn
(
m¬k
.
NodeCode
, 
	`func
(
node
 m¬k.
Node
è(
s
 
¡ršg
) {

139 
p
, 
ok
 :ğ
node
.(*
m¬k
.
CodeNode
)

140 !
ok
 {

143 
p
.
Text
 = 
¡ršgs
.
	`NewR•Ïûr
("&É;", "<", "&gt;", ">", "&quÙ;", `"`, "&
amp
;", "&").Replace(p.Text)

144 
skEÁr›s
 > 0 {

145 
skEÁr›s
--

149 
‹¡FeP©h
 :ğ
f•©h
.
	`Još
(
tmpDœ
, "example.go")

150 
w
, 
w”r
 :ğ
os
.
	`C»©e
(
‹¡FeP©h
)

151 
w”r
 !ğ
n
 {

152 
	`·nic
(
w”r
)

154 
t
.
	`Execu‹
(
w
, 
p
)

155 
w
.
	`Sync
()

156 
w
.
	`Clo£
()

157 
’ŒyN
++

159 
msg
, 
”r
 :ğ
	`runGofmt
(
‹¡FeP©h
)

160 
”r
 !ğ
n
 {

161 
fmt
.
	`Prštf
("Faed„uÂšg gofmˆÚ %s, w™h (%s):(%s)\n", 
‹¡FeP©h
, 
msg
, 
”r
)

162 
os
.
	`Ex™
(-1)

165 
msg
, 
”r
 = 
	`runGoImpÜts
(
‹¡FeP©h
)

166 
”r
 !ğ
n
 {

167 
fmt
.
	`Prštf
("Faed„uÂšg gofmˆÚ %s, w™h (%s):(%s)\n", 
‹¡FeP©h
, 
msg
, 
”r
)

168 
os
.
	`Ex™
(-1)

171 
msg
, 
”r
 = 
	`runGoBud
(
‹¡FeP©h
)

172 
”r
 !ğ
n
 {

173 
fmt
.
	`Prštf
("Faed„uÂšg gobud oÀ%s, w™h (%s):(%s)\n", 
‹¡FeP©h
, 
msg
, 
”r
)

174 
fmt
.
	`Prštf
("Codw™h…ossibË issuš %s:\n%s", 
docP©h
, 
p
.
Text
)

175 
fmt
.
	`Prštf
("TØ‹¡ `gØbud %s`\n", 
‹¡FeP©h
)

176 
os
.
	`Ex™
(-1)

180 
os
.
	`Remove
(
‹¡FeP©h
)

185 
w
 :ğ
wow
.
	`New
(
os
.
Stdout
, 
¥š
.
	`G‘
(¥š.
MoÚ
), 
fmt
.
	`S´štf
(" RuÂšg v®id©iÚe¡ š %s", 
tmpDœ
))

187 
w
.
	`S¹
()

189 
_
 = 
m
.
	`R’d”
()

190 
w
.
	`P”si¡W™h
(
¥š
.
	`G‘
(¥š.
RuÂ”
), " Successfully finishedests")

191 
w
.
	`Stİ
()

193  
n


194 
	}
}

196 
func
 
	$maš
() {

197 
­p
 :ğ
şi
.
	`NewAµ
()

198 
­p
.
AùiÚ
 = 
v®id©ÜAùiÚ


199 
­p
.
HideV”siÚ
 = 
Œue


200 
­p
.
HideH–pCommªd
 = 
Œue


201 
­p
.
U§ge
 = "Validates code block sections inside API.md"

202 
­p
.
AuthÜ
 = "Minio.io"

203 
­p
.
FÏgs
 = 
glob®FÏgs


205 
­p
.
Cu¡omAµH–pTem¶©e
 = `
NAME
:

206 {{.
Name
}} - {{.
U§ge
}}

208 
USAGE
:

209 {{.
Name
}} {{.
VisibËFÏgs
}}[
FLAGS
] {{
’d
}}
COMMAND
{{.VisibËFÏgs}} [COMMAND FLAGS | -
h
]{{’d}} [
ARGUMENTS
...]

211 
COMMANDS
:

212 {{
¿nge
 .
VisibËCommªds
}}{{
još
 .
Names
 ", "}}{{ "\t" }}{{.
U§ge
}}

213 {{
’d
}}{{.
VisibËFÏgs
}}

214 
FLAGS
:

215 {{
¿nge
 .
VisibËFÏgs
}}{{.}}

216 {{
’d
}}{{end}}

217 
TEMPLATE
:

218 
V®id©Ü
 
u£s
 
Go
' '
‹xt
/
‹m¶©e
' formatting so you‚eedoƒnsure

219 
your
 
‹m¶©e
 
is
 
fÜm©‹d
 
cÜ»ùly
, 
check
 'docs/checker.go.template'

221 
USAGE
:

222 
go
 
run
 
docs
/
v®id©Ü
.gØ-
m
 docs/
API
.
md
 -
t
 /
tmp
/
mycode
.go.
‹m¶©e


225 
­p
.
	`Run
(
os
.
Args
)

227 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/minio/listenbucketnotification.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
mšioCl›Á
, 
”r
 :ğ
mšio
.
	`New
("¶ay.mšio.io:9000", "YOUR-ACCESS", "YOUR-SECRET", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

45 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

48 
deãr
 
	`şo£
(
dÚeCh
)

51 
nÙifiÿtiÚInfo
 :ğ
¿nge
 
mšioCl›Á
.
	`Li¡’Buck‘NÙifiÿtiÚ
("YOUR-BUCKET", "PREFIX", "SUFFIX", []
¡ršg
{

55 }, 
dÚeCh
) {

56 
nÙifiÿtiÚInfo
.
E¼
 !ğ
n
 {

57 
log
.
	`F©®Ê
(
nÙifiÿtiÚInfo
.
E¼
)

59 
log
.
	`Pršn
(
nÙifiÿtiÚInfo
)

61 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/bucketexists.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

42 
found
, 
”r
 :ğ
s3Cl›Á
.
	`Buck‘Exi¡s
("my-bucketname")

43 
”r
 !ğ
n
 {

44 
log
.
	`F©®Ê
(
”r
)

47 
found
 {

48 
log
.
	`Pršn
("Bucket found.")

50 
log
.
	`Pršn
("Bucket‚ot found.")

52 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/composeobject.go

20 
·ckage
 
maš


22 
impÜt
 (

25 
mšio
 "github.com/minio/minio-go"

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

47 
decKey
 :ğ
mšio
.
	`NewSSEInfo
([]
by‹
{1, 2, 3}, "")

51 
¤c1
 :ğ
mšio
.
	`NewSourûInfo
("buck‘1", "objeù1", &
decKey
)

52 
¤c1
.
	`S‘M©chETagCÚd
("31624deb84149d2f8ef9c385918b653a")

54 
¤c2
 :ğ
mšio
.
	`NewSourûInfo
("buck‘2", "objeù2", &
decKey
)

55 
¤c2
.
	`S‘M©chETagCÚd
("f8ef9c385918b653a31624deb84149d2")

57 
¤c3
 :ğ
mšio
.
	`NewSourûInfo
("buck‘3", "objeù3", &
decKey
)

58 
¤c3
.
	`S‘M©chETagCÚd
("5918b653a31624deb84149d2f8ef9c38")

61 
¤cs
 :ğ[]
mšio
.
SourûInfo
{
¤c1
, 
¤c2
, 
¤c3
}

64 
’cKey
 :ğ
mšio
.
	`NewSSEInfo
([]
by‹
{8, 9, 0}, "")

67 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
("buck‘", "objeù", &
’cKey
, 
n
)

68 
”r
 !ğ
n
 {

69 
log
.
	`F©®Ê
(
”r
)

72 
”r
 = 
s3Cl›Á
.
	`Compo£Objeù
(
d¡
, 
¤cs
)

73 
”r
 !ğ
n
 {

74 
log
.
	`F©®Ê
(
”r
)

77 
log
.
	`Pršn
("Composed object successfully.")

78 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/copyobject.go

20 
·ckage
 
maš


22 
impÜt
 (

29 
func
 
	$maš
() {

38 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

47 
¤c
 :ğ
mšio
.
	`NewSourûInfo
("my-sourûbuck‘Çme", "my-sourûobjeùÇme", 
n
)

52 
¤c
.
	`S‘Modif›dSšûCÚd
(
time
.
	`D©e
(2014,ime.
A´
, 0, 0, 0, 0, 0,ime.
UTC
))

64 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
("my-buck‘Çme", "my-objeùÇme", 
n
,‚il)

65 
”r
 !ğ
n
 {

66 
log
.
	`F©®Ê
(
”r
)

70 
”r
 = 
s3Cl›Á
.
	`CİyObjeù
(
d¡
, 
¤c
)

71 
”r
 !ğ
n
 {

72 
log
.
	`F©®Ê
(
”r
)

74 
log
.
	`Pršn
("Copied source object /my-sourcebucketname/my-sourceobjectnameo destination /my-bucketname/my-objectname Successfully.")

75 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fgetobject-context.go

20 
·ckage
 
maš


22 
impÜt
 (

31 
func
 
	$maš
() {

41 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

42 
”r
 !ğ
n
 {

43 
log
.
	`F©®Ê
(
”r
)

46 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 10*
time
.
Mšu‹
)

47 
deãr
 
	`ÿnûl
()

49 
”r
 :ğ
s3Cl›Á
.
	`FG‘ObjeùW™hCÚ‹xt
(
ùx
, "my-buck‘Çme", "my-objeùÇme", "my-f’ame.csv", 
mšio
.
G‘ObjeùO±iÚs
{});ƒ¼ !ğ
n
 {

50 
log
.
	`F©®Ê
(
”r
)

52 
log
.
	`Pršn
("Successfully saved my-filename.csv")

54 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fgetobject.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

42 
”r
 :ğ
s3Cl›Á
.
	`FG‘Objeù
("my-buck‘Çme", "my-objeùÇme", "my-f’ame.csv", 
mšio
.
G‘ObjeùO±iÚs
{});ƒ¼ !ğ
n
 {

43 
log
.
	`F©®Ê
(
”r
)

45 
log
.
	`Pršn
("Successfully saved my-filename.csv")

46 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fputencrypted-object.go

20 
·ckage
 
maš


22 
impÜt
 (

30 
func
 
	$maš
() {

39 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

40 
”r
 !ğ
n
 {

41 
log
.
	`F©®Ê
(
”r
)

44 
feP©h
 := "my-testfile"

45 
buck‘Çme
 := "my-bucketname"

46 
objeùName
 := "my-objectname"

47 
·sswÜd
 := "correct horse battery staple"

50 
’üy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
buck‘Çme
+
objeùName
))

53 
n
, 
”r
 :ğ
s3Cl›Á
.
	`FPutObjeù
(
buck‘Çme
, 
objeùName
, 
feP©h
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
’üy±iÚ
})

54 
”r
 !ğ
n
 {

55 
log
.
	`F©®Ê
(
”r
)

58 
log
.
	`Pršn
("U¶ßded", "my-objeùÇme", " oàsize: ", 
n
, "Successfully.")

59 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fputobject-context.go

20 
·ckage
 
maš


22 
impÜt
 (

31 
func
 
	$maš
() {

41 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

42 
”r
 !ğ
n
 {

43 
log
.
	`F©®Ê
(
”r
)

46 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 10*
time
.
Mšu‹
)

47 
deãr
 
	`ÿnûl
()

49 
_
, 
”r
 :ğ
s3Cl›Á
.
	`FPutObjeùW™hCÚ‹xt
(
ùx
, "my-buck‘Çme", "my-objeùÇme", "my-f’ame.csv", 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "­¶iÿtiÚ/csv"});ƒ¼ !ğ
n
 {

50 
log
.
	`F©®Ê
(
”r
)

52 
log
.
	`Pršn
("Successfully uploaded my-filename.csv")

53 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fputobject.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

42 
_
, 
”r
 :ğ
s3Cl›Á
.
	`FPutObjeù
("my-buck‘Çme", "my-objeùÇme", "my-f’ame.csv", 
mšio
.
PutObjeùO±iÚs
{

43 
CÚ‹ÁTy³
: "application/csv",

44 }); 
”r
 !ğ
n
 {

45 
log
.
	`F©®Ê
(
”r
)

47 
log
.
	`Pršn
("Successfully uploaded my-filename.csv")

48 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/get-encrypted-object.go

20 
·ckage
 
maš


22 
impÜt
 (

31 
func
 
	$maš
() {

40 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESS-KEY-HERE", "YOUR-SECRET-KEY-HERE", 
Œue
)

41 
”r
 !ğ
n
 {

42 
log
.
	`F©®Ê
(
”r
)

45 
buck‘Çme
 := "my-bucketname"

46 
objeùName
 := "my-objectname"

47 
·sswÜd
 := "correct horse battery staple"

50 
’üy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
buck‘Çme
+
objeùName
))

53 
»ad”
, 
”r
 :ğ
s3Cl›Á
.
	`G‘Objeù
(
buck‘Çme
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
’üy±iÚ
})

54 
”r
 !ğ
n
 {

55 
log
.
	`F©®Ê
(
”r
)

57 
deãr
 
»ad”
.
	`Clo£
()

60 
loÿlFe
, 
”r
 :ğ
os
.
	`C»©e
("my-testfile")

61 
”r
 !ğ
n
 {

62 
log
.
	`F©®Ê
(
”r
)

64 
deãr
 
loÿlFe
.
	`Clo£
()

66 
_
, 
”r
 :ğ
io
.
	`Cİy
(
loÿlFe
, 
»ad”
);ƒ¼ !ğ
n
 {

67 
log
.
	`F©®Ê
(
”r
)

69 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getbucketlifecycle.go

20 
·ckage
 
maš


22 
impÜt
 (

31 
func
 
	$maš
() {

40 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

41 
”r
 !ğ
n
 {

42 
log
.
	`F©®Ê
(
”r
)

48 
liãcyşe
, 
”r
 :ğ
s3Cl›Á
.
	`G‘Buck‘Liãcyşe
("my-bucketname")

49 
”r
 !ğ
n
 {

50 
log
.
	`F©®Ê
(
”r
)

54 
loÿlLiãcyşeFe
, 
”r
 :ğ
os
.
	`C»©e
("lifecycle.json")

55 
”r
 !ğ
n
 {

56 
log
.
	`F©®Ê
(
”r
)

58 
deãr
 
loÿlLiãcyşeFe
.
	`Clo£
()

60 
liãcyşeR—d”
 :ğ
¡ršgs
.
	`NewR—d”
(
liãcyşe
)

62 
_
, 
”r
 :ğ
io
.
	`Cİy
(
loÿlLiãcyşeFe
, 
liãcyşeR—d”
);ƒ¼ !ğ
n
 {

63 
log
.
	`F©®Ê
(
”r
)

65 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getbucketnotification.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

44 
nÙifiÿtiÚs
, 
”r
 :ğ
s3Cl›Á
.
	`G‘Buck‘NÙifiÿtiÚ
("my-bucketname")

45 
”r
 !ğ
n
 {

46 
log
.
	`F©®Ê
(
”r
)

49 
log
.
	`Pršn
("Bucket‚otification‡re successfully„etrieved.")

51 
_
, 
tİicCÚfig
 :ğ
¿nge
 
nÙifiÿtiÚs
.
TİicCÚfigs
 {

52 
_
, 
e
 :ğ
¿nge
 
tİicCÚfig
.
Ev’ts
 {

53 
log
.
	`Pršn
(
e
 + "ƒvent isƒnabled.")

56 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getbucketpolicy.go

20 
·ckage
 
maš


22 
impÜt
 (

31 
func
 
	$maš
() {

40 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

41 
”r
 !ğ
n
 {

42 
log
.
	`F©®Ê
(
”r
)

47 
pŞicy
, 
”r
 :ğ
s3Cl›Á
.
	`G‘Buck‘PŞicy
("my-bucketname")

48 
”r
 !ğ
n
 {

49 
log
.
	`F©®Ê
(
”r
)

53 
loÿlFe
, 
”r
 :ğ
os
.
	`C»©e
("policy.json")

54 
”r
 !ğ
n
 {

55 
log
.
	`F©®Ê
(
”r
)

57 
deãr
 
loÿlFe
.
	`Clo£
()

59 
pŞicyR—d”
 :ğ
¡ršgs
.
	`NewR—d”
(
pŞicy
)

61 
_
, 
”r
 :ğ
io
.
	`Cİy
(
loÿlFe
, 
pŞicyR—d”
);ƒ¼ !ğ
n
 {

62 
log
.
	`F©®Ê
(
”r
)

64 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getobject-client-encryption.go

20 
·ckage
 
maš


22 
impÜt
 (

32 
func
 
	$maš
() {

41 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

42 
”r
 !ğ
n
 {

43 
log
.
	`F©®Ê
(
”r
)

46 
obj
, 
”r
 :ğ
s3Cl›Á
.
	`G‘Objeù
("my-buck‘Çme", "my-objeùÇme", 
mšio
.
G‘ObjeùO±iÚs
{})

47 
”r
 !ğ
n
 {

48 
log
.
	`F©®Ê
(
”r
)

51 
loÿlFe
, 
”r
 :ğ
os
.
	`C»©e
("my-testfile")

52 
”r
 !ğ
n
 {

53 
log
.
	`F©®Ê
(
”r
)

55 
deãr
 
loÿlFe
.
	`Clo£
()

57 
·sswÜd
 :ğ[]
	`by‹
("myfavoritepassword")

58 
§É
 :ğ[]
	`by‹
(
·th
.
	`Još
("my-bucketname", "my-objectname"))

59 
_
, 
”r
 = 
sio
.
	`Deüy±
(
loÿlFe
, 
obj
, sio.
CÚfig
{

60 
Key
: 
¬gÚ2
.
	`IDKey
(
·sswÜd
, 
§É
, 1, 64*1024, 4, 32),

62 
”r
 !ğ
n
 {

63 
log
.
	`F©®Ê
(
”r
)

65 
log
.
	`Pršn
("Successfully decrypted 'my-objectname'o†ocal file 'my-testfile'")

66 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getobject-context.go

20 
·ckage
 
maš


22 
impÜt
 (

33 
func
 
	$maš
() {

43 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESS-KEY-HERE", "YOUR-SECRET-KEY-HERE", 
Œue
)

44 
”r
 !ğ
n
 {

45 
log
.
	`F©®Ê
(
”r
)

48 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 10*
time
.
Mšu‹
)

49 
deãr
 
	`ÿnûl
()

51 
İts
 :ğ
mšio
.
G‘ObjeùO±iÚs
{}

52 
İts
.
	`S‘Modif›d
(
time
.
	`Now
().
	`Round
(10 *ime.
Mšu‹
))

53 
»ad”
, 
”r
 :ğ
s3Cl›Á
.
	`G‘ObjeùW™hCÚ‹xt
(
ùx
, "my-buck‘Çme", "my-objeùÇme", 
İts
)

54 
”r
 !ğ
n
 {

55 
log
.
	`F©®Ê
(
”r
)

57 
deãr
 
»ad”
.
	`Clo£
()

59 
loÿlFe
, 
”r
 :ğ
os
.
	`C»©e
("my-testfile")

60 
”r
 !ğ
n
 {

61 
log
.
	`F©®Ê
(
”r
)

63 
deãr
 
loÿlFe
.
	`Clo£
()

65 
¡©
, 
”r
 :ğ
»ad”
.
	`St
()

66 
”r
 !ğ
n
 {

67 
log
.
	`F©®Ê
(
”r
)

70 
_
, 
”r
 :ğ
io
.
	`CİyN
(
loÿlFe
, 
»ad”
, 
¡©
.
Size
);ƒ¼ !ğ
n
 {

71 
log
.
	`F©®Ê
(
”r
)

73 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getobject.go

20 
·ckage
 
maš


22 
impÜt
 (

30 
func
 
	$maš
() {

39 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESS-KEY-HERE", "YOUR-SECRET-KEY-HERE", 
Œue
)

40 
”r
 !ğ
n
 {

41 
log
.
	`F©®Ê
(
”r
)

44 
»ad”
, 
”r
 :ğ
s3Cl›Á
.
	`G‘Objeù
("my-buck‘Çme", "my-objeùÇme", 
mšio
.
G‘ObjeùO±iÚs
{})

45 
”r
 !ğ
n
 {

46 
log
.
	`F©®Ê
(
”r
)

48 
deãr
 
»ad”
.
	`Clo£
()

50 
loÿlFe
, 
”r
 :ğ
os
.
	`C»©e
("my-testfile")

51 
”r
 !ğ
n
 {

52 
log
.
	`F©®Ê
(
”r
)

54 
deãr
 
loÿlFe
.
	`Clo£
()

56 
¡©
, 
”r
 :ğ
»ad”
.
	`St
()

57 
”r
 !ğ
n
 {

58 
log
.
	`F©®Ê
(
”r
)

61 
_
, 
”r
 :ğ
io
.
	`CİyN
(
loÿlFe
, 
»ad”
, 
¡©
.
Size
);ƒ¼ !ğ
n
 {

62 
log
.
	`F©®Ê
(
”r
)

64 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getobjectacl.go

20 
·ckage
 
maš


22 
impÜt
 (

26 
mšio
 "github.com/minio/minio-go"

29 
func
 
	$maš
() {

38 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESS-KEY-HERE", "YOUR-SECRET-KEY-HERE", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

43 
objeùInfo
, 
”r
 :ğ
s3Cl›Á
.
	`G‘ObjeùACL
("my-bucketname", "my-objectname")

44 
”r
 !ğ
n
 {

45 
log
.
	`F©®Ê
(
”r
)

49 
k
, 
v
 :ğ
¿nge
 
objeùInfo
.
M‘ad©a
 {

50 
fmt
.
	`Pršn
("key:", 
k
)

51 
fmt
.
	`Prštf
(" - v®ue: %v\n", 
v
)

53 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listbuckets.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

42 
buck‘s
, 
”r
 :ğ
s3Cl›Á
.
	`Li¡Buck‘s
()

43 
”r
 !ğ
n
 {

44 
log
.
	`F©®Ê
(
”r
)

46 
_
, 
buck‘
 :ğ
¿nge
 
buck‘s
 {

47 
log
.
	`Pršn
(
buck‘
)

49 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listincompleteuploads.go

20 
·ckage
 
maš


22 
impÜt
 (

29 
func
 
	$maš
() {

38 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

44 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

47 
deãr
 
	`şo£
(
dÚeCh
)

50 
muÉ¬tObjeù
 :ğ
¿nge
 
s3Cl›Á
.
	`Li¡Incom¶‘eU¶ßds
("my-buck‘Çme", "my-´efixÇme", 
Œue
, 
dÚeCh
) {

51 
muÉ¬tObjeù
.
E¼
 !ğ
n
 {

52 
fmt
.
	`Pršn
(
muÉ¬tObjeù
.
E¼
)

55 
fmt
.
	`Pršn
(
muÉ¬tObjeù
)

58 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listobjects-N.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
fmt
.
	`Pršn
(
”r
)

44 
li¡ObjeùsN
 :ğ
	`func
(
buck‘
, 
´efix
 
¡ršg
, 
»cursive
 
boŞ
, 
N
 è(
objsInfo
 []
mšio
.
ObjeùInfo
, 
”r
 
”rÜ
) {

46 
dÚeCh
 :ğ
	`make
(
chª
 struct{}, 1)

49 
deãr
 
	`şo£
(
dÚeCh
)

51 
i
 := 1

52 
objeù
 :ğ
¿nge
 
s3Cl›Á
.
	`Li¡Objeùs
(
buck‘
, 
´efix
, 
»cursive
, 
dÚeCh
) {

53 
objeù
.
E¼
 !ğ
n
 {

54  
n
, 
objeù
.
E¼


56 
i
++

58 
i
 =ğ
N
 {

61 
dÚeCh
 <- struct{}{}

63 
objsInfo
 = 
	`­³nd
(objsInfo, 
objeù
)

65  
objsInfo
, 
n


69 
»cursive
 :ğ
Œue


70 
objsInfo
, 
”r
 :ğ
	`li¡ObjeùsN
("my-buck‘Çme", "my-´efixÇme", 
»cursive
, 100)

71 
”r
 !ğ
n
 {

72 
fmt
.
	`Pršn
(
”r
)

76 
fmt
.
	`Pršn
(
objsInfo
)

77 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listobjects.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
fmt
.
	`Pršn
(
”r
)

44 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

47 
deãr
 
	`şo£
(
dÚeCh
)

50 
objeù
 :ğ
¿nge
 
s3Cl›Á
.
	`Li¡Objeùs
("my-buck‘Çme", "my-´efixÇme", 
Œue
, 
dÚeCh
) {

51 
objeù
.
E¼
 !ğ
n
 {

52 
fmt
.
	`Pršn
(
objeù
.
E¼
)

55 
fmt
.
	`Pršn
(
objeù
)

58 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listobjectsV2.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
fmt
.
	`Pršn
(
”r
)

44 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

47 
deãr
 
	`şo£
(
dÚeCh
)

50 
objeù
 :ğ
¿nge
 
s3Cl›Á
.
	`Li¡ObjeùsV2
("my-buck‘Çme", "my-´efixÇme", 
Œue
, 
dÚeCh
) {

51 
objeù
.
E¼
 !ğ
n
 {

52 
fmt
.
	`Pršn
(
objeù
.
E¼
)

55 
fmt
.
	`Pršn
(
objeù
)

58 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/makebucket.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

42 
”r
 = 
s3Cl›Á
.
	`MakeBuck‘
("my-bucketname", "us-east-1")

43 
”r
 !ğ
n
 {

44 
log
.
	`F©®Ê
(
”r
)

46 
log
.
	`Pršn
("Success")

47 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/presignedgetobject.go

20 
·ckage
 
maš


22 
impÜt
 (

30 
func
 
	$maš
() {

39 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

40 
”r
 !ğ
n
 {

41 
log
.
	`F©®Ê
(
”r
)

45 
»qP¬ams
 :ğ
	`make
(
u¾
.
V®ues
)

46 
»qP¬ams
.
	`S‘
("response-content-disposition", "attachment; filename=\"your-filename.txt\"")

49 
´esigÃdURL
, 
”r
 :ğ
s3Cl›Á
.
	`P»sigÃdG‘Objeù
("my-buck‘Çme", "my-objeùÇme", 
time
.
	`Du¿tiÚ
(1000)*time.
SecÚd
, 
»qP¬ams
)

50 
”r
 !ğ
n
 {

51 
log
.
	`F©®Ê
(
”r
)

53 
log
.
	`Pršn
(
´esigÃdURL
)

54 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/presignedheadobject.go

20 
·ckage
 
maš


22 
impÜt
 (

30 
func
 
	$maš
() {

39 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

40 
”r
 !ğ
n
 {

41 
log
.
	`F©®Ê
(
”r
)

45 
»qP¬ams
 :ğ
	`make
(
u¾
.
V®ues
)

46 
»qP¬ams
.
	`S‘
("response-content-disposition", "attachment; filename=\"your-filename.txt\"")

49 
´esigÃdURL
, 
”r
 :ğ
s3Cl›Á
.
	`P»sigÃdH—dObjeù
("my-buck‘Çme", "my-objeùÇme", 
time
.
	`Du¿tiÚ
(1000)*time.
SecÚd
, 
»qP¬ams
)

50 
”r
 !ğ
n
 {

51 
log
.
	`F©®Ê
(
”r
)

53 
log
.
	`Pršn
(
´esigÃdURL
)

54 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/presignedpostpolicy.go

20 
·ckage
 
maš


22 
impÜt
 (

30 
func
 
	$maš
() {

39 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

40 
”r
 !ğ
n
 {

41 
log
.
	`F©®Ê
(
”r
)

44 
pŞicy
 :ğ
mšio
.
	`NewPo¡PŞicy
()

45 
pŞicy
.
	`S‘Buck‘
("my-bucketname")

46 
pŞicy
.
	`S‘Key
("my-objectname")

48 
pŞicy
.
	`S‘Expœes
(
time
.
	`Now
().
	`UTC
().
	`AddD©e
(0, 0, 10))

50 
u¾
, 
fÜmD©a
, 
”r
 :ğ
s3Cl›Á
.
	`P»sigÃdPo¡PŞicy
(
pŞicy
)

51 
”r
 !ğ
n
 {

52 
log
.
	`F©®Ê
(
”r
)

54 
fmt
.
	`Prštf
("curl ")

55 
k
, 
v
 :ğ
¿nge
 
fÜmD©a
 {

56 
fmt
.
	`Prštf
("-F %s=% ", 
k
, 
v
)

58 
fmt
.
	`Prštf
("-F file=@/etc/bash.bashrc ")

59 
fmt
.
	`Prštf
("%s\n", 
u¾
)

60 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/presignedputobject.go

20 
·ckage
 
maš


22 
impÜt
 (

29 
func
 
	$maš
() {

38 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

43 
´esigÃdURL
, 
”r
 :ğ
s3Cl›Á
.
	`P»sigÃdPutObjeù
("my-buck‘Çme", "my-objeùÇme", 
time
.
	`Du¿tiÚ
(1000)*time.
SecÚd
)

44 
”r
 !ğ
n
 {

45 
log
.
	`F©®Ê
(
”r
)

47 
log
.
	`Pršn
(
´esigÃdURL
)

48 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/put-encrypted-object.go

20 
·ckage
 
maš


22 
impÜt
 (

30 
func
 
	$maš
() {

39 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

40 
”r
 !ğ
n
 {

41 
log
.
	`F©®Ê
(
”r
)

44 
feP©h
 := "my-testfile"

47 
fe
, 
”r
 :ğ
os
.
	`O³n
(
feP©h
)

48 
”r
 !ğ
n
 {

49 
log
.
	`F©®Ê
(
”r
)

51 
deãr
 
fe
.
	`Clo£
()

54 
f¡©
, 
”r
 :ğ
fe
.
	`St
()

55 
”r
 !ğ
n
 {

56 
log
.
	`F©®Ê
(
”r
)

59 
buck‘Çme
 := "my-bucketname"

60 
objeùName
 := "my-objectname"

61 
·sswÜd
 := "correct horse battery staple"

64 
’üy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
buck‘Çme
+
objeùName
))

67 
n
, 
”r
 :ğ
s3Cl›Á
.
	`PutObjeù
(
buck‘Çme
, 
objeùName
, 
fe
, 
f¡©
.
	`Size
(), 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
’üy±iÚ
})

68 
”r
 !ğ
n
 {

69 
log
.
	`F©®Ê
(
”r
)

72 
log
.
	`Pršn
("U¶ßded", "my-objeùÇme", " oàsize: ", 
n
, "Successfully.")

73 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-client-encryption.go

20 
·ckage
 
maš


22 
impÜt
 (

32 
func
 
	$maš
() {

41 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

42 
”r
 !ğ
n
 {

43 
log
.
	`F©®Ê
(
”r
)

46 
objeù
, 
”r
 :ğ
os
.
	`O³n
("my-testfile")

47 
”r
 !ğ
n
 {

48 
log
.
	`F©®Ê
(
”r
)

50 
deãr
 
objeù
.
	`Clo£
()

51 
objeùSt
, 
”r
 :ğ
objeù
.
	`St
()

52 
”r
 !ğ
n
 {

53 
log
.
	`F©®Ê
(
”r
)

56 
·sswÜd
 :ğ[]
	`by‹
("myfavoritepassword")

57 
§É
 :ğ[]
	`by‹
(
·th
.
	`Još
("my-bucketname", "my-objectname"))

58 
’üy±ed
, 
”r
 :ğ
sio
.
	`Enüy±R—d”
(
objeù
, sio.
CÚfig
{

60 
Key
: 
¬gÚ2
.
	`IDKey
(
·sswÜd
, 
§É
, 1, 64*1024, 4, 32),

62 
”r
 !ğ
n
 {

63 
log
.
	`F©®Ê
(
”r
)

66 
’cSize
, 
”r
 :ğ
sio
.
	`Enüy±edSize
(
	`ušt64
(
objeùSt
.
	`Size
()))

67 
”r
 !ğ
n
 {

68 
log
.
	`F©®Ê
(
”r
)

70 
_
, 
”r
 = 
s3Cl›Á
.
	`PutObjeù
("my-buck‘Çme", "my-objeùÇme", 
’üy±ed
, 
	`št64
(
’cSize
), 
mšio
.
PutObjeùO±iÚs
{})

71 
”r
 !ğ
n
 {

72 
log
.
	`F©®Ê
(
”r
)

74 
log
.
	`Pršn
("Successfullyƒncrypted 'my-objectname'")

75 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-context.go

20 
·ckage
 
maš


22 
impÜt
 (

32 
func
 
	$maš
() {

42 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

43 
”r
 !ğ
n
 {

44 
log
.
	`F©®Ê
(
”r
)

47 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 10*
time
.
Mšu‹
)

48 
deãr
 
	`ÿnûl
()

50 
objeù
, 
”r
 :ğ
os
.
	`O³n
("my-testfile")

51 
”r
 !ğ
n
 {

52 
log
.
	`F©®Ê
(
”r
)

54 
deãr
 
objeù
.
	`Clo£
()

56 
objeùSt
, 
”r
 :ğ
objeù
.
	`St
()

57 
”r
 !ğ
n
 {

58 
log
.
	`F©®Ê
(
”r
)

61 
n
, 
”r
 :ğ
s3Cl›Á
.
	`PutObjeùW™hCÚ‹xt
(
ùx
, "my-buck‘Çme", "my-objeùÇme", 
objeù
, 
objeùSt
.
	`Size
(), 
mšio
.
PutObjeùO±iÚs
{

62 
CÚ‹ÁTy³
: "application/octet-stream",

64 
”r
 !ğ
n
 {

65 
log
.
	`F©®Ê
(
”r
)

67 
log
.
	`Pršn
("U¶ßded", "my-objeùÇme", " oàsize: ", 
n
, "Successfully.")

68 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-getobject-sse.go

20 
·ckage
 
maš


22 
impÜt
 (

29 
mšio
 "github.com/minio/minio-go"

32 
func
 
	$maš
() {

38 
mšioCl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

43 
buck‘Name
 := "my-bucket"

44 
objeùName
 := "my-encrypted-object"

45 
objeù
 :ğ[]
	`by‹
("Hello‡gain")

47 
’üy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("my seü‘…asswÜd"), []by‹(
buck‘Name
+
objeùName
))

48 
_
, 
”r
 = 
mšioCl›Á
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
objeù
), 
	`št64
(
	`Ën
(objeù)), 
mšio
.
PutObjeùO±iÚs
{

49 
S”v”SideEnüy±iÚ
: 
’üy±iÚ
,

51 
”r
 !ğ
n
 {

52 
log
.
	`F©®Ê
(
”r
)

55 
»ad”
, 
”r
 :ğ
mšioCl›Á
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
’üy±iÚ
})

56 
”r
 !ğ
n
 {

57 
log
.
	`F©®Ê
(
”r
)

59 
deãr
 
»ad”
.
	`Clo£
()

61 
decBy‹s
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

62 
”r
 !ğ
n
 {

63 
log
.
	`F©®Ê
(
”r
)

65 !
by‹s
.
	`Equ®
(
decBy‹s
, 
objeù
) {

66 
log
.
	`F©®Ê
("Ex³ùed %s, gÙ %s", 
	`¡ršg
(
objeù
), sŒšg(
decBy‹s
))

68 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-progress.go

20 
·ckage
 
maš


22 
impÜt
 (

29 
func
 
	$maš
() {

38 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

43 
»ad”
, 
”r
 :ğ
s3Cl›Á
.
	`G‘Objeù
("my-buck‘Çme", "my-objeùÇme", 
mšio
.
G‘ObjeùO±iÚs
{})

44 
”r
 !ğ
n
 {

45 
log
.
	`F©®Ê
(
”r
)

47 
deãr
 
»ad”
.
	`Clo£
()

49 
objeùInfo
, 
”r
 :ğ
»ad”
.
	`St
()

50 
”r
 !ğ
n
 {

51 
log
.
	`F©®Ê
(
”r
)

56 
´og»ss
 :ğ
pb
.
	`New64
(
objeùInfo
.
Size
)

57 
´og»ss
.
	`S¹
()

58 
n
, 
”r
 :ğ
s3Cl›Á
.
	`PutObjeù
("my-buck‘Çme", "my-objeùÇme-´og»ss", 
»ad”
, 
objeùInfo
.
Size
, 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "­¶iÿtiÚ/où‘-¡»am", 
Prog»ss
: 
´og»ss
})

60 
”r
 !ğ
n
 {

61 
log
.
	`F©®Ê
(
”r
)

63 
log
.
	`Pršn
("U¶ßded", "my-objeùÇme", " oàsize: ", 
n
, "Successfully.")

64 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-s3-accelerate.go

20 
·ckage
 
maš


22 
impÜt
 (

29 
func
 
	$maš
() {

38 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

44 
s3Cl›Á
.
	`S‘S3T¿nsãrAcûË¿‹
("s3-accelerate.amazonaws.com")

46 
objeù
, 
”r
 :ğ
os
.
	`O³n
("my-testfile")

47 
”r
 !ğ
n
 {

48 
log
.
	`F©®Ê
(
”r
)

50 
deãr
 
objeù
.
	`Clo£
()

52 
objeùSt
, 
”r
 :ğ
objeù
.
	`St
()

53 
”r
 !ğ
n
 {

54 
log
.
	`F©®Ê
(
”r
)

57 
n
, 
”r
 :ğ
s3Cl›Á
.
	`PutObjeù
("my-buck‘Çme", "my-objeùÇme", 
objeù
, 
objeùSt
.
	`Size
(), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"})

58 
”r
 !ğ
n
 {

59 
log
.
	`F©®Ê
(
”r
)

61 
log
.
	`Pršn
("U¶ßded", "my-objeùÇme", " oàsize: ", 
n
, "Successfully.")

62 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-streaming.go

20 
·ckage
 
maš


22 
impÜt
 (

26 
mšio
 "github.com/minio/minio-go"

29 
func
 
	$maš
() {

38 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

43 
objeù
, 
”r
 :ğ
os
.
	`O³n
("my-testfile")

44 
”r
 !ğ
n
 {

45 
log
.
	`F©®Ê
(
”r
)

47 
deãr
 
objeù
.
	`Clo£
()

49 
n
, 
”r
 :ğ
s3Cl›Á
.
	`PutObjeù
("my-buck‘Çme", "my-objeùÇme", 
objeù
, -1, 
mšio
.
PutObjeùO±iÚs
{})

50 
”r
 !ğ
n
 {

51 
log
.
	`F©®Ê
(
”r
)

54 
log
.
	`Pršn
("U¶ßded", "my-objeùÇme", " oàsize: ", 
n
, "Successfully.")

55 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject.go

20 
·ckage
 
maš


22 
impÜt
 (

29 
func
 
	$maš
() {

38 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

39 
”r
 !ğ
n
 {

40 
log
.
	`F©®Ê
(
”r
)

43 
objeù
, 
”r
 :ğ
os
.
	`O³n
("my-testfile")

44 
”r
 !ğ
n
 {

45 
log
.
	`F©®Ê
(
”r
)

47 
deãr
 
objeù
.
	`Clo£
()

48 
objeùSt
, 
”r
 :ğ
objeù
.
	`St
()

49 
”r
 !ğ
n
 {

50 
log
.
	`F©®Ê
(
”r
)

53 
n
, 
”r
 :ğ
s3Cl›Á
.
	`PutObjeù
("my-buck‘Çme", "my-objeùÇme", 
objeù
, 
objeùSt
.
	`Size
(), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"})

54 
”r
 !ğ
n
 {

55 
log
.
	`F©®Ê
(
”r
)

57 
log
.
	`Pršn
("U¶ßded", "my-objeùÇme", " oàsize: ", 
n
, "Successfully.")

58 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removeallbucketnotification.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

44 
”r
 = 
s3Cl›Á
.
	`RemoveAÎBuck‘NÙifiÿtiÚ
("my-bucketname")

45 
”r
 !ğ
n
 {

46 
log
.
	`F©®Ê
(
”r
)

49 
log
.
	`Pršn
("Bucket‚otification‡re successfully„emoved.")

50 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removebucket.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

43 
”r
 = 
s3Cl›Á
.
	`RemoveBuck‘
("my-bucketname")

44 
”r
 !ğ
n
 {

45 
log
.
	`F©®Ê
(
”r
)

47 
log
.
	`Pršn
("Success")

49 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removeincompleteupload.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

42 
”r
 = 
s3Cl›Á
.
	`RemoveIncom¶‘eU¶ßd
("my-bucketname", "my-objectname")

43 
”r
 !ğ
n
 {

44 
log
.
	`F©®Ê
(
”r
)

46 
log
.
	`Pršn
("Success")

47 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removeobject.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

41 
”r
 = 
s3Cl›Á
.
	`RemoveObjeù
("my-bucketname", "my-objectname")

42 
”r
 !ğ
n
 {

43 
log
.
	`F©®Ê
(
”r
)

45 
log
.
	`Pršn
("Success")

46 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removeobjects.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

42 
objeùsCh
 :ğ
	`make
(
chª
 
¡ršg
)

45 
go
 
	`func
() {

46 
deãr
 
	`şo£
(
objeùsCh
)

48 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

51 
deãr
 
	`şo£
(
dÚeCh
)

54 
objeù
 :ğ
¿nge
 
s3Cl›Á
.
	`Li¡Objeùs
("my-buck‘Çme", "my-´efixÇme", 
Œue
, 
dÚeCh
) {

55 
objeù
.
E¼
 !ğ
n
 {

56 
log
.
	`F©®Ê
(
objeù
.
E¼
)

58 
objeùsCh
 <- 
objeù
.
Key


63 
”rÜCh
 :ğ
s3Cl›Á
.
	`RemoveObjeùs
("my-buck‘Çme", 
objeùsCh
)

66 
e
 :ğ
¿nge
 
”rÜCh
 {

67 
log
.
	`F©®Ê
("FaedØ»mov" + 
e
.
ObjeùName
 + ",ƒ¼Ü: " +ƒ.
E¼
.
	`E¼Ü
())

70 
log
.
	`Pršn
("Success")

71 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/selectobject.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
mšio
 "github.com/minio/minio-go"

31 
func
 
	$maš
() {

40 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESS-KEY-HERE", "YOUR-SECRET-KEY-HERE", 
Œue
)

41 
”r
 !ğ
n
 {

42 
log
.
	`F©®Ê
(
”r
)

45 
İts
 :ğ
mšio
.
S–eùObjeùO±iÚs
{

46 
Ex´essiÚ
: "select count(*) from s3object",

47 
Ex´essiÚTy³
: 
mšio
.
Qu”yEx´essiÚTy³SQL
,

48 
IÅutS”Ÿliz©iÚ
: 
mšio
.
S–eùObjeùIÅutS”Ÿliz©iÚ
{

49 
Com´essiÚTy³
: 
mšio
.
S–eùCom´essiÚNONE
,

50 
CSV
: &
mšio
.
CSVIÅutO±iÚs
{

51 
FeH—d”Info
: 
mšio
.
CSVFeH—d”InfoNÚe
,

52 
RecÜdD–im™”
: "\n",

53 
F›ldD–im™”
: ",",

56 
OuutS”Ÿliz©iÚ
: 
mšio
.
S–eùObjeùOuutS”Ÿliz©iÚ
{

57 
CSV
: &
mšio
.
CSVOuutO±iÚs
{

58 
RecÜdD–im™”
: "\n",

59 
F›ldD–im™”
: ",",

64 
»ad”
, 
”r
 :ğ
s3Cl›Á
.
	`S–eùObjeùCÚ‹Á
(
cÚ‹xt
.
	`Background
(), "mycsvbuck‘", "mycsv.csv", 
İts
)

65 
”r
 !ğ
n
 {

66 
log
.
	`F©®Ê
(
”r
)

68 
deãr
 
»ad”
.
	`Clo£
()

70 
_
, 
”r
 :ğ
io
.
	`Cİy
(
os
.
Stdout
, 
»ad”
);ƒ¼ !ğ
n
 {

71 
log
.
	`F©®Ê
(
”r
)

73 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/setbucketlifecycle.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

45 
liãcyşe
 :ğ`<
LiãcyşeCÚfigu¿tiÚ
><
RuË
><
ID
>
expœe
-
buck‘
</ID><
P»fix
></P»fix><
Stus
>
EÇbËd
</Stus><
Expœ©iÚ
><
Days
>365</Days></Expiration></Rule></LifecycleConfiguration>`

46 
”r
 = 
s3Cl›Á
.
	`S‘Buck‘Liãcyşe
("my-buck‘Çme", 
liãcyşe
)

47 
”r
 !ğ
n
 {

48 
log
.
	`F©®Ê
(
”r
)

50 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/setbucketnotification.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

58 
tİicAº
 :ğ
mšio
.
	`NewAº
("YOUR-PROVIDER", "YOUR-SERVICE", "YOUR-REGION", "YOUR-ACCOUNT-ID", "YOUR-RESOURCE")

59 
tİicCÚfig
 :ğ
mšio
.
	`NewNÙifiÿtiÚCÚfig
(
tİicAº
)

60 
tİicCÚfig
.
	`AddEv’ts
(
mšio
.
ObjeùC»©edAÎ
, mšio.
ObjeùRemovedAÎ
)

61 
tİicCÚfig
.
	`AddF‹rP»fix
("photos/")

62 
tİicCÚfig
.
	`AddF‹rSuffix
(".jpg")

65 
queueAº
 :ğ
mšio
.
	`NewAº
("YOUR-PROVIDER", "YOUR-SERVICE", "YOUR-REGION", "YOUR-ACCOUNT-ID", "YOUR-RESOURCE")

66 
queueCÚfig
 :ğ
mšio
.
	`NewNÙifiÿtiÚCÚfig
(
queueAº
)

67 
queueCÚfig
.
	`AddEv’ts
(
mšio
.
ObjeùRemovedAÎ
)

70 
ÏmbdaAº
 :ğ
mšio
.
	`NewAº
("YOUR-PROVIDER", "YOUR-SERVICE", "YOUR-REGION", "YOUR-ACCOUNT-ID", "YOUR-RESOURCE")

71 
ÏmbdaCÚfig
 :ğ
mšio
.
	`NewNÙifiÿtiÚCÚfig
(
ÏmbdaAº
)

72 
ÏmbdaCÚfig
.
	`AddEv’ts
(
mšio
.
ObjeùRemovedAÎ
)

73 
ÏmbdaCÚfig
.
	`AddF‹rSuffix
(".swp")

76 
buck‘NÙifiÿtiÚ
 :ğ
mšio
.
Buck‘NÙifiÿtiÚ
{}

77 
buck‘NÙifiÿtiÚ
.
	`AddTİic
(
tİicCÚfig
)

78 
buck‘NÙifiÿtiÚ
.
	`AddQueue
(
queueCÚfig
)

79 
buck‘NÙifiÿtiÚ
.
	`AddLambda
(
ÏmbdaCÚfig
)

81 
”r
 = 
s3Cl›Á
.
	`S‘Buck‘NÙifiÿtiÚ
("YOUR-BUCKET", 
buck‘NÙifiÿtiÚ
)

82 
”r
 !ğ
n
 {

83 
log
.
	`F©®Ê
("E¼Ü: " + 
”r
.
	`E¼Ü
())

85 
log
.
	`Pršn
("Success")

86 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/setbucketpolicy.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

45 
pŞicy
 := `{"Version": "2012-10-17","Statement": [{"Action": ["s3:GetObject"],"Effect": "Allow","Principal": {"AWS": ["*"]},"Resource": ["arn:aws:s3:::my-bucketname/*"],"Sid": ""}]}`

47 
”r
 = 
s3Cl›Á
.
	`S‘Buck‘PŞicy
("my-buck‘Çme", 
pŞicy
)

48 
”r
 !ğ
n
 {

49 
log
.
	`F©®Ê
(
”r
)

51 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/statobject.go

20 
·ckage
 
maš


22 
impÜt
 (

28 
func
 
	$maš
() {

37 
s3Cl›Á
, 
”r
 :ğ
mšio
.
	`New
("s3.amazÚaws.com", "YOUR-ACCESSKEYID", "YOUR-SECRETACCESSKEY", 
Œue
)

38 
”r
 !ğ
n
 {

39 
log
.
	`F©®Ê
(
”r
)

41 
¡©
, 
”r
 :ğ
s3Cl›Á
.
	`StObjeù
("my-buck‘Çme", "my-objeùÇme", 
mšio
.
StObjeùO±iÚs
{})

42 
”r
 !ğ
n
 {

43 
log
.
	`F©®Ê
(
”r
)

45 
log
.
	`Pršn
(
¡©
)

46 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/functional_tests.go

20 
·ckage
 
maš


22 
impÜt
 (

42 
humªize
 "github.com/dustin/go-humanize"

43 
mšio
 "github.com/minio/minio-go"

44 
log
 "github.com/sirupsen/logrus"

49 cÚ¡ 
	gË‰”By‹s
 = "abcdefghijklmnopqrstuvwxyz01234569"

51 
Ë‰”IdxB™s
 = 6

52 
Ë‰”IdxMask
 = 1<<
Ë‰”IdxB™s
 - 1

53 
Ë‰”IdxMax
 = 63 / 
Ë‰”IdxB™s


56 
£rv”Endpošt
 = "SERVER_ENDPOINT"

57 
acûssKey
 = "ACCESS_KEY"

58 
£ü‘Key
 = "SECRET_KEY"

59 
’abËHTTPS
 = "ENABLE_HTTPS"

60 
’abËKMS
 = "ENABLE_KMS"

63 
ty³
 
mštJSONFÜm©‹r
 struct {

66 
	$func
 (
f
 *
mštJSONFÜm©‹r
è
	`FÜm©
(
’Œy
 *
log
.
EÁry
è([]
by‹
, 
”rÜ
) {

67 
d©a
 :ğ
	`make
(
log
.
F›lds
, 
	`Ën
(
’Œy
.
D©a
))

68 
k
, 
v
 :ğ
¿nge
 
’Œy
.
D©a
 {

69 
v
 :ğv.(
ty³
) {

70 
”rÜ
:

73 
d©a
[
k
] = 
v
.
	`E¼Ü
()

75 
d©a
[
k
] = 
v


79 
£rŸlized
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
d©a
)

80 
”r
 !ğ
n
 {

81  
n
, 
fmt
.
	`E¼Üf
("FaedØm¬sh® f›ld tØJSON, %v", 
”r
)

83  
	`­³nd
(
£rŸlized
, '\n'), 
n


84 
	}
}

86 
func
 
	$ş—nEm±yEÁr›s
(
f›lds
 
log
.
F›lds
)†og.Fields {

87 
ş—nF›lds
 :ğ
log
.
F›lds
{}

88 
k
, 
v
 :ğ
¿nge
 
f›lds
 {

89 
v
 != "" {

90 
ş—nF›lds
[
k
] = 
v


93  
ş—nF›lds


94 
	}
}

97 
func
 
sucûssLogg”
(
‹¡Name
 
¡ršg
, 
funùiÚ
 sŒšg, 
¬gs
 
m­
[¡ršg]
š‹rçû
{}, 
¡¬tTime
 
time
.
Time
è*
	glog
.
	gEÁry
 {

99 
	gdu¿tiÚ
 :ğ
time
.
Sšû
(
¡¬tTime
)

101 
f›lds
 :ğ
log
.
F›lds
{"Çme": "mšio-go: " + 
‹¡Name
, "funùiÚ": 
funùiÚ
, "¬gs": 
¬gs
, "du¿tiÚ": 
du¿tiÚ
.
Nªo£cÚds
() / 1000000, "status": "PASS"}

102  
log
.
W™hF›lds
(
ş—nEm±yEÁr›s
(
f›lds
))

107 
func
 
logE¼Ü
(
‹¡Name
 
¡ršg
, 
funùiÚ
 sŒšg, 
¬gs
 
m­
[¡ršg]
š‹rçû
{}, 
¡¬tTime
 
time
.
Time
, 
®”t
 sŒšg, 
mes§ge
 sŒšg, 
”r
 
”rÜ
) {

111 
isE¼NÙIm¶em’‹d
(
”r
) {

112 
ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, 
mes§ge
).
Info
()

114 
çu»Log
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, 
®”t
, 
mes§ge
, 
”r
).
F©®
()

119 
func
 
çu»Log
(
‹¡Name
 
¡ršg
, 
funùiÚ
 sŒšg, 
¬gs
 
m­
[¡ršg]
š‹rçû
{}, 
¡¬tTime
 
time
.
Time
, 
®”t
 sŒšg, 
mes§ge
 sŒšg, 
”r
 
”rÜ
è*
	glog
.
	gEÁry
 {

121 
	gdu¿tiÚ
 :ğ
time
.
Sšû
(
¡¬tTime
)

122 
v¬
 
f›lds
 
log
.
F›lds


124 
”r
 !ğ
n
 {

125 
f›lds
 = 
log
.
F›lds
{"Çme": "mšio-go: " + 
‹¡Name
, "funùiÚ": 
funùiÚ
, "¬gs": 
¬gs
,

126 "du¿tiÚ": 
du¿tiÚ
.
Nªo£cÚds
(è/ 1000000, "¡©us": "FAIL", "®”t": 
®”t
, "mes§ge": 
mes§ge
, "”rÜ": 
”r
}

128 
f›lds
 = 
log
.
F›lds
{"Çme": "mšio-go: " + 
‹¡Name
, "funùiÚ": 
funùiÚ
, "¬gs": 
¬gs
,

129 "du¿tiÚ": 
du¿tiÚ
.
Nªo£cÚds
(è/ 1000000, "¡©us": "FAIL", "®”t": 
®”t
, "mes§ge": 
mes§ge
}

131  
log
.
W™hF›lds
(
ş—nEm±yEÁr›s
(
f›lds
))

135 
func
 
ignÜedLog
(
‹¡Name
 
¡ršg
, 
funùiÚ
 sŒšg, 
¬gs
 
m­
[¡ršg]
š‹rçû
{}, 
¡¬tTime
 
time
.
Time
, 
®”t
 sŒšgè*
	glog
.
	gEÁry
 {

137 
	gdu¿tiÚ
 :ğ
time
.
Sšû
(
¡¬tTime
)

139 
f›lds
 :ğ
log
.
F›lds
{"Çme": "mšio-go: " + 
‹¡Name
, "funùiÚ": 
funùiÚ
, "¬gs": 
¬gs
,

140 "du¿tiÚ": 
du¿tiÚ
.
Nªo£cÚds
(è/ 1000000, "¡©us": "NA", "®”t": 
®”t
}

141  
log
.
W™hF›lds
(
ş—nEm±yEÁr›s
(
f›lds
))

145 
func
 
	$ş—nupBuck‘
(
buck‘Name
 
¡ršg
, 
c
 *
mšio
.
Cl›Á
è
”rÜ
 {

147 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

149 
deãr
 
	`şo£
(
dÚeCh
)

151 
objCh
 :ğ
¿nge
 
c
.
	`Li¡ObjeùsV2
(
buck‘Name
, "", 
Œue
, 
dÚeCh
) {

152 
objCh
.
E¼
 !ğ
n
 {

153  
objCh
.
E¼


155 
objCh
.
Key
 != "" {

156 
”r
 :ğ
c
.
	`RemoveObjeù
(
buck‘Name
, 
objCh
.
Key
)

157 
”r
 !ğ
n
 {

158  
”r


162 
objP¬tInfo
 :ğ
¿nge
 
c
.
	`Li¡Incom¶‘eU¶ßds
(
buck‘Name
, "", 
Œue
, 
dÚeCh
) {

163 
objP¬tInfo
.
E¼
 !ğ
n
 {

164  
objP¬tInfo
.
E¼


166 
objP¬tInfo
.
Key
 != "" {

167 
”r
 :ğ
c
.
	`RemoveIncom¶‘eU¶ßd
(
buck‘Name
, 
objP¬tInfo
.
Key
)

168 
”r
 !ğ
n
 {

169  
”r


174 
”r
 :ğ
c
.
	`RemoveBuck‘
(
buck‘Name
)

175 
”r
 !ğ
n
 {

176  
”r


178  
”r


179 
	}
}

181 
func
 
	$isE¼NÙIm¶em’‹d
(
”r
 
”rÜ
è
boŞ
 {

182  
mšio
.
	`ToE¼ÜRe¥Ú£
(
”r
).
Code
 == "NotImplemented"

183 
	}
}

185 
func
 
	$š™
() {

188 
os
.
	`G‘’v
(
£rv”Endpošt
) == "" {

189 
os
.
	`S‘’v
(
£rv”Endpošt
, "play.minio.io:9000")

190 
os
.
	`S‘’v
(
acûssKey
, "Q3AM3UQ867SPQQA43P2F")

191 
os
.
	`S‘’v
(
£ü‘Key
, "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG")

192 
os
.
	`S‘’v
(
’abËHTTPS
, "1")

194 
	}
}

196 
v¬
 
	gmštD©aDœ
 = 
os
.
G‘’v
("MINT_DATA_DIR")

198 
func
 
	$g‘MštD©aDœFeP©h
(
f’ame
 
¡ršg
è(
å
 string) {

199 
mštD©aDœ
 == "" {

202  
f•©h
.
	`Još
(
mštD©aDœ
, 
f’ame
)

203 
	}
}

205 
ty³
 
sizedR—d”
 struct {

206 
	mio
.
R—d”


207 
size
 

210 
	$func
 (
l
 *
sizedR—d”
è
	$Size
() {

211  
l
.
size


212 
	}
}

214 
	$func
 (
l
 *
sizedR—d”
è
	$Clo£
(è
”rÜ
 {

215  
n


216 
	}
}

218 
ty³
 
¿ndomR—d”
 sŒuù{ 
	m£ed
 []
	mby‹
 }

220 
	$func
 (
r
 *
¿ndomR—d”
è
	$R—d
(
b
 []
by‹
è(, 
”rÜ
) {

221  
	`cİy
(
b
, 
by‹s
.
	`R•—t
(
r
.
£ed
, 
	`Ën
(b))), 
n


222 
	}
}

225 
func
 
	$g‘D©aR—d”
(
feName
 
¡ršg
è
io
.
R—dClo£r
 {

226 
mštD©aDœ
 == "" {

227 
size
 :ğ
d©aFeM­
[
feName
]

228  &
sizedR—d”
{

229 
R—d”
: 
io
.
	`Lim™R—d”
(&
¿ndomR—d”
{

230 
£ed
: []
	`by‹
("a"),

231 }, 
	`št64
(
size
)),

232 
size
: size,

235 
»ad”
, 
_
 :ğ
os
.
	`O³n
(
	`g‘MštD©aDœFeP©h
(
feName
))

236  
»ad”


237 
	}
}

240 
func
 
	$¿ndSŒšg
(
n
 , 
¤c
 
¿nd
.
Sourû
, 
´efix
 
¡ršg
) string {

241 
b
 :ğ
	`make
([]
by‹
, 
n
)

243 
i
, 
ÿche
, 
»maš
 :ğ
n
-1, 
¤c
.
	`IÁ63
(), 
Ë‰”IdxMax
; i >= 0; {

244 
»maš
 == 0 {

245 
ÿche
, 
»maš
 = 
¤c
.
	`IÁ63
(), 
Ë‰”IdxMax


247 
idx
 :ğ(
ÿche
 & 
Ë‰”IdxMask
); idx < 
	`Ën
(
Ë‰”By‹s
) {

248 
b
[
i
] = 
Ë‰”By‹s
[
idx
]

249 
i
--

251 
ÿche
 >>ğ
Ë‰”IdxB™s


252 
»maš
--

254  
´efix
 + 
	`¡ršg
(
b
[0:30-
	`Ën
(prefix)])

255 
	}
}

257 
v¬
 
d©aFeM­
 = 
m­
[
¡ršg
]{

259 "d©afe-10-kB": 10 * 
humªize
.
KiBy‹
,

260 "d©afe-33-kB": 33 * 
humªize
.
KiBy‹
,

261 "d©afe-100-kB": 100 * 
humªize
.
KiBy‹
,

262 "d©afe-1.03-MB": 1056 * 
humªize
.
KiBy‹
,

263 "d©afe-1-MB": 1 * 
humªize
.
MiBy‹
,

264 "d©afe-5-MB": 5 * 
humªize
.
MiBy‹
,

265 "d©afe-6-MB": 6 * 
humªize
.
MiBy‹
,

266 "d©afe-11-MB": 11 * 
humªize
.
MiBy‹
,

267 "d©afe-65-MB": 65 * 
humªize
.
MiBy‹
,

270 
func
 
	$isFuÎMode
(è
boŞ
 {

271  
os
.
	`G‘’v
("MINT_MODE") == "full"

272 
	}
}

274 
func
 
	$g‘FuncName
(è
¡ršg
 {

275 
pc
, 
_
, _, _ :ğ
ruÁime
.
	`C®Ër
(1)

276  
¡ršgs
.
	`TrimP»fix
(
ruÁime
.
	`FuncFÜPC
(
pc
).
	`Name
(), "main.")

277 
	}
}

280 
func
 
	$‹¡MakeBuck‘E¼Ü
() {

281 
»giÚ
 := "eu-central-1"

284 
¡¬tTime
 :ğ
time
.
	`Now
()

285 
‹¡Name
 :ğ
	`g‘FuncName
()

286 
funùiÚ
 := "MakeBucket(bucketName,„egion)"

288 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

290 "»giÚ": 
»giÚ
,

294 
os
.
	`G‘’v
(
£rv”Endpošt
) != "s3.amazonaws.com" {

295 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Sk³d„egiÚ funùiÚ®e¡ fÜ‚Ú s3„uns").
	`Info
()

300 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

303 
c
, 
”r
 :ğ
mšio
.
	`New
(

304 
os
.
	`G‘’v
(
£rv”Endpošt
),

305 
os
.
	`G‘’v
(
acûssKey
),

306 
os
.
	`G‘’v
(
£ü‘Key
),

307 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

309 
”r
 !ğ
n
 {

310 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á c»©iÚ faed", 
”r
)

318 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

321 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

322 
¬gs
["buck‘Name"] = 
buck‘Name


325 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, 
»giÚ
);ƒ¼ !ğ
n
 {

326 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ Faed", 
”r
)

329 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, 
»giÚ
);ƒ¼ =ğ
n
 {

330 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Buck‘‡Ì—dyƒxi¡s", 
”r
)

334 
mšio
.
	`ToE¼ÜRe¥Ú£
(
”r
).
Code
 != "BucketAlreadyExists" &&

335 
mšio
.
	`ToE¼ÜRe¥Ú£
(
”r
).
Code
 != "BucketAlreadyOwnedByYou" {

336 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Inv®idƒ¼Ü„‘uºed by s”v”", 
”r
)

340 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

341 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

344 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

345 
	}
}

347 
func
 
	$‹¡M‘ad©aSizeLim™
() {

348 
¡¬tTime
 :ğ
time
.
	`Now
()

349 
‹¡Name
 :ğ
	`g‘FuncName
()

350 
funùiÚ
 := "PutObject(bucketName, objectName,„eader, objectSize, opts)"

351 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

356 
¿nd
.
	`S“d
(
¡¬tTime
.
	`Unix
())

359 
c
, 
”r
 :ğ
mšio
.
	`New
(

360 
os
.
	`G‘’v
(
£rv”Endpošt
),

361 
os
.
	`G‘’v
(
acûssKey
),

362 
os
.
	`G‘’v
(
£ü‘Key
),

363 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

365 
”r
 !ğ
n
 {

366 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á c»©iÚ faed", 
”r
)

369 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

371 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

372 
¬gs
["buck‘Name"] = 
buck‘Name


374 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

375 
¬gs
["objeùName"] = 
objeùName


377 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

378 
”r
 !ğ
n
 {

379 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Makbuck‘ faed", 
”r
)

383 cÚ¡ 
H—d”SizeLim™
 = 8 * 1024

384 cÚ¡ 
U£rM‘ad©aLim™
 = 2 * 1024

387 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

388 
m‘ad©a
["X-Amz-M‘a-Mšt-Te¡"] = 
	`¡ršg
(
by‹s
.
	`R•—t
([]
	`by‹
("m"), 1+
U£rM‘ad©aLim™
-
	`Ën
("X-Amz-Meta-Mint-Test")))

389 
¬gs
["m‘ad©a"] = 
fmt
.
	`S´št
(
m‘ad©a
)

391 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
n
), 0, 
mšio
.
PutObjeùO±iÚs
{
U£rM‘ad©a
: 
m‘ad©a
})

392 
”r
 =ğ
n
 {

393 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "C»©ed objeù w™h u£r-defšed m‘ad©¨exûedšg m‘ad©¨sizlim™s", 
n
)

398 
m‘ad©a
 = 
	`make
(
m­
[
¡ršg
]string)

399 
m‘ad©a
["X-Amz-Mšt-Te¡"] = 
	`¡ršg
(
by‹s
.
	`R•—t
([]
	`by‹
("m"), 1+
H—d”SizeLim™
-
	`Ën
("X-Amz-Mint-Test")))

400 
¬gs
["m‘ad©a"] = 
fmt
.
	`S´št
(
m‘ad©a
)

401 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
n
), 0, 
mšio
.
PutObjeùO±iÚs
{
U£rM‘ad©a
: 
m‘ad©a
})

402 
”r
 =ğ
n
 {

403 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "C»©ed objeù w™h h—d” exûedšg h—d” sizlim™s", 
n
)

408 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

409 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

413 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

414 
	}
}

417 
func
 
	$‹¡MakeBuck‘RegiÚs
() {

418 
»giÚ
 := "eu-central-1"

420 
¡¬tTime
 :ğ
time
.
	`Now
()

421 
‹¡Name
 :ğ
	`g‘FuncName
()

422 
funùiÚ
 := "MakeBucket(bucketName,„egion)"

424 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

426 "»giÚ": 
»giÚ
,

430 
os
.
	`G‘’v
(
£rv”Endpošt
) != "s3.amazonaws.com" {

431 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Sk³d„egiÚ funùiÚ®e¡ fÜ‚Ú s3„uns").
	`Info
()

436 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

439 
c
, 
”r
 :ğ
mšio
.
	`New
(

440 
os
.
	`G‘’v
(
£rv”Endpošt
),

441 
os
.
	`G‘’v
(
acûssKey
),

442 
os
.
	`G‘’v
(
£ü‘Key
),

443 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

445 
”r
 !ğ
n
 {

446 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á c»©iÚ faed", 
”r
)

454 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

457 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

458 
¬gs
["buck‘Name"] = 
buck‘Name


461 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, 
»giÚ
);ƒ¼ !ğ
n
 {

462 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

467 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

468 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

475 
»giÚ
 = "us-west-2"

476 
¬gs
["»giÚ"] = 
»giÚ


477 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
+".w™h³riod", 
»giÚ
);ƒ¼ !ğ
n
 {

478 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

483 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
+".w™h³riod", 
c
);ƒ¼ !ğ
n
 {

484 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

487 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

488 
	}
}

491 
func
 
	$‹¡PutObjeùR—dAt
() {

493 
¡¬tTime
 :ğ
time
.
	`Now
()

494 
‹¡Name
 :ğ
	`g‘FuncName
()

495 
funùiÚ
 := "PutObject(bucketName, objectName,„eader, opts)"

496 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

503 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

506 
c
, 
”r
 :ğ
mšio
.
	`New
(

507 
os
.
	`G‘’v
(
£rv”Endpošt
),

508 
os
.
	`G‘’v
(
acûssKey
),

509 
os
.
	`G‘’v
(
£ü‘Key
),

510 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

512 
”r
 !ğ
n
 {

513 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

521 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

524 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

525 
¬gs
["buck‘Name"] = 
buck‘Name


528 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

529 
”r
 !ğ
n
 {

530 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Makbuck‘ faed", 
”r
)

534 
bufSize
 :ğ
d©aFeM­
["datafile-65-MB"]

535 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-65-MB")

536 
deãr
 
»ad”
.
	`Clo£
()

539 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

540 
¬gs
["objeùName"] = 
objeùName


543 
objeùCÚ‹ÁTy³
 := "binary/octet-stream"

544 
¬gs
["objeùCÚ‹ÁTy³"] = 
objeùCÚ‹ÁTy³


546 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: 
objeùCÚ‹ÁTy³
})

547 
”r
 !ğ
n
 {

548 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

552 
n
 !ğ
	`št64
(
bufSize
) {

553 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ »tuºed by PutObjeù dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
n
), 
”r
)

558 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

559 
”r
 !ğ
n
 {

560 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ Objeù faed", 
”r
)

564 
¡
, 
”r
 :ğ
r
.
	`St
()

565 
”r
 !ğ
n
 {

566 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "SˆObjeù faed", 
”r
)

569 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

570 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("Numb” oàby‹ š sˆdÛ nÙ m©ch,ƒx³ùed %d gÙ %d", 
bufSize
, 
¡
.
Size
), 
”r
)

573 
¡
.
CÚ‹ÁTy³
 !ğ
objeùCÚ‹ÁTy³
 && st.ContentType != "application/octet-stream" {

574 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹Áy³ dÚ'ˆm©ch", 
”r
)

577 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

578 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù Clo£ faed", 
”r
)

581 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ =ğ
n
 {

582 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù i ®»ady clo£d, didn'ˆ»tuºƒ¼Ü oÀClo£", 
”r
)

587 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

588 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

592 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

593 
	}
}

596 
func
 
	$‹¡PutObjeùW™hM‘ad©a
() {

598 
¡¬tTime
 :ğ
time
.
	`Now
()

599 
‹¡Name
 :ğ
	`g‘FuncName
()

600 
funùiÚ
 := "PutObject(bucketName, objectName,„eader,size, opts)"

601 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

607 !
	`isFuÎMode
() {

608 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Skpšg funùiÚ®e¡ fÜ shÜt/quick„uns").
	`Info
()

613 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

616 
c
, 
”r
 :ğ
mšio
.
	`New
(

617 
os
.
	`G‘’v
(
£rv”Endpošt
),

618 
os
.
	`G‘’v
(
acûssKey
),

619 
os
.
	`G‘’v
(
£ü‘Key
),

620 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

622 
”r
 !ğ
n
 {

623 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

631 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

634 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

635 
¬gs
["buck‘Name"] = 
buck‘Name


638 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

639 
”r
 !ğ
n
 {

640 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Makbuck‘ faed", 
”r
)

644 
bufSize
 :ğ
d©aFeM­
["datafile-65-MB"]

645 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-65-MB")

646 
deãr
 
»ad”
.
	`Clo£
()

649 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

650 
¬gs
["objeùName"] = 
objeùName


653 
cu¡omCÚ‹ÁTy³
 := "custom/contenttype"

655 
¬gs
["m‘ad©a"] = 
m­
[
¡ršg
][]string{

656 "CÚ‹Á-Ty³": {
cu¡omCÚ‹ÁTy³
},

659 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{

660 
CÚ‹ÁTy³
: 
cu¡omCÚ‹ÁTy³
})

661 
”r
 !ğ
n
 {

662 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

666 
n
 !ğ
	`št64
(
bufSize
) {

667 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ »tuºed by PutObjeù dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
n
), 
”r
)

672 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

673 
”r
 !ğ
n
 {

674 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

678 
¡
, 
”r
 :ğ
r
.
	`St
()

679 
”r
 !ğ
n
 {

680 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

683 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

684 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ »tuºed by PutObjeù dÛ nÙ m©ch G‘Objeù,ƒx³ùed "+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
¡
.
Size
), 
”r
)

687 
¡
.
CÚ‹ÁTy³
 !ğ
cu¡omCÚ‹ÁTy³
 && st.ContentType != "application/octet-stream" {

688 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹ÁTy³ dÛ nÙ m©ch,ƒx³ùed "+
cu¡omCÚ‹ÁTy³
+" gÙ "+
¡
.
CÚ‹ÁTy³
, 
”r
)

691 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

692 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù Clo£ faed", 
”r
)

695 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ =ğ
n
 {

696 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù‡Ì—dy clo£d, should„e¥Úd w™hƒ¼Ü", 
”r
)

701 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

702 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

706 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

707 
	}
}

709 
func
 
	$‹¡PutObjeùW™hCÚ‹ÁLªguage
() {

711 
objeùName
 := "test-object"

712 
¡¬tTime
 :ğ
time
.
	`Now
()

713 
‹¡Name
 :ğ
	`g‘FuncName
()

714 
funùiÚ
 := "PutObject(bucketName, objectName,„eader, size, opts)"

715 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

717 "objeùName": 
objeùName
,

723 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

726 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

727 
os
.
	`G‘’v
(
£rv”Endpošt
),

728 
os
.
	`G‘’v
(
acûssKey
),

729 
os
.
	`G‘’v
(
£ü‘Key
),

730 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

732 
”r
 !ğ
n
 {

733 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

741 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

744 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

745 
¬gs
["buck‘Name"] = 
buck‘Name


747 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

748 
”r
 !ğ
n
 {

749 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

753 
d©a
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("a"), (0))

754 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
d©a
), 
	`št64
(0), 
mšio
.
PutObjeùO±iÚs
{

755 
CÚ‹ÁLªguage
: "en",

757 
”r
 !ğ
n
 {

758 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

762 
n
 != 0 {

763 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed u¶ßd objeù '0' dÛ¢'ˆm©ch w™h PutObjeù„‘uº v®ue", 
”r
)

767 
objInfo
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
, 
mšio
.
StObjeùO±iÚs
{})

768 
”r
 !ğ
n
 {

769 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

773 
objInfo
.
M‘ad©a
.
	`G‘
("Content-Language") != "en" {

774 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed cÚ‹Á-Ïnguag'’' dÛ¢'ˆm©ch w™h StObjeù„‘uº v®ue", 
”r
)

779 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

780 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

784 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

785 
	}
}

788 
func
 
	$‹¡PutObjeùSŒ—mšg
() {

790 
objeùName
 := "test-object"

791 
¡¬tTime
 :ğ
time
.
	`Now
()

792 
‹¡Name
 :ğ
	`g‘FuncName
()

793 
funùiÚ
 := "PutObject(bucketName, objectName,„eader,size,opts)"

794 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

796 "objeùName": 
objeùName
,

802 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

805 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

806 
os
.
	`G‘’v
(
£rv”Endpošt
),

807 
os
.
	`G‘’v
(
acûssKey
),

808 
os
.
	`G‘’v
(
£ü‘Key
),

809 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

811 
”r
 !ğ
n
 {

812 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

820 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

823 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

824 
¬gs
["buck‘Name"] = 
buck‘Name


826 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

827 
”r
 !ğ
n
 {

828 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

833 
sizes
 :ğ[]
št64
{0, 64*1024 - 1, 64 * 1024}

835 
_
, 
size
 :ğ
¿nge
 
sizes
 {

836 
d©a
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("a"), (
size
))

837 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
d©a
), 
	`št64
(
size
), 
mšio
.
PutObjeùO±iÚs
{})

838 
”r
 !ğ
n
 {

839 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùSŒ—mšg faed", 
”r
)

843 
n
 !ğ
size
 {

844 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed u¶ßd objeù sizdÛ¢'ˆm©ch w™h PutObjeùSŒ—mšg„‘uº v®ue", 
”r
)

850 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

851 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

855 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

856 
	}
}

859 
func
 
	$‹¡G‘ObjeùS“kEnd
() {

861 
¡¬tTime
 :ğ
time
.
	`Now
()

862 
‹¡Name
 :ğ
	`g‘FuncName
()

863 
funùiÚ
 := "GetObject(bucketName, objectName)"

864 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

867 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

870 
c
, 
”r
 :ğ
mšio
.
	`New
(

871 
os
.
	`G‘’v
(
£rv”Endpošt
),

872 
os
.
	`G‘’v
(
acûssKey
),

873 
os
.
	`G‘’v
(
£ü‘Key
),

874 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

876 
”r
 !ğ
n
 {

877 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

885 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

888 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

889 
¬gs
["buck‘Name"] = 
buck‘Name


892 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

893 
”r
 !ğ
n
 {

894 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

899 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

900 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

901 
deãr
 
»ad”
.
	`Clo£
()

904 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

905 
¬gs
["objeùName"] = 
objeùName


907 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

908 
”r
 !ğ
n
 {

909 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

913 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

914 
”r
 !ğ
n
 {

915 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

919 
n
 !ğ
	`št64
(
bufSize
) {

920 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ »ad dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+" gÙ "+¡ršg(
n
), 
”r
)

925 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

926 
”r
 !ğ
n
 {

927 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

931 
¡
, 
”r
 :ğ
r
.
	`St
()

932 
”r
 !ğ
n
 {

933 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

937 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

938 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ »ad dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+" gÙ "+¡ršg(
¡
.
Size
), 
”r
)

942 
pos
, 
”r
 :ğ
r
.
	`S“k
(-100, 2)

943 
”r
 !ğ
n
 {

944 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù S“k faed", 
”r
)

947 
pos
 !ğ
¡
.
Size
-100 {

948 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù…os™iÚ", 
”r
)

951 
buf2
 :ğ
	`make
([]
by‹
, 100)

952 
m
, 
”r
 :ğ
io
.
	`R—dFuÎ
(
r
, 
buf2
)

953 
”r
 !ğ
n
 {

954 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "E¼Ü„—dšghrough io.R—dFuÎ", 
”r
)

957 
m
 !ğ
	`Ën
(
buf2
) {

958 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÚˆm©ch,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf2
))+" gÙ "+¡ršg(
m
), 
”r
)

961 
hexBuf1
 :ğ
fmt
.
	`S´štf
("%02x", 
buf
[
	`Ën
(buf)-100:])

962 
hexBuf2
 :ğ
fmt
.
	`S´štf
("%02x", 
buf2
[:
m
])

963 
hexBuf1
 !ğ
hexBuf2
 {

964 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "V®ue © samšdex dÚˆm©ch", 
”r
)

967 
pos
, 
”r
 = 
r
.
	`S“k
(-100, 2)

968 
”r
 !ğ
n
 {

969 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù S“k faed", 
”r
)

972 
pos
 !ğ
¡
.
Size
-100 {

973 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù…os™iÚ", 
”r
)

976 
”r
 = 
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

977 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "ObjeùClo£ faed", 
”r
)

982 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

983 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

987 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

988 
	}
}

991 
func
 
	$‹¡G‘ObjeùClo£dTwiû
() {

993 
¡¬tTime
 :ğ
time
.
	`Now
()

994 
‹¡Name
 :ğ
	`g‘FuncName
()

995 
funùiÚ
 := "GetObject(bucketName, objectName)"

996 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

999 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

1002 
c
, 
”r
 :ğ
mšio
.
	`New
(

1003 
os
.
	`G‘’v
(
£rv”Endpošt
),

1004 
os
.
	`G‘’v
(
acûssKey
),

1005 
os
.
	`G‘’v
(
£ü‘Key
),

1006 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1008 
”r
 !ğ
n
 {

1009 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1017 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1020 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1021 
¬gs
["buck‘Name"] = 
buck‘Name


1024 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

1025 
”r
 !ğ
n
 {

1026 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

1031 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

1032 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

1033 
deãr
 
»ad”
.
	`Clo£
()

1036 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

1037 
¬gs
["objeùName"] = 
objeùName


1039 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

1040 
”r
 !ğ
n
 {

1041 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

1045 
n
 !ğ
	`št64
(
bufSize
) {

1046 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù„e¥Ú£ dÛ¢'ˆm©ch s’ˆby‹s,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+" gÙ "+¡ršg(
n
), 
”r
)

1051 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

1052 
”r
 !ğ
n
 {

1053 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

1057 
¡
, 
”r
 :ğ
r
.
	`St
()

1058 
”r
 !ğ
n
 {

1059 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

1062 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

1063 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ š sˆdÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+" gÙ "+¡ršg(
¡
.
Size
), 
”r
)

1066 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

1067 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù Clo£ faed", 
”r
)

1070 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ =ğ
n
 {

1071 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "AÌ—dy clo£d objeù. NØ”rÜ„‘uºed", 
”r
)

1076 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1077 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1081 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

1082 
	}
}

1085 
func
 
	$‹¡RemoveObjeùsW™hCÚ‹xt
() {

1087 
¡¬tTime
 :ğ
time
.
	`Now
()

1088 
‹¡Name
 :ğ
	`g‘FuncName
()

1089 
funùiÚ
 := "RemoveObjectsWithContext(ctx, bucketName, objectsCh)"

1090 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

1095 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

1098 
c
, 
”r
 :ğ
mšio
.
	`New
(

1099 
os
.
	`G‘’v
(
£rv”Endpošt
),

1100 
os
.
	`G‘’v
(
acûssKey
),

1101 
os
.
	`G‘’v
(
£ü‘Key
),

1102 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1104 
”r
 !ğ
n
 {

1105 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1110 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1115 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1116 
¬gs
["buck‘Name"] = 
buck‘Name


1119 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

1120 
”r
 !ğ
n
 {

1121 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

1125 
r
 :ğ
by‹s
.
	`NewR—d”
(by‹s.
	`R•—t
([]
	`by‹
("a"), 8))

1128 
ÄObjeùs
 := 20

1129 
objeùsCh
 :ğ
	`make
(
chª
 
¡ršg
)

1130 
go
 
	`func
() {

1131 
deãr
 
	`şo£
(
objeùsCh
)

1132 
i
 :ğ0; i < 
ÄObjeùs
; i++ {

1133 
objeùName
 :ğ"§m¶e" + 
¡rcÚv
.
	`Itß
(
i
) + ".txt"

1134 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
r
, 8, 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"})

1135 
”r
 !ğ
n
 {

1136 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

1139 
objeùsCh
 <- 
objeùName


1143 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Nªo£cÚd
)

1144 
¬gs
["ùx"] = 
ùx


1145 
deãr
 
	`ÿnûl
()

1148 
”rÜCh
 :ğ
c
.
	`RemoveObjeùsW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùsCh
)

1150 
£Ëù
 {

1151 
r
 :ğ<-
”rÜCh
:

1152 
r
.
E¼
 =ğ
n
 {

1153 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveObjeùsW™hCÚ‹xˆshould fa oÀshÜˆtimeout", 
”r
)

1158 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

1159 
¬gs
["ùx"] = 
ùx


1160 
deãr
 
	`ÿnûl
()

1162 
”rÜCh
 = 
c
.
	`RemoveObjeùsW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùsCh
)

1163 
£Ëù
 {

1164 
r
, 
mÜe
 :ğ<-
”rÜCh
:

1165 
mÜe
 || 
r
.
E¼
 !ğ
n
 {

1166 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "UÃx³ùedƒ¼Ü", 
r
.
E¼
)

1172 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1173 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1176 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

1177 
	}
}

1180 
func
 
	$‹¡RemoveMuÉËObjeùs
() {

1182 
¡¬tTime
 :ğ
time
.
	`Now
()

1183 
‹¡Name
 :ğ
	`g‘FuncName
()

1184 
funùiÚ
 := "RemoveObjects(bucketName, objectsCh)"

1185 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

1190 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

1193 
c
, 
”r
 :ğ
mšio
.
	`New
(

1194 
os
.
	`G‘’v
(
£rv”Endpošt
),

1195 
os
.
	`G‘’v
(
acûssKey
),

1196 
os
.
	`G‘’v
(
£ü‘Key
),

1197 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1200 
”r
 !ğ
n
 {

1201 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1206 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1212 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1213 
¬gs
["buck‘Name"] = 
buck‘Name


1216 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

1217 
”r
 !ğ
n
 {

1218 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

1222 
r
 :ğ
by‹s
.
	`NewR—d”
(by‹s.
	`R•—t
([]
	`by‹
("a"), 8))

1225 
ÄObjeùs
 := 200

1227 
objeùsCh
 :ğ
	`make
(
chª
 
¡ršg
)

1229 
go
 
	`func
() {

1230 
deãr
 
	`şo£
(
objeùsCh
)

1232 
i
 :ğ0; i < 
ÄObjeùs
; i++ {

1233 
objeùName
 :ğ"§m¶e" + 
¡rcÚv
.
	`Itß
(
i
) + ".txt"

1234 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
r
, 8, 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"})

1235 
”r
 !ğ
n
 {

1236 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

1239 
objeùsCh
 <- 
objeùName


1244 
”rÜCh
 :ğ
c
.
	`RemoveObjeùs
(
buck‘Name
, 
objeùsCh
)

1247 
£Ëù
 {

1248 
r
, 
mÜe
 :ğ<-
”rÜCh
:

1249 
mÜe
 {

1250 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "UÃx³ùedƒ¼Ü", 
r
.
E¼
)

1256 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1257 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1261 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

1262 
	}
}

1265 
func
 
	$‹¡FPutObjeùMuÉ¬t
() {

1267 
¡¬tTime
 :ğ
time
.
	`Now
()

1268 
‹¡Name
 :ğ
	`g‘FuncName
()

1269 
funùiÚ
 := "FPutObject(bucketName, objectName, fileName, opts)"

1270 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

1278 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

1281 
c
, 
”r
 :ğ
mšio
.
	`New
(

1282 
os
.
	`G‘’v
(
£rv”Endpošt
),

1283 
os
.
	`G‘’v
(
acûssKey
),

1284 
os
.
	`G‘’v
(
£ü‘Key
),

1285 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1287 
”r
 !ğ
n
 {

1288 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1296 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1299 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1300 
¬gs
["buck‘Name"] = 
buck‘Name


1303 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

1304 
”r
 !ğ
n
 {

1305 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

1310 
v¬
 
feName
 = 
	`g‘MštD©aDœFeP©h
("datafile-65-MB")

1311 
feName
 == "" {

1313 
fe
, 
”r
 :ğ
iout
.
	`TempFe
(
os
.
	`TempDœ
(), "FPutObjectTest")

1314 
”r
 !ğ
n
 {

1315 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "TempFü—tiÚ faed", 
”r
)

1319 
_
, 
”r
 = 
io
.
	`Cİy
(
fe
, 
	`g‘D©aR—d”
("d©afe-65-MB"));ƒ¼ !ğ
n
 {

1320 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Cİy faed", 
”r
)

1323 
”r
 = 
fe
.
	`Clo£
();ƒ¼ !ğ
n
 {

1324 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FClo£ faed", 
”r
)

1327 
feName
 = 
fe
.
	`Name
()

1328 
¬gs
["feName"] = 
feName


1330 
tÙ®Size
 :ğ
d©aFeM­
["datafile-65-MB"]

1332 
objeùName
 :ğ
buck‘Name
 + "FPutObject" + "-standard"

1333 
¬gs
["objeùName"] = 
objeùName


1335 
objeùCÚ‹ÁTy³
 := "testapplication/octet-stream"

1336 
¬gs
["objeùCÚ‹ÁTy³"] = 
objeùCÚ‹ÁTy³


1339 
n
, 
”r
 :ğ
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
, 
feName
, 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: 
objeùCÚ‹ÁTy³
})

1340 
”r
 !ğ
n
 {

1341 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeù faed", 
”r
)

1344 
n
 !ğ
	`št64
(
tÙ®Size
) {

1345 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeù faed", 
”r
)

1349 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

1350 
”r
 !ğ
n
 {

1351 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

1354 
objInfo
, 
”r
 :ğ
r
.
	`St
()

1355 
”r
 !ğ
n
 {

1356 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "UÃx³ùedƒ¼Ü", 
”r
)

1359 
objInfo
.
Size
 !ğ
	`št64
(
tÙ®Size
) {

1360 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
tÙ®Size
))+" gÙ "+¡ršg(
objInfo
.
Size
), 
”r
)

1363 
objInfo
.
CÚ‹ÁTy³
 !ğ
objeùCÚ‹ÁTy³
 && objInfo.ContentType != "application/octet-stream" {

1364 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹ÁTy³ dÛ¢'ˆm©ch", 
”r
)

1369 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1370 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1374 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

1375 
	}
}

1378 
func
 
	$‹¡FPutObjeù
() {

1380 
¡¬tTime
 :ğ
time
.
	`Now
()

1381 
‹¡Name
 :ğ
	`g‘FuncName
()

1382 
funùiÚ
 := "FPutObject(bucketName, objectName, fileName, opts)"

1384 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

1392 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

1395 
c
, 
”r
 :ğ
mšio
.
	`New
(

1396 
os
.
	`G‘’v
(
£rv”Endpošt
),

1397 
os
.
	`G‘’v
(
acûssKey
),

1398 
os
.
	`G‘’v
(
£ü‘Key
),

1399 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1401 
”r
 !ğ
n
 {

1402 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1410 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1413 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1414 
loÿtiÚ
 := "us-east-1"

1417 
¬gs
["buck‘Name"] = 
buck‘Name


1418 
¬gs
["loÿtiÚ"] = 
loÿtiÚ


1419 
funùiÚ
 = "MakeBucket()bucketName,†ocation"

1420 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, 
loÿtiÚ
)

1421 
”r
 !ğ
n
 {

1422 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

1428 
v¬
 
fName
 = 
	`g‘MštD©aDœFeP©h
("datafile-65-MB")

1429 
fName
 == "" {

1431 
fe
, 
”r
 :ğ
iout
.
	`TempFe
(
os
.
	`TempDœ
(), "FPutObjectTest")

1432 
”r
 !ğ
n
 {

1433 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "TempFü—tiÚ faed", 
”r
)

1438 
_
, 
”r
 = 
io
.
	`Cİy
(
fe
, 
	`g‘D©aR—d”
("d©afe-65-MB"));ƒ¼ !ğ
n
 {

1439 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fcİy faed", 
”r
)

1443 
”r
 = 
fe
.
	`Clo£
();ƒ¼ !ğ
n
 {

1444 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fşo£ faed", 
”r
)

1447 
deãr
 
os
.
	`Remove
(
fe
.
	`Name
())

1448 
fName
 = 
fe
.
	`Name
()

1450 
tÙ®Size
 :ğ
d©aFeM­
["datafile-65-MB"]

1453 
funùiÚ
 = "FPutObject(bucketName, objectName, fileName, opts)"

1454 
objeùName
 :ğ
buck‘Name
 + "FPutObject"

1455 
¬gs
["objeùName"] = 
objeùName
 + "-standard"

1456 
¬gs
["feName"] = 
fName


1457 
¬gs
["İts"] = 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"}

1460 
n
, 
”r
 :ğ
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
+"-¡ªd¬d", 
fName
, 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"})

1462 
”r
 !ğ
n
 {

1463 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeù faed", 
”r
)

1466 
n
 !ğ
	`št64
(
tÙ®Size
) {

1467 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
tÙ®Size
)+", gÙ "+¡ršg(
n
), 
”r
)

1472 
¬gs
["objeùName"] = 
objeùName
 + "-Octet"

1473 
n
, 
”r
 = 
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
+"-Où‘", 
fName
, 
mšio
.
PutObjeùO±iÚs
{})

1474 
”r
 !ğ
n
 {

1475 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fşo£ faed", 
”r
)

1478 
n
 !ğ
	`št64
(
tÙ®Size
) {

1479 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
tÙ®Size
)+", gÙ "+¡ršg(
n
), 
”r
)

1482 
¤cFe
, 
”r
 :ğ
os
.
	`O³n
(
fName
)

1483 
”r
 !ğ
n
 {

1484 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fİ’ faed", 
”r
)

1487 
deãr
 
¤cFe
.
	`Clo£
()

1489 
tmpFe
, 
”r
 :ğ
os
.
	`C»©e
(
fName
 + ".gtar")

1490 
”r
 !ğ
n
 {

1491 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fü—‹ faed", 
”r
)

1494 
deãr
 
tmpFe
.
	`Clo£
()

1495 
_
, 
”r
 = 
io
.
	`Cİy
(
tmpFe
, 
¤cFe
)

1496 
”r
 !ğ
n
 {

1497 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fcİy faed", 
”r
)

1502 
¬gs
["objeùName"] = 
objeùName
 + "-GTar"

1503 
¬gs
["İts"] = 
mšio
.
PutObjeùO±iÚs
{}

1504 
n
, 
”r
 = 
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
+"-GT¬", 
fName
+".gr", 
mšio
.
PutObjeùO±iÚs
{})

1505 
”r
 !ğ
n
 {

1506 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeù faed", 
”r
)

1509 
n
 !ğ
	`št64
(
tÙ®Size
) {

1510 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
tÙ®Size
)+", gÙ "+¡ršg(
n
), 
”r
)

1515 
funùiÚ
 = "StatObject(bucketName, objectName, opts)"

1516 
¬gs
["objeùName"] = 
objeùName
 + "-standard"

1517 
rSnd¬d
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
+"-¡ªd¬d", 
mšio
.
StObjeùO±iÚs
{})

1518 
”r
 !ğ
n
 {

1519 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

1522 
rSnd¬d
.
CÚ‹ÁTy³
 != "application/octet-stream" {

1523 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹ÁTy³ dÛ nÙ m©ch,ƒx³ùed‡µliÿtiÚ/où‘-¡»am, gÙ "+
rSnd¬d
.
CÚ‹ÁTy³
, 
”r
)

1527 
funùiÚ
 = "StatObject(bucketName, objectName, opts)"

1528 
¬gs
["objeùName"] = 
objeùName
 + "-Octet"

1529 
rOù‘
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
+"-Où‘", 
mšio
.
StObjeùO±iÚs
{})

1530 
”r
 !ğ
n
 {

1531 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

1534 
rOù‘
.
CÚ‹ÁTy³
 != "application/octet-stream" {

1535 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹ÁTy³ dÛ nÙ m©ch,ƒx³ùed‡µliÿtiÚ/où‘-¡»am, gÙ "+
rOù‘
.
CÚ‹ÁTy³
, 
”r
)

1539 
funùiÚ
 = "StatObject(bucketName, objectName, opts)"

1540 
¬gs
["objeùName"] = 
objeùName
 + "-GTar"

1541 
rGT¬
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
+"-GT¬", 
mšio
.
StObjeùO±iÚs
{})

1542 
”r
 !ğ
n
 {

1543 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

1546 
rGT¬
.
CÚ‹ÁTy³
 != "application/x-gtar" &&„GTar.ContentType != "application/octet-stream" {

1547 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹ÁTy³ dÛ nÙ m©ch,ƒx³ùed‡µliÿtiÚ/x-g¸Ü‡µliÿtiÚ/où‘-¡»am, gÙ "+
rGT¬
.
CÚ‹ÁTy³
, 
”r
)

1552 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1553 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1557 
”r
 = 
os
.
	`Remove
(
fName
 + ".gr");ƒ¼ !ğ
n
 {

1558 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "F»movçed", 
”r
)

1562 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

1563 
	}
}

1566 
func
 
	$‹¡FPutObjeùW™hCÚ‹xt
() {

1568 
¡¬tTime
 :ğ
time
.
	`Now
()

1569 
‹¡Name
 :ğ
	`g‘FuncName
()

1570 
funùiÚ
 := "FPutObject(bucketName, objectName, fileName, opts)"

1571 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

1578 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

1581 
c
, 
”r
 :ğ
mšio
.
	`New
(

1582 
os
.
	`G‘’v
(
£rv”Endpošt
),

1583 
os
.
	`G‘’v
(
acûssKey
),

1584 
os
.
	`G‘’v
(
£ü‘Key
),

1585 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1587 
”r
 !ğ
n
 {

1588 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1596 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1599 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1600 
¬gs
["buck‘Name"] = 
buck‘Name


1603 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

1604 
”r
 !ğ
n
 {

1605 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

1611 
v¬
 
fName
 = 
	`g‘MštD©aDœFeP©h
("datafile-1-MB")

1612 
fName
 == "" {

1614 
fe
, 
”r
 :ğ
iout
.
	`TempFe
(
os
.
	`TempDœ
(), "FPutObjectWithContextTest")

1615 
”r
 !ğ
n
 {

1616 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "TempFü—tiÚ faed", 
”r
)

1621 
_
, 
”r
 = 
io
.
	`Cİy
(
fe
, 
	`g‘D©aR—d”
("d©afe-1-MB"));ƒ¼ !ğ
n
 {

1622 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fcİy faed", 
”r
)

1626 
”r
 = 
fe
.
	`Clo£
();ƒ¼ !ğ
n
 {

1627 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fşo£ faed", 
”r
)

1630 
deãr
 
os
.
	`Remove
(
fe
.
	`Name
())

1631 
fName
 = 
fe
.
	`Name
()

1633 
tÙ®Size
 :ğ
d©aFeM­
["datafile-1-MB"]

1636 
objeùName
 :ğ
buck‘Name
 + "FPutObjectWithContext"

1637 
¬gs
["objeùName"] = 
objeùName


1638 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Nªo£cÚd
)

1639 
¬gs
["ùx"] = 
ùx


1640 
deãr
 
	`ÿnûl
()

1643 
_
, 
”r
 = 
c
.
	`FPutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
+"-ShÜ‰imeout", 
fName
, 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"})

1644 
”r
 =ğ
n
 {

1645 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeùW™hCÚ‹xˆshould fa oÀshÜˆtimeout", 
”r
)

1648 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

1649 
deãr
 
	`ÿnûl
()

1651 
n
, 
”r
 :ğ
c
.
	`FPutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
+"-LÚgtimeout", 
fName
, 
mšio
.
PutObjeùO±iÚs
{})

1652 
”r
 !ğ
n
 {

1653 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeùW™hCÚ‹xˆshouldn'ˆç oÀlÚgimeout", 
”r
)

1656 
n
 !ğ
	`št64
(
tÙ®Size
) {

1657 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
tÙ®Size
)+", gÙ "+¡ršg(
n
), 
”r
)

1661 
_
, 
”r
 = 
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
+"-LÚgtimeout", 
mšio
.
StObjeùO±iÚs
{})

1662 
”r
 !ğ
n
 {

1663 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

1668 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1669 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1673 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

1675 
	}
}

1678 
func
 
	$‹¡FPutObjeùW™hCÚ‹xtV2
() {

1680 
¡¬tTime
 :ğ
time
.
	`Now
()

1681 
‹¡Name
 :ğ
	`g‘FuncName
()

1682 
funùiÚ
 := "FPutObjectWithContext(ctx, bucketName, objectName, fileName, opts)"

1683 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

1689 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

1692 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

1693 
os
.
	`G‘’v
(
£rv”Endpošt
),

1694 
os
.
	`G‘’v
(
acûssKey
),

1695 
os
.
	`G‘’v
(
£ü‘Key
),

1696 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1698 
”r
 !ğ
n
 {

1699 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1707 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1710 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1711 
¬gs
["buck‘Name"] = 
buck‘Name


1714 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

1715 
”r
 !ğ
n
 {

1716 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

1722 
v¬
 
fName
 = 
	`g‘MštD©aDœFeP©h
("datafile-1-MB")

1723 
fName
 == "" {

1725 
fe
, 
”r
 :ğ
iout
.
	`TempFe
(
os
.
	`TempDœ
(), "FPutObjectWithContextTest")

1726 
”r
 !ğ
n
 {

1727 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Tem°fü—tiÚ faed", 
”r
)

1732 
_
, 
”r
 = 
io
.
	`Cİy
(
fe
, 
	`g‘D©aR—d”
("d©afe-1-MB"));ƒ¼ !ğ
n
 {

1733 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fcİy faed", 
”r
)

1738 
”r
 = 
fe
.
	`Clo£
();ƒ¼ !ğ
n
 {

1739 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fşo£ faed", 
”r
)

1742 
deãr
 
os
.
	`Remove
(
fe
.
	`Name
())

1743 
fName
 = 
fe
.
	`Name
()

1745 
tÙ®Size
 :ğ
d©aFeM­
["datafile-1-MB"]

1748 
objeùName
 :ğ
buck‘Name
 + "FPutObjectWithContext"

1749 
¬gs
["objeùName"] = 
objeùName


1751 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Nªo£cÚd
)

1752 
¬gs
["ùx"] = 
ùx


1753 
deãr
 
	`ÿnûl
()

1756 
_
, 
”r
 = 
c
.
	`FPutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
+"-ShÜ‰imeout", 
fName
, 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"})

1757 
”r
 =ğ
n
 {

1758 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeùW™hCÚ‹xˆshould fa oÀshÜˆtimeout", 
”r
)

1761 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

1762 
deãr
 
	`ÿnûl
()

1764 
n
, 
”r
 :ğ
c
.
	`FPutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
+"-LÚgtimeout", 
fName
, 
mšio
.
PutObjeùO±iÚs
{})

1765 
”r
 !ğ
n
 {

1766 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeùW™hCÚ‹xˆshouldn'ˆç oÀlÚg”imeout", 
”r
)

1769 
n
 !ğ
	`št64
(
tÙ®Size
) {

1770 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch:wª‹d"+
	`¡ršg
(
tÙ®Size
)+" gÙ "+¡ršg(
n
), 
”r
)

1774 
_
, 
”r
 = 
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
+"-LÚgtimeout", 
mšio
.
StObjeùO±iÚs
{})

1775 
”r
 !ğ
n
 {

1776 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

1781 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1782 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1786 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

1788 
	}
}

1791 
func
 
	$‹¡PutObjeùW™hCÚ‹xt
() {

1793 
¡¬tTime
 :ğ
time
.
	`Now
()

1794 
‹¡Name
 :ğ
	`g‘FuncName
()

1795 
funùiÚ
 := "PutObjectWithContext(ctx, bucketName, objectName, fileName, opts)"

1796 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

1803 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

1804 
os
.
	`G‘’v
(
£rv”Endpošt
),

1805 
os
.
	`G‘’v
(
acûssKey
),

1806 
os
.
	`G‘’v
(
£ü‘Key
),

1807 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1809 
”r
 !ğ
n
 {

1810 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1818 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1821 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1822 
¬gs
["buck‘Name"] = 
buck‘Name


1824 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

1825 
”r
 !ğ
n
 {

1826 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ c®Èçed", 
”r
)

1829 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

1830 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

1831 
deãr
 
»ad”
.
	`Clo£
()

1832 
objeùName
 :ğ
fmt
.
	`S´štf
("‹¡-fe-%v", 
¿nd
.
	`Ušt32
())

1833 
¬gs
["objeùName"] = 
objeùName


1835 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Nªo£cÚd
)

1836 
¬gs
["ùx"] = 
ùx


1837 
¬gs
["İts"] = 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"}

1838 
deãr
 
	`ÿnûl
()

1840 
_
, 
”r
 = 
c
.
	`PutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

1841 
”r
 =ğ
n
 {

1842 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùW™hCÚ‹xˆshould fa oÀshÜˆtimeout", 
”r
)

1846 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

1847 
¬gs
["ùx"] = 
ùx


1849 
deãr
 
	`ÿnûl
()

1850 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

1851 
deãr
 
»ad”
.
	`Clo£
()

1852 
_
, 
”r
 = 
c
.
	`PutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

1853 
”r
 !ğ
n
 {

1854 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùW™hCÚ‹xˆw™h†Úgimeouˆçed", 
”r
)

1859 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1860 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1864 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

1866 
	}
}

1869 
func
 
	$‹¡G‘ObjeùR—dS“kFunùiÚ®
() {

1871 
¡¬tTime
 :ğ
time
.
	`Now
()

1872 
‹¡Name
 :ğ
	`g‘FuncName
()

1873 
funùiÚ
 := "GetObject(bucketName, objectName)"

1874 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

1877 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

1880 
c
, 
”r
 :ğ
mšio
.
	`New
(

1881 
os
.
	`G‘’v
(
£rv”Endpošt
),

1882 
os
.
	`G‘’v
(
acûssKey
),

1883 
os
.
	`G‘’v
(
£ü‘Key
),

1884 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

1886 
”r
 !ğ
n
 {

1887 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

1895 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

1898 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

1899 
¬gs
["buck‘Name"] = 
buck‘Name


1902 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

1903 
”r
 !ğ
n
 {

1904 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

1908 
deãr
 
	`func
() {

1910 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

1911 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

1917 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

1918 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

1919 
deãr
 
»ad”
.
	`Clo£
()

1921 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

1922 
¬gs
["objeùName"] = 
objeùName


1924 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

1925 
”r
 !ğ
n
 {

1926 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

1931 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

1932 
”r
 !ğ
n
 {

1933 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

1937 
n
 !ğ
	`št64
(
bufSize
) {

1938 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
n
), 
”r
)

1943 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

1944 
”r
 !ğ
n
 {

1945 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

1949 
¡
, 
”r
 :ğ
r
.
	`St
()

1950 
”r
 !ğ
n
 {

1951 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆobjeù faed", 
”r
)

1955 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

1956 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
¡
.
Size
), 
”r
)

1962 
cmpD©a
 :ğ
	`func
(
r
 
io
.
R—d”
, 
¡¬t
, 
’d
 ) {

1963 
’d
-
¡¬t
 == 0 {

1966 
bufãr
 :ğ
by‹s
.
	`NewBufãr
([]
by‹
{})

1967 
_
, 
”r
 :ğ
io
.
	`CİyN
(
bufãr
, 
r
, 
	`št64
(
bufSize
));ƒ¼ !ğ
n
 {

1968 
”r
 !ğ
io
.
EOF
 {

1969 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyN faed", 
”r
)

1973 !
by‹s
.
	`Equ®
(
buf
[
¡¬t
:
’d
], 
bufãr
.
	`By‹s
()) {

1974 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d by‹ v/ Üigš® bufãr", 
”r
)

1980 
£ekE¼
 :ğ
”rÜs
.
	`New
("seekƒrror")

1982 
‹¡Ca£s
 := []struct {

1983 
off£t
 
št64


1984 
wh’û
 

1985 
pos
 
št64


1986 
”r
 
”rÜ


1987 
shouldCmp
 
boŞ


1988 
¡¬t
 

1989 
’d
 

1992 {0, 0, 0, 
n
, 
Œue
, 0, 0},

1994 {2048, 0, 2048, 
n
, 
Œue
, 2048, 
bufSize
},

1996 {
	`št64
(
bufSize
è+ 1024, 0, 0, 
£ekE¼
, 
çl£
, 0, 0},

1998 {0, 0, 0, 
n
, 
çl£
, 0, 0},

2000 {1, 1, 1, 
n
, 
Œue
, 1, 
bufSize
},

2002 {
	`št64
(
bufSize
), 1, 0, 
£ekE¼
, 
çl£
, 0, 0},

2004 {
	`št64
(-1), 1, 0, 
£ekE¼
, 
çl£
, 0, 0},

2006 {1024, 2, 
	`št64
(
bufSize
è- 1024, 
io
.
EOF
, 
Œue
, 0, 0},

2008 {-1024, 2, 
	`št64
(
bufSize
è- 1024, 
n
, 
Œue
, bufSize - 1024, bufSize},

2010 {-
	`št64
(
bufSize
è* 2, 2, 0, 
£ekE¼
, 
Œue
, 0, 0},

2013 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

2015 
n
, 
”r
 :ğ
r
.
	`S“k
(
‹¡Ca£
.
off£t
,e¡Ca£.
wh’û
)

2017 
‹¡Ca£
.
”r
 =ğ
£ekE¼
 &&ƒ¼ =ğ
n
 {

2018 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", uÃx³ùedƒ¼ v®ue:ƒx³ùed: "+
‹¡Ca£
.
”r
.
	`E¼Ü
()+", found: "+err.Error(),ƒrr)

2022 
‹¡Ca£
.
”r
 !ğ
£ekE¼
 &&estCase.err !=ƒrr {

2023 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", uÃx³ùedƒ¼ v®ue:ƒx³ùed: "+
‹¡Ca£
.
”r
.
	`E¼Ü
()+", found: "+err.Error(),ƒrr)

2027 
‹¡Ca£
.
”r
 !ğ
n
 {

2031 
n
 !ğ
‹¡Ca£
.
pos
 {

2032 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+",‚umb” oàby‹ £eked dÛ nÙ m©ch,ƒx³ùed "+¡ršg(
‹¡Ca£
.
pos
)+", gÙ "+¡ršg(
n
), 
”r
)

2036 
‹¡Ca£
.
shouldCmp
 {

2037 
	`cmpD©a
(
r
, 
‹¡Ca£
.
¡¬t
,e¡Ca£.
’d
)

2040 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

2041 
	}
}

2044 
func
 
	$‹¡G‘ObjeùR—dAtFunùiÚ®
() {

2046 
¡¬tTime
 :ğ
time
.
	`Now
()

2047 
‹¡Name
 :ğ
	`g‘FuncName
()

2048 
funùiÚ
 := "GetObject(bucketName, objectName)"

2049 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

2052 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

2055 
c
, 
”r
 :ğ
mšio
.
	`New
(

2056 
os
.
	`G‘’v
(
£rv”Endpošt
),

2057 
os
.
	`G‘’v
(
acûssKey
),

2058 
os
.
	`G‘’v
(
£ü‘Key
),

2059 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

2061 
”r
 !ğ
n
 {

2062 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

2070 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

2073 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

2074 
¬gs
["buck‘Name"] = 
buck‘Name


2077 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

2078 
”r
 !ğ
n
 {

2079 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

2084 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

2085 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

2086 
deãr
 
»ad”
.
	`Clo£
()

2088 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

2089 
¬gs
["objeùName"] = 
objeùName


2091 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

2092 
”r
 !ğ
n
 {

2093 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

2098 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

2099 
”r
 !ğ
n
 {

2100 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

2104 
n
 !ğ
	`št64
(
bufSize
) {

2105 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
n
), 
”r
)

2110 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

2111 
”r
 !ğ
n
 {

2112 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

2115 
off£t
 :ğ
	`št64
(2048)

2118 
buf1
 :ğ
	`make
([]
by‹
, 512)

2119 
buf2
 :ğ
	`make
([]
by‹
, 512)

2120 
buf3
 :ğ
	`make
([]
by‹
, 512)

2121 
buf4
 :ğ
	`make
([]
by‹
, 512)

2124 
m
, 
”r
 :ğ
r
.
	`R—dAt
(
buf1
, 
off£t
)

2125 
”r
 !ğ
n
 {

2126 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

2129 
m
 !ğ
	`Ën
(
buf1
) {

2130 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf1
))+", gÙ "+¡ršg(
m
), 
”r
)

2133 !
by‹s
.
	`Equ®
(
buf1
, 
buf
[
off£t
:offset+512]) {

2134 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

2137 
off£t
 += 512

2139 
¡
, 
”r
 :ğ
r
.
	`St
()

2140 
”r
 !ğ
n
 {

2141 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

2145 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

2146 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ š sˆdÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
¡
.
Size
), 
”r
)

2150 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf2
, 
off£t
)

2151 
”r
 !ğ
n
 {

2152 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

2155 
m
 !ğ
	`Ën
(
buf2
) {

2156 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf2
))+", gÙ "+¡ršg(
m
), 
”r
)

2159 !
by‹s
.
	`Equ®
(
buf2
, 
buf
[
off£t
:offset+512]) {

2160 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

2164 
off£t
 += 512

2165 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf3
, 
off£t
)

2166 
”r
 !ğ
n
 {

2167 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

2170 
m
 !ğ
	`Ën
(
buf3
) {

2171 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf3
))+", gÙ "+¡ršg(
m
), 
”r
)

2174 !
by‹s
.
	`Equ®
(
buf3
, 
buf
[
off£t
:offset+512]) {

2175 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

2178 
off£t
 += 512

2179 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf4
, 
off£t
)

2180 
”r
 !ğ
n
 {

2181 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

2184 
m
 !ğ
	`Ën
(
buf4
) {

2185 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf4
))+", gÙ "+¡ršg(
m
), 
”r
)

2188 !
by‹s
.
	`Equ®
(
buf4
, 
buf
[
off£t
:offset+512]) {

2189 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

2193 
buf5
 :ğ
	`make
([]
by‹
, 
n
)

2195 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf5
, 0)

2196 
”r
 !ğ
n
 {

2197 
”r
 !ğ
io
.
EOF
 {

2198 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

2202 
m
 !ğ
	`Ën
(
buf5
) {

2203 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf5
))+", gÙ "+¡ršg(
m
), 
”r
)

2206 !
by‹s
.
	`Equ®
(
buf
, 
buf5
) {

2207 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù d©¨»ad iÀG‘Objeù,hª wh© wa ´eviou¦y u¶ßded", 
”r
)

2211 
buf6
 :ğ
	`make
([]
by‹
, 
n
+1)

2213 
_
, 
”r
 = 
r
.
	`R—dAt
(
buf6
, 0)

2214 
”r
 !ğ
n
 {

2215 
”r
 !ğ
io
.
EOF
 {

2216 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

2221 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

2222 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

2225 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

2226 
	}
}

2229 
func
 
	$‹¡P»sigÃdPo¡PŞicy
() {

2231 
¡¬tTime
 :ğ
time
.
	`Now
()

2232 
‹¡Name
 :ğ
	`g‘FuncName
()

2233 
funùiÚ
 := "PresignedPostPolicy(policy)"

2234 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

2239 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

2242 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

2243 
os
.
	`G‘’v
(
£rv”Endpošt
),

2244 
os
.
	`G‘’v
(
acûssKey
),

2245 
os
.
	`G‘’v
(
£ü‘Key
),

2246 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

2248 
”r
 !ğ
n
 {

2249 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

2257 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

2260 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

2263 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

2264 
”r
 !ğ
n
 {

2265 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

2270 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

2271 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

2272 
deãr
 
»ad”
.
	`Clo£
()

2274 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

2276 
m‘ad©aKey
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "user")

2277 
m‘ad©aV®ue
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

2279 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

2280 
”r
 !ğ
n
 {

2281 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

2286 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

2287 
”r
 !ğ
n
 {

2288 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

2292 
n
 !ğ
	`št64
(
bufSize
) {

2293 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+" gÙ "+¡ršg(
n
), 
”r
)

2297 
pŞicy
 :ğ
mšio
.
	`NewPo¡PŞicy
()

2299 
”r
 :ğ
pŞicy
.
	`S‘Buck‘
("");ƒ¼ =ğ
n
 {

2300 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Buck‘ did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2303 
”r
 :ğ
pŞicy
.
	`S‘Key
("");ƒ¼ =ğ
n
 {

2304 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Key did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2307 
”r
 :ğ
pŞicy
.
	`S‘KeyS¹sW™h
("");ƒ¼ =ğ
n
 {

2308 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘KeyS¹sW™h did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2311 
”r
 :ğ
pŞicy
.
	`S‘Expœes
(
time
.
	`D©e
(1,ime.
Jªu¬y
, 1, 0, 0, 0, 0,ime.
UTC
));ƒ¼ =ğ
n
 {

2312 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Expœe did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2315 
”r
 :ğ
pŞicy
.
	`S‘CÚ‹ÁTy³
("");ƒ¼ =ğ
n
 {

2316 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘CÚ‹ÁTy³ did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2319 
”r
 :ğ
pŞicy
.
	`S‘CÚ‹ÁL’gthRªge
(1024*1024, 1024);ƒ¼ =ğ
n
 {

2320 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘CÚ‹ÁL’gthRªgdid‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2323 
”r
 :ğ
pŞicy
.
	`S‘U£rM‘ad©a
("", "");ƒ¼ =ğ
n
 {

2324 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘U£rM‘ad©¨did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2328 
pŞicy
.
	`S‘Buck‘
(
buck‘Name
)

2329 
pŞicy
.
	`S‘Key
(
objeùName
)

2330 
pŞicy
.
	`S‘Expœes
(
time
.
	`Now
().
	`UTC
().
	`AddD©e
(0, 0, 10))

2331 
pŞicy
.
	`S‘CÚ‹ÁTy³
("binary/octet-stream")

2332 
pŞicy
.
	`S‘CÚ‹ÁL’gthRªge
(10, 1024*1024)

2333 
pŞicy
.
	`S‘U£rM‘ad©a
(
m‘ad©aKey
, 
m‘ad©aV®ue
)

2334 
¬gs
["pŞicy"] = 
pŞicy
.
	`SŒšg
()

2336 
´esigÃdPo¡PŞicyURL
, 
fÜmD©a
, 
”r
 :ğ
c
.
	`P»sigÃdPo¡PŞicy
(
pŞicy
)

2337 
”r
 !ğ
n
 {

2338 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdPo¡PŞicy faed", 
”r
)

2342 
v¬
 
fÜmBuf
 
by‹s
.
Bufãr


2343 
wr™”
 :ğ
muÉ¬t
.
	`NewWr™”
(&
fÜmBuf
)

2344 
k
, 
v
 :ğ
¿nge
 
fÜmD©a
 {

2345 
wr™”
.
	`Wr™eF›ld
(
k
, 
v
)

2349 
v¬
 
feP©h
 = 
	`g‘MštD©aDœFeP©h
("datafile-33-kB")

2350 
feP©h
 == "" {

2352 
fe
, 
”r
 :ğ
iout
.
	`TempFe
(
os
.
	`TempDœ
(), "PresignedPostPolicyTest")

2353 
”r
 !ğ
n
 {

2354 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "TempFü—tiÚ faed", 
”r
)

2357 
_
, 
”r
 = 
io
.
	`Cİy
(
fe
, 
	`g‘D©aR—d”
("d©afe-33-kB"));ƒ¼ !ğ
n
 {

2358 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Cİy faed", 
”r
)

2361 
”r
 = 
fe
.
	`Clo£
();ƒ¼ !ğ
n
 {

2362 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FClo£ faed", 
”r
)

2365 
feP©h
 = 
fe
.
	`Name
()

2369 
f
, 
”r
 :ğ
os
.
	`O³n
(
feP©h
)

2370 
deãr
 
f
.
	`Clo£
()

2371 
”r
 !ğ
n
 {

2372 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fİ’ faed", 
”r
)

2375 
w
, 
”r
 :ğ
wr™”
.
	`C»©eFÜmFe
("fe", 
feP©h
)

2376 
”r
 !ğ
n
 {

2377 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "C»©eFÜmFçed", 
”r
)

2381 
_
, 
”r
 = 
io
.
	`Cİy
(
w
, 
f
)

2382 
”r
 !ğ
n
 {

2383 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Cİy faed", 
”r
)

2386 
wr™”
.
	`Clo£
()

2389 
»s
, 
”r
 :ğ
h‰p
.
	`Po¡
(
´esigÃdPo¡PŞicyURL
.
	`SŒšg
(), 
wr™”
.
	`FÜmD©aCÚ‹ÁTy³
(), 
by‹s
.
	`NewR—d”
(
fÜmBuf
.
	`By‹s
()))

2390 
”r
 !ğ
n
 {

2391 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "H‰°»que¡ faed", 
”r
)

2394 
deãr
 
»s
.
Body
.
	`Clo£
()

2395 
»s
.
StusCode
 !ğ
h‰p
.
StusNoCÚ‹Á
 {

2396 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "H‰°»que¡ faed", 
”rÜs
.
	`New
(
»s
.
Stus
))

2401 
v¬
 
scheme
 
¡ršg


2402 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)) {

2403 
scheme
 = "https://"

2405 
scheme
 = "http://"

2408 
ex³ùedLoÿtiÚ
 :ğ
scheme
 + 
os
.
	`G‘’v
(
£rv”Endpošt
è+ "/" + 
buck‘Name
 + "/" + 
objeùName


2409 
ex³ùedLoÿtiÚBuck‘DNS
 :ğ
scheme
 + 
buck‘Name
 + "." + 
os
.
	`G‘’v
(
£rv”Endpošt
è+ "/" + 
objeùName


2411 
v®
, 
ok
 :ğ
»s
.
H—d”
["Location"]; ok {

2412 
v®
[0] !ğ
ex³ùedLoÿtiÚ
 && v®[0] !ğ
ex³ùedLoÿtiÚBuck‘DNS
 {

2413 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "LoÿtiÚ iÀh—d”„e¥Ú£ i šcÜ»ù", 
”r
)

2417 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "LoÿtiÚ‚Ù found iÀh—d”„e¥Ú£", 
”r
)

2422 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

2423 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

2427 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

2428 
	}
}

2431 
func
 
	$‹¡CİyObjeù
() {

2433 
¡¬tTime
 :ğ
time
.
	`Now
()

2434 
‹¡Name
 :ğ
	`g‘FuncName
()

2435 
funùiÚ
 := "CopyObject(dst, src)"

2436 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

2439 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

2442 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

2443 
os
.
	`G‘’v
(
£rv”Endpošt
),

2444 
os
.
	`G‘’v
(
acûssKey
),

2445 
os
.
	`G‘’v
(
£ü‘Key
),

2446 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

2448 
”r
 !ğ
n
 {

2449 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

2457 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

2460 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

2463 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

2464 
”r
 !ğ
n
 {

2465 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

2470 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
+"-copy", "us-east-1")

2471 
”r
 !ğ
n
 {

2472 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

2477 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

2478 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

2481 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

2482 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

2483 
”r
 !ğ
n
 {

2484 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

2488 
n
 !ğ
	`št64
(
bufSize
) {

2489 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
n
), 
”r
)

2493 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

2494 
”r
 !ğ
n
 {

2495 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

2499 
objInfo
, 
”r
 :ğ
r
.
	`St
()

2500 
”r
 !ğ
n
 {

2501 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

2506 
¤c
 :ğ
mšio
.
	`NewSourûInfo
(
buck‘Name
, 
objeùName
, 
n
)

2507 
¬gs
["¤c"] = 
¤c


2512 
”r
 = 
¤c
.
	`S‘Modif›dSšûCÚd
(
time
.
	`D©e
(1,ime.
Jªu¬y
, 1, 0, 0, 0, 0,ime.
UTC
))

2513 
”r
 =ğ
n
 {

2514 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Modif›dSšûCÚd did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2517 
”r
 = 
¤c
.
	`S‘Unmodif›dSšûCÚd
(
time
.
	`D©e
(1,ime.
Jªu¬y
, 1, 0, 0, 0, 0,ime.
UTC
))

2518 
”r
 =ğ
n
 {

2519 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Unmodif›dSšûCÚd did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2522 
”r
 = 
¤c
.
	`S‘M©chETagCÚd
("")

2523 
”r
 =ğ
n
 {

2524 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘M©chETagCÚd did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2527 
”r
 = 
¤c
.
	`S‘M©chETagExû±CÚd
("")

2528 
”r
 =ğ
n
 {

2529 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘M©chETagExû±CÚd did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2533 
”r
 = 
¤c
.
	`S‘Modif›dSšûCÚd
(
time
.
	`D©e
(2014,ime.
A´
, 0, 0, 0, 0, 0,ime.
UTC
))

2534 
”r
 !ğ
n
 {

2535 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Modif›dSšûCÚd faed", 
”r
)

2538 
”r
 = 
¤c
.
	`S‘M©chETagCÚd
(
objInfo
.
ETag
)

2539 
”r
 !ğ
n
 {

2540 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘M©chETagCÚd faed", 
”r
)

2544 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
+"-cİy", 
objeùName
+"-cİy", 
n
,‚il)

2545 
¬gs
["d¡"] = 
d¡


2546 
”r
 !ğ
n
 {

2547 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

2552 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

2553 
”r
 !ğ
n
 {

2554 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù faed", 
”r
)

2559 
r
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

2560 
”r
 !ğ
n
 {

2561 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

2566 
»ad”Cİy
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
+"-cİy", 
objeùName
+"-cİy", 
mšio
.
G‘ObjeùO±iÚs
{})

2567 
”r
 !ğ
n
 {

2568 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

2572 
objInfo
, 
”r
 = 
r
.
	`St
()

2573 
”r
 !ğ
n
 {

2574 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

2577 
objInfoCİy
, 
”r
 :ğ
»ad”Cİy
.
	`St
()

2578 
”r
 !ğ
n
 {

2579 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

2582 
objInfo
.
Size
 !ğ
objInfoCİy
.Size {

2583 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
objInfoCİy
.
Size
)+", gÙ "+¡ršg(
objInfo
.Size), 
”r
)

2588 
r
.
	`Clo£
()

2589 
»ad”Cİy
.
	`Clo£
()

2592 
¤c
 = 
mšio
.
	`NewSourûInfo
(
buck‘Name
, 
objeùName
, 
n
)

2593 
”r
 = 
¤c
.
	`S‘Unmodif›dSšûCÚd
(
time
.
	`D©e
(2014,ime.
A´
, 0, 0, 0, 0, 0,ime.
UTC
))

2594 
”r
 !ğ
n
 {

2595 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Unmodif›dSšûCÚd faed", 
”r
)

2598 
”r
 = 
¤c
.
	`S‘M©chETagExû±CÚd
(
objInfo
.
ETag
)

2599 
”r
 !ğ
n
 {

2600 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘M©chETagExû±CÚd faed", 
”r
)

2605 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

2606 
”r
 =ğ
n
 {

2607 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

2612 
¤c
 = 
mšio
.
	`NewSourûInfo
(
buck‘Name
, 
objeùName
, 
n
)

2613 
d¡
, 
”r
 = 
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, 
objeùName
, 
n
, 
m­
[
¡ršg
]string{

2616 
¬gs
["d¡"] = 
d¡


2617 
¬gs
["¤c"] = 
¤c


2618 
”r
 !ğ
n
 {

2619 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

2623 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

2624 
”r
 !ğ
n
 {

2625 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù shouldn'ˆç", 
”r
)

2629 
oi
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
, 
mšio
.
StObjeùO±iÚs
{})

2630 
”r
 !ğ
n
 {

2631 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

2635 
¡O±s
 :ğ
mšio
.
StObjeùO±iÚs
{}

2636 
¡O±s
.
	`S‘M©chETag
(
oi
.
ETag
)

2637 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
, 
¡O±s
)

2638 
”r
 !ğ
n
 {

2639 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù ETag should m©ch‡nd‚Ù fa", 
”r
)

2643 
objInfo
.
M‘ad©a
.
	`G‘
("x-amz-meta-copy") != "should be same" {

2644 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù modif›d m‘ad©¨should m©ch", 
”r
)

2649 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

2650 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

2653 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
+"-cİy", 
c
);ƒ¼ !ğ
n
 {

2654 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

2657 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

2658 
	}
}

2661 
func
 
	$‹¡SSECEnüy±edG‘ObjeùR—dS“kFunùiÚ®
() {

2663 
¡¬tTime
 :ğ
time
.
	`Now
()

2664 
‹¡Name
 :ğ
	`g‘FuncName
()

2665 
funùiÚ
 := "GetObject(bucketName, objectName)"

2666 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

2669 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

2672 
c
, 
”r
 :ğ
mšio
.
	`New
(

2673 
os
.
	`G‘’v
(
£rv”Endpošt
),

2674 
os
.
	`G‘’v
(
acûssKey
),

2675 
os
.
	`G‘’v
(
£ü‘Key
),

2676 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

2678 
”r
 !ğ
n
 {

2679 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

2687 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

2690 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

2691 
¬gs
["buck‘Name"] = 
buck‘Name


2694 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

2695 
”r
 !ğ
n
 {

2696 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

2700 
deãr
 
	`func
() {

2702 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

2703 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

2709 
bufSize
 :ğ
d©aFeM­
["datafile-65-MB"]

2710 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-65-MB")

2711 
deãr
 
»ad”
.
	`Clo£
()

2713 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

2714 
¬gs
["objeùName"] = 
objeùName


2716 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

2717 
”r
 !ğ
n
 {

2718 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

2723 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{

2724 
CÚ‹ÁTy³
: "binary/octet-stream",

2725 
S”v”SideEnüy±iÚ
: 
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+
objeùName
)),

2727 
”r
 !ğ
n
 {

2728 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

2732 
n
 !ğ
	`št64
(
bufSize
) {

2733 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
n
), 
”r
)

2738 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{

2739 
S”v”SideEnüy±iÚ
: 
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+
objeùName
)),

2741 
”r
 !ğ
n
 {

2742 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

2745 
deãr
 
r
.
	`Clo£
()

2747 
¡
, 
”r
 :ğ
r
.
	`St
()

2748 
”r
 !ğ
n
 {

2749 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆobjeù faed", 
”r
)

2753 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

2754 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
¡
.
Size
), 
”r
)

2760 
cmpD©a
 :ğ
	`func
(
r
 
io
.
R—d”
, 
¡¬t
, 
’d
 ) {

2761 
’d
-
¡¬t
 == 0 {

2764 
bufãr
 :ğ
by‹s
.
	`NewBufãr
([]
by‹
{})

2765 
_
, 
”r
 :ğ
io
.
	`CİyN
(
bufãr
, 
r
, 
	`št64
(
bufSize
));ƒ¼ !ğ
n
 {

2766 
”r
 !ğ
io
.
EOF
 {

2767 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyN faed", 
”r
)

2771 !
by‹s
.
	`Equ®
(
buf
[
¡¬t
:
’d
], 
bufãr
.
	`By‹s
()) {

2772 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d by‹ v/ Üigš® bufãr", 
”r
)

2777 
‹¡Ca£s
 := []struct {

2778 
off£t
 
št64


2779 
wh’û
 

2780 
pos
 
št64


2781 
”r
 
”rÜ


2782 
shouldCmp
 
boŞ


2783 
¡¬t
 

2784 
’d
 

2787 {0, 0, 0, 
n
, 
Œue
, 0, 0},

2789 {2048, 0, 2048, 
n
, 
Œue
, 2048, 
bufSize
},

2791 {
	`št64
(
bufSize
è+ 1024, 0, 0, 
io
.
EOF
, 
çl£
, 0, 0},

2793 {0, 0, 0, 
n
, 
çl£
, 0, 0},

2795 {1, 1, 1, 
n
, 
Œue
, 1, 
bufSize
},

2797 {
	`št64
(
bufSize
), 1, 0, 
io
.
EOF
, 
çl£
, 0, 0},

2799 {
	`št64
(-1), 1, 0, 
fmt
.
	`E¼Üf
("Neg©ivpos™iÚ‚Ù‡Îowed fÜ 1"), 
çl£
, 0, 0},

2801 {1024, 2, 0, 
io
.
EOF
, 
çl£
, 0, 0},

2803 {-1024, 2, 
	`št64
(
bufSize
è- 1024, 
n
, 
Œue
, bufSize - 1024, bufSize},

2805 {-
	`št64
(
bufSize
è* 2, 2, 0, 
fmt
.
	`E¼Üf
("S“kšg‡ˆÃg©ivoff£ˆnÙ‡Îowed fÜ 2"), 
çl£
, 0, 0},

2807 {0, 3, 0, 
fmt
.
	`E¼Üf
("Inv®id wh’û 3"), 
çl£
, 0, 0},

2810 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

2812 
n
, 
”r
 :ğ
r
.
	`S“k
(
‹¡Ca£
.
off£t
,e¡Ca£.
wh’û
)

2813 
”r
 !ğ
n
 && 
‹¡Ca£
.err ==‚il {

2815 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "",

2816 
fmt
.
	`S´štf
("Te¡ %d, uÃx³ùedƒ¼ v®ue:ƒx³ùed: %s, found: %s", 
i
+1, 
‹¡Ca£
.
”r
,ƒrr),ƒrr)

2819 
”r
 =ğ
n
 && 
‹¡Ca£
.err !=‚il {

2821 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "",

2822 
fmt
.
	`S´štf
("Te¡ %d, uÃx³ùedƒ¼ v®ue:ƒx³ùed: %s, found: %s", 
i
+1, 
‹¡Ca£
.
”r
,ƒrr),ƒrr)

2825 
”r
 !ğ
n
 && 
‹¡Ca£
.err !=‚il {

2826 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

2828 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "",

2829 
fmt
.
	`S´štf
("Te¡ %d, uÃx³ùedƒ¼ v®ue:ƒx³ùed: %s, found: %s", 
i
+1, 
‹¡Ca£
.
”r
,ƒrr),ƒrr)

2834 
n
 !ğ
‹¡Ca£
.
pos
 {

2835 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "",

2836 
fmt
.
	`S´štf
("Te¡ %d,‚umb” oàby‹ £eked dÛ nÙ m©ch,ƒx³ùed %d, gÙ %d", 
i
+1, 
‹¡Ca£
.
pos
, 
n
), 
”r
)

2840 
‹¡Ca£
.
shouldCmp
 {

2841 
	`cmpD©a
(
r
, 
‹¡Ca£
.
¡¬t
,e¡Ca£.
’d
)

2845 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

2846 
	}
}

2849 
func
 
	$‹¡SSES3Enüy±edG‘ObjeùR—dS“kFunùiÚ®
() {

2851 
¡¬tTime
 :ğ
time
.
	`Now
()

2852 
‹¡Name
 :ğ
	`g‘FuncName
()

2853 
funùiÚ
 := "GetObject(bucketName, objectName)"

2854 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

2857 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

2860 
c
, 
”r
 :ğ
mšio
.
	`New
(

2861 
os
.
	`G‘’v
(
£rv”Endpošt
),

2862 
os
.
	`G‘’v
(
acûssKey
),

2863 
os
.
	`G‘’v
(
£ü‘Key
),

2864 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

2866 
”r
 !ğ
n
 {

2867 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

2875 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

2878 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

2879 
¬gs
["buck‘Name"] = 
buck‘Name


2882 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

2883 
”r
 !ğ
n
 {

2884 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

2888 
deãr
 
	`func
() {

2890 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

2891 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

2897 
bufSize
 :ğ
d©aFeM­
["datafile-65-MB"]

2898 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-65-MB")

2899 
deãr
 
»ad”
.
	`Clo£
()

2901 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

2902 
¬gs
["objeùName"] = 
objeùName


2904 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

2905 
”r
 !ğ
n
 {

2906 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

2911 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{

2912 
CÚ‹ÁTy³
: "binary/octet-stream",

2913 
S”v”SideEnüy±iÚ
: 
’üy±
.
	`NewSSE
(),

2915 
”r
 !ğ
n
 {

2916 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

2920 
n
 !ğ
	`št64
(
bufSize
) {

2921 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
n
), 
”r
)

2926 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

2927 
”r
 !ğ
n
 {

2928 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

2931 
deãr
 
r
.
	`Clo£
()

2933 
¡
, 
”r
 :ğ
r
.
	`St
()

2934 
”r
 !ğ
n
 {

2935 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆobjeù faed", 
”r
)

2939 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

2940 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
¡
.
Size
), 
”r
)

2946 
cmpD©a
 :ğ
	`func
(
r
 
io
.
R—d”
, 
¡¬t
, 
’d
 ) {

2947 
’d
-
¡¬t
 == 0 {

2950 
bufãr
 :ğ
by‹s
.
	`NewBufãr
([]
by‹
{})

2951 
_
, 
”r
 :ğ
io
.
	`CİyN
(
bufãr
, 
r
, 
	`št64
(
bufSize
));ƒ¼ !ğ
n
 {

2952 
”r
 !ğ
io
.
EOF
 {

2953 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyN faed", 
”r
)

2957 !
by‹s
.
	`Equ®
(
buf
[
¡¬t
:
’d
], 
bufãr
.
	`By‹s
()) {

2958 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d by‹ v/ Üigš® bufãr", 
”r
)

2963 
‹¡Ca£s
 := []struct {

2964 
off£t
 
št64


2965 
wh’û
 

2966 
pos
 
št64


2967 
”r
 
”rÜ


2968 
shouldCmp
 
boŞ


2969 
¡¬t
 

2970 
’d
 

2973 {0, 0, 0, 
n
, 
Œue
, 0, 0},

2975 {2048, 0, 2048, 
n
, 
Œue
, 2048, 
bufSize
},

2977 {
	`št64
(
bufSize
è+ 1024, 0, 0, 
io
.
EOF
, 
çl£
, 0, 0},

2979 {0, 0, 0, 
n
, 
çl£
, 0, 0},

2981 {1, 1, 1, 
n
, 
Œue
, 1, 
bufSize
},

2983 {
	`št64
(
bufSize
), 1, 0, 
io
.
EOF
, 
çl£
, 0, 0},

2985 {
	`št64
(-1), 1, 0, 
fmt
.
	`E¼Üf
("Neg©ivpos™iÚ‚Ù‡Îowed fÜ 1"), 
çl£
, 0, 0},

2987 {1024, 2, 0, 
io
.
EOF
, 
çl£
, 0, 0},

2989 {-1024, 2, 
	`št64
(
bufSize
è- 1024, 
n
, 
Œue
, bufSize - 1024, bufSize},

2991 {-
	`št64
(
bufSize
è* 2, 2, 0, 
fmt
.
	`E¼Üf
("S“kšg‡ˆÃg©ivoff£ˆnÙ‡Îowed fÜ 2"), 
çl£
, 0, 0},

2993 {0, 3, 0, 
fmt
.
	`E¼Üf
("Inv®id wh’û 3"), 
çl£
, 0, 0},

2996 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

2998 
n
, 
”r
 :ğ
r
.
	`S“k
(
‹¡Ca£
.
off£t
,e¡Ca£.
wh’û
)

2999 
”r
 !ğ
n
 && 
‹¡Ca£
.err ==‚il {

3001 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "",

3002 
fmt
.
	`S´štf
("Te¡ %d, uÃx³ùedƒ¼ v®ue:ƒx³ùed: %s, found: %s", 
i
+1, 
‹¡Ca£
.
”r
,ƒrr),ƒrr)

3005 
”r
 =ğ
n
 && 
‹¡Ca£
.err !=‚il {

3007 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "",

3008 
fmt
.
	`S´štf
("Te¡ %d, uÃx³ùedƒ¼ v®ue:ƒx³ùed: %s, found: %s", 
i
+1, 
‹¡Ca£
.
”r
,ƒrr),ƒrr)

3011 
”r
 !ğ
n
 && 
‹¡Ca£
.err !=‚il {

3012 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

3014 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "",

3015 
fmt
.
	`S´štf
("Te¡ %d, uÃx³ùedƒ¼ v®ue:ƒx³ùed: %s, found: %s", 
i
+1, 
‹¡Ca£
.
”r
,ƒrr),ƒrr)

3020 
n
 !ğ
‹¡Ca£
.
pos
 {

3021 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "",

3022 
fmt
.
	`S´štf
("Te¡ %d,‚umb” oàby‹ £eked dÛ nÙ m©ch,ƒx³ùed %d, gÙ %d", 
i
+1, 
‹¡Ca£
.
pos
, 
n
), 
”r
)

3026 
‹¡Ca£
.
shouldCmp
 {

3027 
	`cmpD©a
(
r
, 
‹¡Ca£
.
¡¬t
,e¡Ca£.
’d
)

3031 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3032 
	}
}

3035 
func
 
	$‹¡SSECEnüy±edG‘ObjeùR—dAtFunùiÚ®
() {

3037 
¡¬tTime
 :ğ
time
.
	`Now
()

3038 
‹¡Name
 :ğ
	`g‘FuncName
()

3039 
funùiÚ
 := "GetObject(bucketName, objectName)"

3040 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

3043 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

3046 
c
, 
”r
 :ğ
mšio
.
	`New
(

3047 
os
.
	`G‘’v
(
£rv”Endpošt
),

3048 
os
.
	`G‘’v
(
acûssKey
),

3049 
os
.
	`G‘’v
(
£ü‘Key
),

3050 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

3052 
”r
 !ğ
n
 {

3053 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

3061 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

3064 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

3065 
¬gs
["buck‘Name"] = 
buck‘Name


3068 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

3069 
”r
 !ğ
n
 {

3070 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

3075 
bufSize
 :ğ
d©aFeM­
["datafile-65-MB"]

3076 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-65-MB")

3077 
deãr
 
»ad”
.
	`Clo£
()

3079 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

3080 
¬gs
["objeùName"] = 
objeùName


3082 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

3083 
”r
 !ğ
n
 {

3084 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

3089 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{

3090 
CÚ‹ÁTy³
: "binary/octet-stream",

3091 
S”v”SideEnüy±iÚ
: 
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+
objeùName
)),

3093 
”r
 !ğ
n
 {

3094 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

3098 
n
 !ğ
	`št64
(
bufSize
) {

3099 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
n
), 
”r
)

3104 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{

3105 
S”v”SideEnüy±iÚ
: 
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+
objeùName
)),

3107 
”r
 !ğ
n
 {

3108 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

3111 
deãr
 
r
.
	`Clo£
()

3113 
off£t
 :ğ
	`št64
(2048)

3116 
buf1
 :ğ
	`make
([]
by‹
, 512)

3117 
buf2
 :ğ
	`make
([]
by‹
, 512)

3118 
buf3
 :ğ
	`make
([]
by‹
, 512)

3119 
buf4
 :ğ
	`make
([]
by‹
, 512)

3122 
m
, 
”r
 :ğ
r
.
	`R—dAt
(
buf1
, 
off£t
)

3123 
”r
 !ğ
n
 {

3124 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3127 
m
 !ğ
	`Ën
(
buf1
) {

3128 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf1
))+", gÙ "+¡ršg(
m
), 
”r
)

3131 !
by‹s
.
	`Equ®
(
buf1
, 
buf
[
off£t
:offset+512]) {

3132 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

3135 
off£t
 += 512

3137 
¡
, 
”r
 :ğ
r
.
	`St
()

3138 
”r
 !ğ
n
 {

3139 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

3143 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

3144 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ š sˆdÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
¡
.
Size
), 
”r
)

3148 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf2
, 
off£t
)

3149 
”r
 !ğ
n
 {

3150 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3153 
m
 !ğ
	`Ën
(
buf2
) {

3154 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf2
))+", gÙ "+¡ršg(
m
), 
”r
)

3157 !
by‹s
.
	`Equ®
(
buf2
, 
buf
[
off£t
:offset+512]) {

3158 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

3161 
off£t
 += 512

3162 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf3
, 
off£t
)

3163 
”r
 !ğ
n
 {

3164 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3167 
m
 !ğ
	`Ën
(
buf3
) {

3168 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf3
))+", gÙ "+¡ršg(
m
), 
”r
)

3171 !
by‹s
.
	`Equ®
(
buf3
, 
buf
[
off£t
:offset+512]) {

3172 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

3175 
off£t
 += 512

3176 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf4
, 
off£t
)

3177 
”r
 !ğ
n
 {

3178 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3181 
m
 !ğ
	`Ën
(
buf4
) {

3182 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf4
))+", gÙ "+¡ršg(
m
), 
”r
)

3185 !
by‹s
.
	`Equ®
(
buf4
, 
buf
[
off£t
:offset+512]) {

3186 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

3190 
buf5
 :ğ
	`make
([]
by‹
, 
n
)

3192 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf5
, 0)

3193 
”r
 !ğ
n
 {

3194 
”r
 !ğ
io
.
EOF
 {

3195 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3199 
m
 !ğ
	`Ën
(
buf5
) {

3200 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf5
))+", gÙ "+¡ršg(
m
), 
”r
)

3203 !
by‹s
.
	`Equ®
(
buf
, 
buf5
) {

3204 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù d©¨»ad iÀG‘Objeù,hª wh© wa ´eviou¦y u¶ßded", 
”r
)

3208 
buf6
 :ğ
	`make
([]
by‹
, 
n
+1)

3210 
_
, 
”r
 = 
r
.
	`R—dAt
(
buf6
, 0)

3211 
”r
 !ğ
n
 {

3212 
”r
 !ğ
io
.
EOF
 {

3213 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3218 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

3219 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

3222 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3223 
	}
}

3226 
func
 
	$‹¡SSES3Enüy±edG‘ObjeùR—dAtFunùiÚ®
() {

3228 
¡¬tTime
 :ğ
time
.
	`Now
()

3229 
‹¡Name
 :ğ
	`g‘FuncName
()

3230 
funùiÚ
 := "GetObject(bucketName, objectName)"

3231 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

3234 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

3237 
c
, 
”r
 :ğ
mšio
.
	`New
(

3238 
os
.
	`G‘’v
(
£rv”Endpošt
),

3239 
os
.
	`G‘’v
(
acûssKey
),

3240 
os
.
	`G‘’v
(
£ü‘Key
),

3241 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

3243 
”r
 !ğ
n
 {

3244 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

3252 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

3255 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

3256 
¬gs
["buck‘Name"] = 
buck‘Name


3259 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

3260 
”r
 !ğ
n
 {

3261 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

3266 
bufSize
 :ğ
d©aFeM­
["datafile-65-MB"]

3267 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-65-MB")

3268 
deãr
 
»ad”
.
	`Clo£
()

3270 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

3271 
¬gs
["objeùName"] = 
objeùName


3273 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

3274 
”r
 !ğ
n
 {

3275 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

3280 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{

3281 
CÚ‹ÁTy³
: "binary/octet-stream",

3282 
S”v”SideEnüy±iÚ
: 
’üy±
.
	`NewSSE
(),

3284 
”r
 !ğ
n
 {

3285 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

3289 
n
 !ğ
	`št64
(
bufSize
) {

3290 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
n
), 
”r
)

3295 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

3296 
”r
 !ğ
n
 {

3297 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

3300 
deãr
 
r
.
	`Clo£
()

3302 
off£t
 :ğ
	`št64
(2048)

3305 
buf1
 :ğ
	`make
([]
by‹
, 512)

3306 
buf2
 :ğ
	`make
([]
by‹
, 512)

3307 
buf3
 :ğ
	`make
([]
by‹
, 512)

3308 
buf4
 :ğ
	`make
([]
by‹
, 512)

3311 
m
, 
”r
 :ğ
r
.
	`R—dAt
(
buf1
, 
off£t
)

3312 
”r
 !ğ
n
 {

3313 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3316 
m
 !ğ
	`Ën
(
buf1
) {

3317 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf1
))+", gÙ "+¡ršg(
m
), 
”r
)

3320 !
by‹s
.
	`Equ®
(
buf1
, 
buf
[
off£t
:offset+512]) {

3321 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

3324 
off£t
 += 512

3326 
¡
, 
”r
 :ğ
r
.
	`St
()

3327 
”r
 !ğ
n
 {

3328 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

3332 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

3333 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ š sˆdÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+", gÙ "+¡ršg(
¡
.
Size
), 
”r
)

3337 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf2
, 
off£t
)

3338 
”r
 !ğ
n
 {

3339 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3342 
m
 !ğ
	`Ën
(
buf2
) {

3343 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf2
))+", gÙ "+¡ršg(
m
), 
”r
)

3346 !
by‹s
.
	`Equ®
(
buf2
, 
buf
[
off£t
:offset+512]) {

3347 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

3350 
off£t
 += 512

3351 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf3
, 
off£t
)

3352 
”r
 !ğ
n
 {

3353 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3356 
m
 !ğ
	`Ën
(
buf3
) {

3357 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf3
))+", gÙ "+¡ršg(
m
), 
”r
)

3360 !
by‹s
.
	`Equ®
(
buf3
, 
buf
[
off£t
:offset+512]) {

3361 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

3364 
off£t
 += 512

3365 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf4
, 
off£t
)

3366 
”r
 !ğ
n
 {

3367 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3370 
m
 !ğ
	`Ën
(
buf4
) {

3371 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf4
))+", gÙ "+¡ršg(
m
), 
”r
)

3374 !
by‹s
.
	`Equ®
(
buf4
, 
buf
[
off£t
:offset+512]) {

3375 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

3379 
buf5
 :ğ
	`make
([]
by‹
, 
n
)

3381 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf5
, 0)

3382 
”r
 !ğ
n
 {

3383 
”r
 !ğ
io
.
EOF
 {

3384 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3388 
m
 !ğ
	`Ën
(
buf5
) {

3389 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf5
))+", gÙ "+¡ršg(
m
), 
”r
)

3392 !
by‹s
.
	`Equ®
(
buf
, 
buf5
) {

3393 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù d©¨»ad iÀG‘Objeù,hª wh© wa ´eviou¦y u¶ßded", 
”r
)

3397 
buf6
 :ğ
	`make
([]
by‹
, 
n
+1)

3399 
_
, 
”r
 = 
r
.
	`R—dAt
(
buf6
, 0)

3400 
”r
 !ğ
n
 {

3401 
”r
 !ğ
io
.
EOF
 {

3402 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

3407 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

3408 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

3411 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3412 
	}
}

3415 
func
 
	$‹¡SSECEnüy±iÚPutG‘
() {

3417 
¡¬tTime
 :ğ
time
.
	`Now
()

3418 
‹¡Name
 :ğ
	`g‘FuncName
()

3419 
funùiÚ
 := "PutEncryptedObject(bucketName, objectName,„eader, sse)"

3420 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

3426 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

3429 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

3430 
os
.
	`G‘’v
(
£rv”Endpošt
),

3431 
os
.
	`G‘’v
(
acûssKey
),

3432 
os
.
	`G‘’v
(
£ü‘Key
),

3433 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

3435 
”r
 !ğ
n
 {

3436 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

3444 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

3447 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

3448 
¬gs
["buck‘Name"] = 
buck‘Name


3451 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

3452 
”r
 !ğ
n
 {

3453 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

3457 
‹¡Ca£s
 := []struct {

3458 
buf
 []
by‹


3460 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1)},

3461 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 15)},

3462 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 16)},

3463 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 17)},

3464 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 31)},

3465 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 32)},

3466 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 33)},

3467 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024)},

3468 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024*2)},

3469 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024*1024)},

3472 cÚ¡ 
·sswÜd
 = "correct horse battery staple"

3474 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

3476 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

3477 
¬gs
["objeùName"] = 
objeùName


3480 
s£
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
buck‘Name
+
objeùName
))

3481 
¬gs
["s£"] = 
s£


3484 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
‹¡Ca£
.
buf
), 
	`št64
(
	`Ën
Ñe¡Ca£.buf)), 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
s£
})

3485 
”r
 !ğ
n
 {

3486 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutEnüy±edObjeù faed", 
”r
)

3491 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
s£
})

3492 
”r
 !ğ
n
 {

3493 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Enüy±edObjeù faed", 
”r
)

3496 
deãr
 
r
.
	`Clo£
()

3499 
»cvBufãr
 :ğ
by‹s
.
	`NewBufãr
([]
by‹
{})

3500 
_
, 
”r
 = 
io
.
	`Cİy
(
»cvBufãr
, 
r
);ƒ¼ !ğ
n
 {

3501 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+",ƒ¼Ü: "+
”r
.
	`E¼Ü
(),ƒrr)

3504 
»cvBufãr
.
	`L’
(è!ğ
	`Ën
(
‹¡Ca£
.
buf
) {

3505 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", Numb” oàby‹ oà»ûived objeù dÛ nÙ m©ch,ƒx³ùed "+¡ršg(
	`Ën
(
‹¡Ca£
.
buf
))+", gÙ "+¡ršg(
»cvBufãr
.
	`L’
()), 
”r
)

3508 !
by‹s
.
	`Equ®
(
‹¡Ca£
.
buf
, 
»cvBufãr
.
	`By‹s
()) {

3509 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", Enüy±ed s’ˆi nÙƒqu®Ødeüy±ed,ƒx³ùed "+¡ršg(
‹¡Ca£
.
buf
)+", gÙ "+¡ršg(
»cvBufãr
.
	`By‹s
()), 
”r
)

3513 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3518 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

3519 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

3523 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3524 
	}
}

3527 
func
 
	$‹¡SSECEnüy±iÚFPut
() {

3529 
¡¬tTime
 :ğ
time
.
	`Now
()

3530 
‹¡Name
 :ğ
	`g‘FuncName
()

3531 
funùiÚ
 := "FPutEncryptedObject(bucketName, objectName, filePath, contentType, sse)"

3532 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

3540 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

3543 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

3544 
os
.
	`G‘’v
(
£rv”Endpošt
),

3545 
os
.
	`G‘’v
(
acûssKey
),

3546 
os
.
	`G‘’v
(
£ü‘Key
),

3547 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

3549 
”r
 !ğ
n
 {

3550 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

3558 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

3561 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

3562 
¬gs
["buck‘Name"] = 
buck‘Name


3565 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

3566 
”r
 !ğ
n
 {

3567 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

3572 
cu¡omCÚ‹ÁTy³
 := "custom/contenttype"

3573 
¬gs
["m‘ad©a"] = 
cu¡omCÚ‹ÁTy³


3575 
‹¡Ca£s
 := []struct {

3576 
buf
 []
by‹


3578 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 0)},

3579 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1)},

3580 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 15)},

3581 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 16)},

3582 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 17)},

3583 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 31)},

3584 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 32)},

3585 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 33)},

3586 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024)},

3587 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024*2)},

3588 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024*1024)},

3591 cÚ¡ 
·sswÜd
 = "correct horse battery staple"

3592 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

3594 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

3595 
¬gs
["objeùName"] = 
objeùName


3598 
s£
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
buck‘Name
+
objeùName
))

3599 
¬gs
["s£"] = 
s£


3602 
feName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

3603 
fe
, 
”r
 :ğ
os
.
	`C»©e
(
feName
)

3604 
”r
 !ğ
n
 {

3605 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "fü—‹ faed", 
”r
)

3608 
_
, 
”r
 = 
fe
.
	`Wr™e
(
‹¡Ca£
.
buf
)

3609 
”r
 !ğ
n
 {

3610 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "fwr™çed", 
”r
)

3613 
fe
.
	`Clo£
()

3615 
_
, 
”r
 = 
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
, 
feName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
s£
});ƒ¼ !ğ
n
 {

3616 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutEnüy±edObjeù faed", 
”r
)

3621 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
s£
})

3622 
”r
 !ğ
n
 {

3623 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Enüy±edObjeù faed", 
”r
)

3626 
deãr
 
r
.
	`Clo£
()

3629 
»cvBufãr
 :ğ
by‹s
.
	`NewBufãr
([]
by‹
{})

3630 
_
, 
”r
 = 
io
.
	`Cİy
(
»cvBufãr
, 
r
);ƒ¼ !ğ
n
 {

3631 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+",ƒ¼Ü: "+
”r
.
	`E¼Ü
(),ƒrr)

3634 
»cvBufãr
.
	`L’
(è!ğ
	`Ën
(
‹¡Ca£
.
buf
) {

3635 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", Numb” oàby‹ oà»ûived objeù dÛ nÙ m©ch,ƒx³ùed "+¡ršg(
	`Ën
(
‹¡Ca£
.
buf
))+", gÙ "+¡ršg(
»cvBufãr
.
	`L’
()), 
”r
)

3638 !
by‹s
.
	`Equ®
(
‹¡Ca£
.
buf
, 
»cvBufãr
.
	`By‹s
()) {

3639 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", Enüy±ed s’ˆi nÙƒqu®Ødeüy±ed,ƒx³ùed "+¡ršg(
‹¡Ca£
.
buf
)+", gÙ "+¡ršg(
»cvBufãr
.
	`By‹s
()), 
”r
)

3643 
”r
 = 
os
.
	`Remove
(
feName
);ƒ¼ !ğ
n
 {

3644 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "F»movçed", 
”r
)

3650 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

3651 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

3655 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3656 
	}
}

3659 
func
 
	$‹¡SSES3Enüy±iÚPutG‘
() {

3661 
¡¬tTime
 :ğ
time
.
	`Now
()

3662 
‹¡Name
 :ğ
	`g‘FuncName
()

3663 
funùiÚ
 := "PutEncryptedObject(bucketName, objectName,„eader, sse)"

3664 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

3670 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

3673 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

3674 
os
.
	`G‘’v
(
£rv”Endpošt
),

3675 
os
.
	`G‘’v
(
acûssKey
),

3676 
os
.
	`G‘’v
(
£ü‘Key
),

3677 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

3679 
”r
 !ğ
n
 {

3680 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

3688 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

3691 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

3692 
¬gs
["buck‘Name"] = 
buck‘Name


3695 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

3696 
”r
 !ğ
n
 {

3697 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

3701 
‹¡Ca£s
 := []struct {

3702 
buf
 []
by‹


3704 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1)},

3705 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 15)},

3706 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 16)},

3707 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 17)},

3708 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 31)},

3709 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 32)},

3710 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 33)},

3711 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024)},

3712 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024*2)},

3713 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024*1024)},

3716 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

3718 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

3719 
¬gs
["objeùName"] = 
objeùName


3722 
s£
 :ğ
’üy±
.
	`NewSSE
()

3723 
¬gs
["s£"] = 
s£


3726 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
‹¡Ca£
.
buf
), 
	`št64
(
	`Ën
Ñe¡Ca£.buf)), 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
s£
})

3727 
”r
 !ğ
n
 {

3728 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutEnüy±edObjeù faed", 
”r
)

3733 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

3734 
”r
 !ğ
n
 {

3735 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Enüy±edObjeù faed", 
”r
)

3738 
deãr
 
r
.
	`Clo£
()

3741 
»cvBufãr
 :ğ
by‹s
.
	`NewBufãr
([]
by‹
{})

3742 
_
, 
”r
 = 
io
.
	`Cİy
(
»cvBufãr
, 
r
);ƒ¼ !ğ
n
 {

3743 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+",ƒ¼Ü: "+
”r
.
	`E¼Ü
(),ƒrr)

3746 
»cvBufãr
.
	`L’
(è!ğ
	`Ën
(
‹¡Ca£
.
buf
) {

3747 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", Numb” oàby‹ oà»ûived objeù dÛ nÙ m©ch,ƒx³ùed "+¡ršg(
	`Ën
(
‹¡Ca£
.
buf
))+", gÙ "+¡ršg(
»cvBufãr
.
	`L’
()), 
”r
)

3750 !
by‹s
.
	`Equ®
(
‹¡Ca£
.
buf
, 
»cvBufãr
.
	`By‹s
()) {

3751 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", Enüy±ed s’ˆi nÙƒqu®Ødeüy±ed,ƒx³ùed "+¡ršg(
‹¡Ca£
.
buf
)+", gÙ "+¡ršg(
»cvBufãr
.
	`By‹s
()), 
”r
)

3755 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3760 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

3761 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

3765 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3766 
	}
}

3769 
func
 
	$‹¡SSES3Enüy±iÚFPut
() {

3771 
¡¬tTime
 :ğ
time
.
	`Now
()

3772 
‹¡Name
 :ğ
	`g‘FuncName
()

3773 
funùiÚ
 := "FPutEncryptedObject(bucketName, objectName, filePath, contentType, sse)"

3774 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

3782 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

3785 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

3786 
os
.
	`G‘’v
(
£rv”Endpošt
),

3787 
os
.
	`G‘’v
(
acûssKey
),

3788 
os
.
	`G‘’v
(
£ü‘Key
),

3789 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

3791 
”r
 !ğ
n
 {

3792 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

3800 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

3803 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

3804 
¬gs
["buck‘Name"] = 
buck‘Name


3807 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

3808 
”r
 !ğ
n
 {

3809 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

3814 
cu¡omCÚ‹ÁTy³
 := "custom/contenttype"

3815 
¬gs
["m‘ad©a"] = 
cu¡omCÚ‹ÁTy³


3817 
‹¡Ca£s
 := []struct {

3818 
buf
 []
by‹


3820 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 0)},

3821 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1)},

3822 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 15)},

3823 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 16)},

3824 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 17)},

3825 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 31)},

3826 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 32)},

3827 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 33)},

3828 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024)},

3829 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024*2)},

3830 {
buf
: 
by‹s
.
	`R•—t
([]
	`by‹
("F"), 1024*1024)},

3833 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

3835 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

3836 
¬gs
["objeùName"] = 
objeùName


3839 
s£
 :ğ
’üy±
.
	`NewSSE
()

3840 
¬gs
["s£"] = 
s£


3843 
feName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

3844 
fe
, 
”r
 :ğ
os
.
	`C»©e
(
feName
)

3845 
”r
 !ğ
n
 {

3846 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "fü—‹ faed", 
”r
)

3849 
_
, 
”r
 = 
fe
.
	`Wr™e
(
‹¡Ca£
.
buf
)

3850 
”r
 !ğ
n
 {

3851 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "fwr™çed", 
”r
)

3854 
fe
.
	`Clo£
()

3856 
_
, 
”r
 = 
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
, 
feName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
s£
});ƒ¼ !ğ
n
 {

3857 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutEnüy±edObjeù faed", 
”r
)

3862 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

3863 
”r
 !ğ
n
 {

3864 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Enüy±edObjeù faed", 
”r
)

3867 
deãr
 
r
.
	`Clo£
()

3870 
»cvBufãr
 :ğ
by‹s
.
	`NewBufãr
([]
by‹
{})

3871 
_
, 
”r
 = 
io
.
	`Cİy
(
»cvBufãr
, 
r
);ƒ¼ !ğ
n
 {

3872 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+",ƒ¼Ü: "+
”r
.
	`E¼Ü
(),ƒrr)

3875 
»cvBufãr
.
	`L’
(è!ğ
	`Ën
(
‹¡Ca£
.
buf
) {

3876 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", Numb” oàby‹ oà»ûived objeù dÛ nÙ m©ch,ƒx³ùed "+¡ršg(
	`Ën
(
‹¡Ca£
.
buf
))+", gÙ "+¡ršg(
»cvBufãr
.
	`L’
()), 
”r
)

3879 !
by‹s
.
	`Equ®
(
‹¡Ca£
.
buf
, 
»cvBufãr
.
	`By‹s
()) {

3880 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Te¡ "+
	`¡ršg
(
i
+1)+", Enüy±ed s’ˆi nÙƒqu®Ødeüy±ed,ƒx³ùed "+¡ršg(
‹¡Ca£
.
buf
)+", gÙ "+¡ršg(
»cvBufãr
.
	`By‹s
()), 
”r
)

3884 
”r
 = 
os
.
	`Remove
(
feName
);ƒ¼ !ğ
n
 {

3885 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "F»movçed", 
”r
)

3891 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

3892 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

3896 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

3897 
	}
}

3899 
func
 
	$‹¡Buck‘NÙifiÿtiÚ
() {

3901 
¡¬tTime
 :ğ
time
.
	`Now
()

3902 
‹¡Name
 :ğ
	`g‘FuncName
()

3903 
funùiÚ
 := "SetBucketNotification(bucketName)"

3904 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

3908 
os
.
	`G‘’v
("NOTIFY_BUCKET") == "" ||

3909 
os
.
	`G‘’v
("NOTIFY_SERVICE") == "" ||

3910 
os
.
	`G‘’v
("NOTIFY_REGION") == "" ||

3911 
os
.
	`G‘’v
("NOTIFY_ACCOUNTID") == "" ||

3912 
os
.
	`G‘’v
("NOTIFY_RESOURCE") == "" {

3913 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Sk³d‚ÙifiÿtiÚe¡‡ ™ i nÙ cÚfigu»d").
	`Info
()

3918 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

3920 
c
, 
”r
 :ğ
mšio
.
	`New
(

3921 
os
.
	`G‘’v
(
£rv”Endpošt
),

3922 
os
.
	`G‘’v
(
acûssKey
),

3923 
os
.
	`G‘’v
(
£ü‘Key
),

3924 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

3926 
”r
 !ğ
n
 {

3927 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

3935 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

3937 
buck‘Name
 :ğ
os
.
	`G‘’v
("NOTIFY_BUCKET")

3938 
¬gs
["buck‘Name"] = 
buck‘Name


3940 
tİicAº
 :ğ
mšio
.
	`NewAº
("aws", 
os
.
	`G‘’v
("NOTIFY_SERVICE"), os.Getenv("NOTIFY_REGION"), os.Getenv("NOTIFY_ACCOUNTID"), os.Getenv("NOTIFY_RESOURCE"))

3941 
queueAº
 :ğ
mšio
.
	`NewAº
("aws", "dummy-service", "dummy-region", "dummy-accountid", "dummy-resource")

3943 
tİicCÚfig
 :ğ
mšio
.
	`NewNÙifiÿtiÚCÚfig
(
tİicAº
)

3945 
tİicCÚfig
.
	`AddEv’ts
(
mšio
.
ObjeùC»©edAÎ
, mšio.
ObjeùRemovedAÎ
)

3946 
tİicCÚfig
.
	`AddF‹rSuffix
("jpg")

3948 
queueCÚfig
 :ğ
mšio
.
	`NewNÙifiÿtiÚCÚfig
(
queueAº
)

3949 
queueCÚfig
.
	`AddEv’ts
(
mšio
.
ObjeùC»©edAÎ
)

3950 
queueCÚfig
.
	`AddF‹rP»fix
("photos/")

3952 
bNÙifiÿtiÚ
 :ğ
mšio
.
Buck‘NÙifiÿtiÚ
{}

3953 
bNÙifiÿtiÚ
.
	`AddTİic
(
tİicCÚfig
)

3957 
bNÙifiÿtiÚ
.
	`AddTİic
(
tİicCÚfig
)

3958 
	`Ën
(
bNÙifiÿtiÚ
.
TİicCÚfigs
) != 1 {

3959 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Du¶iÿ‹ƒÁry‡dded", 
”r
)

3964 
bNÙifiÿtiÚ
.
	`AddQueue
(
queueCÚfig
)

3965 
bNÙifiÿtiÚ
.
	`RemoveQueueByAº
(
queueAº
)

3967 
”r
 = 
c
.
	`S‘Buck‘NÙifiÿtiÚ
(
buck‘Name
, 
bNÙifiÿtiÚ
)

3968 
”r
 !ğ
n
 {

3969 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Buck‘NÙifiÿtiÚ faed", 
”r
)

3973 
bNÙifiÿtiÚ
, 
”r
 = 
c
.
	`G‘Buck‘NÙifiÿtiÚ
(
buck‘Name
)

3974 
”r
 !ğ
n
 {

3975 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Buck‘NÙifiÿtiÚ faed", 
”r
)

3979 
	`Ën
(
bNÙifiÿtiÚ
.
TİicCÚfigs
) != 1 {

3980 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "TİiøcÚfig i em±y", 
”r
)

3984 
bNÙifiÿtiÚ
.
TİicCÚfigs
[0].
F‹r
.
S3Key
.
F‹rRuËs
[0].
V®ue
 != "jpg" {

3985 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Couldn'ˆg‘hsuffix", 
”r
)

3989 
”r
 = 
c
.
	`RemoveAÎBuck‘NÙifiÿtiÚ
(
buck‘Name
)

3990 
”r
 !ğ
n
 {

3991 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveAÎBuck‘NÙifiÿtiÚ faed", 
”r
)

3996 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

3997 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

4001 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

4002 
	}
}

4005 
func
 
	$‹¡FunùiÚ®
() {

4007 
¡¬tTime
 :ğ
time
.
	`Now
()

4008 
‹¡Name
 :ğ
	`g‘FuncName
()

4009 
funùiÚ
 := "testFunctional()"

4010 
funùiÚAÎ
 := ""

4011 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

4014 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

4016 
c
, 
”r
 :ğ
mšio
.
	`New
(

4017 
os
.
	`G‘’v
(
£rv”Endpošt
),

4018 
os
.
	`G‘’v
(
acûssKey
),

4019 
os
.
	`G‘’v
(
£ü‘Key
),

4020 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

4022 
”r
 !ğ
n
 {

4023 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
n
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

4031 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

4034 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

4037 
funùiÚ
 = "MakeBucket(bucketName,„egion)"

4038 
funùiÚAÎ
 = "MakeBucket(bucketName,„egion)"

4039 
¬gs
["buck‘Name"] = 
buck‘Name


4040 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

4042 
”r
 !ğ
n
 {

4043 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

4048 
feName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

4049 
fe
, 
”r
 :ğ
os
.
	`C»©e
(
feName
)

4050 
”r
 !ğ
n
 {

4051 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fü—tiÚ faed", 
”r
)

4054 
i
 := 0; i < 3; i++ {

4055 
buf
 :ğ
	`make
([]
by‹
, 
¿nd
.
	`IÁn
(1<<19))

4056 
_
, 
”r
 = 
fe
.
	`Wr™e
(
buf
)

4057 
”r
 !ğ
n
 {

4058 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fwr™çed", 
”r
)

4062 
fe
.
	`Clo£
()

4065 
v¬
 
exi¡s
 
boŞ


4066 
funùiÚ
 = "BucketExists(bucketName)"

4067 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4068 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4069 "buck‘Name": 
buck‘Name
,

4071 
exi¡s
, 
”r
 = 
c
.
	`Buck‘Exi¡s
(
buck‘Name
)

4073 
”r
 !ğ
n
 {

4074 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Buck‘Exi¡ çed", 
”r
)

4077 !
exi¡s
 {

4078 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Could‚Ù fšdhbuck‘", 
”r
)

4083 
funùiÚ
 = "GetBucketPolicy(bucketName)"

4084 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4085 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4086 "buck‘Name": 
buck‘Name
,

4088 
nPŞicy
, 
”r
 :ğ
c
.
	`G‘Buck‘PŞicy
(
buck‘Name
)

4089 
”r
 !ğ
n
 {

4090 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Buck‘PŞicy faed", 
”r
)

4093 
nPŞicy
 != "" {

4094 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "pŞicy should b£ˆtØn", 
”r
)

4099 
funùiÚ
 = "SetBucketPolicy(bucketName,„eadOnlyPolicy)"

4100 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4102 
»adOÆyPŞicy
 := `{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Principal":{"AWS":["*"]},"Action":["s3:ListBucket"],"Resource":["arn:aws:s3:::` + bucketName + `"]}]}`

4103 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4104 "buck‘Name": 
buck‘Name
,

4105 "buck‘PŞicy": 
»adOÆyPŞicy
,

4108 
”r
 = 
c
.
	`S‘Buck‘PŞicy
(
buck‘Name
, 
»adOÆyPŞicy
)

4109 
”r
 !ğ
n
 {

4110 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Buck‘PŞicy faed", 
”r
)

4114 
funùiÚ
 = "GetBucketPolicy(bucketName)"

4115 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4116 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4117 "buck‘Name": 
buck‘Name
,

4119 
_
, 
”r
 = 
c
.
	`G‘Buck‘PŞicy
(
buck‘Name
)

4120 
”r
 !ğ
n
 {

4121 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Buck‘PŞicy faed", 
”r
)

4126 
funùiÚ
 = "SetBucketPolicy(bucketName, writeOnlyPolicy)"

4127 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4129 
wr™eOÆyPŞicy
 := `{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Principal":{"AWS":["*"]},"Action":["s3:ListBucketMultipartUploads"],"Resource":["arn:aws:s3:::` + bucketName + `"]}]}`

4130 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4131 "buck‘Name": 
buck‘Name
,

4132 "buck‘PŞicy": 
wr™eOÆyPŞicy
,

4134 
”r
 = 
c
.
	`S‘Buck‘PŞicy
(
buck‘Name
, 
wr™eOÆyPŞicy
)

4136 
”r
 !ğ
n
 {

4137 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Buck‘PŞicy faed", 
”r
)

4141 
funùiÚ
 = "GetBucketPolicy(bucketName)"

4142 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4143 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4144 "buck‘Name": 
buck‘Name
,

4147 
_
, 
”r
 = 
c
.
	`G‘Buck‘PŞicy
(
buck‘Name
)

4148 
”r
 !ğ
n
 {

4149 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Buck‘PŞicy faed", 
”r
)

4154 
funùiÚ
 = "SetBucketPolicy(bucketName,„eadWritePolicy)"

4155 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4157 
»adWr™ePŞicy
 := `{"Version":"2012-10-17","Statement":[{"Effect":"Allow","Principal":{"AWS":["*"]},"Action":["s3:ListBucket","s3:ListBucketMultipartUploads"],"Resource":["arn:aws:s3:::` + bucketName + `"]}]}`

4159 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4160 "buck‘Name": 
buck‘Name
,

4161 "buck‘PŞicy": 
»adWr™ePŞicy
,

4163 
”r
 = 
c
.
	`S‘Buck‘PŞicy
(
buck‘Name
, 
»adWr™ePŞicy
)

4165 
”r
 !ğ
n
 {

4166 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Buck‘PŞicy faed", 
”r
)

4170 
funùiÚ
 = "GetBucketPolicy(bucketName)"

4171 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4172 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4173 "buck‘Name": 
buck‘Name
,

4175 
_
, 
”r
 = 
c
.
	`G‘Buck‘PŞicy
(
buck‘Name
)

4176 
”r
 !ğ
n
 {

4177 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Buck‘PŞicy faed", 
”r
)

4182 
funùiÚ
 = "ListBuckets()"

4183 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4184 
¬gs
 = 
n


4185 
buck‘s
, 
”r
 :ğ
c
.
	`Li¡Buck‘s
()

4187 
	`Ën
(
buck‘s
) == 0 {

4188 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Found buck‘†i¡Øbem±y", 
”r
)

4191 
”r
 !ğ
n
 {

4192 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Li¡Buck‘ çed", 
”r
)

4197 
buck‘Found
 :ğ
çl£


4198 
_
, 
buck‘
 :ğ
¿nge
 
buck‘s
 {

4199 
buck‘
.
Name
 =ğ
buck‘Name
 {

4200 
buck‘Found
 = 
Œue


4205 !
buck‘Found
 {

4206 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Buck‘: "+
buck‘Name
+"‚Ù found", 
”r
)

4210 
objeùName
 :ğ
buck‘Name
 + "unique"

4213 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("f"), 1<<19)

4215 
funùiÚ
 = "PutObject(bucketName, objectName,„eader, contentType)"

4216 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4217 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4218 "buck‘Name": 
buck‘Name
,

4219 "objeùName": 
objeùName
,

4223 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{})

4224 
”r
 !ğ
n
 {

4225 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

4229 
n
 !ğ
	`št64
(
	`Ën
(
buf
)) {

4230 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "L’gth dÛ¢'ˆm©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
	`Ën
(
buf
)))+" gÙ "+¡ršg(
n
), 
”r
)

4234 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4235 "buck‘Name": 
buck‘Name
,

4236 "objeùName": 
objeùName
 + "-nolength",

4240 
n
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
+"-nŞ’gth", 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

4241 
”r
 !ğ
n
 {

4242 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

4246 
n
 !ğ
	`št64
(
	`Ën
(
buf
)) {

4247 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "L’gth dÛ¢'ˆm©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
	`Ën
(
buf
)))+" gÙ "+¡ršg(
n
), 
”r
)

4252 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

4253 
deãr
 
	`şo£
(
dÚeCh
)

4255 
objFound
 :ğ
çl£


4256 
isRecursive
 :ğ
Œue


4258 
funùiÚ
 = "ListObjects(bucketName, objectName, isRecursive, doneCh)"

4259 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4260 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4261 "buck‘Name": 
buck‘Name
,

4262 "objeùName": 
objeùName
,

4263 "isRecursive": 
isRecursive
,

4266 
obj
 :ğ
¿nge
 
c
.
	`Li¡Objeùs
(
buck‘Name
, 
objeùName
, 
isRecursive
, 
dÚeCh
) {

4267 
obj
.
Key
 =ğ
objeùName
 {

4268 
objFound
 = 
Œue


4272 !
objFound
 {

4273 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù "+
objeùName
+"‚Ù found", 
”r
)

4277 
objFound
 = 
çl£


4278 
isRecursive
 = 
Œue


4279 
funùiÚ
 = "ListObjectsV2(bucketName, objectName, isRecursive, doneCh)"

4280 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4281 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4282 "buck‘Name": 
buck‘Name
,

4283 "objeùName": 
objeùName
,

4284 "isRecursive": 
isRecursive
,

4287 
obj
 :ğ
¿nge
 
c
.
	`Li¡ObjeùsV2
(
buck‘Name
, 
objeùName
, 
isRecursive
, 
dÚeCh
) {

4288 
obj
.
Key
 =ğ
objeùName
 {

4289 
objFound
 = 
Œue


4293 !
objFound
 {

4294 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù "+
objeùName
+"‚Ù found", 
”r
)

4298 
šcompObjNÙFound
 :ğ
Œue


4300 
funùiÚ
 = "ListIncompleteUploads(bucketName, objectName, isRecursive, doneCh)"

4301 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4302 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4303 "buck‘Name": 
buck‘Name
,

4304 "objeùName": 
objeùName
,

4305 "isRecursive": 
isRecursive
,

4308 
objIncom¶
 :ğ
¿nge
 
c
.
	`Li¡Incom¶‘eU¶ßds
(
buck‘Name
, 
objeùName
, 
isRecursive
, 
dÚeCh
) {

4309 
objIncom¶
.
Key
 != "" {

4310 
šcompObjNÙFound
 = 
çl£


4314 !
šcompObjNÙFound
 {

4315 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "UÃx³ùed dªglšg incom¶‘u¶ßd found", 
”r
)

4319 
funùiÚ
 = "GetObject(bucketName, objectName)"

4320 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4321 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4322 "buck‘Name": 
buck‘Name
,

4323 "objeùName": 
objeùName
,

4325 
ÃwR—d”
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

4327 
”r
 !ğ
n
 {

4328 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

4332 
ÃwR—dBy‹s
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
ÃwR—d”
)

4333 
”r
 !ğ
n
 {

4334 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

4338 !
by‹s
.
	`Equ®
(
ÃwR—dBy‹s
, 
buf
) {

4339 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù by‹ mism©ch", 
”r
)

4342 
ÃwR—d”
.
	`Clo£
()

4344 
funùiÚ
 = "FGetObject(bucketName, objectName, fileName)"

4345 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4346 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4347 "buck‘Name": 
buck‘Name
,

4348 "objeùName": 
objeùName
,

4349 "feName": 
feName
 + "-f",

4351 
”r
 = 
c
.
	`FG‘Objeù
(
buck‘Name
, 
objeùName
, 
feName
+"-f", 
mšio
.
G‘ObjeùO±iÚs
{})

4353 
”r
 !ğ
n
 {

4354 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FG‘Objeù faed", 
”r
)

4358 
funùiÚ
 = "PresignedHeadObject(bucketName, objectName,ƒxpires,„eqParams)"

4359 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4360 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4361 "buck‘Name": 
buck‘Name
,

4363 "expœes": 3600 * 
time
.
SecÚd
,

4365 
_
, 
”r
 = 
c
.
	`P»sigÃdH—dObjeù
(
buck‘Name
, "", 3600*
time
.
SecÚd
, 
n
);ƒrr ==‚il {

4366 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdH—dObjeù sucûss", 
”r
)

4371 
funùiÚ
 = "PresignedHeadObject(bucketName, objectName,ƒxpires,„eqParams)"

4372 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4373 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4374 "buck‘Name": 
buck‘Name
,

4375 "objeùName": 
objeùName
,

4376 "expœes": 3600 * 
time
.
SecÚd
,

4378 
´esigÃdH—dURL
, 
”r
 :ğ
c
.
	`P»sigÃdH—dObjeù
(
buck‘Name
, 
objeùName
, 3600*
time
.
SecÚd
, 
n
)

4380 
”r
 !ğ
n
 {

4381 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdH—dObjeù faed", 
”r
)

4385 
»¥
, 
”r
 :ğ
h‰p
.
	`H—d
(
´esigÃdH—dURL
.
	`SŒšg
())

4386 
”r
 !ğ
n
 {

4387 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdH—dObjeù„e¥Ú£ incÜ»ù", 
”r
)

4390 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

4391 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdH—dObjeù„e¥Ú£ incÜ»ù, stu "+
	`¡ršg
(
»¥
.
StusCode
), 
”r
)

4394 
»¥
.
H—d”
.
	`G‘
("ETag") == "" {

4395 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdH—dObjeù„e¥Ú£ incÜ»ù", 
”r
)

4398 
»¥
.
Body
.
	`Clo£
()

4400 
funùiÚ
 = "PresignedGetObject(bucketName, objectName,ƒxpires,„eqParams)"

4401 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4402 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4403 "buck‘Name": 
buck‘Name
,

4405 "expœes": 3600 * 
time
.
SecÚd
,

4407 
_
, 
”r
 = 
c
.
	`P»sigÃdG‘Objeù
(
buck‘Name
, "", 3600*
time
.
SecÚd
, 
n
)

4408 
”r
 =ğ
n
 {

4409 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù sucûss", 
”r
)

4414 
funùiÚ
 = "PresignedGetObject(bucketName, objectName,ƒxpires,„eqParams)"

4415 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4416 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4417 "buck‘Name": 
buck‘Name
,

4418 "objeùName": 
objeùName
,

4419 "expœes": 3600 * 
time
.
SecÚd
,

4421 
´esigÃdG‘URL
, 
”r
 :ğ
c
.
	`P»sigÃdG‘Objeù
(
buck‘Name
, 
objeùName
, 3600*
time
.
SecÚd
, 
n
)

4423 
”r
 !ğ
n
 {

4424 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù faed", 
”r
)

4429 
»¥
, 
”r
 = 
h‰p
.
	`G‘
(
´esigÃdG‘URL
.
	`SŒšg
())

4430 
”r
 !ğ
n
 {

4431 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù„e¥Ú£ incÜ»ù", 
”r
)

4434 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

4435 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù„e¥Ú£ incÜ»ù, stu "+
	`¡ršg
(
»¥
.
StusCode
), 
”r
)

4438 
ÃwP»sigÃdBy‹s
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»¥
.
Body
)

4439 
”r
 !ğ
n
 {

4440 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù„e¥Ú£ incÜ»ù", 
”r
)

4443 
»¥
.
Body
.
	`Clo£
()

4444 !
by‹s
.
	`Equ®
(
ÃwP»sigÃdBy‹s
, 
buf
) {

4445 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù„e¥Ú£ incÜ»ù", 
”r
)

4450 
»qP¬ams
 :ğ
	`make
(
u¾
.
V®ues
)

4451 
»qP¬ams
.
	`S‘
("response-content-disposition", "attachment; filename=\"test.txt\"")

4452 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4453 "buck‘Name": 
buck‘Name
,

4454 "objeùName": 
objeùName
,

4455 "expœes": 3600 * 
time
.
SecÚd
,

4456 "»qP¬ams": 
»qP¬ams
,

4458 
´esigÃdG‘URL
, 
”r
 = 
c
.
	`P»sigÃdG‘Objeù
(
buck‘Name
, 
objeùName
, 3600*
time
.
SecÚd
, 
»qP¬ams
)

4460 
”r
 !ğ
n
 {

4461 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù faed", 
”r
)

4465 
»¥
, 
”r
 = 
h‰p
.
	`G‘
(
´esigÃdG‘URL
.
	`SŒšg
())

4466 
”r
 !ğ
n
 {

4467 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù„e¥Ú£ incÜ»ù", 
”r
)

4470 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

4471 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù„e¥Ú£ incÜ»ù, stu "+
	`¡ršg
(
»¥
.
StusCode
), 
”r
)

4474 
ÃwP»sigÃdBy‹s
, 
”r
 = 
iout
.
	`R—dAÎ
(
»¥
.
Body
)

4475 
”r
 !ğ
n
 {

4476 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù„e¥Ú£ incÜ»ù", 
”r
)

4479 !
by‹s
.
	`Equ®
(
ÃwP»sigÃdBy‹s
, 
buf
) {

4480 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "By‹ mism©ch fÜ…»sigÃd GET URL", 
”r
)

4483 
»¥
.
H—d”
.
	`G‘
("Content-Disposition") != "attachment; filename=\"test.txt\"" {

4484 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "wrÚg CÚ‹Á-Di¥os™iÚ„eûived "+
	`¡ršg
(
»¥
.
H—d”
.
	`G‘
("CÚ‹Á-Di¥os™iÚ")), 
”r
)

4488 
funùiÚ
 = "PresignedPutObject(bucketName, objectName,ƒxpires)"

4489 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4490 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4491 "buck‘Name": 
buck‘Name
,

4493 "expœes": 3600 * 
time
.
SecÚd
,

4495 
_
, 
”r
 = 
c
.
	`P»sigÃdPutObjeù
(
buck‘Name
, "", 3600*
time
.
SecÚd
)

4496 
”r
 =ğ
n
 {

4497 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdPutObjeù sucûss", 
”r
)

4501 
funùiÚ
 = "PresignedPutObject(bucketName, objectName,ƒxpires)"

4502 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4503 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4504 "buck‘Name": 
buck‘Name
,

4505 "objeùName": 
objeùName
 + "-presigned",

4506 "expœes": 3600 * 
time
.
SecÚd
,

4508 
´esigÃdPutURL
, 
”r
 :ğ
c
.
	`P»sigÃdPutObjeù
(
buck‘Name
, 
objeùName
+"-´esigÃd", 3600*
time
.
SecÚd
)

4510 
”r
 !ğ
n
 {

4511 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdPutObjeù faed", 
”r
)

4515 
buf
 = 
by‹s
.
	`R•—t
([]
	`by‹
("g"), 1<<19)

4517 
»q
, 
”r
 :ğ
h‰p
.
	`NewReque¡
("PUT", 
´esigÃdPutURL
.
	`SŒšg
(), 
by‹s
.
	`NewR—d”
(
buf
))

4518 
”r
 !ğ
n
 {

4519 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Couldn'ˆmakHTTP„eque¡ w™h P»sigÃdPutObjeù URL", 
”r
)

4522 
h‰pCl›Á
 :ğ&
h‰p
.
Cl›Á
{

4526 
Timeout
: 30 * 
time
.
SecÚd
,

4527 
T¿n¥Üt
: 
h‰p
.
DeçuÉT¿n¥Üt
,

4529 
»¥
, 
”r
 = 
h‰pCl›Á
.
	`Do
(
»q
)

4530 
”r
 !ğ
n
 {

4531 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdPutObjeù faed", 
”r
)

4535 
ÃwR—d”
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
+"-´esigÃd", 
mšio
.
G‘ObjeùO±iÚs
{})

4536 
”r
 !ğ
n
 {

4537 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù‡á” P»sigÃdPutObjeù faed", 
”r
)

4541 
ÃwR—dBy‹s
, 
”r
 = 
iout
.
	`R—dAÎ
(
ÃwR—d”
)

4542 
”r
 !ğ
n
 {

4543 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ‡á” G‘Objeù faed", 
”r
)

4547 !
by‹s
.
	`Equ®
(
ÃwR—dBy‹s
, 
buf
) {

4548 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "By‹ mism©ch", 
”r
)

4552 
funùiÚ
 = "RemoveObject(bucketName, objectName)"

4553 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4554 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4555 "buck‘Name": 
buck‘Name
,

4556 "objeùName": 
objeùName
,

4558 
”r
 = 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
)

4560 
”r
 !ğ
n
 {

4561 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveObjeù faed", 
”r
)

4564 
¬gs
["objeùName"] = 
objeùName
 + "-f"

4565 
”r
 = 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
+"-f")

4567 
”r
 !ğ
n
 {

4568 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveObjeù faed", 
”r
)

4572 
¬gs
["objeùName"] = 
objeùName
 + "-nolength"

4573 
”r
 = 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
+"-nolength")

4575 
”r
 !ğ
n
 {

4576 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveObjeù faed", 
”r
)

4580 
¬gs
["objeùName"] = 
objeùName
 + "-presigned"

4581 
”r
 = 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
+"-presigned")

4583 
”r
 !ğ
n
 {

4584 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveObjeù faed", 
”r
)

4588 
funùiÚ
 = "RemoveBucket(bucketName)"

4589 
funùiÚAÎ
 +ğ", " + 
funùiÚ


4590 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

4591 "buck‘Name": 
buck‘Name
,

4593 
”r
 = 
c
.
	`RemoveBuck‘
(
buck‘Name
)

4595 
”r
 !ğ
n
 {

4596 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveBuck‘ faed", 
”r
)

4599 
”r
 = 
c
.
	`RemoveBuck‘
(
buck‘Name
)

4600 
”r
 =ğ
n
 {

4601 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveBuck‘ did‚Ù fa fÜ inv®id buck‘‚ame", 
”r
)

4604 
”r
.
	`E¼Ü
() != "The specified bucket does‚otƒxist" {

4605 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "RemoveBuck‘ faed", 
”r
)

4609 
”r
 = 
os
.
	`Remove
(
feName
);ƒ¼ !ğ
n
 {

4610 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FRemovçed", 
”r
)

4613 
”r
 = 
os
.
	`Remove
(
feName
 + "-f");ƒ¼ !ğ
n
 {

4614 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FRemovçed", 
”r
)

4617 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚAÎ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

4618 
	}
}

4622 
func
 
	$‹¡G‘ObjeùModif›d
() {

4624 
¡¬tTime
 :ğ
time
.
	`Now
()

4625 
‹¡Name
 :ğ
	`g‘FuncName
()

4626 
funùiÚ
 := "GetObject(bucketName, objectName)"

4627 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

4630 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

4631 
os
.
	`G‘’v
(
£rv”Endpošt
),

4632 
os
.
	`G‘’v
(
acûssKey
),

4633 
os
.
	`G‘’v
(
£ü‘Key
),

4634 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

4637 
”r
 !ğ
n
 {

4638 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

4646 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

4649 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

4650 
¬gs
["buck‘Name"] = 
buck‘Name


4652 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

4653 
”r
 !ğ
n
 {

4654 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

4657 
deãr
 
c
.
	`RemoveBuck‘
(
buck‘Name
)

4660 
objeùName
 := "myobject"

4661 
¬gs
["objeùName"] = 
objeùName


4662 
cÚ‹Á
 := "helloworld"

4663 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
¡ršgs
.
	`NewR—d”
(
cÚ‹Á
), 
	`št64
(
	`Ën
(cÚ‹Á)), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/text"})

4664 
”r
 !ğ
n
 {

4665 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FaedØu¶ßd "+
objeùName
+",Øbuck‘ "+
buck‘Name
, 
”r
)

4669 
deãr
 
c
.
	`RemoveObjeù
(
buck‘Name
, 
objeùName
)

4671 
»ad”
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

4672 
”r
 !ğ
n
 {

4673 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FaedØG‘Objeù "+
objeùName
+", from buck‘ "+
buck‘Name
, 
”r
)

4676 
deãr
 
»ad”
.
	`Clo£
()

4679 
b
 :ğ
	`make
([]
by‹
, 5)

4680 
n
, 
”r
 :ğ
»ad”
.
	`R—dAt
(
b
, 0)

4681 
”r
 !ğ
n
 {

4682 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FaedØ»ad objeù "+
objeùName
+", from buck‘ "+
buck‘Name
+"‡ˆª off£t", 
”r
)

4687 
ÃwCÚ‹Á
 := "goodbyeworld"

4688 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
¡ršgs
.
	`NewR—d”
(
ÃwCÚ‹Á
), 
	`št64
(
	`Ën
ÒewCÚ‹Á)), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/text"})

4689 
”r
 !ğ
n
 {

4690 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FaedØu¶ßd "+
objeùName
+",Øbuck‘ "+
buck‘Name
, 
”r
)

4695 
_
, 
”r
 = 
»ad”
.
	`St
()

4696 
ex³ùedE¼Ü
 := "At†east one ofhe…re-conditions you specified did‚ot hold"

4697 
”r
.
	`E¼Ü
(è!ğ
ex³ùedE¼Ü
 {

4698 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed SˆtØç w™hƒ¼Ü "+
ex³ùedE¼Ü
+", buˆ»ûived "+
”r
.
	`E¼Ü
(),ƒrr)

4703 
_
, 
”r
 = 
»ad”
.
	`R—dAt
(
b
, 
	`št64
(
n
))

4704 
”r
.
	`E¼Ü
(è!ğ
ex³ùedE¼Ü
 {

4705 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed R—dAˆtØç w™hƒ¼Ü "+
ex³ùedE¼Ü
+", buˆ»ûived "+
”r
.
	`E¼Ü
(),ƒrr)

4709 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

4710 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

4714 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

4715 
	}
}

4718 
func
 
	$‹¡PutObjeùU¶ßdS“kedObjeù
() {

4720 
¡¬tTime
 :ğ
time
.
	`Now
()

4721 
‹¡Name
 :ğ
	`g‘FuncName
()

4722 
funùiÚ
 := "PutObject(bucketName, objectName, fileToUpload, contentType)"

4723 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

4731 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

4732 
os
.
	`G‘’v
(
£rv”Endpošt
),

4733 
os
.
	`G‘’v
(
acûssKey
),

4734 
os
.
	`G‘’v
(
£ü‘Key
),

4735 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

4737 
”r
 !ğ
n
 {

4738 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

4746 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

4749 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

4750 
¬gs
["buck‘Name"] = 
buck‘Name


4752 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

4753 
”r
 !ğ
n
 {

4754 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

4757 
deãr
 
c
.
	`RemoveBuck‘
(
buck‘Name
)

4759 
v¬
 
‹mpfe
 *
os
.
Fe


4761 
feName
 :ğ
	`g‘MštD©aDœFeP©h
("datafile-100-kB"); fileName != "" {

4762 
‹mpfe
, 
”r
 = 
os
.
	`O³n
(
feName
)

4763 
”r
 !ğ
n
 {

4764 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fİ’ faed", 
”r
)

4767 
¬gs
["feToU¶ßd"] = 
feName


4769 
‹mpfe
, 
”r
 = 
iout
.
	`TempFe
("", "minio-go-upload-test-")

4770 
”r
 !ğ
n
 {

4771 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "TempFü—‹ faed", 
”r
)

4774 
¬gs
["feToU¶ßd"] = 
‹mpfe
.
	`Name
()

4777 
_
, 
”r
 = 
io
.
	`Cİy
(
‹mpfe
, 
	`g‘D©aR—d”
("d©afe-100-kB"));ƒ¼ !ğ
n
 {

4778 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fcİy faed", 
”r
)

4782 
deãr
 
os
.
	`Remove
(
‹mpfe
.
	`Name
())

4785 
‹mpfe
.
	`S“k
(0, 0)

4787 
v¬
 
Ëngth
 = 100 * 
humªize
.
KiBy‹


4788 
objeùName
 :ğ
fmt
.
	`S´štf
("‹¡-fe-%v", 
¿nd
.
	`Ušt32
())

4789 
¬gs
["objeùName"] = 
objeùName


4791 
off£t
 :ğ
Ëngth
 / 2

4792 
_
, 
”r
 = 
‹mpfe
.
	`S“k
(
	`št64
(
off£t
), 0);ƒ¼ !ğ
n
 {

4793 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "TempF£ek faed", 
”r
)

4797 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
‹mpfe
, 
	`št64
(
Ëngth
-
off£t
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

4798 
”r
 !ğ
n
 {

4799 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

4802 
n
 !ğ
	`št64
(
Ëngth
-
off£t
) {

4803 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("Inv®id†’gth„‘uºed,ƒx³ùed %d gÙ %d", 
	`št64
(
Ëngth
-
off£t
), 
n
), 
”r
)

4806 
‹mpfe
.
	`Clo£
()

4808 
obj
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

4809 
”r
 !ğ
n
 {

4810 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

4813 
deãr
 
obj
.
	`Clo£
()

4815 
n
, 
”r
 = 
obj
.
	`S“k
(
	`št64
(
off£t
), 0)

4816 
”r
 !ğ
n
 {

4817 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S“k faed", 
”r
)

4820 
n
 !ğ
	`št64
(
off£t
) {

4821 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("Inv®id off£ˆ»tuºed,ƒx³ùed %d gÙ %d", 
	`št64
(
off£t
), 
n
), 
”r
)

4825 
n
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
+"g‘objeù", 
obj
, 
	`št64
(
Ëngth
-
off£t
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

4826 
”r
 !ğ
n
 {

4827 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

4830 
n
 !ğ
	`št64
(
Ëngth
-
off£t
) {

4831 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("Inv®id off£ˆ»tuºed,ƒx³ùed %d gÙ %d", 
	`št64
(
Ëngth
-
off£t
), 
n
), 
”r
)

4836 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

4837 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

4841 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

4842 
	}
}

4845 
func
 
	$‹¡MakeBuck‘E¼ÜV2
() {

4847 
¡¬tTime
 :ğ
time
.
	`Now
()

4848 
‹¡Name
 :ğ
	`g‘FuncName
()

4849 
funùiÚ
 := "MakeBucket(bucketName,„egion)"

4850 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

4855 
os
.
	`G‘’v
(
£rv”Endpošt
) != "s3.amazonaws.com" {

4856 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Sk³d„egiÚ funùiÚ®e¡ fÜ‚Ú s3„uns").
	`Info
()

4861 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

4864 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

4865 
os
.
	`G‘’v
(
£rv”Endpošt
),

4866 
os
.
	`G‘’v
(
acûssKey
),

4867 
os
.
	`G‘’v
(
£ü‘Key
),

4868 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

4870 
”r
 !ğ
n
 {

4871 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

4879 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

4882 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

4883 
»giÚ
 := "eu-west-1"

4884 
¬gs
["buck‘Name"] = 
buck‘Name


4885 
¬gs
["»giÚ"] = 
»giÚ


4888 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, 
»giÚ
);ƒ¼ !ğ
n
 {

4889 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

4892 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, 
»giÚ
);ƒ¼ =ğ
n
 {

4893 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ did‚Ù fa fÜƒxi¡šg buck‘‚ame", 
”r
)

4897 
mšio
.
	`ToE¼ÜRe¥Ú£
(
”r
).
Code
 != "BucketAlreadyExists" &&

4898 
mšio
.
	`ToE¼ÜRe¥Ú£
(
”r
).
Code
 != "BucketAlreadyOwnedByYou" {

4899 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Inv®idƒ¼Ü„‘uºed by s”v”", 
”r
)

4902 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

4903 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

4907 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

4908 
	}
}

4911 
func
 
	$‹¡G‘ObjeùClo£dTwiûV2
() {

4913 
¡¬tTime
 :ğ
time
.
	`Now
()

4914 
‹¡Name
 :ğ
	`g‘FuncName
()

4915 
funùiÚ
 := "MakeBucket(bucketName,„egion)"

4916 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

4922 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

4925 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

4926 
os
.
	`G‘’v
(
£rv”Endpošt
),

4927 
os
.
	`G‘’v
(
acûssKey
),

4928 
os
.
	`G‘’v
(
£ü‘Key
),

4929 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

4931 
”r
 !ğ
n
 {

4932 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

4940 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

4943 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

4944 
¬gs
["buck‘Name"] = 
buck‘Name


4947 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

4948 
”r
 !ğ
n
 {

4949 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

4954 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

4955 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

4956 
deãr
 
»ad”
.
	`Clo£
()

4959 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

4960 
¬gs
["objeùName"] = 
objeùName


4962 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

4963 
”r
 !ğ
n
 {

4964 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

4968 
n
 !ğ
	`št64
(
bufSize
) {

4969 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
n
), 
”r
)

4974 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

4975 
”r
 !ğ
n
 {

4976 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

4980 
¡
, 
”r
 :ğ
r
.
	`St
()

4981 
”r
 !ğ
n
 {

4982 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

4986 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

4987 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
¡
.
Size
), 
”r
)

4990 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

4991 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

4994 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ =ğ
n
 {

4995 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Objeù i ®»ady clo£d, should„‘uºƒ¼Ü", 
”r
)

5000 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

5001 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5005 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

5006 
	}
}

5009 
func
 
	$‹¡FPutObjeùV2
() {

5011 
¡¬tTime
 :ğ
time
.
	`Now
()

5012 
‹¡Name
 :ğ
	`g‘FuncName
()

5013 
funùiÚ
 := "FPutObject(bucketName, objectName, fileName, opts)"

5014 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

5022 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

5025 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

5026 
os
.
	`G‘’v
(
£rv”Endpošt
),

5027 
os
.
	`G‘’v
(
acûssKey
),

5028 
os
.
	`G‘’v
(
£ü‘Key
),

5029 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

5031 
”r
 !ğ
n
 {

5032 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

5040 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

5043 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

5044 
¬gs
["buck‘Name"] = 
buck‘Name


5047 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

5048 
”r
 !ğ
n
 {

5049 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5054 
fe
, 
”r
 :ğ
iout
.
	`TempFe
(
os
.
	`TempDœ
(), "FPutObjectTest")

5055 
”r
 !ğ
n
 {

5056 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "TempFü—tiÚ faed", 
”r
)

5060 
r
 :ğ
by‹s
.
	`NewR—d”
(by‹s.
	`R•—t
([]
	`by‹
("b"), 11*1024*1024))

5061 
n
, 
”r
 :ğ
io
.
	`CİyN
(
fe
, 
r
, 11*1024*1024)

5062 
”r
 !ğ
n
 {

5063 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Cİy faed", 
”r
)

5066 
n
 !ğ
	`št64
(11*1024*1024) {

5067 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(11*1024*1024))+" gÙ "+¡ršg(
n
), 
”r
)

5072 
”r
 = 
fe
.
	`Clo£
()

5073 
”r
 !ğ
n
 {

5074 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fşo£ faed", 
”r
)

5079 
objeùName
 :ğ
buck‘Name
 + "FPutObject"

5080 
¬gs
["objeùName"] = 
objeùName


5081 
¬gs
["feName"] = 
fe
.
	`Name
()

5084 
n
, 
”r
 = 
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
+"-¡ªd¬d", 
fe
.
	`Name
(), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "application/octet-stream"})

5085 
”r
 !ğ
n
 {

5086 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeù faed", 
”r
)

5089 
n
 !ğ
	`št64
(11*1024*1024) {

5090 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(11*1024*1024))+" gÙ "+¡ršg(
n
), 
”r
)

5095 
¬gs
["objeùName"] = 
objeùName
 + "-Octet"

5096 
¬gs
["contentType"] = ""

5098 
n
, 
”r
 = 
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
+"-Où‘", 
fe
.
	`Name
(), 
mšio
.
PutObjeùO±iÚs
{})

5099 
”r
 !ğ
n
 {

5100 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeù faed", 
”r
)

5103 
n
 !ğ
	`št64
(11*1024*1024) {

5104 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(11*1024*1024))+" gÙ "+¡ršg(
n
), 
”r
)

5109 
feName
 :ğ
fe
.
	`Name
()

5110 
”r
 = 
os
.
	`R’ame
(
fe
.
	`Name
(), 
feName
+".gtar")

5111 
”r
 !ğ
n
 {

5112 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R’amçed", 
”r
)

5117 
¬gs
["objeùName"] = 
objeùName
 + "-Octet"

5118 
¬gs
["contentType"] = ""

5119 
¬gs
["feName"] = 
feName
 + ".gtar"

5121 
n
, 
”r
 = 
c
.
	`FPutObjeù
(
buck‘Name
, 
objeùName
+"-GT¬", 
feName
+".gr", 
mšio
.
PutObjeùO±iÚs
{})

5122 
”r
 !ğ
n
 {

5123 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FPutObjeù faed", 
”r
)

5126 
n
 !ğ
	`št64
(11*1024*1024) {

5127 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(11*1024*1024))+" gÙ "+¡ršg(
n
), 
”r
)

5132 
rSnd¬d
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
+"-¡ªd¬d", 
mšio
.
StObjeùO±iÚs
{})

5133 
”r
 !ğ
n
 {

5134 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

5137 
rSnd¬d
.
CÚ‹ÁTy³
 != "application/octet-stream" {

5138 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹Á-Ty³ h—d” mism©ched,ƒx³ùed:‡µliÿtiÚ/où‘-¡»am , gÙ "+
rSnd¬d
.
CÚ‹ÁTy³
, 
”r
)

5142 
rOù‘
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
+"-Où‘", 
mšio
.
StObjeùO±iÚs
{})

5143 
”r
 !ğ
n
 {

5144 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

5147 
rOù‘
.
CÚ‹ÁTy³
 != "application/octet-stream" {

5148 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹Á-Ty³ h—d” mism©ched,ƒx³ùed:‡µliÿtiÚ/où‘-¡»am , gÙ "+
rOù‘
.
CÚ‹ÁTy³
, 
”r
)

5152 
rGT¬
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeùName
+"-GT¬", 
mšio
.
StObjeùO±iÚs
{})

5153 
”r
 !ğ
n
 {

5154 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

5157 
rGT¬
.
CÚ‹ÁTy³
 != "application/x-gtar" &&„GTar.ContentType != "application/octet-stream" {

5158 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CÚ‹Á-Ty³ h—d” mism©ched,ƒx³ùed:‡µliÿtiÚ/x-g¸, gÙ "+
rGT¬
.
CÚ‹ÁTy³
, 
”r
)

5163 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

5164 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5168 
”r
 = 
os
.
	`Remove
(
feName
 + ".gtar")

5169 
”r
 !ğ
n
 {

5170 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "F»movçed", 
”r
)

5173 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

5174 
	}
}

5177 
func
 
	$‹¡MakeBuck‘RegiÚsV2
() {

5179 
¡¬tTime
 :ğ
time
.
	`Now
()

5180 
‹¡Name
 :ğ
	`g‘FuncName
()

5181 
funùiÚ
 := "MakeBucket(bucketName,„egion)"

5182 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

5187 
os
.
	`G‘’v
(
£rv”Endpošt
) != "s3.amazonaws.com" {

5188 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Sk³d„egiÚ funùiÚ®e¡ fÜ‚Ú s3„uns").
	`Info
()

5193 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

5196 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

5197 
os
.
	`G‘’v
(
£rv”Endpošt
),

5198 
os
.
	`G‘’v
(
acûssKey
),

5199 
os
.
	`G‘’v
(
£ü‘Key
),

5200 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

5202 
”r
 !ğ
n
 {

5203 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

5211 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

5214 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

5215 
¬gs
["buck‘Name"] = 
buck‘Name


5218 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "eu-we¡-1");ƒ¼ !ğ
n
 {

5219 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5223 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

5224 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5231 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
+".w™h³riod", "us-we¡-2");ƒ¼ !ğ
n
 {

5232 
¬gs
["buck‘Name"] = 
buck‘Name
 + ".withperiod"

5233 
¬gs
["region"] = "us-west-2"

5234 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5239 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
+".w™h³riod", 
c
);ƒ¼ !ğ
n
 {

5240 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5244 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

5245 
	}
}

5248 
func
 
	$‹¡G‘ObjeùR—dS“kFunùiÚ®V2
() {

5250 
¡¬tTime
 :ğ
time
.
	`Now
()

5251 
‹¡Name
 :ğ
	`g‘FuncName
()

5252 
funùiÚ
 := "GetObject(bucketName, objectName)"

5253 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

5256 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

5259 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

5260 
os
.
	`G‘’v
(
£rv”Endpošt
),

5261 
os
.
	`G‘’v
(
acûssKey
),

5262 
os
.
	`G‘’v
(
£ü‘Key
),

5263 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

5265 
”r
 !ğ
n
 {

5266 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

5274 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

5277 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

5278 
¬gs
["buck‘Name"] = 
buck‘Name


5281 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

5282 
”r
 !ğ
n
 {

5283 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5288 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

5289 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

5290 
deãr
 
»ad”
.
	`Clo£
()

5292 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

5293 
¬gs
["objeùName"] = 
objeùName


5295 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

5296 
”r
 !ğ
n
 {

5297 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

5302 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

5303 
”r
 !ğ
n
 {

5304 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

5308 
n
 !ğ
	`št64
(
bufSize
) {

5309 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+" gÙ "+¡ršg(
n
), 
”r
)

5314 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

5315 
”r
 !ğ
n
 {

5316 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

5319 
deãr
 
r
.
	`Clo£
()

5321 
¡
, 
”r
 :ğ
r
.
	`St
()

5322 
”r
 !ğ
n
 {

5323 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

5327 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

5328 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ š sˆdÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+" gÙ "+¡ršg(
¡
.
Size
), 
”r
)

5332 
off£t
 :ğ
	`št64
(2048)

5333 
n
, 
”r
 = 
r
.
	`S“k
(
off£t
, 0)

5334 
”r
 !ğ
n
 {

5335 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S“k faed", 
”r
)

5338 
n
 !ğ
off£t
 {

5339 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oà£eked by‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
off£t
)+" gÙ "+¡ršg(
n
), 
”r
)

5342 
n
, 
”r
 = 
r
.
	`S“k
(0, 1)

5343 
”r
 !ğ
n
 {

5344 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S“k faed", 
”r
)

5347 
n
 !ğ
off£t
 {

5348 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oà£eked by‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
off£t
)+" gÙ "+¡ršg(
n
), 
”r
)

5351 
_
, 
”r
 = 
r
.
	`S“k
(
off£t
, 2)

5352 
”r
 =ğ
n
 {

5353 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S“k oÀpos™ivoff£ˆfÜ wh’û '2' shouldƒ¼Ü out", 
”r
)

5356 
n
, 
”r
 = 
r
.
	`S“k
(-
off£t
, 2)

5357 
”r
 !ğ
n
 {

5358 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S“k faed", 
”r
)

5361 
n
 !ğ
¡
.
Size
-
off£t
 {

5362 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oà£eked by‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
¡
.
Size
-
off£t
)+" gÙ "+¡ršg(
n
), 
”r
)

5366 
v¬
 
bufãr1
 
by‹s
.
Bufãr


5367 
_
, 
”r
 = 
io
.
	`CİyN
(&
bufãr1
, 
r
, 
¡
.
Size
);ƒ¼ !ğ
n
 {

5368 
”r
 !ğ
io
.
EOF
 {

5369 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Cİy faed", 
”r
)

5373 !
by‹s
.
	`Equ®
(
buf
[
	`Ën
(buf)-(
off£t
):], 
bufãr1
.
	`By‹s
()) {

5374 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d by‹ v/ Üigš® bufãr", 
”r
)

5379 
n
, 
”r
 = 
r
.
	`S“k
(
off£t
-1, 0)

5380 
”r
 !ğ
n
 {

5381 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S“k faed", 
”r
)

5384 
n
 !ğ(
off£t
 - 1) {

5385 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oà£eked by‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
off£t
-1)+" gÙ "+¡ršg(
n
), 
”r
)

5389 
v¬
 
bufãr2
 
by‹s
.
Bufãr


5390 
_
, 
”r
 = 
io
.
	`CİyN
(&
bufãr2
, 
r
, 
¡
.
Size
);ƒ¼ !ğ
n
 {

5391 
”r
 !ğ
io
.
EOF
 {

5392 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Cİy faed", 
”r
)

5397 !
by‹s
.
	`Equ®
(
buf
[2047:], 
bufãr2
.
	`By‹s
()) {

5398 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d by‹ v/ Üigš® bufãr", 
”r
)

5403 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

5404 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5408 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

5409 
	}
}

5412 
func
 
	$‹¡G‘ObjeùR—dAtFunùiÚ®V2
() {

5414 
¡¬tTime
 :ğ
time
.
	`Now
()

5415 
‹¡Name
 :ğ
	`g‘FuncName
()

5416 
funùiÚ
 := "GetObject(bucketName, objectName)"

5417 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

5420 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

5423 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

5424 
os
.
	`G‘’v
(
£rv”Endpošt
),

5425 
os
.
	`G‘’v
(
acûssKey
),

5426 
os
.
	`G‘’v
(
£ü‘Key
),

5427 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

5429 
”r
 !ğ
n
 {

5430 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

5438 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

5441 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

5442 
¬gs
["buck‘Name"] = 
buck‘Name


5445 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

5446 
”r
 !ğ
n
 {

5447 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5452 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

5453 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

5454 
deãr
 
»ad”
.
	`Clo£
()

5456 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

5457 
¬gs
["objeùName"] = 
objeùName


5459 
buf
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

5460 
”r
 !ğ
n
 {

5461 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

5466 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

5467 
”r
 !ğ
n
 {

5468 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

5472 
n
 !ğ
	`št64
(
bufSize
) {

5473 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
n
), 
”r
)

5478 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

5479 
”r
 !ğ
n
 {

5480 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

5483 
deãr
 
r
.
	`Clo£
()

5485 
¡
, 
”r
 :ğ
r
.
	`St
()

5486 
”r
 !ğ
n
 {

5487 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

5491 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

5492 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
¡
.
Size
), 
”r
)

5496 
off£t
 :ğ
	`št64
(2048)

5499 
buf2
 :ğ
	`make
([]
by‹
, 512)

5500 
buf3
 :ğ
	`make
([]
by‹
, 512)

5501 
buf4
 :ğ
	`make
([]
by‹
, 512)

5503 
m
, 
”r
 :ğ
r
.
	`R—dAt
(
buf2
, 
off£t
)

5504 
”r
 !ğ
n
 {

5505 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

5508 
m
 !ğ
	`Ën
(
buf2
) {

5509 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf2
))+" gÙ "+¡ršg(
m
), 
”r
)

5512 !
by‹s
.
	`Equ®
(
buf2
, 
buf
[
off£t
:offset+512]) {

5513 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

5516 
off£t
 += 512

5517 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf3
, 
off£t
)

5518 
”r
 !ğ
n
 {

5519 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

5522 
m
 !ğ
	`Ën
(
buf3
) {

5523 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf3
))+" gÙ "+¡ršg(
m
), 
”r
)

5526 !
by‹s
.
	`Equ®
(
buf3
, 
buf
[
off£t
:offset+512]) {

5527 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

5530 
off£t
 += 512

5531 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf4
, 
off£t
)

5532 
”r
 !ğ
n
 {

5533 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

5536 
m
 !ğ
	`Ën
(
buf4
) {

5537 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf4
))+" gÙ "+¡ršg(
m
), 
”r
)

5540 !
by‹s
.
	`Equ®
(
buf4
, 
buf
[
off£t
:offset+512]) {

5541 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù„—d b‘w“ÀtwØR—dAˆäom samoff£t", 
”r
)

5545 
buf5
 :ğ
	`make
([]
by‹
, 
n
)

5547 
m
, 
”r
 = 
r
.
	`R—dAt
(
buf5
, 0)

5548 
”r
 !ğ
n
 {

5549 
”r
 !ğ
io
.
EOF
 {

5550 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

5554 
m
 !ğ
	`Ën
(
buf5
) {

5555 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆ»ad shÜ‹¸by‹ befÜ»achšg EOF,ƒx³ùed "+
	`¡ršg
(
	`Ën
(
buf5
))+" gÙ "+¡ršg(
m
), 
”r
)

5558 !
by‹s
.
	`Equ®
(
buf
, 
buf5
) {

5559 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "IncÜ»ù d©¨»ad iÀG‘Objeù,hª wh© wa ´eviou¦y u¶ßded", 
”r
)

5563 
buf6
 :ğ
	`make
([]
by‹
, 
n
+1)

5565 
_
, 
”r
 = 
r
.
	`R—dAt
(
buf6
, 0)

5566 
”r
 !ğ
n
 {

5567 
”r
 !ğ
io
.
EOF
 {

5568 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAˆçed", 
”r
)

5573 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

5574 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5578 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

5579 
	}
}

5582 
func
 
	$‹¡CİyObjeùV2
() {

5584 
¡¬tTime
 :ğ
time
.
	`Now
()

5585 
‹¡Name
 :ğ
	`g‘FuncName
()

5586 
funùiÚ
 := "CopyObject(destination, source)"

5587 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

5590 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

5593 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

5594 
os
.
	`G‘’v
(
£rv”Endpošt
),

5595 
os
.
	`G‘’v
(
acûssKey
),

5596 
os
.
	`G‘’v
(
£ü‘Key
),

5597 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

5599 
”r
 !ğ
n
 {

5600 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

5608 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

5611 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

5614 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

5615 
”r
 !ğ
n
 {

5616 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5621 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
+"-copy", "us-east-1")

5622 
”r
 !ğ
n
 {

5623 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5628 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

5629 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

5630 
deãr
 
»ad”
.
	`Clo£
()

5633 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

5634 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

5635 
”r
 !ğ
n
 {

5636 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

5640 
n
 !ğ
	`št64
(
bufSize
) {

5641 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
	`št64
(
bufSize
))+" gÙ "+¡ršg(
n
), 
”r
)

5645 
r
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

5646 
”r
 !ğ
n
 {

5647 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

5651 
objInfo
, 
”r
 :ğ
r
.
	`St
()

5652 
”r
 !ğ
n
 {

5653 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

5656 
r
.
	`Clo£
()

5659 
¤c
 :ğ
mšio
.
	`NewSourûInfo
(
buck‘Name
, 
objeùName
, 
n
)

5660 
¬gs
["sourû"] = 
¤c


5665 
”r
 = 
¤c
.
	`S‘Modif›dSšûCÚd
(
time
.
	`D©e
(1,ime.
Jªu¬y
, 1, 0, 0, 0, 0,ime.
UTC
))

5666 
”r
 =ğ
n
 {

5667 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Modif›dSšûCÚd did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

5670 
”r
 = 
¤c
.
	`S‘Unmodif›dSšûCÚd
(
time
.
	`D©e
(1,ime.
Jªu¬y
, 1, 0, 0, 0, 0,ime.
UTC
))

5671 
”r
 =ğ
n
 {

5672 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Unmodif›dSšûCÚd did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

5675 
”r
 = 
¤c
.
	`S‘M©chETagCÚd
("")

5676 
”r
 =ğ
n
 {

5677 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘M©chETagCÚd did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

5680 
”r
 = 
¤c
.
	`S‘M©chETagExû±CÚd
("")

5681 
”r
 =ğ
n
 {

5682 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘M©chETagExû±CÚd did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

5686 
”r
 = 
¤c
.
	`S‘Modif›dSšûCÚd
(
time
.
	`D©e
(2014,ime.
A´
, 0, 0, 0, 0, 0,ime.
UTC
))

5687 
”r
 !ğ
n
 {

5688 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Modif›dSšûCÚd faed", 
”r
)

5691 
”r
 = 
¤c
.
	`S‘M©chETagCÚd
(
objInfo
.
ETag
)

5692 
”r
 !ğ
n
 {

5693 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘M©chETagCÚd faed", 
”r
)

5697 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
+"-cİy", 
objeùName
+"-cİy", 
n
,‚il)

5698 
¬gs
["de¡š©iÚ"] = 
d¡


5699 
”r
 !ğ
n
 {

5700 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

5705 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

5706 
”r
 !ğ
n
 {

5707 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù faed", 
”r
)

5712 
r
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

5713 
”r
 !ğ
n
 {

5714 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

5718 
»ad”Cİy
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
+"-cİy", 
objeùName
+"-cİy", 
mšio
.
G‘ObjeùO±iÚs
{})

5719 
”r
 !ğ
n
 {

5720 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

5724 
objInfo
, 
”r
 = 
r
.
	`St
()

5725 
”r
 !ğ
n
 {

5726 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

5729 
objInfoCİy
, 
”r
 :ğ
»ad”Cİy
.
	`St
()

5730 
”r
 !ğ
n
 {

5731 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

5734 
objInfo
.
Size
 !ğ
objInfoCİy
.Size {

5735 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ dÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
objInfoCİy
.
Size
)+" gÙ "+¡ršg(
objInfo
.Size), 
”r
)

5740 
r
.
	`Clo£
()

5741 
»ad”Cİy
.
	`Clo£
()

5744 
¤c
 = 
mšio
.
	`NewSourûInfo
(
buck‘Name
, 
objeùName
, 
n
)

5745 
”r
 = 
¤c
.
	`S‘Unmodif›dSšûCÚd
(
time
.
	`D©e
(2014,ime.
A´
, 0, 0, 0, 0, 0,ime.
UTC
))

5746 
”r
 !ğ
n
 {

5747 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Unmodif›dSšûCÚd faed", 
”r
)

5750 
”r
 = 
¤c
.
	`S‘M©chETagExû±CÚd
(
objInfo
.
ETag
)

5751 
”r
 !ğ
n
 {

5752 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘M©chETagExû±CÚd faed", 
”r
)

5757 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

5758 
”r
 =ğ
n
 {

5759 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù did‚Ù fa fÜ inv®id cÚd™iÚs", 
”r
)

5764 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

5765 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5768 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
+"-cİy", 
c
);ƒ¼ !ğ
n
 {

5769 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5772 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

5773 
	}
}

5775 
func
 
	$‹¡Compo£ObjeùE¼ÜCa£sW¿µ”
(
c
 *
mšio
.
Cl›Á
) {

5777 
¡¬tTime
 :ğ
time
.
	`Now
()

5778 
‹¡Name
 :ğ
	`g‘FuncName
()

5779 
funùiÚ
 := "ComposeObject(destination, sourceList)"

5780 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

5783 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

5786 
”r
 :ğ
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

5788 
”r
 !ğ
n
 {

5789 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5795 
¤cA¼
 :ğ[10001]
mšio
.
SourûInfo
{}

5796 
¤cSliû
 :ğ
¤cA¼
[:]

5797 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "objeù", 
n
,‚il)

5798 
”r
 !ğ
n
 {

5799 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

5803 
¬gs
["de¡š©iÚ"] = 
d¡


5806 
¬gs
["sourceList"] = "source‡rray of 10,001ƒlements"

5807 
”r
 :ğ
c
.
	`Compo£Objeù
(
d¡
, 
¤cSliû
);ƒ¼ =ğ
n
 {

5808 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùedƒ¼Ü iÀCompo£Objeù", 
”r
)

5810 } 
”r
.
	`E¼Ü
() != "There must be‡s†east one‡nd upo 10000 source objects." {

5811 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùedƒ¼Ü", 
”r
)

5818 cÚ¡ 
badSrcSize
 = 5 * 1024 * 1024

5819 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("1"), 
badSrcSize
)

5820 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "badObjeù", 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{})

5821 
”r
 !ğ
n
 {

5822 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

5827 
badSrc
 :ğ
mšio
.
	`NewSourûInfo
(
buck‘Name
, "badObjeù", 
n
)

5828 
”r
 = 
badSrc
.
	`S‘Rªge
(1, 
badSrcSize
)

5829 
”r
 !ğ
n
 {

5830 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘tšg NewSourûInfØçed", 
”r
)

5834 
”r
 :ğ
c
.
	`Compo£Objeù
(
d¡
, []
mšio
.
SourûInfo
{
badSrc
});ƒ¼ =ğ
n
 {

5835 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Compo£Objeùƒx³ùedØç", 
”r
)

5837 } !
¡ršgs
.
	`CÚšs
(
”r
.
	`E¼Ü
(), "has invalid segment-to-copy") {

5838 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ inv®idƒ¼Ü", 
”r
)

5843 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

5844 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5848 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

5849 
	}
}

5852 
func
 
	$‹¡Compo£ObjeùE¼ÜCa£sV2
() {

5854 
¡¬tTime
 :ğ
time
.
	`Now
()

5855 
‹¡Name
 :ğ
	`g‘FuncName
()

5856 
funùiÚ
 := "ComposeObject(destination, sourceList)"

5857 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

5860 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

5861 
os
.
	`G‘’v
(
£rv”Endpošt
),

5862 
os
.
	`G‘’v
(
acûssKey
),

5863 
os
.
	`G‘’v
(
£ü‘Key
),

5864 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

5866 
”r
 !ğ
n
 {

5867 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

5871 
	`‹¡Compo£ObjeùE¼ÜCa£sW¿µ”
(
c
)

5872 
	}
}

5874 
func
 
	$‹¡Compo£MuÉËSourûs
(
c
 *
mšio
.
Cl›Á
) {

5876 
¡¬tTime
 :ğ
time
.
	`Now
()

5877 
‹¡Name
 :ğ
	`g‘FuncName
()

5878 
funùiÚ
 := "ComposeObject(destination, sourceList)"

5879 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

5885 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

5887 
”r
 :ğ
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

5888 
”r
 !ğ
n
 {

5889 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5894 cÚ¡ 
¤cSize
 = 1024 * 1024 * 5

5895 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("1"), 
¤cSize
)

5896 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "¤cObjeù", 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
¤cSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

5897 
”r
 !ğ
n
 {

5898 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

5903 
¤cs
 :ğ[]
mšio
.
SourûInfo
{}

5904 
i
 := 0; i < 10; i++ {

5905 
¤cs
 = 
	`­³nd
(¤cs, 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
n
))

5908 
”r
 = 
¤cs
[9].
	`S‘Rªge
(0, 0)

5909 
”r
 !ğ
n
 {

5910 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Rªgçed", 
”r
)

5913 
¬gs
["sourûLi¡"] = 
¤cs


5915 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "d¡Objeù", 
n
,‚il)

5916 
¬gs
["de¡š©iÚ"] = 
d¡


5918 
”r
 !ğ
n
 {

5919 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

5922 
”r
 = 
c
.
	`Compo£Objeù
(
d¡
, 
¤cs
)

5923 
”r
 !ğ
n
 {

5924 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Compo£Objeù faed", 
”r
)

5928 
objPrİs
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, "d¡Objeù", 
mšio
.
StObjeùO±iÚs
{})

5929 
”r
 !ğ
n
 {

5930 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù faed", 
”r
)

5934 
objPrİs
.
Size
 !ğ9*
¤cSize
+1 {

5935 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sizmism©ched! Ex³ùed "+
	`¡ršg
(10000*
¤cSize
)+" gÙ "+¡ršg(
objPrİs
.
Size
), 
”r
)

5939 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

5940 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

5943 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

5944 
	}
}

5947 
func
 
	$‹¡Compo£10KSourûsV2
() {

5949 
¡¬tTime
 :ğ
time
.
	`Now
()

5950 
‹¡Name
 :ğ
	`g‘FuncName
()

5951 
funùiÚ
 := "ComposeObject(destination, sourceList)"

5952 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

5955 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

5956 
os
.
	`G‘’v
(
£rv”Endpošt
),

5957 
os
.
	`G‘’v
(
acûssKey
),

5958 
os
.
	`G‘’v
(
£ü‘Key
),

5959 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

5961 
”r
 !ğ
n
 {

5962 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

5966 
	`‹¡Compo£MuÉËSourûs
(
c
)

5967 
	}
}

5969 
func
 
	$‹¡Enüy±edEm±yObjeù
() {

5971 
¡¬tTime
 :ğ
time
.
	`Now
()

5972 
‹¡Name
 :ğ
	`g‘FuncName
()

5973 
funùiÚ
 := "PutObject(bucketName, objectName,„eader, objectSize, opts)"

5974 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

5977 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

5978 
os
.
	`G‘’v
(
£rv”Endpošt
),

5979 
os
.
	`G‘’v
(
acûssKey
),

5980 
os
.
	`G‘’v
(
£ü‘Key
),

5981 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

5983 
”r
 !ğ
n
 {

5984 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

5989 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

5990 
¬gs
["buck‘Name"] = 
buck‘Name


5992 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

5993 
”r
 !ğ
n
 {

5994 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

5998 
s£
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"object"))

6001 cÚ¡ 
¤cSize
 = 0

6002 
v¬
 
buf
 []
by‹


6003 
¬gs
["objectName"] = "object"

6004 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "objeù", 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
s£
})

6005 
”r
 !ğ
n
 {

6006 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

6011 
d¡Info
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "Ãw-objeù", 
s£
, 
n
)

6012 
”r
 !ğ
n
 {

6013 
¬gs
["objectName"] = "new-object"

6014 
funùiÚ
 = "NewDestinationInfo(bucketName, objectName, sse, userMetadata)"

6015 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

6018 
¤cInfo
 :ğ
mšio
.
	`NewSourûInfo
(
buck‘Name
, "objeù", 
s£
)

6019 
”r
 = 
c
.
	`CİyObjeù
(
d¡Info
, 
¤cInfo
);ƒ¼ !ğ
n
 {

6020 
funùiÚ
 = "CopyObject(dstInfo, srcInfo)"

6021 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
m­
[
¡ršg
]
š‹rçû
{}{}, 
¡¬tTime
, "", "CİyObjeù faed", 
”r
)

6026 
ÃwSSE
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("DÚ'ˆPªic"), []by‹(
buck‘Name
+"new-object"))

6027 
d¡Info
, 
”r
 = 
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "Ãw-objeù", 
ÃwSSE
, 
n
)

6028 
”r
 !ğ
n
 {

6029 
¬gs
["objectName"] = "new-object"

6030 
funùiÚ
 = "NewDestinationInfo(bucketName, objectName,ƒncryptSSEC, userMetadata)"

6031 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

6035 
¤cInfo
 = 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "Ãw-objeù", 
s£
)

6036 
”r
 = 
c
.
	`CİyObjeù
(
d¡Info
, 
¤cInfo
);ƒ¼ !ğ
n
 {

6037 
funùiÚ
 = "CopyObject(dstInfo, srcInfo)"

6038 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
m­
[
¡ršg
]
š‹rçû
{}{}, 
¡¬tTime
, "", "CİyObjeù w™h key„Ù©iÚ faed", 
”r
)

6043 
»ad”
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, "Ãw-objeù", 
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
ÃwSSE
})

6044 
”r
 !ğ
n
 {

6045 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

6048 
deãr
 
»ad”
.
	`Clo£
()

6050 
decBy‹s
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

6051 
”r
 !ğ
n
 {

6052 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
m­
[
¡ršg
]
š‹rçû
{}{}, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

6055 !
by‹s
.
	`Equ®
(
decBy‹s
, 
buf
) {

6056 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
m­
[
¡ršg
]
š‹rçû
{}{}, 
¡¬tTime
, "", "DowÆßded objeù dÛ¢'ˆm©chhem±yƒnüy±ed objeù", 
”r
)

6060 
	`d–‘e
(
¬gs
, "objectName")

6061 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

6062 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

6066 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

6067 
	}
}

6069 
func
 
	$‹¡Enüy±edCİyObjeùW¿µ”
(
c
 *
mšio
.
Cl›Á
, 
buck‘Name
 
¡ršg
, 
s£Src
, 
s£D¡
 
’üy±
.
S”v”Side
) {

6071 
¡¬tTime
 :ğ
time
.
	`Now
()

6072 
‹¡Name
 :ğ
	`g‘FuncName
()

6073 
funùiÚ
 := "CopyObject(destination, source)"

6074 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6075 
v¬
 
¤cEnüy±iÚ
, 
d¡Enüy±iÚ
 
’üy±
.
S”v”Side


6078 
”r
 :ğ
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

6079 
”r
 !ğ
n
 {

6080 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

6085 cÚ¡ 
¤cSize
 = 1024 * 1024

6086 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 
¤cSize
)

6087 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "¤cObjeù", 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{

6088 
S”v”SideEnüy±iÚ
: 
s£Src
,

6090 
”r
 !ğ
n
 {

6091 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

6095 
s£Src
 !ğ
n
 && s£Src.
	`Ty³
(è!ğ
’üy±
.
S3
 {

6096 
¤cEnüy±iÚ
 = 
s£Src


6100 
¤c
 :ğ
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
¤cEnüy±iÚ
)

6101 
¬gs
["sourû"] = 
¤c


6102 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "d¡Objeù", 
s£D¡
, 
n
)

6103 
”r
 !ğ
n
 {

6104 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

6107 
¬gs
["de¡š©iÚ"] = 
d¡


6109 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

6110 
”r
 !ğ
n
 {

6111 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù faed", 
”r
)

6115 
s£D¡
 !ğ
n
 && s£D¡.
	`Ty³
(è!ğ
’üy±
.
S3
 {

6116 
d¡Enüy±iÚ
 = 
s£D¡


6119 
cÜeCl›Á
 :ğ
mšio
.
CÜe
{
c
}

6120 
»ad”
, 
_
, 
”r
 :ğ
cÜeCl›Á
.
	`G‘Objeù
(
buck‘Name
, "d¡Objeù", 
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡Enüy±iÚ
})

6121 
”r
 !ğ
n
 {

6122 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

6126 
decBy‹s
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»ad”
)

6127 
”r
 !ğ
n
 {

6128 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

6131 !
by‹s
.
	`Equ®
(
decBy‹s
, 
buf
) {

6132 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "DowÆßded objeù mism©ched fÜƒnüy±ed objeù", 
”r
)

6135 
»ad”
.
	`Clo£
()

6138 
v¬
 
ÃwSSE
 
’üy±
.
S”v”Side


6139 
s£Src
 !ğ
n
 && s£Src.
	`Ty³
(è=ğ
’üy±
.
SSEC
 {

6140 
ÃwSSE
 = 
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("DÚ'ˆPªic"), []by‹(
buck‘Name
+"srcObject"))

6142 
s£Src
 !ğ
n
 && s£Src.
	`Ty³
(è=ğ
’üy±
.
S3
 {

6143 
ÃwSSE
 = 
’üy±
.
	`NewSSE
()

6145 
ÃwSSE
 !ğ
n
 {

6146 
d¡
, 
”r
 = 
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "¤cObjeù", 
ÃwSSE
, 
n
)

6147 
”r
 !ğ
n
 {

6148 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

6151 
¬gs
["de¡š©iÚ"] = 
d¡


6153 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

6154 
”r
 !ğ
n
 {

6155 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù faed", 
”r
)

6160 
»ad”
, 
_
, 
”r
 = 
cÜeCl›Á
.
	`G‘Objeù
(
buck‘Name
, "¤cObjeù", 
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
ÃwSSE
})

6161 
”r
 !ğ
n
 {

6162 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

6166 
decBy‹s
, 
”r
 = 
iout
.
	`R—dAÎ
(
»ad”
)

6167 
”r
 !ğ
n
 {

6168 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

6171 !
by‹s
.
	`Equ®
(
decBy‹s
, 
buf
) {

6172 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "DowÆßded objeù mism©ched fÜƒnüy±ed objeù", 
”r
)

6175 
»ad”
.
	`Clo£
()

6177 
d¡
, 
”r
 = 
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "¤cObjeù", 
n
,‚il)

6178 
”r
 !ğ
n
 {

6179 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

6182 
¬gs
["de¡š©iÚ"] = 
d¡


6184 
¤c
 = 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
ÃwSSE
)

6185 
¬gs
["sourû"] = 
¤c


6186 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

6187 
”r
 !ğ
n
 {

6188 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù Key„Ù©iÚ faed", 
”r
)

6194 
»ad”
, 
_
, 
”r
 = 
cÜeCl›Á
.
	`G‘Objeù
(
buck‘Name
, "¤cObjeù", 
mšio
.
G‘ObjeùO±iÚs
{})

6195 
”r
 !ğ
n
 {

6196 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

6199 
deãr
 
»ad”
.
	`Clo£
()

6201 
decBy‹s
, 
”r
 = 
iout
.
	`R—dAÎ
(
»ad”
)

6202 
”r
 !ğ
n
 {

6203 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

6206 !
by‹s
.
	`Equ®
(
decBy‹s
, 
buf
) {

6207 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "DowÆßded objeù mism©ched fÜƒnüy±ed objeù", 
”r
)

6212 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

6213 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

6217 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

6218 
	}
}

6221 
func
 
	$‹¡UÃnüy±edToSSECCİyObjeù
() {

6223 
¡¬tTime
 :ğ
time
.
	`Now
()

6224 
‹¡Name
 :ğ
	`g‘FuncName
()

6225 
funùiÚ
 := "CopyObject(destination, source)"

6226 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6229 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6230 
os
.
	`G‘’v
(
£rv”Endpošt
),

6231 
os
.
	`G‘’v
(
acûssKey
),

6232 
os
.
	`G‘’v
(
£ü‘Key
),

6233 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6235 
”r
 !ğ
n
 {

6236 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6240 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6242 
v¬
 
s£Src
 
’üy±
.
S”v”Side


6243 
s£D¡
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"dstObject"))

6245 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6246 
	}
}

6249 
func
 
	$‹¡UÃnüy±edToSSES3CİyObjeù
() {

6251 
¡¬tTime
 :ğ
time
.
	`Now
()

6252 
‹¡Name
 :ğ
	`g‘FuncName
()

6253 
funùiÚ
 := "CopyObject(destination, source)"

6254 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6257 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6258 
os
.
	`G‘’v
(
£rv”Endpošt
),

6259 
os
.
	`G‘’v
(
acûssKey
),

6260 
os
.
	`G‘’v
(
£ü‘Key
),

6261 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6263 
”r
 !ğ
n
 {

6264 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6268 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6270 
v¬
 
s£Src
 
’üy±
.
S”v”Side


6271 
s£D¡
 :ğ
’üy±
.
	`NewSSE
()

6273 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6274 
	}
}

6277 
func
 
	$‹¡UÃnüy±edToUÃnüy±edCİyObjeù
() {

6279 
¡¬tTime
 :ğ
time
.
	`Now
()

6280 
‹¡Name
 :ğ
	`g‘FuncName
()

6281 
funùiÚ
 := "CopyObject(destination, source)"

6282 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6285 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6286 
os
.
	`G‘’v
(
£rv”Endpošt
),

6287 
os
.
	`G‘’v
(
acûssKey
),

6288 
os
.
	`G‘’v
(
£ü‘Key
),

6289 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6291 
”r
 !ğ
n
 {

6292 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6296 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6298 
v¬
 
s£Src
, 
s£D¡
 
’üy±
.
S”v”Side


6300 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6301 
	}
}

6304 
func
 
	$‹¡Enüy±edSSECToSSECCİyObjeù
() {

6306 
¡¬tTime
 :ğ
time
.
	`Now
()

6307 
‹¡Name
 :ğ
	`g‘FuncName
()

6308 
funùiÚ
 := "CopyObject(destination, source)"

6309 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6312 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6313 
os
.
	`G‘’v
(
£rv”Endpošt
),

6314 
os
.
	`G‘’v
(
acûssKey
),

6315 
os
.
	`G‘’v
(
£ü‘Key
),

6316 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6318 
”r
 !ğ
n
 {

6319 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6323 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6325 
s£Src
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"srcObject"))

6326 
s£D¡
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"dstObject"))

6328 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6329 
	}
}

6332 
func
 
	$‹¡Enüy±edSSECToSSES3CİyObjeù
() {

6334 
¡¬tTime
 :ğ
time
.
	`Now
()

6335 
‹¡Name
 :ğ
	`g‘FuncName
()

6336 
funùiÚ
 := "CopyObject(destination, source)"

6337 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6340 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6341 
os
.
	`G‘’v
(
£rv”Endpošt
),

6342 
os
.
	`G‘’v
(
acûssKey
),

6343 
os
.
	`G‘’v
(
£ü‘Key
),

6344 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6346 
”r
 !ğ
n
 {

6347 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6351 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6353 
s£Src
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"srcObject"))

6354 
s£D¡
 :ğ
’üy±
.
	`NewSSE
()

6356 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6357 
	}
}

6360 
func
 
	$‹¡Enüy±edSSECToUÃnüy±edCİyObjeù
() {

6362 
¡¬tTime
 :ğ
time
.
	`Now
()

6363 
‹¡Name
 :ğ
	`g‘FuncName
()

6364 
funùiÚ
 := "CopyObject(destination, source)"

6365 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6368 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6369 
os
.
	`G‘’v
(
£rv”Endpošt
),

6370 
os
.
	`G‘’v
(
acûssKey
),

6371 
os
.
	`G‘’v
(
£ü‘Key
),

6372 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6374 
”r
 !ğ
n
 {

6375 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6379 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6381 
s£Src
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"srcObject"))

6382 
v¬
 
s£D¡
 
’üy±
.
S”v”Side


6384 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6385 
	}
}

6388 
func
 
	$‹¡Enüy±edSSES3ToSSECCİyObjeù
() {

6390 
¡¬tTime
 :ğ
time
.
	`Now
()

6391 
‹¡Name
 :ğ
	`g‘FuncName
()

6392 
funùiÚ
 := "CopyObject(destination, source)"

6393 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6396 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6397 
os
.
	`G‘’v
(
£rv”Endpošt
),

6398 
os
.
	`G‘’v
(
acûssKey
),

6399 
os
.
	`G‘’v
(
£ü‘Key
),

6400 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6402 
”r
 !ğ
n
 {

6403 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6407 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6409 
s£Src
 :ğ
’üy±
.
	`NewSSE
()

6410 
s£D¡
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"dstObject"))

6412 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6413 
	}
}

6416 
func
 
	$‹¡Enüy±edSSES3ToSSES3CİyObjeù
() {

6418 
¡¬tTime
 :ğ
time
.
	`Now
()

6419 
‹¡Name
 :ğ
	`g‘FuncName
()

6420 
funùiÚ
 := "CopyObject(destination, source)"

6421 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6424 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6425 
os
.
	`G‘’v
(
£rv”Endpošt
),

6426 
os
.
	`G‘’v
(
acûssKey
),

6427 
os
.
	`G‘’v
(
£ü‘Key
),

6428 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6430 
”r
 !ğ
n
 {

6431 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6435 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6437 
s£Src
 :ğ
’üy±
.
	`NewSSE
()

6438 
s£D¡
 :ğ
’üy±
.
	`NewSSE
()

6440 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6441 
	}
}

6444 
func
 
	$‹¡Enüy±edSSES3ToUÃnüy±edCİyObjeù
() {

6446 
¡¬tTime
 :ğ
time
.
	`Now
()

6447 
‹¡Name
 :ğ
	`g‘FuncName
()

6448 
funùiÚ
 := "CopyObject(destination, source)"

6449 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6452 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

6453 
os
.
	`G‘’v
(
£rv”Endpošt
),

6454 
os
.
	`G‘’v
(
acûssKey
),

6455 
os
.
	`G‘’v
(
£ü‘Key
),

6456 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6458 
”r
 !ğ
n
 {

6459 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6463 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6465 
s£Src
 :ğ
’üy±
.
	`NewSSE
()

6466 
v¬
 
s£D¡
 
’üy±
.
S”v”Side


6468 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6469 
	}
}

6472 
func
 
	$‹¡Enüy±edCİyObjeùV2
() {

6474 
¡¬tTime
 :ğ
time
.
	`Now
()

6475 
‹¡Name
 :ğ
	`g‘FuncName
()

6476 
funùiÚ
 := "CopyObject(destination, source)"

6477 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6480 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

6481 
os
.
	`G‘’v
(
£rv”Endpošt
),

6482 
os
.
	`G‘’v
(
acûssKey
),

6483 
os
.
	`G‘’v
(
£ü‘Key
),

6484 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6486 
”r
 !ğ
n
 {

6487 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6491 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

6493 
s£Src
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"srcObject"))

6494 
s£D¡
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+"dstObject"))

6496 
	`‹¡Enüy±edCİyObjeùW¿µ”
(
c
, 
buck‘Name
, 
s£Src
, 
s£D¡
)

6497 
	}
}

6499 
func
 
	$‹¡Deüy±edCİyObjeù
() {

6501 
¡¬tTime
 :ğ
time
.
	`Now
()

6502 
‹¡Name
 :ğ
	`g‘FuncName
()

6503 
funùiÚ
 := "CopyObject(destination, source)"

6504 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6507 
c
, 
”r
 :ğ
mšio
.
	`New
(

6508 
os
.
	`G‘’v
(
£rv”Endpošt
),

6509 
os
.
	`G‘’v
(
acûssKey
),

6510 
os
.
	`G‘’v
(
£ü‘Key
),

6511 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6513 
”r
 !ğ
n
 {

6514 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv2 cl›Á objeù c»©iÚ faed", 
”r
)

6518 
buck‘Name
, 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-"), "object"

6519 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-—¡-1");ƒ¼ !ğ
n
 {

6520 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

6524 
’üy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
("cÜ»ù hÜ£ b©‹ry s¶e"), []by‹(
buck‘Name
+
objeùName
))

6525 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(by‹s.
	`R•—t
([]
	`by‹
("a"), 1024*1024)), 1024*1024, 
mšio
.
PutObjeùO±iÚs
{

6526 
S”v”SideEnüy±iÚ
: 
’üy±iÚ
,

6528 
”r
 !ğ
n
 {

6529 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

6533 
¤c
 :ğ
mšio
.
	`NewSourûInfo
(
buck‘Name
, 
objeùName
, 
’üy±
.
	`SSECİy
(
’üy±iÚ
))

6534 
¬gs
["sourû"] = 
¤c


6535 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "deüy±ed-"+
objeùName
, 
n
,‚il)

6536 
”r
 !ğ
n
 {

6537 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

6540 
¬gs
["de¡š©iÚ"] = 
d¡


6542 
”r
 = 
c
.
	`CİyObjeù
(
d¡
, 
¤c
);ƒ¼ !ğ
n
 {

6543 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù faed", 
”r
)

6546 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, "deüy±ed-"+
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{});ƒ¼ !ğ
n
 {

6547 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

6550 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

6551 
	}
}

6554 
func
 
	$‹¡SSECEnüy±edToSSECCİyObjeùP¬t
() {

6556 
¡¬tTime
 :ğ
time
.
	`Now
()

6557 
‹¡Name
 :ğ
	`g‘FuncName
()

6558 
funùiÚ
 := "CopyObjectPart(destination, source)"

6559 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6562 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

6563 
os
.
	`G‘’v
(
£rv”Endpošt
),

6564 
os
.
	`G‘’v
(
acûssKey
),

6565 
os
.
	`G‘’v
(
£ü‘Key
),

6566 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6568 
”r
 !ğ
n
 {

6569 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

6574 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

6580 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

6583 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

6586 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

6587 
”r
 !ğ
n
 {

6588 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

6590 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

6592 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

6595 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

6596 
·sswÜd
 := "correct horse battery staple"

6597 
¤ûnüy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
buck‘Name
+
objeùName
))

6599 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

6601 }, 
¤ûnüy±iÚ
)

6602 
”r
 !ğ
n
 {

6603 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

6606 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

6607 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

6610 
de¡Buck‘Name
 :ğ
buck‘Name


6611 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

6612 
d¡’üy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
de¡Buck‘Name
+
de¡ObjeùName
))

6614 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
})

6615 
”r
 !ğ
n
 {

6616 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

6622 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

6623 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

6624 
’üy±
.
	`SSECİy
(
¤ûnüy±iÚ
).
	`M¬sh®
(
h—d”
)

6625 
d¡’üy±iÚ
.
	`M¬sh®
(
h—d”
)

6626 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

6627 
m‘ad©a
[
k
] = 
v
[0]

6630 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

6631 
”r
 !ğ
n
 {

6632 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6636 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

6637 
”r
 !ğ
n
 {

6638 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6642 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

6643 
”r
 !ğ
n
 {

6644 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6648 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

6649 
”r
 !ğ
n
 {

6650 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

6654 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
}})

6655 
”r
 !ğ
n
 {

6656 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

6659 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

6660 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

6664 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
}

6665 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

6666 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

6667 
”r
 !ğ
n
 {

6668 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

6670 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

6671 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

6672 
”r
 !ğ
n
 {

6673 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

6675 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

6676 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

6679 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

6680 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

6681 
”r
 !ğ
n
 {

6682 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

6684 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

6685 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

6686 
”r
 !ğ
n
 {

6687 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

6689 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

6690 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

6692 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

6693 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

6696 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

6699 
	}
}

6702 
func
 
	$‹¡SSECEnüy±edToUÃnüy±edCİyP¬t
() {

6704 
¡¬tTime
 :ğ
time
.
	`Now
()

6705 
‹¡Name
 :ğ
	`g‘FuncName
()

6706 
funùiÚ
 := "CopyObjectPart(destination, source)"

6707 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6710 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

6711 
os
.
	`G‘’v
(
£rv”Endpošt
),

6712 
os
.
	`G‘’v
(
acûssKey
),

6713 
os
.
	`G‘’v
(
£ü‘Key
),

6714 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6716 
”r
 !ğ
n
 {

6717 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

6722 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

6728 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

6731 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

6734 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

6735 
”r
 !ğ
n
 {

6736 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

6738 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

6740 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

6743 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

6744 
·sswÜd
 := "correct horse battery staple"

6745 
¤ûnüy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
buck‘Name
+
objeùName
))

6747 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

6749 }, 
¤ûnüy±iÚ
)

6750 
”r
 !ğ
n
 {

6751 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

6754 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

6755 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

6758 
de¡Buck‘Name
 :ğ
buck‘Name


6759 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

6760 
v¬
 
d¡’üy±iÚ
 
’üy±
.
S”v”Side


6762 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
})

6763 
”r
 !ğ
n
 {

6764 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

6770 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

6771 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

6772 
’üy±
.
	`SSECİy
(
¤ûnüy±iÚ
).
	`M¬sh®
(
h—d”
)

6773 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

6774 
m‘ad©a
[
k
] = 
v
[0]

6777 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

6778 
”r
 !ğ
n
 {

6779 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6783 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

6784 
”r
 !ğ
n
 {

6785 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6789 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

6790 
”r
 !ğ
n
 {

6791 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6795 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

6796 
”r
 !ğ
n
 {

6797 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

6801 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{}})

6802 
”r
 !ğ
n
 {

6803 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

6806 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

6807 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

6811 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{}

6812 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

6813 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

6814 
”r
 !ğ
n
 {

6815 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

6817 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

6818 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

6819 
”r
 !ğ
n
 {

6820 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

6822 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

6823 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

6826 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

6827 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

6828 
”r
 !ğ
n
 {

6829 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

6831 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

6832 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

6833 
”r
 !ğ
n
 {

6834 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

6836 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

6837 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

6839 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

6840 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

6843 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

6846 
	}
}

6849 
func
 
	$‹¡SSECEnüy±edToSSES3CİyObjeùP¬t
() {

6851 
¡¬tTime
 :ğ
time
.
	`Now
()

6852 
‹¡Name
 :ğ
	`g‘FuncName
()

6853 
funùiÚ
 := "CopyObjectPart(destination, source)"

6854 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

6857 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

6858 
os
.
	`G‘’v
(
£rv”Endpošt
),

6859 
os
.
	`G‘’v
(
acûssKey
),

6860 
os
.
	`G‘’v
(
£ü‘Key
),

6861 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

6863 
”r
 !ğ
n
 {

6864 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

6869 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

6875 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

6878 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

6881 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

6882 
”r
 !ğ
n
 {

6883 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

6885 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

6887 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

6890 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

6891 
·sswÜd
 := "correct horse battery staple"

6892 
¤ûnüy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
buck‘Name
+
objeùName
))

6894 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

6896 }, 
¤ûnüy±iÚ
)

6897 
”r
 !ğ
n
 {

6898 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

6901 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

6902 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

6905 
de¡Buck‘Name
 :ğ
buck‘Name


6906 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

6907 
d¡’üy±iÚ
 :ğ
’üy±
.
	`NewSSE
()

6909 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
})

6910 
”r
 !ğ
n
 {

6911 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

6917 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

6918 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

6919 
’üy±
.
	`SSECİy
(
¤ûnüy±iÚ
).
	`M¬sh®
(
h—d”
)

6920 
d¡’üy±iÚ
.
	`M¬sh®
(
h—d”
)

6922 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

6923 
m‘ad©a
[
k
] = 
v
[0]

6926 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

6927 
”r
 !ğ
n
 {

6928 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6932 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

6933 
”r
 !ğ
n
 {

6934 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6938 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

6939 
”r
 !ğ
n
 {

6940 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

6944 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

6945 
”r
 !ğ
n
 {

6946 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

6950 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{}})

6951 
”r
 !ğ
n
 {

6952 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

6955 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

6956 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

6960 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{}

6961 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

6962 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

6963 
”r
 !ğ
n
 {

6964 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

6966 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

6967 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

6968 
”r
 !ğ
n
 {

6969 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

6971 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

6972 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

6975 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

6976 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

6977 
”r
 !ğ
n
 {

6978 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

6980 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

6981 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

6982 
”r
 !ğ
n
 {

6983 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

6985 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

6986 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

6988 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

6989 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

6992 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

6995 
	}
}

6998 
func
 
	$‹¡UÃnüy±edToSSECCİyObjeùP¬t
() {

7000 
¡¬tTime
 :ğ
time
.
	`Now
()

7001 
‹¡Name
 :ğ
	`g‘FuncName
()

7002 
funùiÚ
 := "CopyObjectPart(destination, source)"

7003 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

7006 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

7007 
os
.
	`G‘’v
(
£rv”Endpošt
),

7008 
os
.
	`G‘’v
(
acûssKey
),

7009 
os
.
	`G‘’v
(
£ü‘Key
),

7010 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

7012 
”r
 !ğ
n
 {

7013 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

7018 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

7024 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

7027 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

7030 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

7031 
”r
 !ğ
n
 {

7032 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

7034 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

7036 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

7039 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

7040 
·sswÜd
 := "correct horse battery staple"

7042 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

7044 }, 
n
)

7045 
”r
 !ğ
n
 {

7046 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

7049 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

7050 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

7053 
de¡Buck‘Name
 :ğ
buck‘Name


7054 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

7055 
d¡’üy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
de¡Buck‘Name
+
de¡ObjeùName
))

7057 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
})

7058 
”r
 !ğ
n
 {

7059 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

7065 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

7066 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

7067 
d¡’üy±iÚ
.
	`M¬sh®
(
h—d”
)

7068 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

7069 
m‘ad©a
[
k
] = 
v
[0]

7072 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

7073 
”r
 !ğ
n
 {

7074 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7078 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

7079 
”r
 !ğ
n
 {

7080 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7084 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

7085 
”r
 !ğ
n
 {

7086 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7090 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

7091 
”r
 !ğ
n
 {

7092 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

7096 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
}})

7097 
”r
 !ğ
n
 {

7098 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

7101 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

7102 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

7106 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
}

7107 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

7108 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7109 
”r
 !ğ
n
 {

7110 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7112 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

7113 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7114 
”r
 !ğ
n
 {

7115 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7117 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

7118 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

7121 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

7122 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7123 
”r
 !ğ
n
 {

7124 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7126 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

7127 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7128 
”r
 !ğ
n
 {

7129 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7131 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

7132 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

7134 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

7135 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

7138 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

7141 
	}
}

7144 
func
 
	$‹¡UÃnüy±edToUÃnüy±edCİyP¬t
() {

7146 
¡¬tTime
 :ğ
time
.
	`Now
()

7147 
‹¡Name
 :ğ
	`g‘FuncName
()

7148 
funùiÚ
 := "CopyObjectPart(destination, source)"

7149 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

7152 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

7153 
os
.
	`G‘’v
(
£rv”Endpošt
),

7154 
os
.
	`G‘’v
(
acûssKey
),

7155 
os
.
	`G‘’v
(
£ü‘Key
),

7156 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

7158 
”r
 !ğ
n
 {

7159 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

7164 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

7170 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

7173 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

7176 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

7177 
”r
 !ğ
n
 {

7178 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

7180 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

7182 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

7185 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

7187 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

7189 }, 
n
)

7190 
”r
 !ğ
n
 {

7191 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

7194 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

7195 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

7198 
de¡Buck‘Name
 :ğ
buck‘Name


7199 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

7201 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{})

7202 
”r
 !ğ
n
 {

7203 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

7209 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

7210 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

7211 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

7212 
m‘ad©a
[
k
] = 
v
[0]

7215 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

7216 
”r
 !ğ
n
 {

7217 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7221 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

7222 
”r
 !ğ
n
 {

7223 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7227 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

7228 
”r
 !ğ
n
 {

7229 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7233 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

7234 
”r
 !ğ
n
 {

7235 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

7239 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{}})

7240 
”r
 !ğ
n
 {

7241 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

7244 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

7245 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

7249 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{}

7250 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

7251 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7252 
”r
 !ğ
n
 {

7253 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7255 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

7256 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7257 
”r
 !ğ
n
 {

7258 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7260 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

7261 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

7264 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

7265 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7266 
”r
 !ğ
n
 {

7267 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7269 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

7270 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7271 
”r
 !ğ
n
 {

7272 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7274 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

7275 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

7277 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

7278 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

7281 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

7284 
	}
}

7287 
func
 
	$‹¡UÃnüy±edToSSES3CİyObjeùP¬t
() {

7289 
¡¬tTime
 :ğ
time
.
	`Now
()

7290 
‹¡Name
 :ğ
	`g‘FuncName
()

7291 
funùiÚ
 := "CopyObjectPart(destination, source)"

7292 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

7295 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

7296 
os
.
	`G‘’v
(
£rv”Endpošt
),

7297 
os
.
	`G‘’v
(
acûssKey
),

7298 
os
.
	`G‘’v
(
£ü‘Key
),

7299 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

7301 
”r
 !ğ
n
 {

7302 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

7307 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

7313 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

7316 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

7319 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

7320 
”r
 !ğ
n
 {

7321 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

7323 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

7325 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

7328 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

7330 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

7332 }, 
n
)

7333 
”r
 !ğ
n
 {

7334 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

7337 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

7338 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

7341 
de¡Buck‘Name
 :ğ
buck‘Name


7342 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

7343 
d¡’üy±iÚ
 :ğ
’üy±
.
	`NewSSE
()

7345 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
})

7346 
”r
 !ğ
n
 {

7347 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

7353 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

7354 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

7355 
d¡’üy±iÚ
.
	`M¬sh®
(
h—d”
)

7357 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

7358 
m‘ad©a
[
k
] = 
v
[0]

7361 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

7362 
”r
 !ğ
n
 {

7363 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7367 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

7368 
”r
 !ğ
n
 {

7369 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7373 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

7374 
”r
 !ğ
n
 {

7375 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7379 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

7380 
”r
 !ğ
n
 {

7381 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

7385 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{}})

7386 
”r
 !ğ
n
 {

7387 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

7390 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

7391 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

7395 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{}

7396 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

7397 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7398 
”r
 !ğ
n
 {

7399 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7401 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

7402 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7403 
”r
 !ğ
n
 {

7404 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7406 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

7407 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

7410 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

7411 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7412 
”r
 !ğ
n
 {

7413 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7415 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

7416 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7417 
”r
 !ğ
n
 {

7418 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7420 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

7421 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

7423 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

7424 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

7427 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

7430 
	}
}

7433 
func
 
	$‹¡SSES3Enüy±edToSSECCİyObjeùP¬t
() {

7435 
¡¬tTime
 :ğ
time
.
	`Now
()

7436 
‹¡Name
 :ğ
	`g‘FuncName
()

7437 
funùiÚ
 := "CopyObjectPart(destination, source)"

7438 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

7441 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

7442 
os
.
	`G‘’v
(
£rv”Endpošt
),

7443 
os
.
	`G‘’v
(
acûssKey
),

7444 
os
.
	`G‘’v
(
£ü‘Key
),

7445 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

7447 
”r
 !ğ
n
 {

7448 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

7453 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

7459 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

7462 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

7465 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

7466 
”r
 !ğ
n
 {

7467 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

7469 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

7471 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

7474 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

7475 
·sswÜd
 := "correct horse battery staple"

7476 
¤cEnüy±iÚ
 :ğ
’üy±
.
	`NewSSE
()

7477 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

7479 }, 
¤cEnüy±iÚ
)

7480 
”r
 !ğ
n
 {

7481 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

7484 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

7485 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

7488 
de¡Buck‘Name
 :ğ
buck‘Name


7489 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

7490 
d¡’üy±iÚ
 :ğ
’üy±
.
	`DeçuÉPBKDF
([]
	`by‹
(
·sswÜd
), []by‹(
de¡Buck‘Name
+
de¡ObjeùName
))

7492 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
})

7493 
”r
 !ğ
n
 {

7494 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

7500 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

7501 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

7502 
d¡’üy±iÚ
.
	`M¬sh®
(
h—d”
)

7503 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

7504 
m‘ad©a
[
k
] = 
v
[0]

7507 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

7508 
”r
 !ğ
n
 {

7509 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7513 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

7514 
”r
 !ğ
n
 {

7515 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7519 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

7520 
”r
 !ğ
n
 {

7521 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7525 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

7526 
”r
 !ğ
n
 {

7527 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

7531 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
}})

7532 
”r
 !ğ
n
 {

7533 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

7536 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

7537 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

7541 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
}

7542 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

7543 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7544 
”r
 !ğ
n
 {

7545 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7547 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

7548 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7549 
”r
 !ğ
n
 {

7550 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7552 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

7553 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

7556 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

7557 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7558 
”r
 !ğ
n
 {

7559 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7561 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

7562 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7563 
”r
 !ğ
n
 {

7564 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7566 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

7567 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

7569 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

7570 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

7573 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

7576 
	}
}

7579 
func
 
	$‹¡SSES3Enüy±edToUÃnüy±edCİyP¬t
() {

7581 
¡¬tTime
 :ğ
time
.
	`Now
()

7582 
‹¡Name
 :ğ
	`g‘FuncName
()

7583 
funùiÚ
 := "CopyObjectPart(destination, source)"

7584 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

7587 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

7588 
os
.
	`G‘’v
(
£rv”Endpošt
),

7589 
os
.
	`G‘’v
(
acûssKey
),

7590 
os
.
	`G‘’v
(
£ü‘Key
),

7591 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

7593 
”r
 !ğ
n
 {

7594 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

7599 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

7605 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

7608 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

7611 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

7612 
”r
 !ğ
n
 {

7613 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

7615 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

7617 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

7620 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

7621 
¤cEnüy±iÚ
 :ğ
’üy±
.
	`NewSSE
()

7623 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

7625 }, 
¤cEnüy±iÚ
)

7626 
”r
 !ğ
n
 {

7627 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

7630 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

7631 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

7634 
de¡Buck‘Name
 :ğ
buck‘Name


7635 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

7637 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{})

7638 
”r
 !ğ
n
 {

7639 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

7645 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

7646 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

7647 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

7648 
m‘ad©a
[
k
] = 
v
[0]

7651 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

7652 
”r
 !ğ
n
 {

7653 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7657 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

7658 
”r
 !ğ
n
 {

7659 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7663 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

7664 
”r
 !ğ
n
 {

7665 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7669 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

7670 
”r
 !ğ
n
 {

7671 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

7675 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{}})

7676 
”r
 !ğ
n
 {

7677 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

7680 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

7681 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

7685 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{}

7686 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

7687 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7688 
”r
 !ğ
n
 {

7689 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7691 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

7692 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7693 
”r
 !ğ
n
 {

7694 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7696 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

7697 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

7700 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

7701 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7702 
”r
 !ğ
n
 {

7703 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7705 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

7706 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7707 
”r
 !ğ
n
 {

7708 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7710 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

7711 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

7713 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

7714 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

7717 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

7720 
	}
}

7723 
func
 
	$‹¡SSES3Enüy±edToSSES3CİyObjeùP¬t
() {

7725 
¡¬tTime
 :ğ
time
.
	`Now
()

7726 
‹¡Name
 :ğ
	`g‘FuncName
()

7727 
funùiÚ
 := "CopyObjectPart(destination, source)"

7728 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

7731 
ş›Á
, 
”r
 :ğ
mšio
.
	`NewV4
(

7732 
os
.
	`G‘’v
(
£rv”Endpošt
),

7733 
os
.
	`G‘’v
(
acûssKey
),

7734 
os
.
	`G‘’v
(
£ü‘Key
),

7735 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

7737 
”r
 !ğ
n
 {

7738 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

7743 
c
 :ğ
mšio
.
CÜe
{
ş›Á
}

7749 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

7752 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

7755 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

7756 
”r
 !ğ
n
 {

7757 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

7759 
deãr
 
	`ş—nupBuck‘
(
buck‘Name
, 
ş›Á
)

7761 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 1024*1024)

7764 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

7765 
¤cEnüy±iÚ
 :ğ
’üy±
.
	`NewSSE
()

7767 
objInfo
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), "", "", 
m­
[
¡ršg
]string{

7769 }, 
¤cEnüy±iÚ
)

7770 
”r
 !ğ
n
 {

7771 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

7774 
objInfo
.
Size
 !ğ
	`št64
(
	`Ën
(
buf
)) {

7775 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", 
fmt
.
	`S´štf
("E¼Ü:‚umb” oàby‹ dÛ nÙ m©ch, wªˆ%v, gÙ %v\n", 
	`Ën
(
buf
), 
objInfo
.
Size
), 
”r
)

7778 
de¡Buck‘Name
 :ğ
buck‘Name


7779 
de¡ObjeùName
 :ğ
objeùName
 + "-dest"

7780 
d¡’üy±iÚ
 :ğ
’üy±
.
	`NewSSE
()

7782 
u¶ßdID
, 
”r
 :ğ
c
.
	`NewMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
PutObjeùO±iÚs
{
S”v”SideEnüy±iÚ
: 
d¡’üy±iÚ
})

7783 
”r
 !ğ
n
 {

7784 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewMuÉ¬tU¶ßd c®Èçed", 
”r
)

7790 
m‘ad©a
 :ğ
	`make
(
m­
[
¡ršg
]string)

7791 
h—d”
 :ğ
	`make
(
h‰p
.
H—d”
)

7792 
d¡’üy±iÚ
.
	`M¬sh®
(
h—d”
)

7794 
k
, 
v
 :ğ
¿nge
 
h—d”
 {

7795 
m‘ad©a
[
k
] = 
v
[0]

7798 
f¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 1, 0, -1, 
m‘ad©a
)

7799 
”r
 !ğ
n
 {

7800 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7804 
¢dP¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 2, 0, -1, 
m‘ad©a
)

7805 
”r
 !ğ
n
 {

7806 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7810 
l¡P¬t
, 
”r
 :ğ
c
.
	`CİyObjeùP¬t
(
buck‘Name
, 
objeùName
, 
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, 3, 0, 1, 
m‘ad©a
)

7811 
”r
 !ğ
n
 {

7812 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeùP¬ˆÿÎ faed", 
”r
)

7816 
_
, 
”r
 = 
c
.
	`Com¶‘eMuÉ¬tU¶ßd
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
u¶ßdID
, []
mšio
.
Com¶‘eP¬t
{
f¡P¬t
, 
¢dP¬t
, 
l¡P¬t
})

7817 
”r
 !ğ
n
 {

7818 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Com¶‘eMuÉ¬tU¶ßd c®Èçed", 
”r
)

7822 
objInfo
, 
”r
 = 
c
.
	`StObjeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
mšio
.
StObjeùO±iÚs
{mšio.
G‘ObjeùO±iÚs
{}})

7823 
”r
 !ğ
n
 {

7824 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "StObjeù c®Èçed", 
”r
)

7827 
objInfo
.
Size
 != (5*1024*1024)*2+1 {

7828 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "De¡š©iÚ objeù ha šcÜ»ù size!", 
”r
)

7832 
g‘O±s
 :ğ
mšio
.
G‘ObjeùO±iÚs
{}

7833 
g‘O±s
.
	`S‘Rªge
(0, 5*1024*1024-1)

7834 
r
, 
_
, 
”r
 :ğ
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7835 
”r
 !ğ
n
 {

7836 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7838 
g‘Buf
 :ğ
	`make
([]
by‹
, 5*1024*1024)

7839 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7840 
”r
 !ğ
n
 {

7841 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7843 !
by‹s
.
	`Equ®
(
g‘Buf
, 
buf
) {

7844 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š fœ¡ 5MB", 
”r
)

7847 
g‘O±s
.
	`S‘Rªge
(5*1024*1024, 0)

7848 
r
, 
_
, 
”r
 = 
c
.
	`G‘Objeù
(
de¡Buck‘Name
, 
de¡ObjeùName
, 
g‘O±s
)

7849 
”r
 !ğ
n
 {

7850 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù c®Èçed", 
”r
)

7852 
g‘Buf
 = 
	`make
([]
by‹
, 5*1024*1024+1)

7853 
_
, 
”r
 = 
io
.
	`R—dFuÎ
(
r
, 
g‘Buf
)

7854 
”r
 !ğ
n
 {

7855 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—d bufã¸çed", 
”r
)

7857 !
by‹s
.
	`Equ®
(
g‘Buf
[:5*1024*1024], 
buf
) {

7858 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š secÚd 5MB", 
”r
)

7860 
g‘Buf
[5*1024*1024] !ğ
buf
[0] {

7861 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙ uÃx³ùed d©¨š†a¡ by‹ oàcİ›d objeù!", 
”r
)

7864 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

7867 
	}
}

7868 
func
 
	$‹¡U£rM‘ad©aCİyšg
() {

7870 
¡¬tTime
 :ğ
time
.
	`Now
()

7871 
‹¡Name
 :ğ
	`g‘FuncName
()

7872 
funùiÚ
 := "CopyObject(destination, source)"

7873 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

7876 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

7877 
os
.
	`G‘’v
(
£rv”Endpošt
),

7878 
os
.
	`G‘’v
(
acûssKey
),

7879 
os
.
	`G‘’v
(
£ü‘Key
),

7880 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

7882 
”r
 !ğ
n
 {

7883 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

7888 
	`‹¡U£rM‘ad©aCİyšgW¿µ”
(
c
)

7889 
	}
}

7891 
func
 
	$‹¡U£rM‘ad©aCİyšgW¿µ”
(
c
 *
mšio
.
Cl›Á
) {

7893 
¡¬tTime
 :ğ
time
.
	`Now
()

7894 
‹¡Name
 :ğ
	`g‘FuncName
()

7895 
funùiÚ
 := "CopyObject(destination, source)"

7896 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

7899 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

7901 
”r
 :ğ
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

7902 
”r
 !ğ
n
 {

7903 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

7907 
ãtchM‘a
 :ğ
	`func
(
objeù
 
¡ršg
è(
h
 
h‰p
.
H—d”
) {

7908 
objInfo
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeù
, 
mšio
.
StObjeùO±iÚs
{})

7909 
”r
 !ğ
n
 {

7910 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

7913 
h
 = 
	`make
(
h‰p
.
H—d”
)

7914 
k
, 
vs
 :ğ
¿nge
 
objInfo
.
M‘ad©a
 {

7915 
¡ršgs
.
	`HasP»fix
(¡ršgs.
	`ToLow”
(
k
), "x-amz-meta-") {

7916 
_
, 
v
 :ğ
¿nge
 
vs
 {

7917 
h
.
	`Add
(
k
, 
v
)

7921  
h


7925 cÚ¡ 
¤cSize
 = 1024 * 1024

7926 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 
¤cSize
)

7927 
m‘ad©a
 :ğ
	`make
(
h‰p
.
H—d”
)

7928 
m‘ad©a
.
	`S‘
("x-amz-meta-myheader", "myvalue")

7929 
m
 :ğ
	`make
(
m­
[
¡ršg
]string)

7930 
m
["x-amz-meta-myheader"] = "myvalue"

7931 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "srcObject",

7932 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
U£rM‘ad©a
: 
m
})

7933 
”r
 !ğ
n
 {

7934 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùW™hM‘ad©¨çed", 
”r
)

7937 !
»æeù
.
	`D“pEqu®
(
m‘ad©a
, 
	`ãtchM‘a
("srcObject")) {

7938 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨m©ch faed", 
”r
)

7943 
¤c
 :ğ
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
n
)

7945 
d¡1
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "d¡Objeù-1", 
n
, 
m­
[
¡ršg
]string{"notmyheader": "notmyvalue"})

7946 
”r
 !ğ
n
 {

7947 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

7953 
¬gs
["sourû"] = 
¤c


7954 
¬gs
["de¡š©iÚ"] = 
d¡1


7955 
”r
 = 
c
.
	`CİyObjeù
(
d¡1
, 
¤c
)

7956 
”r
 !ğ
n
 {

7957 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù faed", 
”r
)

7961 
ex³ùedH—d”s
 :ğ
	`make
(
h‰p
.
H—d”
)

7962 
ex³ùedH—d”s
.
	`S‘
("x-amz-meta-notmyheader", "notmyvalue")

7963 !
»æeù
.
	`D“pEqu®
(
ex³ùedH—d”s
, 
	`ãtchM‘a
("dstObject-1")) {

7964 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨m©ch faed", 
”r
)

7969 
d¡2
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "d¡Objeù-2", 
n
,‚il)

7970 
”r
 !ğ
n
 {

7971 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

7974 
¤c
 = 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
n
)

7978 
¬gs
["sourû"] = 
¤c


7979 
¬gs
["de¡š©iÚ"] = 
d¡2


7980 
”r
 = 
c
.
	`CİyObjeù
(
d¡2
, 
¤c
)

7981 
”r
 !ğ
n
 {

7982 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CİyObjeù faed", 
”r
)

7986 
ex³ùedH—d”s
 = 
m‘ad©a


7987 !
»æeù
.
	`D“pEqu®
(
ex³ùedH—d”s
, 
	`ãtchM‘a
("dstObject-2")) {

7988 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨m©ch faed", 
”r
)

7993 
¤cs
 :ğ[]
mšio
.
SourûInfo
{

7994 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
n
),

7995 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
n
),

7997 
d¡3
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "d¡Objeù-3", 
n
,‚il)

7998 
”r
 !ğ
n
 {

7999 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

8003 
funùiÚ
 = "ComposeObject(destination, sources)"

8004 
¬gs
["sourû"] = 
¤cs


8005 
¬gs
["de¡š©iÚ"] = 
d¡3


8006 
”r
 = 
c
.
	`Compo£Objeù
(
d¡3
, 
¤cs
)

8007 
”r
 !ğ
n
 {

8008 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Compo£Objeù faed", 
”r
)

8013 !
»æeù
.
	`D“pEqu®
(
	`make
(
h‰p
.
H—d”
), 
	`ãtchM‘a
("dstObject-3")) {

8014 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨m©ch faed", 
”r
)

8019 
¤cs
 = []
mšio
.
SourûInfo
{

8020 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
n
),

8021 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeù", 
n
),

8023 
d¡4
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "d¡Objeù-4", 
n
, 
m­
[
¡ršg
]string{"notmyheader": "notmyvalue"})

8024 
”r
 !ğ
n
 {

8025 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "NewDe¡š©iÚInfØçed", 
”r
)

8029 
funùiÚ
 = "ComposeObject(destination, sources)"

8030 
¬gs
["sourû"] = 
¤cs


8031 
¬gs
["de¡š©iÚ"] = 
d¡4


8032 
”r
 = 
c
.
	`Compo£Objeù
(
d¡4
, 
¤cs
)

8033 
”r
 !ğ
n
 {

8034 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Compo£Objeù faed", 
”r
)

8039 
ex³ùedH—d”s
 = 
	`make
(
h‰p
.
H—d”
)

8040 
ex³ùedH—d”s
.
	`S‘
("x-amz-meta-notmyheader", "notmyvalue")

8041 !
»æeù
.
	`D“pEqu®
(
ex³ùedH—d”s
, 
	`ãtchM‘a
("dstObject-4")) {

8042 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨m©ch faed", 
”r
)

8047 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

8048 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

8052 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

8053 
	}
}

8055 
func
 
	$‹¡U£rM‘ad©aCİyšgV2
() {

8057 
¡¬tTime
 :ğ
time
.
	`Now
()

8058 
‹¡Name
 :ğ
	`g‘FuncName
()

8059 
funùiÚ
 := "CopyObject(destination, source)"

8060 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

8063 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

8064 
os
.
	`G‘’v
(
£rv”Endpošt
),

8065 
os
.
	`G‘’v
(
acûssKey
),

8066 
os
.
	`G‘’v
(
£ü‘Key
),

8067 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8069 
”r
 !ğ
n
 {

8070 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v2 objeù c»©iÚ faed", 
”r
)

8075 
	`‹¡U£rM‘ad©aCİyšgW¿µ”
(
c
)

8076 
	}
}

8078 
func
 
	$‹¡StÜageCÏssM‘ad©aPutObjeù
() {

8080 
¡¬tTime
 :ğ
time
.
	`Now
()

8081 
funùiÚ
 := "testStorageClassMetadataPutObject()"

8082 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

8083 
‹¡Name
 :ğ
	`g‘FuncName
()

8086 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

8087 
os
.
	`G‘’v
(
£rv”Endpošt
),

8088 
os
.
	`G‘’v
(
acûssKey
),

8089 
os
.
	`G‘’v
(
£ü‘Key
),

8090 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8092 
”r
 !ğ
n
 {

8093 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

8098 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

8100 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

8101 
”r
 !ğ
n
 {

8102 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

8106 
ãtchM‘a
 :ğ
	`func
(
objeù
 
¡ršg
è(
h
 
h‰p
.
H—d”
) {

8107 
objInfo
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeù
, 
mšio
.
StObjeùO±iÚs
{})

8108 
”r
 !ğ
n
 {

8109 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

8112 
h
 = 
	`make
(
h‰p
.
H—d”
)

8113 
k
, 
vs
 :ğ
¿nge
 
objInfo
.
M‘ad©a
 {

8114 
¡ršgs
.
	`HasP»fix
(¡ršgs.
	`ToLow”
(
k
), "x-amz-storage-class") {

8115 
_
, 
v
 :ğ
¿nge
 
vs
 {

8116 
h
.
	`Add
(
k
, 
v
)

8120  
h


8123 
m‘ad©a
 :ğ
	`make
(
h‰p
.
H—d”
)

8124 
m‘ad©a
.
	`S‘
("x-amz-storage-class", "REDUCED_REDUNDANCY")

8126 
em±yM‘ad©a
 :ğ
	`make
(
h‰p
.
H—d”
)

8128 cÚ¡ 
¤cSize
 = 1024 * 1024

8129 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 
¤cSize
)

8131 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "srcObjectRRSClass",

8132 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
StÜageCÏss
: "REDUCED_REDUNDANCY"})

8133 
”r
 !ğ
n
 {

8134 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

8139 
»tuºedM‘a
 :ğ
	`ãtchM‘a
("srcObjectRRSClass")

8142 !
»æeù
.
	`D“pEqu®
(
m‘ad©a
, 
»tuºedM‘a
è&& !»æeù.D“pEqu®(
em±yM‘ad©a
,„eturnedMeta) {

8143 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨m©ch faed", 
”r
)

8147 
m‘ad©a
 = 
	`make
(
h‰p
.
H—d”
)

8148 
m‘ad©a
.
	`S‘
("x-amz-storage-class", "STANDARD")

8150 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "srcObjectSSClass",

8151 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
StÜageCÏss
: "STANDARD"})

8152 
”r
 !ğ
n
 {

8153 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

8156 
»æeù
.
	`D“pEqu®
(
m‘ad©a
, 
	`ãtchM‘a
("srcObjectSSClass")) {

8157 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨v”ifiÿtiÚ faed, STANDARD stÜagşas should‚Ù b¨·¹ oà»¥Ú£ m‘ad©a", 
”r
)

8161 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

8162 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

8165 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

8166 
	}
}

8168 
func
 
	$‹¡StÜageCÏssInv®idM‘ad©aPutObjeù
() {

8170 
¡¬tTime
 :ğ
time
.
	`Now
()

8171 
funùiÚ
 := "testStorageClassInvalidMetadataPutObject()"

8172 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

8173 
‹¡Name
 :ğ
	`g‘FuncName
()

8176 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

8177 
os
.
	`G‘’v
(
£rv”Endpošt
),

8178 
os
.
	`G‘’v
(
acûssKey
),

8179 
os
.
	`G‘’v
(
£ü‘Key
),

8180 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8182 
”r
 !ğ
n
 {

8183 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

8188 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

8190 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

8191 
”r
 !ğ
n
 {

8192 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

8196 cÚ¡ 
¤cSize
 = 1024 * 1024

8197 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 
¤cSize
)

8199 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "srcObjectRRSClass",

8200 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
StÜageCÏss
: "INVALID_STORAGE_CLASS"})

8201 
”r
 =ğ
n
 {

8202 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù w™h inv®id stÜagşas ·s£d, wa ex³ùedØç", 
”r
)

8206 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

8207 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

8210 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

8211 
	}
}

8213 
func
 
	$‹¡StÜageCÏssM‘ad©aCİyObjeù
() {

8215 
¡¬tTime
 :ğ
time
.
	`Now
()

8216 
funùiÚ
 := "testStorageClassMetadataCopyObject()"

8217 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

8218 
‹¡Name
 :ğ
	`g‘FuncName
()

8221 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

8222 
os
.
	`G‘’v
(
£rv”Endpošt
),

8223 
os
.
	`G‘’v
(
acûssKey
),

8224 
os
.
	`G‘’v
(
£ü‘Key
),

8225 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8227 
”r
 !ğ
n
 {

8228 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØv4 cl›Á objeù c»©iÚ faed", 
”r
)

8233 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test")

8235 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

8236 
”r
 !ğ
n
 {

8237 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

8241 
ãtchM‘a
 :ğ
	`func
(
objeù
 
¡ršg
è(
h
 
h‰p
.
H—d”
) {

8242 
objInfo
, 
”r
 :ğ
c
.
	`StObjeù
(
buck‘Name
, 
objeù
, 
mšio
.
StObjeùO±iÚs
{})

8243 
”r
 !ğ
n
 {

8244 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Sˆçed", 
”r
)

8247 
h
 = 
	`make
(
h‰p
.
H—d”
)

8248 
k
, 
vs
 :ğ
¿nge
 
objInfo
.
M‘ad©a
 {

8249 
¡ršgs
.
	`HasP»fix
(¡ršgs.
	`ToLow”
(
k
), "x-amz-storage-class") {

8250 
_
, 
v
 :ğ
¿nge
 
vs
 {

8251 
h
.
	`Add
(
k
, 
v
)

8255  
h


8258 
m‘ad©a
 :ğ
	`make
(
h‰p
.
H—d”
)

8259 
m‘ad©a
.
	`S‘
("x-amz-storage-class", "REDUCED_REDUNDANCY")

8261 
em±yM‘ad©a
 :ğ
	`make
(
h‰p
.
H—d”
)

8263 cÚ¡ 
¤cSize
 = 1024 * 1024

8264 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("abcde"), 
¤cSize
)

8267 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "srcObjectRRSClass",

8268 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
StÜageCÏss
: "REDUCED_REDUNDANCY"})

8269 
”r
 !ğ
n
 {

8270 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

8275 
¤c
 :ğ
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeùRRSCÏss", 
n
)

8276 
d¡
, 
”r
 :ğ
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "¤cObjeùRRSCÏssCİy", 
n
,‚il)

8277 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

8280 
»tuºedM‘a
 :ğ
	`ãtchM‘a
("srcObjectRRSClassCopy")

8283 !
»æeù
.
	`D“pEqu®
(
m‘ad©a
, 
»tuºedM‘a
è&& !»æeù.D“pEqu®(
em±yM‘ad©a
,„eturnedMeta) {

8284 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨m©ch faed", 
”r
)

8288 
m‘ad©a
 = 
	`make
(
h‰p
.
H—d”
)

8289 
m‘ad©a
.
	`S‘
("x-amz-storage-class", "STANDARD")

8292 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, "srcObjectSSClass",

8293 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
StÜageCÏss
: "STANDARD"})

8294 
”r
 !ğ
n
 {

8295 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

8300 
¤c
 = 
mšio
.
	`NewSourûInfo
(
buck‘Name
, "¤cObjeùSSCÏss", 
n
)

8301 
d¡
, 
”r
 = 
mšio
.
	`NewDe¡š©iÚInfo
(
buck‘Name
, "¤cObjeùSSCÏssCİy", 
n
,‚il)

8302 
c
.
	`CİyObjeù
(
d¡
, 
¤c
)

8305 
»æeù
.
	`D“pEqu®
(
m‘ad©a
, 
	`ãtchM‘a
("srcObjectSSClassCopy")) {

8306 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "M‘ad©¨v”ifiÿtiÚ faed, STANDARD stÜagşas should‚Ù b¨·¹ oà»¥Ú£ m‘ad©a", 
”r
)

8310 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

8311 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

8314 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

8315 
	}
}

8318 
func
 
	$‹¡PutObjeùNoL’gthV2
() {

8320 
¡¬tTime
 :ğ
time
.
	`Now
()

8321 
‹¡Name
 :ğ
	`g‘FuncName
()

8322 
funùiÚ
 := "PutObject(bucketName, objectName,„eader, size, opts)"

8323 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

8331 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

8334 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

8335 
os
.
	`G‘’v
(
£rv”Endpošt
),

8336 
os
.
	`G‘’v
(
acûssKey
),

8337 
os
.
	`G‘’v
(
£ü‘Key
),

8338 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8340 
”r
 !ğ
n
 {

8341 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v2 objeù c»©iÚ faed", 
”r
)

8349 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

8352 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

8353 
¬gs
["buck‘Name"] = 
buck‘Name


8356 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

8357 
”r
 !ğ
n
 {

8358 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

8362 
objeùName
 :ğ
buck‘Name
 + "unique"

8363 
¬gs
["objeùName"] = 
objeùName


8365 
bufSize
 :ğ
d©aFeM­
["datafile-65-MB"]

8366 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-65-MB")

8367 
deãr
 
»ad”
.
	`Clo£
()

8368 
¬gs
["size"] = 
bufSize


8371 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, -1, 
mšio
.
PutObjeùO±iÚs
{})

8373 
”r
 !ğ
n
 {

8374 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùW™hSizçed", 
”r
)

8377 
n
 !ğ
	`št64
(
bufSize
) {

8378 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed u¶ßd objeù siz"+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
n
), 
”r
)

8383 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

8384 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

8388 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

8389 
	}
}

8392 
func
 
	$‹¡PutObjeùsUnknownV2
() {

8394 
¡¬tTime
 :ğ
time
.
	`Now
()

8395 
‹¡Name
 :ğ
	`g‘FuncName
()

8396 
funùiÚ
 := "PutObject(bucketName, objectName,„eader,size,opts)"

8397 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

8405 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

8408 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

8409 
os
.
	`G‘’v
(
£rv”Endpošt
),

8410 
os
.
	`G‘’v
(
acûssKey
),

8411 
os
.
	`G‘’v
(
£ü‘Key
),

8412 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8414 
”r
 !ğ
n
 {

8415 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v2 objeù c»©iÚ faed", 
”r
)

8423 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

8426 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

8427 
¬gs
["buck‘Name"] = 
buck‘Name


8430 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

8431 
”r
 !ğ
n
 {

8432 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

8438 
i
 := 1; i <= 4; i++ {

8441 
½e
, 
wpe
 :ğ
io
.
	`Pe
()

8442 
deãr
 
½e
.
	`Clo£
()

8443 
go
 
	`func
() {

8444 
b
 :ğ[]
	`by‹
("test")

8445 
wpe
.
	`Wr™e
(
b
)

8446 
wpe
.
	`Clo£
()

8450 
objeùName
 :ğ
fmt
.
	`S´štf
("%sunique%d", 
buck‘Name
, 
i
)

8451 
¬gs
["objeùName"] = 
objeùName


8453 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
½e
, -1, 
mšio
.
PutObjeùO±iÚs
{})

8454 
”r
 !ğ
n
 {

8455 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùSŒ—mšg faed", 
”r
)

8458 
¬gs
["size"] = 
n


8459 
n
 !ğ
	`št64
(4) {

8460 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed u¶ßd objeù siz"+
	`¡ršg
(4)+" gÙ "+¡ršg(
n
), 
”r
)

8467 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

8468 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

8472 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

8473 
	}
}

8476 
func
 
	$‹¡PutObjeù0By‹V2
() {

8478 
¡¬tTime
 :ğ
time
.
	`Now
()

8479 
‹¡Name
 :ğ
	`g‘FuncName
()

8480 
funùiÚ
 := "PutObject(bucketName, objectName,„eader, size, opts)"

8481 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

8489 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

8492 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

8493 
os
.
	`G‘’v
(
£rv”Endpošt
),

8494 
os
.
	`G‘’v
(
acûssKey
),

8495 
os
.
	`G‘’v
(
£ü‘Key
),

8496 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8498 
”r
 !ğ
n
 {

8499 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v2 objeù c»©iÚ faed", 
”r
)

8507 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

8510 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

8511 
¬gs
["buck‘Name"] = 
buck‘Name


8514 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

8515 
”r
 !ğ
n
 {

8516 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

8520 
objeùName
 :ğ
buck‘Name
 + "unique"

8521 
¬gs
["objeùName"] = 
objeùName


8522 
¬gs
["İts"] = 
mšio
.
PutObjeùO±iÚs
{}

8525 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
([]
	`by‹
("")), 0, 
mšio
.
PutObjeùO±iÚs
{})

8527 
”r
 !ğ
n
 {

8528 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùW™hSizçed", 
”r
)

8531 
n
 != 0 {

8532 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed u¶ßd objeù siz0 buˆgÙ "+
	`¡ršg
(
n
), 
”r
)

8537 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

8538 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

8542 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

8543 
	}
}

8546 
func
 
	$‹¡Compo£ObjeùE¼ÜCa£s
() {

8548 
¡¬tTime
 :ğ
time
.
	`Now
()

8549 
‹¡Name
 :ğ
	`g‘FuncName
()

8550 
funùiÚ
 := "ComposeObject(destination, sourceList)"

8551 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

8554 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

8555 
os
.
	`G‘’v
(
£rv”Endpošt
),

8556 
os
.
	`G‘’v
(
acûssKey
),

8557 
os
.
	`G‘’v
(
£ü‘Key
),

8558 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8560 
”r
 !ğ
n
 {

8561 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

8565 
	`‹¡Compo£ObjeùE¼ÜCa£sW¿µ”
(
c
)

8566 
	}
}

8569 
func
 
	$‹¡Compo£10KSourûs
() {

8571 
¡¬tTime
 :ğ
time
.
	`Now
()

8572 
‹¡Name
 :ğ
	`g‘FuncName
()

8573 
funùiÚ
 := "ComposeObject(destination, sourceList)"

8574 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

8577 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

8578 
os
.
	`G‘’v
(
£rv”Endpošt
),

8579 
os
.
	`G‘’v
(
acûssKey
),

8580 
os
.
	`G‘’v
(
£ü‘Key
),

8581 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8583 
”r
 !ğ
n
 {

8584 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á objeù c»©iÚ faed", 
”r
)

8588 
	`‹¡Compo£MuÉËSourûs
(
c
)

8589 
	}
}

8592 
func
 
	$‹¡FunùiÚ®V2
() {

8594 
¡¬tTime
 :ğ
time
.
	`Now
()

8595 
‹¡Name
 :ğ
	`g‘FuncName
()

8596 
funùiÚ
 := "testFunctionalV2()"

8597 
funùiÚAÎ
 := ""

8598 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{}

8601 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

8603 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

8604 
os
.
	`G‘’v
(
£rv”Endpošt
),

8605 
os
.
	`G‘’v
(
acûssKey
),

8606 
os
.
	`G‘’v
(
£ü‘Key
),

8607 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

8609 
”r
 !ğ
n
 {

8610 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v2 objeù c»©iÚ faed", 
”r
)

8618 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

8621 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

8622 
loÿtiÚ
 := "us-east-1"

8624 
funùiÚ
 = "MakeBucket(bucketName,†ocation)"

8625 
funùiÚAÎ
 = "MakeBucket(bucketName,†ocation)"

8626 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8627 "buck‘Name": 
buck‘Name
,

8628 "loÿtiÚ": 
loÿtiÚ
,

8630 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, 
loÿtiÚ
)

8631 
”r
 !ğ
n
 {

8632 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

8637 
feName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

8638 
fe
, 
”r
 :ğ
os
.
	`C»©e
(
feName
)

8639 
”r
 !ğ
n
 {

8640 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "fü—‹ faed", 
”r
)

8643 
i
 := 0; i < 3; i++ {

8644 
buf
 :ğ
	`make
([]
by‹
, 
¿nd
.
	`IÁn
(1<<19))

8645 
_
, 
”r
 = 
fe
.
	`Wr™e
(
buf
)

8646 
”r
 !ğ
n
 {

8647 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "fwr™çed", 
”r
)

8651 
fe
.
	`Clo£
()

8654 
v¬
 
exi¡s
 
boŞ


8655 
funùiÚ
 = "BucketExists(bucketName)"

8656 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8657 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8658 "buck‘Name": 
buck‘Name
,

8660 
exi¡s
, 
”r
 = 
c
.
	`Buck‘Exi¡s
(
buck‘Name
)

8661 
”r
 !ğ
n
 {

8662 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Buck‘Exi¡ çed", 
”r
)

8665 !
exi¡s
 {

8666 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Could‚Ù fšdƒxi¡šg buck‘ "+
buck‘Name
, 
”r
)

8671 
funùiÚ
 = "SetBucketPolicy(bucketName, bucketPolicy)"

8672 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8674 
»adWr™ePŞicy
 := `{"Version": "2012-10-17","Statement": [{"Action": ["s3:ListBucketMultipartUploads", "s3:ListBucket"],"Effect": "Allow","Principal": {"AWS": ["*"]},"Resource": ["arn:aws:s3:::` + bucketName + `"],"Sid": ""}]}`

8676 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8677 "buck‘Name": 
buck‘Name
,

8678 "buck‘PŞicy": 
»adWr™ePŞicy
,

8680 
”r
 = 
c
.
	`S‘Buck‘PŞicy
(
buck‘Name
, 
»adWr™ePŞicy
)

8682 
”r
 !ğ
n
 {

8683 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "S‘Buck‘PŞicy faed", 
”r
)

8688 
funùiÚ
 = "ListBuckets()"

8689 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8690 
¬gs
 = 
n


8691 
buck‘s
, 
”r
 :ğ
c
.
	`Li¡Buck‘s
()

8692 
	`Ën
(
buck‘s
) == 0 {

8693 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Li¡ buck‘ ÿÂÙ bem±y", 
”r
)

8696 
”r
 !ğ
n
 {

8697 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Li¡Buck‘ çed", 
”r
)

8702 
buck‘Found
 :ğ
çl£


8703 
_
, 
buck‘
 :ğ
¿nge
 
buck‘s
 {

8704 
buck‘
.
Name
 =ğ
buck‘Name
 {

8705 
buck‘Found
 = 
Œue


8710 !
buck‘Found
 {

8711 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Buck‘ "+
buck‘Name
+"nÙ found", 
”r
)

8715 
objeùName
 :ğ
buck‘Name
 + "unique"

8718 
buf
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("n"), 
¿nd
.
	`IÁn
(1<<19))

8720 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8721 "buck‘Name": 
buck‘Name
,

8722 "objeùName": 
objeùName
,

8725 
n
, 
”r
 :ğ
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{})

8726 
”r
 !ğ
n
 {

8727 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

8730 
n
 !ğ
	`št64
(
	`Ën
(
buf
)) {

8731 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed u¶ßded objeù†’gth "+
	`¡ršg
(
	`Ën
(
buf
))+" gÙ "+¡ršg(
n
), 
”r
)

8735 
objeùNameNoL’gth
 :ğ
objeùName
 + "-nolength"

8736 
¬gs
["objeùName"] = 
objeùNameNoL’gth


8737 
n
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùNameNoL’gth
, 
by‹s
.
	`NewR—d”
(
buf
), 
	`št64
(
	`Ën
(buf)), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

8738 
”r
 !ğ
n
 {

8739 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

8743 
n
 !ğ
	`št64
(
	`Ën
(
buf
)) {

8744 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Ex³ùed u¶ßded objeù†’gth "+
	`¡ršg
(
	`Ën
(
buf
))+" gÙ "+¡ršg(
n
), 
”r
)

8749 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

8750 
deãr
 
	`şo£
(
dÚeCh
)

8752 
objFound
 :ğ
çl£


8753 
isRecursive
 :ğ
Œue


8754 
funùiÚ
 = "ListObjects(bucketName, objectName, isRecursive, doneCh)"

8755 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8756 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8757 "buck‘Name": 
buck‘Name
,

8758 "objeùName": 
objeùName
,

8759 "isRecursive": 
isRecursive
,

8761 
obj
 :ğ
¿nge
 
c
.
	`Li¡Objeùs
(
buck‘Name
, 
objeùName
, 
isRecursive
, 
dÚeCh
) {

8762 
obj
.
Key
 =ğ
objeùName
 {

8763 
objFound
 = 
Œue


8767 !
objFound
 {

8768 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Could‚Ù fšdƒxi¡šg objeù "+
objeùName
, 
”r
)

8772 
šcompObjNÙFound
 :ğ
Œue


8773 
funùiÚ
 = "ListIncompleteUploads(bucketName, objectName, isRecursive, doneCh)"

8774 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8775 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8776 "buck‘Name": 
buck‘Name
,

8777 "objeùName": 
objeùName
,

8778 "isRecursive": 
isRecursive
,

8780 
objIncom¶
 :ğ
¿nge
 
c
.
	`Li¡Incom¶‘eU¶ßds
(
buck‘Name
, 
objeùName
, 
isRecursive
, 
dÚeCh
) {

8781 
objIncom¶
.
Key
 != "" {

8782 
šcompObjNÙFound
 = 
çl£


8786 !
šcompObjNÙFound
 {

8787 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "UÃx³ùed dªglšg incom¶‘u¶ßd found", 
”r
)

8791 
funùiÚ
 = "GetObject(bucketName, objectName)"

8792 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8793 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8794 "buck‘Name": 
buck‘Name
,

8795 "objeùName": 
objeùName
,

8797 
ÃwR—d”
, 
”r
 :ğ
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

8798 
”r
 !ğ
n
 {

8799 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

8803 
ÃwR—dBy‹s
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
ÃwR—d”
)

8804 
”r
 !ğ
n
 {

8805 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

8808 
ÃwR—d”
.
	`Clo£
()

8810 !
by‹s
.
	`Equ®
(
ÃwR—dBy‹s
, 
buf
) {

8811 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "By‹ mism©ch", 
”r
)

8815 
funùiÚ
 = "FGetObject(bucketName, objectName, fileName)"

8816 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8817 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8818 "buck‘Name": 
buck‘Name
,

8819 "objeùName": 
objeùName
,

8820 "feName": 
feName
 + "-f",

8822 
”r
 = 
c
.
	`FG‘Objeù
(
buck‘Name
, 
objeùName
, 
feName
+"-f", 
mšio
.
G‘ObjeùO±iÚs
{})

8823 
”r
 !ğ
n
 {

8824 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Fg‘Objeù faed", 
”r
)

8829 
funùiÚ
 = "PresignedHeadObject(bucketName, objectName,ƒxpires,„eqParams)"

8830 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8831 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8832 "buck‘Name": 
buck‘Name
,

8833 "objeùName": 
objeùName
,

8834 "expœes": 3600 * 
time
.
SecÚd
,

8836 
´esigÃdH—dURL
, 
”r
 :ğ
c
.
	`P»sigÃdH—dObjeù
(
buck‘Name
, 
objeùName
, 3600*
time
.
SecÚd
, 
n
)

8837 
”r
 !ğ
n
 {

8838 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdH—dObjeù faed", 
”r
)

8842 
»¥
, 
”r
 :ğ
h‰p
.
	`H—d
(
´esigÃdH—dURL
.
	`SŒšg
())

8843 
”r
 !ğ
n
 {

8844 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdH—dObjeù URL h—d„eque¡ faed", 
”r
)

8847 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

8848 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdH—dObjeù URL„‘uº ¡©u "+
	`¡ršg
(
»¥
.
StusCode
), 
”r
)

8851 
»¥
.
H—d”
.
	`G‘
("ETag") == "" {

8852 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "GÙƒm±y ETag", 
”r
)

8855 
»¥
.
Body
.
	`Clo£
()

8858 
funùiÚ
 = "PresignedGetObject(bucketName, objectName,ƒxpires,„eqParams)"

8859 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8860 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8861 "buck‘Name": 
buck‘Name
,

8862 "objeùName": 
objeùName
,

8863 "expœes": 3600 * 
time
.
SecÚd
,

8865 
´esigÃdG‘URL
, 
”r
 :ğ
c
.
	`P»sigÃdG‘Objeù
(
buck‘Name
, 
objeùName
, 3600*
time
.
SecÚd
, 
n
)

8866 
”r
 !ğ
n
 {

8867 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù faed", 
”r
)

8871 
»¥
, 
”r
 = 
h‰p
.
	`G‘
(
´esigÃdG‘URL
.
	`SŒšg
())

8872 
”r
 !ğ
n
 {

8873 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù URL GET„eque¡ faed", 
”r
)

8876 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

8877 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù URL„‘uº ¡©u "+
	`¡ršg
(
»¥
.
StusCode
), 
”r
)

8880 
ÃwP»sigÃdBy‹s
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»¥
.
Body
)

8881 
”r
 !ğ
n
 {

8882 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

8885 
»¥
.
Body
.
	`Clo£
()

8886 !
by‹s
.
	`Equ®
(
ÃwP»sigÃdBy‹s
, 
buf
) {

8887 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "By‹ mism©ch", 
”r
)

8892 
»qP¬ams
 :ğ
	`make
(
u¾
.
V®ues
)

8893 
»qP¬ams
.
	`S‘
("response-content-disposition", "attachment; filename=\"test.txt\"")

8895 
¬gs
["»qP¬ams"] = 
»qP¬ams


8896 
´esigÃdG‘URL
, 
”r
 = 
c
.
	`P»sigÃdG‘Objeù
(
buck‘Name
, 
objeùName
, 3600*
time
.
SecÚd
, 
»qP¬ams
)

8897 
”r
 !ğ
n
 {

8898 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù faed", 
”r
)

8902 
»¥
, 
”r
 = 
h‰p
.
	`G‘
(
´esigÃdG‘URL
.
	`SŒšg
())

8903 
”r
 !ğ
n
 {

8904 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù URL GET„eque¡ faed", 
”r
)

8907 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

8908 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdG‘Objeù URL„‘uº ¡©u "+
	`¡ršg
(
»¥
.
StusCode
), 
”r
)

8911 
ÃwP»sigÃdBy‹s
, 
”r
 = 
iout
.
	`R—dAÎ
(
»¥
.
Body
)

8912 
”r
 !ğ
n
 {

8913 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

8916 !
by‹s
.
	`Equ®
(
ÃwP»sigÃdBy‹s
, 
buf
) {

8917 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "By‹ mism©ch", 
”r
)

8921 
»¥
.
H—d”
.
	`G‘
("Content-Disposition") != "attachment; filename=\"test.txt\"" {

8922 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "wrÚg CÚ‹Á-Di¥os™iÚ„eûived ", 
”r
)

8926 
funùiÚ
 = "PresignedPutObject(bucketName, objectName,ƒxpires)"

8927 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8928 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8929 "buck‘Name": 
buck‘Name
,

8930 "objeùName": 
objeùName
 + "-presigned",

8931 "expœes": 3600 * 
time
.
SecÚd
,

8933 
´esigÃdPutURL
, 
”r
 :ğ
c
.
	`P»sigÃdPutObjeù
(
buck‘Name
, 
objeùName
+"-´esigÃd", 3600*
time
.
SecÚd
)

8934 
”r
 !ğ
n
 {

8935 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "P»sigÃdPutObjeù faed", 
”r
)

8940 
buf
 = 
by‹s
.
	`R•—t
([]
	`by‹
("1"), 
¿nd
.
	`IÁn
(1<<10)+32*1024)

8942 
»q
, 
”r
 :ğ
h‰p
.
	`NewReque¡
("PUT", 
´esigÃdPutURL
.
	`SŒšg
(), 
by‹s
.
	`NewR—d”
(
buf
))

8943 
”r
 !ğ
n
 {

8944 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "HTTP„eque¡ØP»sigÃdPutObjeù URL faed", 
”r
)

8947 
h‰pCl›Á
 :ğ&
h‰p
.
Cl›Á
{

8951 
Timeout
: 30 * 
time
.
SecÚd
,

8952 
T¿n¥Üt
: 
h‰p
.
DeçuÉT¿n¥Üt
,

8954 
»¥
, 
”r
 = 
h‰pCl›Á
.
	`Do
(
»q
)

8955 
”r
 !ğ
n
 {

8956 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "HTTP„eque¡ØP»sigÃdPutObjeù URL faed", 
”r
)

8960 
funùiÚ
 = "GetObject(bucketName, objectName)"

8961 
funùiÚAÎ
 +ğ", " + 
funùiÚ


8962 
¬gs
 = 
m­
[
¡ršg
]
š‹rçû
{}{

8963 "buck‘Name": 
buck‘Name
,

8964 "objeùName": 
objeùName
 + "-presigned",

8966 
ÃwR—d”
, 
”r
 = 
c
.
	`G‘Objeù
(
buck‘Name
, 
objeùName
+"-´esigÃd", 
mšio
.
G‘ObjeùO±iÚs
{})

8967 
”r
 !ğ
n
 {

8968 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘Objeù faed", 
”r
)

8972 
ÃwR—dBy‹s
, 
”r
 = 
iout
.
	`R—dAÎ
(
ÃwR—d”
)

8973 
”r
 !ğ
n
 {

8974 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "R—dAÎ faed", 
”r
)

8977 
ÃwR—d”
.
	`Clo£
()

8979 !
by‹s
.
	`Equ®
(
ÃwR—dBy‹s
, 
buf
) {

8980 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "By‹ mism©ch", 
”r
)

8985 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

8986 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

8990 
”r
 = 
os
.
	`Remove
(
feName
);ƒ¼ !ğ
n
 {

8991 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "F»movçed", 
”r
)

8994 
”r
 = 
os
.
	`Remove
(
feName
 + "-f");ƒ¼ !ğ
n
 {

8995 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "F»move çed", 
”r
)

8998 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚAÎ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

8999 
	}
}

9002 
func
 
	$‹¡G‘ObjeùW™hCÚ‹xt
() {

9004 
¡¬tTime
 :ğ
time
.
	`Now
()

9005 
‹¡Name
 :ğ
	`g‘FuncName
()

9006 
funùiÚ
 := "GetObjectWithContext(ctx, bucketName, objectName)"

9007 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

9013 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

9016 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

9017 
os
.
	`G‘’v
(
£rv”Endpošt
),

9018 
os
.
	`G‘’v
(
acûssKey
),

9019 
os
.
	`G‘’v
(
£ü‘Key
),

9020 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

9022 
”r
 !ğ
n
 {

9023 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v4 objeù c»©iÚ faed", 
”r
)

9031 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

9034 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

9035 
¬gs
["buck‘Name"] = 
buck‘Name


9038 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

9039 
”r
 !ğ
n
 {

9040 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

9044 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

9045 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

9046 
deãr
 
»ad”
.
	`Clo£
()

9048 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

9049 
¬gs
["objeùName"] = 
objeùName


9051 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

9052 
”r
 !ğ
n
 {

9053 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

9057 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Nªo£cÚd
)

9058 
¬gs
["ùx"] = 
ùx


9059 
deãr
 
	`ÿnûl
()

9061 
r
, 
”r
 :ğ
c
.
	`G‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

9062 
”r
 !ğ
n
 {

9063 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùW™hCÚ‹xˆçed uÃx³ùedly", 
”r
)

9067 
_
, 
”r
 = 
r
.
	`St
();ƒ¼ =ğ
n
 {

9068 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùW™hCÚ‹xˆshould fa oÀshÜˆtimeout", 
”r
)

9071 
r
.
	`Clo£
()

9073 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

9074 
¬gs
["ùx"] = 
ùx


9075 
deãr
 
	`ÿnûl
()

9078 
r
, 
”r
 = 
c
.
	`G‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

9079 
”r
 !ğ
n
 {

9080 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùW™hCÚ‹xˆçed", 
”r
)

9084 
¡
, 
”r
 :ğ
r
.
	`St
()

9085 
”r
 !ğ
n
 {

9086 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "objeù SˆÿÎ faed", 
”r
)

9089 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

9090 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ š sˆdÛ nÙ m©ch: wªˆ"+
	`¡ršg
(
bufSize
)+", gÙ"+¡ršg(
¡
.
Size
), 
”r
)

9093 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

9094 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "objeù Clo£(èÿÎ faed", 
”r
)

9099 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

9100 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

9104 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

9106 
	}
}

9109 
func
 
	$‹¡FG‘ObjeùW™hCÚ‹xt
() {

9111 
¡¬tTime
 :ğ
time
.
	`Now
()

9112 
‹¡Name
 :ğ
	`g‘FuncName
()

9113 
funùiÚ
 := "FGetObjectWithContext(ctx, bucketName, objectName, fileName)"

9114 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

9121 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

9124 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

9125 
os
.
	`G‘’v
(
£rv”Endpošt
),

9126 
os
.
	`G‘’v
(
acûssKey
),

9127 
os
.
	`G‘’v
(
£ü‘Key
),

9128 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

9130 
”r
 !ğ
n
 {

9131 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v4 objeù c»©iÚ faed", 
”r
)

9139 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

9142 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

9143 
¬gs
["buck‘Name"] = 
buck‘Name


9146 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

9147 
”r
 !ğ
n
 {

9148 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

9152 
bufSize
 :ğ
d©aFeM­
["datafile-1-MB"]

9153 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-1-MB")

9154 
deãr
 
»ad”
.
	`Clo£
()

9156 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

9157 
¬gs
["objeùName"] = 
objeùName


9159 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

9160 
”r
 !ğ
n
 {

9161 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

9165 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Nªo£cÚd
)

9166 
¬gs
["ùx"] = 
ùx


9167 
deãr
 
	`ÿnûl
()

9169 
feName
 := "tempfile-context"

9170 
¬gs
["feName"] = 
feName


9172 
”r
 = 
c
.
	`FG‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
feName
+"-f", 
mšio
.
G‘ObjeùO±iÚs
{})

9173 
”r
 =ğ
n
 {

9174 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FG‘ObjeùW™hCÚ‹xˆshould fa oÀshÜˆtimeout", 
”r
)

9177 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

9178 
deãr
 
	`ÿnûl
()

9181 
”r
 = 
c
.
	`FG‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
feName
+"-fcÚ‹xt", 
mšio
.
G‘ObjeùO±iÚs
{})

9182 
”r
 !ğ
n
 {

9183 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FG‘ObjeùW™hCÚ‹xˆw™h†Úgimeouˆçed", 
”r
)

9186 
”r
 = 
os
.
	`Remove
(
feName
 + "-fcÚ‹xt");ƒ¼ !ğ
n
 {

9187 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Removfçed", 
”r
)

9191 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

9192 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

9196 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

9198 
	}
}

9201 
func
 
	$‹¡G‘ObjeùACL
() {

9203 
¡¬tTime
 :ğ
time
.
	`Now
()

9204 
‹¡Name
 :ğ
	`g‘FuncName
()

9205 
funùiÚ
 := "GetObjectACL(bucketName, objectName)"

9206 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

9211 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

9214 
os
.
	`G‘’v
(
£rv”Endpošt
) != "s3.amazonaws.com" {

9215 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Sk³d„egiÚ funùiÚ®e¡ fÜ‚Ú s3„uns").
	`Info
()

9220 
c
, 
”r
 :ğ
mšio
.
	`NewV4
(

9221 
os
.
	`G‘’v
(
£rv”Endpošt
),

9222 
os
.
	`G‘’v
(
acûssKey
),

9223 
os
.
	`G‘’v
(
£ü‘Key
),

9224 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

9226 
”r
 !ğ
n
 {

9227 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v4 objeù c»©iÚ faed", 
”r
)

9235 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

9238 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

9239 
¬gs
["buck‘Name"] = 
buck‘Name


9242 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

9243 
”r
 !ğ
n
 {

9244 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

9248 
bufSize
 :ğ
d©aFeM­
["datafile-1-MB"]

9249 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-1-MB")

9250 
deãr
 
»ad”
.
	`Clo£
()

9252 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

9253 
¬gs
["objeùName"] = 
objeùName


9256 
m‘aD©a
 :ğ
m­
[
¡ršg
]string{

9260 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "bš¬y/où‘-¡»am", 
U£rM‘ad©a
: 
m‘aD©a
})

9261 
”r
 !ğ
n
 {

9262 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

9267 
objeùInfo
, 
g‘ObjeùACLE¼
 :ğ
c
.
	`G‘ObjeùACL
(
buck‘Name
, 
objeùName
)

9268 
g‘ObjeùACLE¼
 =ğ
n
 {

9269 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa", 
g‘ObjeùACLE¼
)

9273 
s
, 
ok
 :ğ
objeùInfo
.
M‘ad©a
["X-Amz-Acl"]

9274 !
ok
 {

9275 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa uÇbËØfšd \"X-Amz-Aş\"", 
n
)

9279 
	`Ën
(
s
) != 1 {

9280 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa \"X-Amz-Aş\" cªÃd‡şƒx³ùed \"1\" gÙ "+
fmt
.
	`S´štf
(`"%d"`, 
	`Ën
(
s
)), 
n
)

9284 
s
[0] != "public-read-write" {

9285 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa \"X-Amz-Aş\"ƒx³ùed \"public-»ad-wr™e\" buˆgÙ"+
fmt
.
	`S´štf
("%q", 
s
[0]), 
n
)

9289 
bufSize
 = 
d©aFeM­
["datafile-1-MB"]

9290 
v¬
 
»ad”2
 = 
	`g‘D©aR—d”
("datafile-1-MB")

9291 
deãr
 
»ad”2
.
	`Clo£
()

9293 
objeùName
 = 
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

9294 
¬gs
["objeùName"] = 
objeùName


9297 
m‘aD©a
 = 
m­
[
¡ršg
]string{

9302 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”2
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "bš¬y/où‘-¡»am", 
U£rM‘ad©a
: 
m‘aD©a
})

9303 
”r
 !ğ
n
 {

9304 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù faed", 
”r
)

9309 
objeùInfo
, 
g‘ObjeùACLE¼
 = 
c
.
	`G‘ObjeùACL
(
buck‘Name
, 
objeùName
)

9310 
g‘ObjeùACLE¼
 =ğ
n
 {

9311 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa", 
g‘ObjeùACLE¼
)

9315 
	`Ën
(
objeùInfo
.
M‘ad©a
) != 3 {

9316 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL faƒx³ùed \"3\" ACL buˆgÙ "+
fmt
.
	`S´štf
(`"%d"`, 
	`Ën
(
objeùInfo
.
M‘ad©a
)), 
n
)

9320 
s
, 
ok
 = 
objeùInfo
.
M‘ad©a
["X-Amz-Grant-Read"]

9321 !
ok
 {

9322 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa uÇbËØfšd \"X-Amz-G¿Á-R—d\"", 
n
)

9326 
	`Ën
(
s
) != 1 {

9327 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa \"X-Amz-G¿Á-R—d\"‡şƒx³ùed \"1\" gÙ "+
fmt
.
	`S´štf
(`"%d"`, 
	`Ën
(
s
)), 
n
)

9331 
s
[0] != "fooread@minio.go" {

9332 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa \"X-Amz-G¿Á-R—d\"‡şƒx³ùed \"foÜ—d@mšio.go\" gÙ "+
fmt
.
	`S´štf
("%q", 
s
), 
n
)

9336 
s
, 
ok
 = 
objeùInfo
.
M‘ad©a
["X-Amz-Grant-Write"]

9337 !
ok
 {

9338 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa uÇbËØfšd \"X-Amz-G¿Á-Wr™e\"", 
n
)

9342 
	`Ën
(
s
) != 1 {

9343 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa \"X-Amz-G¿Á-Wr™e\"‡şƒx³ùed \"1\" gÙ "+
fmt
.
	`S´štf
(`"%d"`, 
	`Ën
(
s
)), 
n
)

9347 
s
[0] != "foowrite@minio.go" {

9348 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùACL fa \"X-Amz-G¿Á-Wr™e\"‡şƒx³ùed \"foowr™e@mšio.go\" gÙ "+
fmt
.
	`S´štf
("%q", 
s
), 
n
)

9353 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

9354 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

9358 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

9359 
	}
}

9362 
func
 
	$‹¡PutObjeùW™hCÚ‹xtV2
() {

9364 
¡¬tTime
 :ğ
time
.
	`Now
()

9365 
‹¡Name
 :ğ
	`g‘FuncName
()

9366 
funùiÚ
 := "PutObjectWithContext(ctx, bucketName, objectName,„eader, size, opts)"

9367 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

9375 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

9376 
os
.
	`G‘’v
(
£rv”Endpošt
),

9377 
os
.
	`G‘’v
(
acûssKey
),

9378 
os
.
	`G‘’v
(
£ü‘Key
),

9379 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

9381 
”r
 !ğ
n
 {

9382 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v2 objeù c»©iÚ faed", 
”r
)

9390 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

9393 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

9394 
¬gs
["buck‘Name"] = 
buck‘Name


9396 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

9397 
”r
 !ğ
n
 {

9398 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

9401 
deãr
 
c
.
	`RemoveBuck‘
(
buck‘Name
)

9402 
bufSize
 :ğ
d©aFeM­
["datatfile-33-kB"]

9403 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

9404 
deãr
 
»ad”
.
	`Clo£
()

9406 
objeùName
 :ğ
fmt
.
	`S´štf
("‹¡-fe-%v", 
¿nd
.
	`Ušt32
())

9407 
¬gs
["objeùName"] = 
objeùName


9409 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 30*
time
.
SecÚd
)

9410 
¬gs
["ùx"] = 
ùx


9411 
¬gs
["size"] = 
bufSize


9412 
deãr
 
	`ÿnûl
()

9414 
_
, 
”r
 = 
c
.
	`PutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

9415 
”r
 !ğ
n
 {

9416 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùW™hCÚ‹xˆw™h shÜˆtimeouˆçed", 
”r
)

9420 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

9421 
¬gs
["ùx"] = 
ùx


9423 
deãr
 
	`ÿnûl
()

9424 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

9425 
deãr
 
»ad”
.
	`Clo£
()

9426 
_
, 
”r
 = 
c
.
	`PutObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

9427 
”r
 !ğ
n
 {

9428 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeùW™hCÚ‹xˆw™h†Úgimeouˆçed", 
”r
)

9433 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

9434 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

9438 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

9440 
	}
}

9443 
func
 
	$‹¡G‘ObjeùW™hCÚ‹xtV2
() {

9445 
¡¬tTime
 :ğ
time
.
	`Now
()

9446 
‹¡Name
 :ğ
	`g‘FuncName
()

9447 
funùiÚ
 := "GetObjectWithContext(ctx, bucketName, objectName)"

9448 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

9454 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

9457 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

9458 
os
.
	`G‘’v
(
£rv”Endpošt
),

9459 
os
.
	`G‘’v
(
acûssKey
),

9460 
os
.
	`G‘’v
(
£ü‘Key
),

9461 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

9463 
”r
 !ğ
n
 {

9464 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v2 objeù c»©iÚ faed", 
”r
)

9472 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

9475 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

9476 
¬gs
["buck‘Name"] = 
buck‘Name


9479 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

9480 
”r
 !ğ
n
 {

9481 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

9485 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

9486 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

9487 
deãr
 
»ad”
.
	`Clo£
()

9489 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

9490 
¬gs
["objeùName"] = 
objeùName


9492 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

9493 
”r
 !ğ
n
 {

9494 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

9498 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Nªo£cÚd
)

9499 
¬gs
["ùx"] = 
ùx


9500 
deãr
 
	`ÿnûl
()

9502 
r
, 
”r
 :ğ
c
.
	`G‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

9503 
”r
 !ğ
n
 {

9504 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùW™hCÚ‹xˆçed uÃx³ùedly", 
”r
)

9507 
_
, 
”r
 = 
r
.
	`St
();ƒ¼ =ğ
n
 {

9508 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùW™hCÚ‹xˆshould fa oÀshÜˆtimeout", 
”r
)

9511 
r
.
	`Clo£
()

9513 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

9514 
deãr
 
	`ÿnûl
()

9517 
r
, 
”r
 = 
c
.
	`G‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
mšio
.
G‘ObjeùO±iÚs
{})

9518 
”r
 !ğ
n
 {

9519 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "G‘ObjeùW™hCÚ‹xˆshouldn'ˆç oÀlÚg”imeout", 
”r
)

9523 
¡
, 
”r
 :ğ
r
.
	`St
()

9524 
”r
 !ğ
n
 {

9525 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "objeù SˆÿÎ faed", 
”r
)

9528 
¡
.
Size
 !ğ
	`št64
(
bufSize
) {

9529 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Numb” oàby‹ š sˆdÛ nÙ m©ch,ƒx³ùed "+
	`¡ršg
(
bufSize
)+" gÙ "+¡ršg(
¡
.
Size
), 
”r
)

9532 
”r
 :ğ
r
.
	`Clo£
();ƒ¼ !ğ
n
 {

9533 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", " objeù Clo£(èÿÎ faed", 
”r
)

9538 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

9539 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

9543 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

9545 
	}
}

9548 
func
 
	$‹¡FG‘ObjeùW™hCÚ‹xtV2
() {

9550 
¡¬tTime
 :ğ
time
.
	`Now
()

9551 
‹¡Name
 :ğ
	`g‘FuncName
()

9552 
funùiÚ
 := "FGetObjectWithContext(ctx, bucketName, objectName,fileName)"

9553 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

9560 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

9563 
c
, 
”r
 :ğ
mšio
.
	`NewV2
(

9564 
os
.
	`G‘’v
(
£rv”Endpošt
),

9565 
os
.
	`G‘’v
(
acûssKey
),

9566 
os
.
	`G‘’v
(
£ü‘Key
),

9567 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

9569 
”r
 !ğ
n
 {

9570 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v2 objeù c»©iÚ faed", 
”r
)

9578 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

9581 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

9582 
¬gs
["buck‘Name"] = 
buck‘Name


9585 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

9586 
”r
 !ğ
n
 {

9587 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ c®Èçed", 
”r
)

9591 
bufSize
 :ğ
d©aFeM­
["datatfile-1-MB"]

9592 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-1-MB")

9593 
deãr
 
»ad”
.
	`Clo£
()

9595 
objeùName
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

9596 
¬gs
["objeùName"] = 
objeùName


9598 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "binary/octet-stream"})

9599 
”r
 !ğ
n
 {

9600 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù c®Èçed", 
”r
)

9604 
ùx
, 
ÿnûl
 :ğ
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Nªo£cÚd
)

9605 
¬gs
["ùx"] = 
ùx


9606 
deãr
 
	`ÿnûl
()

9608 
feName
 := "tempfile-context"

9609 
¬gs
["feName"] = 
feName


9612 
”r
 = 
c
.
	`FG‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
feName
+"-f", 
mšio
.
G‘ObjeùO±iÚs
{})

9613 
”r
 =ğ
n
 {

9614 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FG‘ObjeùW™hCÚ‹xˆshould fa oÀshÜˆtimeout", 
”r
)

9617 
ùx
, 
ÿnûl
 = 
cÚ‹xt
.
	`W™hTimeout
(cÚ‹xt.
	`Background
(), 1*
time
.
Hour
)

9618 
deãr
 
	`ÿnûl
()

9621 
”r
 = 
c
.
	`FG‘ObjeùW™hCÚ‹xt
(
ùx
, 
buck‘Name
, 
objeùName
, 
feName
+"-fcÚ‹xt", 
mšio
.
G‘ObjeùO±iÚs
{})

9622 
”r
 !ğ
n
 {

9623 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "FG‘ObjeùW™hCÚ‹xˆÿÎ shouldn'ˆç oÀlÚgimeout", 
”r
)

9627 
”r
 = 
os
.
	`Remove
(
feName
 + "-fcÚ‹xt");ƒ¼ !ğ
n
 {

9628 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Removfçed", 
”r
)

9632 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

9633 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

9637 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

9639 
	}
}

9642 
func
 
	$‹¡Li¡Objeùs
() {

9644 
¡¬tTime
 :ğ
time
.
	`Now
()

9645 
‹¡Name
 :ğ
	`g‘FuncName
()

9646 
funùiÚ
 := "ListObjects(bucketName, objectPrefix,„ecursive, doneCh)"

9647 
¬gs
 :ğ
m­
[
¡ršg
]
š‹rçû
{}{

9653 
¿nd
.
	`S“d
(
time
.
	`Now
().
	`Unix
())

9656 
c
, 
”r
 :ğ
mšio
.
	`New
(

9657 
os
.
	`G‘’v
(
£rv”Endpošt
),

9658 
os
.
	`G‘’v
(
acûssKey
),

9659 
os
.
	`G‘’v
(
£ü‘Key
),

9660 
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
)),

9662 
”r
 !ğ
n
 {

9663 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MšiØş›Á v4 objeù c»©iÚ faed", 
”r
)

9671 
c
.
	`S‘AµInfo
("Minio-go-FunctionalTest", "0.1.0")

9674 
buck‘Name
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "minio-go-test-")

9675 
¬gs
["buck‘Name"] = 
buck‘Name


9678 
”r
 = 
c
.
	`MakeBuck‘
(
buck‘Name
, "us-east-1")

9679 
”r
 !ğ
n
 {

9680 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "MakeBuck‘ faed", 
”r
)

9684 
bufSize
 :ğ
d©aFeM­
["datafile-33-kB"]

9685 
v¬
 
»ad”
 = 
	`g‘D©aR—d”
("datafile-33-kB")

9686 
deãr
 
»ad”
.
	`Clo£
()

9689 
objeùName1
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

9691 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName1
, 
»ad”
, 
	`št64
(
bufSize
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "bš¬y/où‘-¡»am", 
StÜageCÏss
: "STANDARD"})

9692 
”r
 !ğ
n
 {

9693 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù1 c®Èçed", 
”r
)

9697 
bufSize1
 :ğ
d©aFeM­
["datafile-33-kB"]

9698 
v¬
 
»ad”1
 = 
	`g‘D©aR—d”
("datafile-33-kB")

9699 
deãr
 
»ad”1
.
	`Clo£
()

9700 
objeùName2
 :ğ
	`¿ndSŒšg
(60, 
¿nd
.
	`NewSourû
(
time
.
	`Now
().
	`UnixNªo
()), "")

9702 
_
, 
”r
 = 
c
.
	`PutObjeù
(
buck‘Name
, 
objeùName2
, 
»ad”1
, 
	`št64
(
bufSize1
), 
mšio
.
PutObjeùO±iÚs
{
CÚ‹ÁTy³
: "bš¬y/où‘-¡»am", 
StÜageCÏss
: "REDUCED_REDUNDANCY"})

9703 
”r
 !ğ
n
 {

9704 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "PutObjeù2 c®Èçed", 
”r
)

9709 
dÚeCh
 :ğ
	`make
(
chª
 struct{})

9711 
deãr
 
	`şo£
(
dÚeCh
)

9714 
objInfo
 :ğ
¿nge
 
c
.
	`Li¡Objeùs
(
buck‘Name
, "", 
Œue
, 
dÚeCh
) {

9715 
objInfo
.
E¼
 !ğ
n
 {

9716 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Li¡Objeù çed uÃx³ùedly", 
”r
)

9719 
objInfo
.
Key
 =ğ
objeùName1
 && objInfo.
StÜageCÏss
 != "STANDARD" {

9721 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Li¡Objeù dÛ¢'ˆ»tuºƒx³ùed stÜagşass").
	`Info
()

9723 
objInfo
.
Key
 =ğ
objeùName2
 && objInfo.
StÜageCÏss
 != "REDUCED_REDUNDANCY" {

9725 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Li¡Objeù dÛ¢'ˆ»tuºƒx³ùed stÜagşass").
	`Info
()

9730 
objInfo
 :ğ
¿nge
 
c
.
	`Li¡ObjeùsV2
(
buck‘Name
, "", 
Œue
, 
dÚeCh
) {

9731 
objInfo
.
E¼
 !ğ
n
 {

9732 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "Li¡ObjeùsV2 faed uÃx³ùedly", 
”r
)

9735 
objInfo
.
Key
 =ğ
objeùName1
 && objInfo.
StÜageCÏss
 != "STANDARD" {

9737 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Li¡ObjeùsV2 dÛ¢'ˆ»tuºƒx³ùed stÜagşass").
	`Info
()

9739 
objInfo
.
Key
 =ğ
objeùName2
 && objInfo.
StÜageCÏss
 != "REDUCED_REDUNDANCY" {

9741 
	`ignÜedLog
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "Li¡ObjeùsV2 dÛ¢'ˆ»tuºƒx³ùed stÜagşass").
	`Info
()

9746 
”r
 = 
	`ş—nupBuck‘
(
buck‘Name
, 
c
);ƒ¼ !ğ
n
 {

9747 
	`logE¼Ü
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
, "", "CËªu°çed", 
”r
)

9751 
	`sucûssLogg”
(
‹¡Name
, 
funùiÚ
, 
¬gs
, 
¡¬tTime
).
	`Info
()

9753 
	}
}

9756 
func
 
	$mu¡P¬£BoŞ
(
¡r
 
¡ršg
è
boŞ
 {

9757 
b
, 
”r
 :ğ
¡rcÚv
.
	`P¬£BoŞ
(
¡r
)

9758 
”r
 !ğ
n
 {

9759  
çl£


9761  
b


9762 
	}
}

9764 
func
 
	$maš
() {

9766 
log
.
	`S‘Ouut
(
os
.
Stdout
)

9768 
mštFÜm©‹r
 :ğ
mštJSONFÜm©‹r
{}

9770 
log
.
	`S‘FÜm©‹r
(&
mštFÜm©‹r
)

9772 
log
.
	`S‘Lev–
Öog.
InfoLev–
)

9774 
s
 :ğ
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËHTTPS
))

9775 
kmsEÇbËd
 :ğ
	`mu¡P¬£BoŞ
(
os
.
	`G‘’v
(
’abËKMS
))

9777 
	`isFuÎMode
() {

9778 
	`‹¡MakeBuck‘E¼ÜV2
()

9779 
	`‹¡G‘ObjeùClo£dTwiûV2
()

9780 
	`‹¡FPutObjeùV2
()

9781 
	`‹¡MakeBuck‘RegiÚsV2
()

9782 
	`‹¡G‘ObjeùR—dS“kFunùiÚ®V2
()

9783 
	`‹¡G‘ObjeùR—dAtFunùiÚ®V2
()

9784 
	`‹¡CİyObjeùV2
()

9785 
	`‹¡FunùiÚ®V2
()

9786 
	`‹¡Compo£ObjeùE¼ÜCa£sV2
()

9787 
	`‹¡Compo£10KSourûsV2
()

9788 
	`‹¡U£rM‘ad©aCİyšgV2
()

9789 
	`‹¡PutObjeù0By‹V2
()

9790 
	`‹¡PutObjeùNoL’gthV2
()

9791 
	`‹¡PutObjeùsUnknownV2
()

9792 
	`‹¡G‘ObjeùW™hCÚ‹xtV2
()

9793 
	`‹¡FPutObjeùW™hCÚ‹xtV2
()

9794 
	`‹¡FG‘ObjeùW™hCÚ‹xtV2
()

9795 
	`‹¡PutObjeùW™hCÚ‹xtV2
()

9796 
	`‹¡MakeBuck‘E¼Ü
()

9797 
	`‹¡MakeBuck‘RegiÚs
()

9798 
	`‹¡PutObjeùW™hM‘ad©a
()

9799 
	`‹¡PutObjeùR—dAt
()

9800 
	`‹¡PutObjeùSŒ—mšg
()

9801 
	`‹¡G‘ObjeùS“kEnd
()

9802 
	`‹¡G‘ObjeùClo£dTwiû
()

9803 
	`‹¡RemoveMuÉËObjeùs
()

9804 
	`‹¡FPutObjeùMuÉ¬t
()

9805 
	`‹¡FPutObjeù
()

9806 
	`‹¡G‘ObjeùR—dS“kFunùiÚ®
()

9807 
	`‹¡G‘ObjeùR—dAtFunùiÚ®
()

9808 
	`‹¡P»sigÃdPo¡PŞicy
()

9809 
	`‹¡CİyObjeù
()

9810 
	`‹¡Compo£ObjeùE¼ÜCa£s
()

9811 
	`‹¡Compo£10KSourûs
()

9812 
	`‹¡U£rM‘ad©aCİyšg
()

9813 
	`‹¡Buck‘NÙifiÿtiÚ
()

9814 
	`‹¡FunùiÚ®
()

9815 
	`‹¡G‘ObjeùModif›d
()

9816 
	`‹¡PutObjeùU¶ßdS“kedObjeù
()

9817 
	`‹¡G‘ObjeùW™hCÚ‹xt
()

9818 
	`‹¡FPutObjeùW™hCÚ‹xt
()

9819 
	`‹¡FG‘ObjeùW™hCÚ‹xt
()

9821 
	`‹¡G‘ObjeùACL
()

9823 
	`‹¡PutObjeùW™hCÚ‹xt
()

9824 
	`‹¡StÜageCÏssM‘ad©aPutObjeù
()

9825 
	`‹¡StÜageCÏssInv®idM‘ad©aPutObjeù
()

9826 
	`‹¡StÜageCÏssM‘ad©aCİyObjeù
()

9827 
	`‹¡PutObjeùW™hCÚ‹ÁLªguage
()

9828 
	`‹¡Li¡Objeùs
()

9831 
s
 {

9832 
	`‹¡SSECEnüy±iÚPutG‘
()

9833 
	`‹¡SSECEnüy±iÚFPut
()

9834 
	`‹¡SSECEnüy±edG‘ObjeùR—dAtFunùiÚ®
()

9835 
	`‹¡SSECEnüy±edG‘ObjeùR—dS“kFunùiÚ®
()

9836 
	`‹¡Enüy±edCİyObjeùV2
()

9837 
	`‹¡Enüy±edSSECToSSECCİyObjeù
()

9838 
	`‹¡Enüy±edSSECToUÃnüy±edCİyObjeù
()

9839 
	`‹¡UÃnüy±edToSSECCİyObjeù
()

9840 
	`‹¡UÃnüy±edToUÃnüy±edCİyObjeù
()

9841 
	`‹¡Enüy±edEm±yObjeù
()

9842 
	`‹¡Deüy±edCİyObjeù
()

9843 
	`‹¡SSECEnüy±edToSSECCİyObjeùP¬t
()

9844 
	`‹¡SSECEnüy±edToUÃnüy±edCİyP¬t
()

9845 
	`‹¡UÃnüy±edToSSECCİyObjeùP¬t
()

9846 
	`‹¡UÃnüy±edToUÃnüy±edCİyP¬t
()

9847 
kmsEÇbËd
 {

9848 
	`‹¡SSES3Enüy±iÚPutG‘
()

9849 
	`‹¡SSES3Enüy±iÚFPut
()

9850 
	`‹¡SSES3Enüy±edG‘ObjeùR—dAtFunùiÚ®
()

9851 
	`‹¡SSES3Enüy±edG‘ObjeùR—dS“kFunùiÚ®
()

9852 
	`‹¡Enüy±edSSECToSSES3CİyObjeù
()

9853 
	`‹¡Enüy±edSSES3ToSSECCİyObjeù
()

9854 
	`‹¡Enüy±edSSES3ToSSES3CİyObjeù
()

9855 
	`‹¡Enüy±edSSES3ToUÃnüy±edCİyObjeù
()

9856 
	`‹¡UÃnüy±edToSSES3CİyObjeù
()

9857 
	`‹¡SSECEnüy±edToSSES3CİyObjeùP¬t
()

9858 
	`‹¡UÃnüy±edToSSES3CİyObjeùP¬t
()

9859 
	`‹¡SSES3Enüy±edToSSECCİyObjeùP¬t
()

9860 
	`‹¡SSES3Enüy±edToUÃnüy±edCİyP¬t
()

9861 
	`‹¡SSES3Enüy±edToSSES3CİyObjeùP¬t
()

9865 
	`‹¡FunùiÚ®
()

9866 
	`‹¡FunùiÚ®V2
()

9868 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/get-options_test.go

18 
·ckage
 
mšio


20 
impÜt
 (

25 
func
 
	$Te¡S‘H—d”
(
t
 *
‹¡šg
.
T
) {

26 
‹¡Ca£s
 := []struct {

27 
¡¬t
 
št64


28 
’d
 
št64


29 
”rV®
 
”rÜ


30 
ex³ùed
 
¡ršg


32 {0, 10, 
n
, "bytes=0-10"},

33 {1, 10, 
n
, "bytes=1-10"},

34 {5, 0, 
n
, "bytes=5-"},

35 {0, -5, 
n
, "bytes=-5"},

36 {0, 0, 
n
, "bytes=0-0"},

37 {11, 10, 
fmt
.
	`E¼Üf
("Invalid„ange specified: start=11ƒnd=10"),

39 {-1, 10, 
fmt
.
	`E¼Üf
("Invalid„ange specified: start=-1ƒnd=10"), ""},

40 {-1, 0, 
fmt
.
	`E¼Üf
("Invalid„ange specified: start=-1ƒnd=0"), ""},

41 {1, -5, 
fmt
.
	`E¼Üf
("Invalid„ange specified: start=1ƒnd=-5"), ""},

43 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

44 
İts
 :ğ
G‘ObjeùO±iÚs
{}

45 
”r
 :ğ
İts
.
	`S‘Rªge
(
‹¡Ca£
.
¡¬t
,e¡Ca£.
’d
)

46 
”r
 =ğ
n
 && 
‹¡Ca£
.
”rV®
 !=‚il {

47 
t
.
	`E¼Üf
("Test %d: Expectedo fail with '%v' but it…assed",

48 
i
+1, 
‹¡Ca£
.
”rV®
)

49 } 
”r
 !ğ
n
 && 
‹¡Ca£
.
”rV®
.
	`E¼Ü
() !=ƒrr.Error() {

50 
t
.
	`E¼Üf
("Test %d: Expectedƒrror '%v' but gotƒrror '%v'",

51 
i
+1, 
‹¡Ca£
.
”rV®
, 
”r
)

52 } 
”r
 =ğ
n
 && 
İts
.
h—d”s
["Rªge"] !ğ
‹¡Ca£
.
ex³ùed
 {

53 
t
.
	`E¼Üf
("Test %d: Expected„ange header '%s', but got '%s'",

54 
i
+1, 
‹¡Ca£
.
ex³ùed
, 
İts
.
h—d”s
["Range"])

57 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/hook-reader.go

18 
·ckage
 
mšio


20 
	gimpÜt
 "io"

26 
ty³
 
hookR—d”
 struct {

27 
sourû
 
	mio
.
R—d”


28 
hook
 
	mio
.
	mR—d”


33 
	$func
 (
hr
 *
hookR—d”
è
	$S“k
(
off£t
 
št64
, 
wh’û
 è(
n
 iÁ64, 
”r
 
”rÜ
) {

35 
sourûS“k”
, 
ok
 :ğ
hr
.
sourû
.(
io
.
S“k”
)

36 
ok
 {

37  
sourûS“k”
.
	`S“k
(
off£t
, 
wh’û
)

40 
hookS“k”
, 
ok
 :ğ
hr
.
hook
.(
io
.
S“k”
)

41 
ok
 {

42  
hookS“k”
.
	`S“k
(
off£t
, 
wh’û
)

44  
n
, 
n


45 
	}
}

50 
	$func
 (
hr
 *
hookR—d”
è
	$R—d
(
b
 []
by‹
è(
n
 , 
”r
 
”rÜ
) {

51 
n
, 
”r
 = 
hr
.
sourû
.
	`R—d
(
b
)

52 
”r
 !ğ
n
 &&ƒ¼ !ğ
io
.
EOF
 {

53  
n
, 
”r


56 
_
, 
h”r
 :ğ
hr
.
hook
.
	`R—d
(
b
[:
n
]); h”¸!ğ
n
 {

57 
h”r
 !ğ
io
.
EOF
 {

58  
n
, 
h”r


61  
n
, 
”r


62 
	}
}

66 
func
 
	$ÃwHook
(
sourû
, 
hook
 
io
.
R—d”
) io.Reader {

67 
hook
 =ğ
n
 {

68  
sourû


70  &
hookR—d”
{
sourû
, 
hook
}

71 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/chain.go

18 
·ckage
 
üed’tŸls


46 
ty³
 
Chaš
 struct {

47 
	mProvid”s
 []
Provid”


48 
cu¼
 
	mProvid”


53 
func
 
NewChašC»d’tŸls
(
´ovid”s
 []
Provid”
è*
	gC»d’tŸls
 {

54  
New
(&
Chaš
{

55 
Provid”s
: 
­³nd
([]
Provid”
{}, 
´ovid”s
...),

64 
	$func
 (
c
 *
Chaš
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

65 
_
, 
p
 :ğ
¿nge
 
c
.
Provid”s
 {

66 
üeds
, 
_
 :ğ
p
.
	`R‘r›ve
()

68 
üeds
.
AcûssKeyID
 =ğ"" && c»ds.
Seü‘AcûssKey
 == "" {

71 
c
.
cu¼
 = 
p


72  
üeds
, 
n


76  
V®ue
{

77 
SigÃrTy³
: 
SigÇtu»AnÚymous
,

78 }, 
n


79 
	}
}

83 
	$func
 (
c
 *
Chaš
è
	$IsExpœed
(è
boŞ
 {

84 
c
.
cu¼
 !ğ
n
 {

85  
c
.
cu¼
.
	`IsExpœed
()

88  
Œue


89 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/chain_test.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

25 
ty³
 
‹¡C»dProvid”
 struct {

26 
üeds
 
V®ue


27 
expœed
 
boŞ


28 
”r
 
	m”rÜ


31 
	$func
 (
s
 *
‹¡C»dProvid”
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

32 
s
.
expœed
 = 
çl£


33  
s
.
üeds
, s.
”r


34 
	}
}

35 
	$func
 (
s
 *
‹¡C»dProvid”
è
	$IsExpœed
(è
boŞ
 {

36  
s
.
expœed


37 
	}
}

39 
func
 
	$Te¡ChašG‘
(
t
 *
‹¡šg
.
T
) {

40 
p
 :ğ&
Chaš
{

41 
Provid”s
: []
Provid”
{

42 &
üedProvid”
{
”r
: 
”rÜs
.
	`New
("FirstError")},

43 &
üedProvid”
{
”r
: 
”rÜs
.
	`New
("SecondError")},

44 &
‹¡C»dProvid”
{

45 
üeds
: 
V®ue
{

46 
AcûssKeyID
: "AKIF",

47 
Seü‘AcûssKey
: "NOSECRET",

48 
SessiÚTok’
: "",

51 &
üedProvid”
{

52 
üeds
: 
V®ue
{

53 
AcûssKeyID
: "AKID",

54 
Seü‘AcûssKey
: "SECRET",

55 
SessiÚTok’
: "",

61 
üeds
, 
”r
 :ğ
p
.
	`R‘r›ve
()

62 
”r
 !ğ
n
 {

63 
t
.
	`F©®
(
”r
)

67 
üeds
.
AcûssKeyID
 != "AKIF" {

68 
t
.
	`F©®f
("Ex³ùed 'AKIF', gÙ %s", 
üeds
.
AcûssKeyID
)

70 
üeds
.
Seü‘AcûssKey
 != "NOSECRET" {

71 
t
.
	`F©®f
("Ex³ùed 'NOSECRET', gÙ %s", 
üeds
.
Seü‘AcûssKey
)

73 
üeds
.
SessiÚTok’
 != "" {

74 
t
.
	`F©®f
("Ex³ùedƒm±yok’, gÙ %s", 
üeds
.
SessiÚTok’
)

76 
	}
}

78 
func
 
	$Te¡ChašIsExpœed
(
t
 *
‹¡šg
.
T
) {

79 
üedProvid”
 := &credProvider{

80 
üeds
: 
V®ue
{

81 
AcûssKeyID
: "UXHW",

82 
Seü‘AcûssKey
: "MYSECRET",

83 
SessiÚTok’
: "",

85 
expœed
: 
Œue
,

87 
p
 :ğ&
Chaš
{

88 
Provid”s
: []
Provid”
{

89 
üedProvid”
,

93 !
p
.
	`IsExpœed
() {

94 
t
.
	`F©®
("Expectedƒxpiredo berue before‡ny Retrieve")

97 
_
, 
”r
 :ğ
p
.
	`R‘r›ve
()

98 
”r
 !ğ
n
 {

99 
t
.
	`F©®
(
”r
)

102 
p
.
	`IsExpœed
() {

103 
t
.
	`F©®
("Expectedo be‚otƒxpired‡fter Retrieve")

105 
	}
}

107 
func
 
	$Te¡ChašW™hNoProvid”
(
t
 *
‹¡šg
.
T
) {

108 
p
 :ğ&
Chaš
{

109 
Provid”s
: []
Provid”
{},

111 !
p
.
	`IsExpœed
() {

112 
t
.
	`F©®
("Expectedo beƒxpired with‚o…roviders")

114 
_
, 
”r
 :ğ
p
.
	`R‘r›ve
()

115 
”r
 !ğ
n
 {

116 
”r
.
	`E¼Ü
() != "No valid…roviders found []" {

117 
t
.
	`E¼Ü
(
”r
)

120 
	}
}

122 
func
 
	$Te¡ChašProvid”W™hNoV®idProvid”
(
t
 *
‹¡šg
.
T
) {

123 
”rs
 :ğ[]
”rÜ
{

124 
”rÜs
.
	`New
("FirstError"),

125 
”rÜs
.
	`New
("SecondError"),

127 
p
 :ğ&
Chaš
{

128 
Provid”s
: []
Provid”
{

129 &
üedProvid”
{
”r
: 
”rs
[0]},

130 &
üedProvid”
{
”r
: 
”rs
[1]},

134 !
p
.
	`IsExpœed
() {

135 
t
.
	`F©®
("Expectedo beƒxpired with‚o…roviders")

138 
_
, 
”r
 :ğ
p
.
	`R‘r›ve
()

139 
”r
 !ğ
n
 {

140 
”r
.
	`E¼Ü
() != "No valid…roviders found [FirstError SecondError]" {

141 
t
.
	`E¼Ü
(
”r
)

144 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/credentials.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

26 
ty³
 
V®ue
 struct {

28 
AcûssKeyID
 
¡ršg


31 
Seü‘AcûssKey
 
¡ršg


34 
SessiÚTok’
 
¡ršg


37 
SigÃrTy³
 
	mSigÇtu»Ty³


43 
ty³
 
Provid”
 
	gš‹rçû
 {

46 
R‘r›ve
(è(
	gV®ue
, 
	g”rÜ
)

50 
IsExpœed
(è
	gboŞ


64 
ty³
 
Expœy
 struct {

66 
expœ©iÚ
 
	mtime
.
Time


70 
Cu¼’tTime
 
func
(è
	mtime
.
	mTime


81 
	$func
 (
e
 *
Expœy
è
	$S‘Expœ©iÚ
(
expœ©iÚ
 
time
.
Time
, 
wšdow
ime.
Du¿tiÚ
) {

82 
e
.
expœ©iÚ
 =ƒxpiration

83 
wšdow
 > 0 {

84 
e
.
expœ©iÚ
 =ƒ.expœ©iÚ.
	`Add
(-
wšdow
)

86 
	}
}

89 
	$func
 (
e
 *
Expœy
è
	$IsExpœed
(è
boŞ
 {

90 
e
.
Cu¼’tTime
 =ğ
n
 {

91 
e
.
Cu¼’tTime
 = 
time
.
Now


93  
e
.
expœ©iÚ
.
	`BefÜe
Ó.
	`Cu¼’tTime
())

94 
	}
}

107 
ty³
 
C»d’tŸls
 struct {

108 
	msync
.
Mu‹x


110 
üeds
 
V®ue


111 
fÜûReäesh
 
boŞ


112 
´ovid”
 
	mProvid”


116 
func
 
New
(
´ovid”
 
Provid”
è*
	gC»d’tŸls
 {

117  &
	gC»d’tŸls
{

118 
	g´ovid”
: 
´ovid”
,

119 
	gfÜûReäesh
: 
Œue
,

132 
	$func
 (
c
 *
C»d’tŸls
è
	$G‘
(è(
V®ue
, 
”rÜ
) {

133 
c
.
	`Lock
()

134 
deãr
 
c
.
	`UÆock
()

136 
c
.
	`isExpœed
() {

137 
üeds
, 
”r
 :ğ
c
.
´ovid”
.
	`R‘r›ve
()

138 
”r
 !ğ
n
 {

139  
V®ue
{}, 
”r


141 
c
.
üeds
 = creds

142 
c
.
fÜûReäesh
 = 
çl£


145  
c
.
üeds
, 
n


146 
	}
}

153 
	$func
 (
c
 *
C»d’tŸls
è
	$Expœe
() {

154 
c
.
	`Lock
()

155 
deãr
 
c
.
	`UÆock
()

157 
c
.
fÜûReäesh
 = 
Œue


158 
	}
}

165 
	$func
 (
c
 *
C»d’tŸls
è
	$IsExpœed
(è
boŞ
 {

166 
c
.
	`Lock
()

167 
deãr
 
c
.
	`UÆock
()

169  
c
.
	`isExpœed
()

170 
	}
}

173 
	$func
 (
c
 *
C»d’tŸls
è
	$isExpœed
(è
boŞ
 {

174  
c
.
fÜûReäesh
 || c.
´ovid”
.
	`IsExpœed
()

175 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/credentials_test.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

25 
ty³
 
üedProvid”
 struct {

26 
üeds
 
V®ue


27 
expœed
 
boŞ


28 
”r
 
	m”rÜ


31 
	$func
 (
s
 *
üedProvid”
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

32 
s
.
expœed
 = 
çl£


33  
s
.
üeds
, s.
”r


34 
	}
}

35 
	$func
 (
s
 *
üedProvid”
è
	$IsExpœed
(è
boŞ
 {

36  
s
.
expœed


37 
	}
}

39 
func
 
	$Te¡C»d’tŸlsG‘
(
t
 *
‹¡šg
.
T
) {

40 
c
 :ğ
	`New
(&
üedProvid”
{

41 
üeds
: 
V®ue
{

42 
AcûssKeyID
: "UXHW",

43 
Seü‘AcûssKey
: "MYSECRET",

44 
SessiÚTok’
: "",

46 
expœed
: 
Œue
,

49 
üeds
, 
”r
 :ğ
c
.
	`G‘
()

50 
”r
 !ğ
n
 {

51 
t
.
	`F©®
(
”r
)

53 "UXHW" !ğ
üeds
.
AcûssKeyID
 {

54 
t
.
	`E¼Üf
("Ex³ùed \"UXHW\", gÙ %s", 
üeds
.
AcûssKeyID
)

56 "MYSECRET" !ğ
üeds
.
Seü‘AcûssKey
 {

57 
t
.
	`E¼Üf
("Ex³ùed \"MYSECRET\", gÙ %s", 
üeds
.
Seü‘AcûssKey
)

59 
üeds
.
SessiÚTok’
 != "" {

60 
t
.
	`E¼Üf
("Ex³ùed sessiÚok’Øbem±y, gÙ %s", 
üeds
.
SessiÚTok’
)

62 
	}
}

64 
func
 
	$Te¡C»d’tŸlsG‘W™hE¼Ü
(
t
 *
‹¡šg
.
T
) {

65 
c
 :ğ
	`New
(&
üedProvid”
{
”r
: 
”rÜs
.New("Customƒrror")})

67 
_
, 
”r
 :ğ
c
.
	`G‘
()

68 
”r
 !ğ
n
 {

69 
”r
.
	`E¼Ü
() != "Customƒrror" {

70 
t
.
	`E¼Üf
("Ex³ùed \"Cu¡omƒ¼Ü\", gÙ %s", 
”r
.
	`E¼Ü
())

73 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/doc.go

62 
·ckage
 
	güed’tŸls


	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/env_aws.go

18 
·ckage
 
üed’tŸls


20 
	gimpÜt
 "os"

30 
ty³
 
EnvAWS
 struct {

31 
»Œ›ved
 
	mboŞ


36 
func
 
NewEnvAWS
(è*
	gC»d’tŸls
 {

37  
New
(&
EnvAWS
{})

41 
	$func
 (
e
 *
EnvAWS
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

42 
e
.
»Œ›ved
 = 
çl£


44 
id
 :ğ
os
.
	`G‘’v
("AWS_ACCESS_KEY_ID")

45 
id
 == "" {

46 
id
 = 
os
.
	`G‘’v
("AWS_ACCESS_KEY")

49 
£ü‘
 :ğ
os
.
	`G‘’v
("AWS_SECRET_ACCESS_KEY")

50 
£ü‘
 == "" {

51 
£ü‘
 = 
os
.
	`G‘’v
("AWS_SECRET_KEY")

54 
sigÃrTy³
 :ğ
SigÇtu»V4


55 
id
 =ğ"" || 
£ü‘
 == "" {

56 
sigÃrTy³
 = 
SigÇtu»AnÚymous


59 
e
.
»Œ›ved
 = 
Œue


60  
V®ue
{

61 
AcûssKeyID
: 
id
,

62 
Seü‘AcûssKey
: 
£ü‘
,

63 
SessiÚTok’
: 
os
.
	`G‘’v
("AWS_SESSION_TOKEN"),

64 
SigÃrTy³
: 
sigÃrTy³
,

65 }, 
n


66 
	}
}

69 
	$func
 (
e
 *
EnvAWS
è
	$IsExpœed
(è
boŞ
 {

70  !
e
.
»Œ›ved


71 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/env_minio.go

18 
·ckage
 
üed’tŸls


20 
	gimpÜt
 "os"

29 
ty³
 
EnvMšio
 struct {

30 
»Œ›ved
 
	mboŞ


35 
func
 
NewEnvMšio
(è*
	gC»d’tŸls
 {

36  
New
(&
EnvMšio
{})

40 
	$func
 (
e
 *
EnvMšio
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

41 
e
.
»Œ›ved
 = 
çl£


43 
id
 :ğ
os
.
	`G‘’v
("MINIO_ACCESS_KEY")

44 
£ü‘
 :ğ
os
.
	`G‘’v
("MINIO_SECRET_KEY")

46 
sigÃrTy³
 :ğ
SigÇtu»V4


47 
id
 =ğ"" || 
£ü‘
 == "" {

48 
sigÃrTy³
 = 
SigÇtu»AnÚymous


51 
e
.
»Œ›ved
 = 
Œue


52  
V®ue
{

53 
AcûssKeyID
: 
id
,

54 
Seü‘AcûssKey
: 
£ü‘
,

55 
SigÃrTy³
: 
sigÃrTy³
,

56 }, 
n


57 
	}
}

60 
	$func
 (
e
 *
EnvMšio
è
	$IsExpœed
(è
boŞ
 {

61  !
e
.
»Œ›ved


62 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/env_test.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

26 
func
 
	$Te¡EnvAWSR‘r›ve
(
t
 *
‹¡šg
.
T
) {

27 
os
.
	`CË¬’v
()

28 
os
.
	`S‘’v
("AWS_ACCESS_KEY_ID", "access")

29 
os
.
	`S‘’v
("AWS_SECRET_ACCESS_KEY", "secret")

30 
os
.
	`S‘’v
("AWS_SESSION_TOKEN", "token")

32 
e
 :ğ
EnvAWS
{}

33 !
e
.
	`IsExpœed
() {

34 
t
.
	`E¼Ü
("Expect credso beƒxpired before„etrieve.")

37 
üeds
, 
”r
 :ğ
e
.
	`R‘r›ve
()

38 
”r
 !ğ
n
 {

39 
t
.
	`F©®
(
”r
)

42 
ex³ùedC»ds
 :ğ
V®ue
{

43 
AcûssKeyID
: "access",

44 
Seü‘AcûssKey
: "secret",

45 
SessiÚTok’
: "token",

46 
SigÃrTy³
: 
SigÇtu»V4
,

48 !
»æeù
.
	`D“pEqu®
(
üeds
, 
ex³ùedC»ds
) {

49 
t
.
	`E¼Üf
("Ex³ùed %v, gÙ %v", 
ex³ùedC»ds
, 
üeds
)

52 
e
.
	`IsExpœed
() {

53 
t
.
	`E¼Ü
("Expect credso‚ot beƒxpired‡fter„etrieve.")

56 
os
.
	`CË¬’v
()

57 
os
.
	`S‘’v
("AWS_ACCESS_KEY", "access")

58 
os
.
	`S‘’v
("AWS_SECRET_KEY", "secret")

60 
ex³ùedC»ds
 = 
V®ue
{

61 
AcûssKeyID
: "access",

62 
Seü‘AcûssKey
: "secret",

63 
SigÃrTy³
: 
SigÇtu»V4
,

66 
üeds
, 
”r
 = 
e
.
	`R‘r›ve
()

67 
”r
 !ğ
n
 {

68 
t
.
	`F©®
(
”r
)

71 !
»æeù
.
	`D“pEqu®
(
üeds
, 
ex³ùedC»ds
) {

72 
t
.
	`E¼Üf
("Ex³ùed %v, gÙ %v", 
ex³ùedC»ds
, 
üeds
)

75 
	}
}

77 
func
 
	$Te¡EnvMšioR‘r›ve
(
t
 *
‹¡šg
.
T
) {

78 
os
.
	`CË¬’v
()

80 
os
.
	`S‘’v
("MINIO_ACCESS_KEY", "access")

81 
os
.
	`S‘’v
("MINIO_SECRET_KEY", "secret")

83 
e
 :ğ
EnvMšio
{}

84 !
e
.
	`IsExpœed
() {

85 
t
.
	`E¼Ü
("Expect credso beƒxpired before„etrieve.")

88 
üeds
, 
”r
 :ğ
e
.
	`R‘r›ve
()

89 
”r
 !ğ
n
 {

90 
t
.
	`F©®
(
”r
)

93 
ex³ùedC»ds
 :ğ
V®ue
{

94 
AcûssKeyID
: "access",

95 
Seü‘AcûssKey
: "secret",

96 
SigÃrTy³
: 
SigÇtu»V4
,

98 !
»æeù
.
	`D“pEqu®
(
üeds
, 
ex³ùedC»ds
) {

99 
t
.
	`E¼Üf
("Ex³ùed %v, gÙ %v", 
ex³ùedC»ds
, 
üeds
)

102 
e
.
	`IsExpœed
() {

103 
t
.
	`E¼Ü
("Expect credso‚ot beƒxpired‡fter„etrieve.")

105 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/file_aws_credentials.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

25 
homedœ
 "github.com/mitchellh/go-homedir"

32 
ty³
 
FeAWSC»d’tŸls
 struct {

39 
f’ame
 
¡ršg


44 
´ofe
 
¡ršg


47 
»Œ›ved
 
	mboŞ


52 
func
 
NewFeAWSC»d’tŸls
(
f’ame
 
¡ršg
, 
´ofe
 sŒšgè*
	gC»d’tŸls
 {

53  
New
(&
FeAWSC»d’tŸls
{

54 
f’ame
: filename,

55 
´ofe
:…rofile,

61 
	$func
 (
p
 *
FeAWSC»d’tŸls
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

62 
p
.
f’ame
 == "" {

63 
p
.
f’ame
 = 
os
.
	`G‘’v
("AWS_SHARED_CREDENTIALS_FILE")

64 
p
.
f’ame
 == "" {

65 
homeDœ
, 
”r
 :ğ
homedœ
.
	`Dœ
()

66 
”r
 !ğ
n
 {

67  
V®ue
{}, 
”r


69 
p
.
f’ame
 = 
f•©h
.
	`Još
(
homeDœ
, ".aws", "credentials")

72 
p
.
´ofe
 == "" {

73 
p
.
´ofe
 = 
os
.
	`G‘’v
("AWS_PROFILE")

74 
p
.
´ofe
 == "" {

75 
p
.
´ofe
 = "default"

79 
p
.
»Œ›ved
 = 
çl£


81 
šiProfe
, 
”r
 :ğ
	`lßdProfe
(
p
.
f’ame
,….
´ofe
)

82 
”r
 !ğ
n
 {

83  
V®ue
{}, 
”r


87 
id
 :ğ
šiProfe
.
	`Key
("aws_access_key_id")

89 
£ü‘
 :ğ
šiProfe
.
	`Key
("aws_secret_access_key")

91 
tok’
 :ğ
šiProfe
.
	`Key
("aws_session_token")

93 
p
.
»Œ›ved
 = 
Œue


94  
V®ue
{

95 
AcûssKeyID
: 
id
.
	`SŒšg
(),

96 
Seü‘AcûssKey
: 
£ü‘
.
	`SŒšg
(),

97 
SessiÚTok’
: 
tok’
.
	`SŒšg
(),

98 
SigÃrTy³
: 
SigÇtu»V4
,

99 }, 
n


100 
	}
}

103 
	$func
 (
p
 *
FeAWSC»d’tŸls
è
	$IsExpœed
(è
boŞ
 {

104  !
p
.
»Œ›ved


105 
	}
}

110 
func
 
lßdProfe
(
f’ame
, 
´ofe
 
¡ršg
è(*
	gši
.
	gSeùiÚ
, 
	g”rÜ
) {

111 
	gcÚfig
, 
	g”r
 :ğ
ši
.
Lßd
(
f’ame
)

112 
”r
 !ğ
n
 {

113  
n
, 
”r


115 
šiProfe
, 
	g”r
 :ğ
cÚfig
.
G‘SeùiÚ
(
´ofe
)

116 
”r
 !ğ
n
 {

117  
n
, 
”r


119  
šiProfe
, 
	gn


	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/file_minio_client.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

27 
homedœ
 "github.com/mitchellh/go-homedir"

34 
ty³
 
FeMšioCl›Á
 struct {

41 
f’ame
 
¡ršg


46 
®Ÿs
 
¡ršg


49 
»Œ›ved
 
	mboŞ


54 
func
 
NewFeMšioCl›Á
(
f’ame
 
¡ršg
, 
®Ÿs
 sŒšgè*
	gC»d’tŸls
 {

55  
New
(&
FeMšioCl›Á
{

56 
f’ame
: filename,

57 
®Ÿs
:‡lias,

63 
	$func
 (
p
 *
FeMšioCl›Á
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

64 
p
.
f’ame
 == "" {

65 
v®ue
, 
ok
 :ğ
os
.
	`LookupEnv
("MINIO_SHARED_CREDENTIALS_FILE"); ok {

66 
p
.
f’ame
 = 
v®ue


68 
homeDœ
, 
”r
 :ğ
homedœ
.
	`Dœ
()

69 
”r
 !ğ
n
 {

70  
V®ue
{}, 
”r


72 
p
.
f’ame
 = 
f•©h
.
	`Još
(
homeDœ
, ".mc", "config.json")

73 
ruÁime
.
GOOS
 == "windows" {

74 
p
.
f’ame
 = 
f•©h
.
	`Još
(
homeDœ
, "mc", "config.json")

79 
p
.
®Ÿs
 == "" {

80 
p
.
®Ÿs
 = 
os
.
	`G‘’v
("MINIO_ALIAS")

81 
p
.
®Ÿs
 == "" {

82 
p
.
®Ÿs
 = "s3"

86 
p
.
»Œ›ved
 = 
çl£


88 
ho¡Cfg
, 
”r
 :ğ
	`lßdAlŸs
(
p
.
f’ame
,….
®Ÿs
)

89 
”r
 !ğ
n
 {

90  
V®ue
{}, 
”r


93 
p
.
»Œ›ved
 = 
Œue


94  
V®ue
{

95 
AcûssKeyID
: 
ho¡Cfg
.
AcûssKey
,

96 
Seü‘AcûssKey
: 
ho¡Cfg
.
Seü‘Key
,

97 
SigÃrTy³
: 
	`·r£SigÇtu»Ty³
(
ho¡Cfg
.
API
),

98 }, 
n


99 
	}
}

102 
	$func
 (
p
 *
FeMšioCl›Á
è
	$IsExpœed
(è
boŞ
 {

103  !
p
.
»Œ›ved


104 
	}
}

107 
ty³
 
ho¡CÚfig
 struct {

108 
URL
 
	m¡ršg
 `
	mjsÚ
:"url"`

109 
AcûssKey
 
¡ršg
 `
jsÚ
:"accessKey"`

110 
Seü‘Key
 
¡ršg
 `
jsÚ
:"secretKey"`

111 
API
 
¡ršg
 `
jsÚ
:"api"`

115 
ty³
 
cÚfig
 struct {

116 
V”siÚ
 
¡ršg
 `
jsÚ
:"version"`

117 
Ho¡s
 
m­
[
¡ršg
]
ho¡CÚfig
 `
jsÚ
:"hosts"`

123 
func
 
	$lßdAlŸs
(
f’ame
, 
®Ÿs
 
¡ršg
è(
ho¡CÚfig
, 
”rÜ
) {

124 
cfg
 :ğ&
cÚfig
{}

125 
cÚfigBy‹s
, 
”r
 :ğ
iout
.
	`R—dFe
(
f’ame
)

126 
”r
 !ğ
n
 {

127  
ho¡CÚfig
{}, 
”r


129 
”r
 = 
jsÚ
.
	`Unm¬sh®
(
cÚfigBy‹s
, 
cfg
);ƒ¼ !ğ
n
 {

130  
ho¡CÚfig
{}, 
”r


132  
cfg
.
Ho¡s
[
®Ÿs
], 
n


133 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/file_test.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

26 
func
 
	$Te¡FeAWS
(
t
 *
‹¡šg
.
T
) {

27 
os
.
	`CË¬’v
()

29 
üeds
 :ğ
	`NewFeAWSC»d’tŸls
("credentials.sample", "")

30 
üedV®ues
, 
”r
 :ğ
üeds
.
	`G‘
()

31 
”r
 !ğ
n
 {

32 
t
.
	`F©®
(
”r
)

35 
üedV®ues
.
AcûssKeyID
 != "accessKey" {

36 
t
.
	`E¼Üf
("Ex³ùed 'acûssKey', gÙ %s'", 
üedV®ues
.
AcûssKeyID
)

38 
üedV®ues
.
Seü‘AcûssKey
 != "secret" {

39 
t
.
	`E¼Üf
("Ex³ùed '£ü‘', gÙ %s'", 
üedV®ues
.
Seü‘AcûssKey
)

41 
üedV®ues
.
SessiÚTok’
 != "token" {

42 
t
.
	`E¼Üf
("Ex³ùed 'tok’', gÙ %s'", 
üedV®ues
.
SessiÚTok’
)

45 
os
.
	`S‘’v
("AWS_SHARED_CREDENTIALS_FILE", "credentials.sample")

46 
üeds
 = 
	`NewFeAWSC»d’tŸls
("", "")

47 
üedV®ues
, 
”r
 = 
üeds
.
	`G‘
()

48 
”r
 !ğ
n
 {

49 
t
.
	`F©®
(
”r
)

52 
üedV®ues
.
AcûssKeyID
 != "accessKey" {

53 
t
.
	`E¼Üf
("Ex³ùed 'acûssKey', gÙ %s'", 
üedV®ues
.
AcûssKeyID
)

55 
üedV®ues
.
Seü‘AcûssKey
 != "secret" {

56 
t
.
	`E¼Üf
("Ex³ùed '£ü‘', gÙ %s'", 
üedV®ues
.
Seü‘AcûssKey
)

58 
üedV®ues
.
SessiÚTok’
 != "token" {

59 
t
.
	`E¼Üf
("Ex³ùed 'tok’', gÙ %s'", 
üedV®ues
.
SessiÚTok’
)

62 
wd
, 
”r
 :ğ
os
.
	`G‘wd
()

63 
”r
 !ğ
n
 {

64 
t
.
	`F©®
(
”r
)

67 
os
.
	`S‘’v
("AWS_SHARED_CREDENTIALS_FILE", 
f•©h
.
	`Još
(
wd
, "credentials.sample"))

68 
üeds
 = 
	`NewFeAWSC»d’tŸls
("", "")

69 
üedV®ues
, 
”r
 = 
üeds
.
	`G‘
()

70 
”r
 !ğ
n
 {

71 
t
.
	`F©®
(
”r
)

74 
üedV®ues
.
AcûssKeyID
 != "accessKey" {

75 
t
.
	`E¼Üf
("Ex³ùed 'acûssKey', gÙ %s'", 
üedV®ues
.
AcûssKeyID
)

77 
üedV®ues
.
Seü‘AcûssKey
 != "secret" {

78 
t
.
	`E¼Üf
("Ex³ùed '£ü‘', gÙ %s'", 
üedV®ues
.
Seü‘AcûssKey
)

80 
üedV®ues
.
SessiÚTok’
 != "token" {

81 
t
.
	`E¼Üf
("Ex³ùed 'tok’', gÙ %s'", 
üedV®ues
.
SessiÚTok’
)

84 
os
.
	`CË¬’v
()

85 
os
.
	`S‘’v
("AWS_PROFILE", "no_token")

87 
üeds
 = 
	`NewFeAWSC»d’tŸls
("credentials.sample", "")

88 
üedV®ues
, 
”r
 = 
üeds
.
	`G‘
()

89 
”r
 !ğ
n
 {

90 
t
.
	`F©®
(
”r
)

93 
üedV®ues
.
AcûssKeyID
 != "accessKey" {

94 
t
.
	`E¼Üf
("Ex³ùed 'acûssKey', gÙ %s'", 
üedV®ues
.
AcûssKeyID
)

96 
üedV®ues
.
Seü‘AcûssKey
 != "secret" {

97 
t
.
	`E¼Üf
("Ex³ùed '£ü‘', gÙ %s'", 
üedV®ues
.
Seü‘AcûssKey
)

100 
os
.
	`CË¬’v
()

102 
üeds
 = 
	`NewFeAWSC»d’tŸls
("credentials.sample", "no_token")

103 
üedV®ues
, 
”r
 = 
üeds
.
	`G‘
()

104 
”r
 !ğ
n
 {

105 
t
.
	`F©®
(
”r
)

108 
üedV®ues
.
AcûssKeyID
 != "accessKey" {

109 
t
.
	`E¼Üf
("Ex³ùed 'acûssKey', gÙ %s'", 
üedV®ues
.
AcûssKeyID
)

111 
üedV®ues
.
Seü‘AcûssKey
 != "secret" {

112 
t
.
	`E¼Üf
("Ex³ùed '£ü‘', gÙ %s'", 
üedV®ues
.
Seü‘AcûssKey
)

115 
üeds
 = 
	`NewFeAWSC»d’tŸls
("credentials-non-existent.sample", "no_token")

116 
_
, 
”r
 = 
üeds
.
	`G‘
()

117 !
os
.
	`IsNÙExi¡
(
”r
) {

118 
t
.
	`E¼Üf
("Ex³ùed o³ÀnÚ-exi¡’t.jsÚ:‚Øsuch fÜ dœeùÜy, gÙ %s", 
”r
)

120 !
üeds
.
	`IsExpœed
() {

121 
t
.
	`E¼Ü
("Should beƒxpired if‚ot†oaded")

123 
	}
}

125 
func
 
	$Te¡FeMšioCl›Á
(
t
 *
‹¡šg
.
T
) {

126 
os
.
	`CË¬’v
()

128 
üeds
 :ğ
	`NewFeMšioCl›Á
("config.json.sample", "")

129 
üedV®ues
, 
”r
 :ğ
üeds
.
	`G‘
()

130 
”r
 !ğ
n
 {

131 
t
.
	`F©®
(
”r
)

134 
üedV®ues
.
AcûssKeyID
 != "accessKey" {

135 
t
.
	`E¼Üf
("Ex³ùed 'acûssKey', gÙ %s'", 
üedV®ues
.
AcûssKeyID
)

137 
üedV®ues
.
Seü‘AcûssKey
 != "secret" {

138 
t
.
	`E¼Üf
("Ex³ùed '£ü‘', gÙ %s'", 
üedV®ues
.
Seü‘AcûssKey
)

140 
üedV®ues
.
SigÃrTy³
 !ğ
SigÇtu»V4
 {

141 
t
.
	`E¼Üf
("Ex³ùed 'S3v4', gÙ %s'", 
üedV®ues
.
SigÃrTy³
)

144 
os
.
	`CË¬’v
()

145 
os
.
	`S‘’v
("MINIO_ALIAS", "play")

147 
üeds
 = 
	`NewFeMšioCl›Á
("config.json.sample", "")

148 
üedV®ues
, 
”r
 = 
üeds
.
	`G‘
()

149 
”r
 !ğ
n
 {

150 
t
.
	`F©®
(
”r
)

153 
üedV®ues
.
AcûssKeyID
 != "Q3AM3UQ867SPQQA43P2F" {

154 
t
.
	`E¼Üf
("Ex³ùed 'Q3AM3UQ867SPQQA43P2F', gÙ %s'", 
üedV®ues
.
AcûssKeyID
)

156 
üedV®ues
.
Seü‘AcûssKey
 != "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG" {

157 
t
.
	`E¼Üf
("Ex³ùed 'zuf+táeSlswRu7BJ86wek™nifILbZam1KYY3TG', gÙ %s'", 
üedV®ues
.
Seü‘AcûssKey
)

159 
üedV®ues
.
SigÃrTy³
 !ğ
SigÇtu»V2
 {

160 
t
.
	`E¼Üf
("Ex³ùed 'S3v2', gÙ %s'", 
üedV®ues
.
SigÃrTy³
)

163 
os
.
	`CË¬’v
()

165 
üeds
 = 
	`NewFeMšioCl›Á
("config.json.sample", "play")

166 
üedV®ues
, 
”r
 = 
üeds
.
	`G‘
()

167 
”r
 !ğ
n
 {

168 
t
.
	`F©®
(
”r
)

171 
üedV®ues
.
AcûssKeyID
 != "Q3AM3UQ867SPQQA43P2F" {

172 
t
.
	`E¼Üf
("Ex³ùed 'Q3AM3UQ867SPQQA43P2F', gÙ %s'", 
üedV®ues
.
AcûssKeyID
)

174 
üedV®ues
.
Seü‘AcûssKey
 != "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG" {

175 
t
.
	`E¼Üf
("Ex³ùed 'zuf+táeSlswRu7BJ86wek™nifILbZam1KYY3TG', gÙ %s'", 
üedV®ues
.
Seü‘AcûssKey
)

177 
üedV®ues
.
SigÃrTy³
 !ğ
SigÇtu»V2
 {

178 
t
.
	`E¼Üf
("Ex³ùed 'S3v2', gÙ %s'", 
üedV®ues
.
SigÃrTy³
)

181 
üeds
 = 
	`NewFeMšioCl›Á
("non-existent.json", "play")

182 
_
, 
”r
 = 
üeds
.
	`G‘
()

183 !
os
.
	`IsNÙExi¡
(
”r
) {

184 
t
.
	`E¼Üf
("Ex³ùed o³ÀnÚ-exi¡’t.jsÚ:‚Øsuch fÜ dœeùÜy, gÙ %s", 
”r
)

186 !
üeds
.
	`IsExpœed
() {

187 
t
.
	`E¼Ü
("Should beƒxpired if‚ot†oaded")

189 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/iam_aws.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

37 cÚ¡ 
	gDeçuÉExpœyWšdow
 = 
time
.
SecÚd
 * 10

41 
ty³
 
IAM
 struct {

42 
Expœy


45 
Cl›Á
 *
h‰p
.Client

48 
’dpošt
 
¡ršg


54 
deçuÉIAMRŞeEndpošt
 = "http://169.254.169.254"

55 
deçuÉECSRŞeEndpošt
 = "http://169.254.170.2"

56 
deçuÉIAMSecur™yC»dsP©h
 = "/latest/meta-data/iam/security-credentials"

60 
func
 
	$g‘Endpošt
(
’dpošt
 
¡ršg
è(¡ršg, 
boŞ
) {

61 
’dpošt
 != "" {

62  
’dpošt
, 
os
.
	`G‘’v
("AWS_CONTAINER_CREDENTIALS_RELATIVE_URI") != ""

64 
ecsURI
 :ğ
os
.
	`G‘’v
("AWS_CONTAINER_CREDENTIALS_RELATIVE_URI");ƒcsURI != "" {

65  
fmt
.
	`S´štf
("%s%s", 
deçuÉECSRŞeEndpošt
, 
ecsURI
), 
Œue


67  
deçuÉIAMRŞeEndpošt
, 
çl£


68 
	}
}

71 
func
 
NewIAM
(
’dpošt
 
¡ršg
è*
	gC»d’tŸls
 {

72 
	gp
 :ğ&
IAM
{

73 
Cl›Á
: &
h‰p
.Client{

74 
T¿n¥Üt
: 
h‰p
.
DeçuÉT¿n¥Üt
,

76 
’dpošt
:ƒndpoint,

78  
New
(
p
)

84 
	$func
 (
m
 *
IAM
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

85 
’dpošt
, 
isEcsTask
 :ğ
	`g‘Endpošt
(
m
.endpoint)

86 
v¬
 
rŞeC»ds
 
ec2RŞeC»dRe¥Body


87 
v¬
 
”r
 
”rÜ


88 
isEcsTask
 {

89 
rŞeC»ds
, 
”r
 = 
	`g‘EcsTaskC»d’tŸls
(
m
.
Cl›Á
, 
’dpošt
)

91 
rŞeC»ds
, 
”r
 = 
	`g‘C»d’tŸls
(
m
.
Cl›Á
, 
’dpošt
)

93 
”r
 !ğ
n
 {

94  
V®ue
{}, 
”r


97 
m
.
	`S‘Expœ©iÚ
(
rŞeC»ds
.
Expœ©iÚ
, 
DeçuÉExpœyWšdow
)

99  
V®ue
{

100 
AcûssKeyID
: 
rŞeC»ds
.AccessKeyID,

101 
Seü‘AcûssKey
: 
rŞeC»ds
.SecretAccessKey,

102 
SessiÚTok’
: 
rŞeC»ds
.
Tok’
,

103 
SigÃrTy³
: 
SigÇtu»V4
,

104 }, 
n


105 
	}
}

109 
ty³
 
ec2RŞeC»dRe¥Body
 struct {

111 
Expœ©iÚ
 
	mtime
.
Time


112 
AcûssKeyID
 
¡ršg


113 
Seü‘AcûssKey
 
¡ršg


114 
Tok’
 
¡ršg


117 
Code
 
¡ršg


118 
Mes§ge
 
¡ršg


121 
La¡Upd©ed
 
	mtime
.
Time


122 
Ty³
 
	m¡ršg


128 
func
 
g‘IAMRŞeURL
(
’dpošt
 
¡ršg
è(*
	gu¾
.
	gURL
, 
	g”rÜ
) {

129 
	gu
, 
	g”r
 :ğ
u¾
.
P¬£
(
’dpošt
)

130 
”r
 !ğ
n
 {

131  
n
, 
”r


133 
u
.
P©h
 = 
deçuÉIAMSecur™yC»dsP©h


134  
u
, 
	gn


141 
func
 
li¡RŞeNames
(
ş›Á
 *
h‰p
.
Cl›Á
, 
u
 *
u¾
.
URL
è([]
	g¡ršg
, 
	g”rÜ
) {

142 
	g»q
, 
	g”r
 :ğ
h‰p
.
NewReque¡
("GET", 
u
.
SŒšg
(), 
n
)

143 
	g”r
 !ğ
n
 {

144  
n
, 
”r


146 
»¥
, 
	g”r
 :ğ
ş›Á
.
Do
(
»q
)

147 
”r
 !ğ
n
 {

148  
n
, 
”r


150 
deãr
 
»¥
.
Body
.
Clo£
()

151 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

152  
n
, 
”rÜs
.
New
(
»¥
.
Stus
)

155 
üedsLi¡
 :ğ[]
¡ršg
{}

156 
s
 :ğ
bufio
.
NewSÿÂ”
(
»¥
.
Body
)

157 
s
.
Sÿn
() {

158 
üedsLi¡
 = 
­³nd
(üedsLi¡, 
s
.
Text
())

161 
	g”r
 :ğ
s
.
E¼
();ƒ¼ !ğ
n
 {

162  
n
, 
”r


165  
üedsLi¡
, 
	gn


168 
func
 
	$g‘EcsTaskC»d’tŸls
(
ş›Á
 *
h‰p
.
Cl›Á
, 
’dpošt
 
¡ršg
è(
ec2RŞeC»dRe¥Body
, 
”rÜ
) {

169 
»q
, 
”r
 :ğ
h‰p
.
	`NewReque¡
("GET", 
’dpošt
, 
n
)

170 
”r
 !ğ
n
 {

171  
ec2RŞeC»dRe¥Body
{}, 
”r


174 
»¥
, 
”r
 :ğ
ş›Á
.
	`Do
(
»q
)

175 
”r
 !ğ
n
 {

176  
ec2RŞeC»dRe¥Body
{}, 
”r


178 
deãr
 
»¥
.
Body
.
	`Clo£
()

179 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

180  
ec2RŞeC»dRe¥Body
{}, 
”rÜs
.
	`New
(
»¥
.
Stus
)

183 
»¥C»ds
 :ğ
ec2RŞeC»dRe¥Body
{}

184 
”r
 :ğ
jsÚ
.
	`NewDecod”
(
»¥
.
Body
).
	`Decode
(&
»¥C»ds
);ƒ¼ !ğ
n
 {

185  
ec2RŞeC»dRe¥Body
{}, 
”r


188  
»¥C»ds
, 
n


189 
	}
}

196 
func
 
	$g‘C»d’tŸls
(
ş›Á
 *
h‰p
.
Cl›Á
, 
’dpošt
 
¡ršg
è(
ec2RŞeC»dRe¥Body
, 
”rÜ
) {

199 
u
, 
”r
 :ğ
	`g‘IAMRŞeURL
(
’dpošt
)

200 
”r
 !ğ
n
 {

201  
ec2RŞeC»dRe¥Body
{}, 
”r


205 
rŞeNames
, 
”r
 :ğ
	`li¡RŞeNames
(
ş›Á
, 
u
)

206 
”r
 !ğ
n
 {

207  
ec2RŞeC»dRe¥Body
{}, 
”r


210 
	`Ën
(
rŞeNames
) == 0 {

211  
ec2RŞeC»dRe¥Body
{}, 
”rÜs
.
	`New
("No IAM„oles‡ttachedohis EC2 service")

216 
rŞeName
 :ğ
rŞeNames
[0]

224 
u
.
P©h
 = 
·th
.
	`Još
(u.P©h, 
rŞeName
)

225 
»q
, 
”r
 :ğ
h‰p
.
	`NewReque¡
("GET", 
u
.
	`SŒšg
(), 
n
)

226 
”r
 !ğ
n
 {

227  
ec2RŞeC»dRe¥Body
{}, 
”r


230 
»¥
, 
”r
 :ğ
ş›Á
.
	`Do
(
»q
)

231 
”r
 !ğ
n
 {

232  
ec2RŞeC»dRe¥Body
{}, 
”r


234 
deãr
 
»¥
.
Body
.
	`Clo£
()

235 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

236  
ec2RŞeC»dRe¥Body
{}, 
”rÜs
.
	`New
(
»¥
.
Stus
)

239 
»¥C»ds
 :ğ
ec2RŞeC»dRe¥Body
{}

240 
”r
 :ğ
jsÚ
.
	`NewDecod”
(
»¥
.
Body
).
	`Decode
(&
»¥C»ds
);ƒ¼ !ğ
n
 {

241  
ec2RŞeC»dRe¥Body
{}, 
”r


244 
»¥C»ds
.
Code
 != "Success" {

246  
ec2RŞeC»dRe¥Body
{}, 
”rÜs
.
	`New
(
»¥C»ds
.
Mes§ge
)

249  
»¥C»ds
, 
n


250 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/iam_aws_test.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

29 cÚ¡ 
	güedsRe¥Tm¶
 = `{

39 cÚ¡ 
üedsFaRe¥Tm¶
 = `{

45 cÚ¡ 
üedsRe¥EcsTaskTm¶
 = `{

52 
func
 
š™Te¡FaS”v”
(è*
h‰±e¡
.
S”v”
 {

53 
£rv”
 :ğ
h‰±e¡
.
NewS”v”
(
h‰p
.
HªdËrFunc
(
func
(
w
 h‰p.
Re¥Ú£Wr™”
, 
r
 *h‰p.
Reque¡
) {

54 
h‰p
.
E¼Ü
(
w
, "NÙ‡Îowed", h‰p.
StusBadReque¡
)

56  
	g£rv”


59 
func
 
š™Te¡S”v”NoRŞes
(è*
	gh‰±e¡
.
	gS”v”
 {

60 
	g£rv”
 :ğ
h‰±e¡
.
NewS”v”
(
h‰p
.
HªdËrFunc
(
func
(
w
 h‰p.
Re¥Ú£Wr™”
, 
r
 *h‰p.
Reque¡
) {

61 
w
.
Wr™e
([]
by‹
(""))

63  
	g£rv”


66 
func
 
š™Te¡S”v”
(
expœeOn
 
¡ršg
, 
çAssume
 
boŞ
è*
	gh‰±e¡
.
	gS”v”
 {

67 
	g£rv”
 :ğ
h‰±e¡
.
NewS”v”
(
h‰p
.
HªdËrFunc
(
func
(
w
 h‰p.
Re¥Ú£Wr™”
, 
r
 *h‰p.
Reque¡
) {

68 
r
.
URL
.
P©h
 == "/latest/meta-data/iam/security-credentials" {

69 
fmt
.
F´šn
(
w
, "RoleName")

70 } 
r
.
URL
.
P©h
 == "/latest/meta-data/iam/security-credentials/RoleName" {

71 
çAssume
 {

72 
fmt
.
F´štf
(
w
, 
üedsFaRe¥Tm¶
)

74 
fmt
.
F´štf
(
w
, 
üedsRe¥Tm¶
, 
expœeOn
)

77 
h‰p
.
E¼Ü
(
w
, "bad„eque¡", h‰p.
StusBadReque¡
)

81  
	g£rv”


84 
func
 
š™EcsTaskTe¡S”v”
(
expœeOn
 
¡ršg
è*
	gh‰±e¡
.
	gS”v”
 {

85 
	g£rv”
 :ğ
h‰±e¡
.
NewS”v”
(
h‰p
.
HªdËrFunc
(
func
(
w
 h‰p.
Re¥Ú£Wr™”
, 
r
 *h‰p.
Reque¡
) {

86 
fmt
.
F´štf
(
w
, 
üedsRe¥EcsTaskTm¶
, 
expœeOn
)

89  
	g£rv”


92 
func
 
	$Te¡IAMM®fÜmedEndpošt
(
t
 *
‹¡šg
.
T
) {

93 
üeds
 :ğ
	`NewIAM
("%%%%")

94 
_
, 
”r
 :ğ
üeds
.
	`G‘
()

95 
”r
 =ğ
n
 {

96 
t
.
	`F©®
("Unexpected should fail here")

98 
”r
.
	`E¼Ü
(è!ğ`
·r£
 %%%%: 
šv®id
 
URL
 
esÿ³
 "%%%"` {

99 
t
.
	`F©®f
("Ex³ùed…¬£ %%%%%%%%: inv®id URLƒsÿ³ \"%%%%%%\", gÙ %s", 
”r
)

101 
	}
}

103 
func
 
	$Te¡IAMFaS”v”
(
t
 *
‹¡šg
.
T
) {

104 
£rv”
 :ğ
	`š™Te¡FaS”v”
()

105 
deãr
 
£rv”
.
	`Clo£
()

107 
üeds
 :ğ
	`NewIAM
(
£rv”
.
URL
)

109 
_
, 
”r
 :ğ
üeds
.
	`G‘
()

110 
”r
 =ğ
n
 {

111 
t
.
	`F©®
("Unexpected should fail here")

113 
”r
.
	`E¼Ü
() != "400 Bad Request" {

114 
t
.
	`F©®f
("Ex³ùed '400 Bad Reque¡', gÙ %s", 
”r
)

116 
	}
}

118 
func
 
	$Te¡IAMNoRŞes
(
t
 *
‹¡šg
.
T
) {

119 
£rv”
 :ğ
	`š™Te¡S”v”NoRŞes
()

120 
deãr
 
£rv”
.
	`Clo£
()

122 
üeds
 :ğ
	`NewIAM
(
£rv”
.
URL
)

123 
_
, 
”r
 :ğ
üeds
.
	`G‘
()

124 
”r
 =ğ
n
 {

125 
t
.
	`F©®
("Unexpected should fail here")

127 
”r
.
	`E¼Ü
() != "No IAM„oles‡ttachedohis EC2 service" {

128 
t
.
	`F©®f
("Ex³ùed 'NØIAM„Şe ©chedØthi EC2 s”viû', gÙ %s", 
”r
)

130 
	}
}

132 
func
 
	$Te¡IAM
(
t
 *
‹¡šg
.
T
) {

133 
£rv”
 :ğ
	`š™Te¡S”v”
("2014-12-16T01:51:37Z", 
çl£
)

134 
deãr
 
£rv”
.
	`Clo£
()

136 
p
 :ğ&
IAM
{

137 
Cl›Á
: 
h‰p
.
DeçuÉCl›Á
,

138 
’dpošt
: 
£rv”
.
URL
,

141 
üeds
, 
”r
 :ğ
p
.
	`R‘r›ve
()

142 
”r
 !ğ
n
 {

143 
t
.
	`F©®
(
”r
)

146 "acûssKey" !ğ
üeds
.
AcûssKeyID
 {

147 
t
.
	`E¼Üf
("Ex³ùed \"acûssKey\", gÙ %s", 
üeds
.
AcûssKeyID
)

150 "£ü‘" !ğ
üeds
.
Seü‘AcûssKey
 {

151 
t
.
	`E¼Üf
("Ex³ùed \"£ü‘\", gÙ %s", 
üeds
.
Seü‘AcûssKey
)

154 "tok’" !ğ
üeds
.
SessiÚTok’
 {

155 
t
.
	`E¼Üf
("Ex³ùed \"tok’\", gÙ %s", 
üeds
.
SessiÚTok’
)

158 !
p
.
	`IsExpœed
() {

159 
t
.
	`E¼Ü
("Expected credso beƒxpired.")

161 
	}
}

163 
func
 
	$Te¡IAMFaAssume
(
t
 *
‹¡šg
.
T
) {

164 
£rv”
 :ğ
	`š™Te¡S”v”
("2014-12-16T01:51:37Z", 
Œue
)

165 
deãr
 
£rv”
.
	`Clo£
()

167 
p
 :ğ&
IAM
{

168 
Cl›Á
: 
h‰p
.
DeçuÉCl›Á
,

169 
’dpošt
: 
£rv”
.
URL
,

172 
_
, 
”r
 :ğ
p
.
	`R‘r›ve
()

173 
”r
 =ğ
n
 {

174 
t
.
	`F©®
("Unexpected success, should fail")

176 
”r
.
	`E¼Ü
() != "ErrorMsg" {

177 
t
.
	`E¼Üf
("Ex³ùed \"E¼ÜMsg\", gÙ %s", 
”r
)

179 
	}
}

181 
func
 
	$Te¡IAMIsExpœed
(
t
 *
‹¡šg
.
T
) {

182 
£rv”
 :ğ
	`š™Te¡S”v”
("2014-12-16T01:51:37Z", 
çl£
)

183 
deãr
 
£rv”
.
	`Clo£
()

185 
p
 :ğ&
IAM
{

186 
Cl›Á
: 
h‰p
.
DeçuÉCl›Á
,

187 
’dpošt
: 
£rv”
.
URL
,

189 
p
.
Cu¼’tTime
 = 
	`func
(è
time
.
Time
 {

190  
time
.
	`D©e
(2014, 12, 15, 21, 26, 0, 0,ime.
UTC
)

193 !
p
.
	`IsExpœed
() {

194 
t
.
	`E¼Ü
("Expected credso beƒxpired before„etrieve.")

197 
_
, 
”r
 :ğ
p
.
	`R‘r›ve
()

198 
”r
 !ğ
n
 {

199 
t
.
	`F©®
(
”r
)

202 
p
.
	`IsExpœed
() {

203 
t
.
	`E¼Ü
("Expected credso‚ot beƒxpired‡fter„etrieve.")

206 
p
.
Cu¼’tTime
 = 
	`func
(è
time
.
Time
 {

207  
time
.
	`D©e
(3014, 12, 15, 21, 26, 0, 0,ime.
UTC
)

210 !
p
.
	`IsExpœed
() {

211 
t
.
	`E¼Ü
("Expected credso beƒxpired when currenime has changed")

213 
	}
}

215 
func
 
	$Te¡EcsTask
(
t
 *
‹¡šg
.
T
) {

216 
£rv”
 :ğ
	`š™EcsTaskTe¡S”v”
("2014-12-16T01:51:37Z")

217 
deãr
 
£rv”
.
	`Clo£
()

218 
p
 :ğ&
IAM
{

219 
Cl›Á
: 
h‰p
.
DeçuÉCl›Á
,

220 
’dpošt
: 
£rv”
.
URL
,

222 
os
.
	`S‘’v
("AWS_CONTAINER_CREDENTIALS_RELATIVE_URI", "/v2/credentials?id=task_credential_id")

223 
üeds
, 
”r
 :ğ
p
.
	`R‘r›ve
()

224 
os
.
	`Un£‹nv
("AWS_CONTAINER_CREDENTIALS_RELATIVE_URI")

225 
”r
 !ğ
n
 {

226 
t
.
	`E¼Üf
("UÃx³ùed fau» %s", 
”r
)

228 "acûssKey" !ğ
üeds
.
AcûssKeyID
 {

229 
t
.
	`E¼Üf
("Ex³ùed \"acûssKey\", gÙ %s", 
üeds
.
AcûssKeyID
)

232 "£ü‘" !ğ
üeds
.
Seü‘AcûssKey
 {

233 
t
.
	`E¼Üf
("Ex³ùed \"£ü‘\", gÙ %s", 
üeds
.
Seü‘AcûssKey
)

236 "tok’" !ğ
üeds
.
SessiÚTok’
 {

237 
t
.
	`E¼Üf
("Ex³ùed \"tok’\", gÙ %s", 
üeds
.
SessiÚTok’
)

240 !
p
.
	`IsExpœed
() {

241 
t
.
	`E¼Ü
("Expected credso beƒxpired.")

243 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/signature-type.go

18 
·ckage
 
üed’tŸls


20 
	gimpÜt
 "strings"

23 
ty³
 
SigÇtu»Ty³
 

28 
SigÇtu»DeçuÉ
 
SigÇtu»Ty³
 = 
iÙa


29 
SigÇtu»V4


30 
SigÇtu»V2


31 
SigÇtu»V4SŒ—mšg


32 
SigÇtu»AnÚymous


36 
	$func
 (
s
 
SigÇtu»Ty³
è
	$IsV2
(è
boŞ
 {

37  
s
 =ğ
SigÇtu»V2


38 
	}
}

41 
	$func
 (
s
 
SigÇtu»Ty³
è
	$IsV4
(è
boŞ
 {

42  
s
 =ğ
SigÇtu»V4
 || s =ğ
SigÇtu»DeçuÉ


43 
	}
}

46 
	$func
 (
s
 
SigÇtu»Ty³
è
	$IsSŒ—mšgV4
(è
boŞ
 {

47  
s
 =ğ
SigÇtu»V4SŒ—mšg


48 
	}
}

51 
	$func
 (
s
 
SigÇtu»Ty³
è
	$IsAnÚymous
(è
boŞ
 {

52  
s
 =ğ
SigÇtu»AnÚymous


53 
	}
}

57 
	$func
 (
s
 
SigÇtu»Ty³
è
	$SŒšg
(è
¡ršg
 {

58 
s
.
	`IsV2
() {

60 } 
s
.
	`IsV4
() {

62 } 
s
.
	`IsSŒ—mšgV4
() {

66 
	}
}

68 
func
 
	$·r£SigÇtu»Ty³
(
¡r
 
¡ršg
è
SigÇtu»Ty³
 {

69 
¡ršgs
.
	`Equ®FŞd
(
¡r
, "S3v4") {

70  
SigÇtu»V4


71 } 
¡ršgs
.
	`Equ®FŞd
(
¡r
, "S3v2") {

72  
SigÇtu»V2


73 } 
¡ršgs
.
	`Equ®FŞd
(
¡r
, "S3v4Streaming") {

74  
SigÇtu»V4SŒ—mšg


76  
SigÇtu»AnÚymous


77 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/static.go

18 
·ckage
 
üed’tŸls


22 
ty³
 
Stic
 struct {

23 
	mV®ue


31 
func
 
NewSticV2
(
id
, 
£ü‘
, 
tok’
 
¡ršg
è*
	gC»d’tŸls
 {

32  
NewStic
(
id
, 
£ü‘
, 
tok’
, 
SigÇtu»V2
)

36 
func
 
NewSticV4
(
id
, 
£ü‘
, 
tok’
 
¡ršg
è*
	gC»d’tŸls
 {

37  
NewStic
(
id
, 
£ü‘
, 
tok’
, 
SigÇtu»V4
)

42 
func
 
NewStic
(
id
, 
£ü‘
, 
tok’
 
¡ršg
, 
sigÃrTy³
 
SigÇtu»Ty³
è*
	gC»d’tŸls
 {

43  
New
(&
Stic
{

44 
V®ue
: Value{

45 
AcûssKeyID
: 
id
,

46 
Seü‘AcûssKey
: 
£ü‘
,

47 
SessiÚTok’
: 
tok’
,

48 
SigÃrTy³
: 
sigÃrTy³
,

54 
	$func
 (
s
 *
Stic
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

55 
s
.
AcûssKeyID
 =ğ"" || s.
Seü‘AcûssKey
 == "" {

57  
V®ue
{
SigÃrTy³
: 
SigÇtu»AnÚymous
}, 
n


59  
s
.
V®ue
, 
n


60 
	}
}

65 
	$func
 (
s
 *
Stic
è
	$IsExpœed
(è
boŞ
 {

66  
çl£


67 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/static_test.go

18 
·ckage
 
üed’tŸls


20 
	gimpÜt
 "testing"

22 
func
 
	$Te¡SticG‘
(
t
 *
‹¡šg
.
T
) {

23 
üeds
 :ğ
	`NewStic
("UXHW", "SECRET", "", 
SigÇtu»V4
)

24 
üedV®ues
, 
”r
 :ğ
üeds
.
	`G‘
()

25 
”r
 !ğ
n
 {

26 
t
.
	`F©®
(
”r
)

29 "UXHW" !ğ
üedV®ues
.
AcûssKeyID
 {

30 
t
.
	`E¼Üf
("Ex³ùed‡cûs key IDØm©ch \"UXHW\", gÙ %s", 
üedV®ues
.
AcûssKeyID
)

32 "SECRET" !ğ
üedV®ues
.
Seü‘AcûssKey
 {

33 
t
.
	`E¼Üf
("Ex³ùed seü‘‡cûs keyØm©ch \"SECRET\", gÙ %s", 
üedV®ues
.
Seü‘AcûssKey
)

36 
üedV®ues
.
SessiÚTok’
 != "" {

37 
t
.
	`E¼Ü
("Expected sessionokeno match")

40 
üedV®ues
.
SigÃrTy³
 !ğ
SigÇtu»V4
 {

41 
t
.
	`E¼Üf
("Ex³ùed 'S3v4', gÙ %s", 
üedV®ues
.
SigÃrTy³
)

44 
üeds
.
	`IsExpœed
() {

45 
t
.
	`E¼Ü
("Static credentials should‚everƒxpire")

48 
üeds
 = 
	`NewStic
("", "", "", 
SigÇtu»DeçuÉ
)

49 
üedV®ues
, 
”r
 = 
üeds
.
	`G‘
()

50 
”r
 !ğ
n
 {

51 
t
.
	`F©®
(
”r
)

54 "" !ğ
üedV®ues
.
AcûssKeyID
 {

55 
t
.
	`E¼Üf
("Ex³ùed‡cûs key IDØm©chƒm±y sŒšg, gÙ %s", 
üedV®ues
.
AcûssKeyID
)

57 "" !ğ
üedV®ues
.
Seü‘AcûssKey
 {

58 
t
.
	`E¼Üf
("Ex³ùed seü‘‡cûs keyØm©chƒm±y sŒšg, gÙ %s", 
üedV®ues
.
Seü‘AcûssKey
)

61 !
üedV®ues
.
SigÃrTy³
.
	`IsAnÚymous
() {

62 
t
.
	`E¼Üf
("Ex³ùed 'AnÚymous', gÙ %s", 
üedV®ues
.
SigÃrTy³
)

65 
üeds
.
	`IsExpœed
() {

66 
t
.
	`E¼Ü
("Static credentials should‚everƒxpire")

68 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/sts_client_grants.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

31 
ty³
 
AssumedRŞeU£r
 struct {

32 
Aº
 
¡ršg


33 
AssumedRŞeID
 
	m¡ršg
 `
	mxml
:"AssumeRoleId"`

37 
ty³
 
AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
 struct {

38 
XMLName
 
xml
.
Name
 `xml:"h‰ps://¡s.amazÚaws.com/doc/2011-06-15/ AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£" 
jsÚ
:"-"`

39 
ResuÉ
 
Cl›ÁG¿ÁsResuÉ
 `
xml
:"AssumeRoleWithClientGrantsResult"`

40 
Re¥Ú£M‘ad©a
 struct {

41 
Reque¡ID
 
¡ršg
 `
xml
:"RequestId,omitempty"`

42 } `
xml
:"ResponseMetadata,omitempty"`

47 
ty³
 
Cl›ÁG¿ÁsResuÉ
 struct {

48 
AssumedRŞeU£r
 AssumedRŞeU£¸`
xml
:",omitempty"`

49 
Aud›nû
 
¡ršg
 `
xml
:",omitempty"`

50 
C»d’tŸls
 struct {

51 
AcûssKey
 
¡ršg
 `
xml
:"AcûssKeyId" 
jsÚ
:"accessKey,omitempty"`

52 
Seü‘Key
 
¡ršg
 `
xml
:"Seü‘AcûssKey" 
jsÚ
:"secretKey,omitempty"`

53 
Expœ©iÚ
 
time
.
Time
 `
xml
:"Expœ©iÚ" 
jsÚ
:"expiration,omitempty"`

54 
SessiÚTok’
 
¡ršg
 `
xml
:"SessiÚTok’" 
jsÚ
:"sessionToken,omitempty"`

55 } `
xml
:",omitempty"`

56 
PackedPŞicySize
 `
xml
:",omitempty"`

57 
Provid”
 
¡ršg
 `
xml
:",omitempty"`

58 
SubjeùFromCl›ÁG¿ÁsTok’
 
¡ršg
 `
xml
:",omitempty"`

62 
ty³
 
Cl›ÁG¿ÁsTok’
 struct {

63 
tok’
 
¡ršg


64 
expœy
 

68 
	$func
 (
c
 *
Cl›ÁG¿ÁsTok’
è
	$Tok’
(è
¡ršg
 {

69  
c
.
tok’


70 
	}
}

74 
	$func
 (
c
 *
Cl›ÁG¿ÁsTok’
è
	$Expœy
(è
¡ršg
 {

75  
fmt
.
	`S´štf
("%d", 
c
.
expœy
)

76 
	}
}

80 
ty³
 
STSCl›ÁG¿Ás
 struct {

81 
Expœy


84 
Cl›Á
 *
	mh‰p
.Client

87 
¡sEndpošt
 
¡ršg


95 
g‘Cl›ÁG¿ÁsTok’Expœy
 
func
(è(*
	mCl›ÁG¿ÁsTok’
, 
	m”rÜ
)

100 
func
 
NewSTSCl›ÁG¿Ás
(
¡sEndpošt
 
¡ršg
, 
g‘Cl›ÁG¿ÁsTok’Expœy
 func(è(*
Cl›ÁG¿ÁsTok’
, 
”rÜ
)è(*
	gC»d’tŸls
, 
	g”rÜ
) {

101 
	g¡sEndpošt
 == "" {

102  
n
, 
”rÜs
.
New
("STSƒndpoint cannot beƒmpty")

104 
g‘Cl›ÁG¿ÁsTok’Expœy
 =ğ
n
 {

105  
n
, 
”rÜs
.
New
("Client grants‡ccessoken‡ndƒxpiry„etrieval function should be defined")

107  
New
(&
STSCl›ÁG¿Ás
{

108 
Cl›Á
: &
h‰p
.Client{

109 
T¿n¥Üt
: 
h‰p
.
DeçuÉT¿n¥Üt
,

111 
¡sEndpošt
: stsEndpoint,

112 
g‘Cl›ÁG¿ÁsTok’Expœy
: getClientGrantsTokenExpiry,

113 }), 
	gn


116 
func
 
g‘Cl›ÁG¿ÁsC»d’tŸls
(
şÁ
 *
h‰p
.
Cl›Á
, 
’dpošt
 
¡ršg
,

117 
g‘Cl›ÁG¿ÁsTok’Expœy
 
func
(è(*
Cl›ÁG¿ÁsTok’
, 
”rÜ
)è(
	gAssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
, 
	g”rÜ
) {

119 
	gacûssTok’
, 
	g”r
 :ğ
g‘Cl›ÁG¿ÁsTok’Expœy
()

120 
”r
 !ğ
n
 {

121  
AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
{}, 
”r


124 
v
 :ğ
u¾
.
V®ues
{}

125 
v
.
S‘
("Action", "AssumeRoleWithClientGrants")

126 
	gv
.
S‘
("Tok’", 
acûssTok’
.
Tok’
())

127 
	gv
.
S‘
("Du¿tiÚSecÚds", 
acûssTok’
.
Expœy
())

128 
	gv
.
S‘
("Version", "2011-06-15")

130 
	gu
, 
	g”r
 :ğ
u¾
.
P¬£
(
’dpošt
)

131 
”r
 !ğ
n
 {

132  
AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
{}, 
”r


134 
u
.
RawQu”y
 = 
v
.
Encode
()

136 
»q
, 
	g”r
 :ğ
h‰p
.
NewReque¡
("POST", 
u
.
SŒšg
(), 
n
)

137 
	g”r
 !ğ
n
 {

138  
AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
{}, 
”r


140 
»¥
, 
	g”r
 :ğ
şÁ
.
Do
(
»q
)

141 
”r
 !ğ
n
 {

142  
AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
{}, 
”r


144 
deãr
 
»¥
.
Body
.
Clo£
()

145 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

146  
AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
{}, 
”rÜs
.
New
(
»¥
.
Stus
)

149 
a
 :ğ
AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
{}

150 
”r
 = 
xml
.
NewDecod”
(
»¥
.
Body
).
Decode
(&
a
); 
	g”r
 !ğ
n
 {

151  
AssumeRŞeW™hCl›ÁG¿ÁsRe¥Ú£
{}, 
”r


153  
a
, 
	gn


158 
	$func
 (
m
 *
STSCl›ÁG¿Ás
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

159 
a
, 
”r
 :ğ
	`g‘Cl›ÁG¿ÁsC»d’tŸls
(
m
.
Cl›Á
, m.
¡sEndpošt
, m.
g‘Cl›ÁG¿ÁsTok’Expœy
)

160 
”r
 !ğ
n
 {

161  
V®ue
{}, 
”r


165 
m
.
	`S‘Expœ©iÚ
(
a
.
ResuÉ
.
C»d’tŸls
.
Expœ©iÚ
, 
DeçuÉExpœyWšdow
)

167  
V®ue
{

168 
AcûssKeyID
: 
a
.
ResuÉ
.
C»d’tŸls
.
AcûssKey
,

169 
Seü‘AcûssKey
: 
a
.
ResuÉ
.
C»d’tŸls
.
Seü‘Key
,

170 
SessiÚTok’
: 
a
.
ResuÉ
.
C»d’tŸls
.SessionToken,

171 
SigÃrTy³
: 
SigÇtu»V4
,

172 }, 
n


173 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/sts_web_identity.go

18 
·ckage
 
üed’tŸls


20 
impÜt
 (

30 
ty³
 
AssumeRŞeW™hWebId’t™yRe¥Ú£
 struct {

31 
XMLName
 
	mxml
.
	mName
 `xml:"h‰ps://¡s.amazÚaws.com/doc/2011-06-15/ AssumeRŞeW™hWebId’t™yRe¥Ú£" 
jsÚ
:"-"`

32 
ResuÉ
 
WebId’t™yResuÉ
 `
xml
:"AssumeRoleWithWebIdentityResult"`

33 
Re¥Ú£M‘ad©a
 struct {

34 
Reque¡ID
 
¡ršg
 `
xml
:"RequestId,omitempty"`

35 } `
xml
:"ResponseMetadata,omitempty"`

40 
ty³
 
WebId’t™yResuÉ
 struct {

41 
AssumedRŞeU£r
 AssumedRŞeU£¸`
xml
:",omitempty"`

42 
Aud›nû
 
¡ršg
 `
xml
:",omitempty"`

43 
C»d’tŸls
 struct {

44 
AcûssKey
 
¡ršg
 `
xml
:"AcûssKeyId" 
jsÚ
:"accessKey,omitempty"`

45 
Seü‘Key
 
¡ršg
 `
xml
:"Seü‘AcûssKey" 
jsÚ
:"secretKey,omitempty"`

46 
Expœ©iÚ
 
time
.
Time
 `
xml
:"Expœ©iÚ" 
jsÚ
:"expiration,omitempty"`

47 
SessiÚTok’
 
¡ršg
 `
xml
:"SessiÚTok’" 
jsÚ
:"sessionToken,omitempty"`

48 } `
xml
:",omitempty"`

49 
PackedPŞicySize
 `
xml
:",omitempty"`

50 
Provid”
 
¡ršg
 `
xml
:",omitempty"`

51 
SubjeùFromWebId’t™yTok’
 
¡ršg
 `
xml
:",omitempty"`

55 
ty³
 
WebId’t™yTok’
 struct {

56 
tok’
 
¡ršg


57 
expœy
 

61 
	$func
 (
c
 *
WebId’t™yTok’
è
	$Tok’
(è
¡ršg
 {

62  
c
.
tok’


63 
	}
}

67 
	$func
 (
c
 *
WebId’t™yTok’
è
	$Expœy
(è
¡ršg
 {

68  
fmt
.
	`S´štf
("%d", 
c
.
expœy
)

69 
	}
}

73 
ty³
 
STSWebId’t™y
 struct {

74 
Expœy


77 
Cl›Á
 *
	mh‰p
.Client

80 
¡sEndpošt
 
¡ršg


88 
g‘WebIDTok’Expœy
 
func
(è(*
	mWebId’t™yTok’
, 
	m”rÜ
)

93 
func
 
NewSTSWebId’t™y
(
¡sEndpošt
 
¡ršg
, 
g‘WebIDTok’Expœy
 func(è(*
WebId’t™yTok’
, 
”rÜ
)è(*
	gC»d’tŸls
, 
	g”rÜ
) {

94 
	g¡sEndpošt
 == "" {

95  
n
, 
”rÜs
.
New
("STSƒndpoint cannot beƒmpty")

97 
g‘WebIDTok’Expœy
 =ğ
n
 {

98  
n
, 
”rÜs
.
New
("Web IDoken‡ndƒxpiry„etrieval function should be defined")

100  
New
(&
STSWebId’t™y
{

101 
Cl›Á
: &
h‰p
.Client{

102 
T¿n¥Üt
: 
h‰p
.
DeçuÉT¿n¥Üt
,

104 
¡sEndpošt
: stsEndpoint,

105 
g‘WebIDTok’Expœy
: getWebIDTokenExpiry,

106 }), 
	gn


109 
func
 
g‘WebId’t™yC»d’tŸls
(
şÁ
 *
h‰p
.
Cl›Á
, 
’dpošt
 
¡ršg
,

110 
g‘WebIDTok’Expœy
 
func
(è(*
WebId’t™yTok’
, 
”rÜ
)è(
	gAssumeRŞeW™hWebId’t™yRe¥Ú£
, 
	g”rÜ
) {

111 
	gidTok’
, 
	g”r
 :ğ
g‘WebIDTok’Expœy
()

112 
”r
 !ğ
n
 {

113  
AssumeRŞeW™hWebId’t™yRe¥Ú£
{}, 
”r


116 
v
 :ğ
u¾
.
V®ues
{}

117 
v
.
S‘
("Action", "AssumeRoleWithWebIdentity")

118 
	gv
.
S‘
("WebId’t™yTok’", 
idTok’
.
Tok’
())

119 
	gv
.
S‘
("Du¿tiÚSecÚds", 
idTok’
.
Expœy
())

120 
	gv
.
S‘
("Version", "2011-06-15")

122 
	gu
, 
	g”r
 :ğ
u¾
.
P¬£
(
’dpošt
)

123 
”r
 !ğ
n
 {

124  
AssumeRŞeW™hWebId’t™yRe¥Ú£
{}, 
”r


127 
u
.
RawQu”y
 = 
v
.
Encode
()

129 
»q
, 
	g”r
 :ğ
h‰p
.
NewReque¡
("POST", 
u
.
SŒšg
(), 
n
)

130 
	g”r
 !ğ
n
 {

131  
AssumeRŞeW™hWebId’t™yRe¥Ú£
{}, 
”r


134 
»¥
, 
	g”r
 :ğ
şÁ
.
Do
(
»q
)

135 
”r
 !ğ
n
 {

136  
AssumeRŞeW™hWebId’t™yRe¥Ú£
{}, 
”r


139 
deãr
 
»¥
.
Body
.
Clo£
()

140 
»¥
.
StusCode
 !ğ
h‰p
.
StusOK
 {

141  
AssumeRŞeW™hWebId’t™yRe¥Ú£
{}, 
”rÜs
.
New
(
»¥
.
Stus
)

144 
a
 :ğ
AssumeRŞeW™hWebId’t™yRe¥Ú£
{}

145 
”r
 = 
xml
.
NewDecod”
(
»¥
.
Body
).
Decode
(&
a
); 
	g”r
 !ğ
n
 {

146  
AssumeRŞeW™hWebId’t™yRe¥Ú£
{}, 
”r


149  
a
, 
	gn


154 
	$func
 (
m
 *
STSWebId’t™y
è
	$R‘r›ve
(è(
V®ue
, 
”rÜ
) {

155 
a
, 
”r
 :ğ
	`g‘WebId’t™yC»d’tŸls
(
m
.
Cl›Á
, m.
¡sEndpošt
, m.
g‘WebIDTok’Expœy
)

156 
”r
 !ğ
n
 {

157  
V®ue
{}, 
”r


161 
m
.
	`S‘Expœ©iÚ
(
a
.
ResuÉ
.
C»d’tŸls
.
Expœ©iÚ
, 
DeçuÉExpœyWšdow
)

163  
V®ue
{

164 
AcûssKeyID
: 
a
.
ResuÉ
.
C»d’tŸls
.
AcûssKey
,

165 
Seü‘AcûssKey
: 
a
.
ResuÉ
.
C»d’tŸls
.
Seü‘Key
,

166 
SessiÚTok’
: 
a
.
ResuÉ
.
C»d’tŸls
.SessionToken,

167 
SigÃrTy³
: 
SigÇtu»V4
,

168 }, 
n


169 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/encrypt/server-side.go

18 
·ckage
 
’üy±


20 
impÜt
 (

32 
	gs£G’”icH—d”
 = "X-Amz-Server-Side-Encryption"

35 
s£KmsKeyID
 = 
s£G’”icH—d”
 + "-Aws-Kms-Key-Id"

37 
s£Enüy±iÚCÚ‹xt
 = 
s£G’”icH—d”
 + "-Encryption-Context"

40 
s£Cu¡om”AlgÜ™hm
 = 
s£G’”icH—d”
 + "-Customer-Algorithm"

42 
s£Cu¡om”Key
 = 
s£G’”icH—d”
 + "-Customer-Key"

44 
s£Cu¡om”KeyMD5
 = 
s£G’”icH—d”
 + "-Customer-Key-MD5"

47 
s£CİyCu¡om”AlgÜ™hm
 = "X-Amz-Copy-Source-Server-Side-Encryption-Customer-Algorithm"

49 
s£CİyCu¡om”Key
 = "X-Amz-Copy-Source-Server-Side-Encryption-Customer-Key"

51 
s£CİyCu¡om”KeyMD5
 = "X-Amz-Copy-Source-Server-Side-Encryption-Customer-Key-MD5"

58 
ty³
 
PBKDF
 
	$func
(
·sswÜd
, 
§É
 []
by‹
è
S”v”Side


62 
v¬
 
DeçuÉPBKDF
 
PBKDF
 = 
	$func
(
·sswÜd
, 
§É
 []
by‹
è
S”v”Side
 {

63 
s£
 :ğ
s£c
{}

64 
	`cİy
(
s£
[:], 
¬gÚ2
.
	`IDKey
(
·sswÜd
, 
§É
, 1, 64*1024, 4, 32))

65  
s£


66 
	}
}

73 
ty³
 
Ty³
 
¡ršg


77 
SSEC
 
	gTy³
 = "SSE-C"

79 
KMS
 
Ty³
 = "KMS"

81 
S3
 
Ty³
 = "S3"

85 
ty³
 
S”v”Side
 
š‹rçû
 {

87 
Ty³
() Type

92 
M¬sh®
(
h
 
h‰p
.
H—d”
)

97 
func
 
	$NewSSE
(è
S”v”Side
 {  
s3
{} 
	}
}

100 
func
 
NewSSEKMS
(
keyID
 
¡ršg
, 
cÚ‹xt
 
š‹rçû
{}è(
	gS”v”Side
, 
	g”rÜ
) {

101 
	gcÚ‹xt
 =ğ
n
 {

102  
kms
{
key
: 
keyID
, 
hasCÚ‹xt
: 
çl£
}, 
n


104 
£rŸlizedCÚ‹xt
, 
	g”r
 :ğ
jsÚ
.
M¬sh®
(
cÚ‹xt
)

105 
”r
 !ğ
n
 {

106  
n
, 
”r


108  
kms
{
key
: 
keyID
, 
cÚ‹xt
: 
£rŸlizedCÚ‹xt
, 
hasCÚ‹xt
: 
Œue
}, 
	gn


113 
func
 
	$NewSSEC
(
key
 []
by‹
è(
S”v”Side
, 
”rÜ
) {

114 
	`Ën
(
key
) != 32 {

115  
n
, 
”rÜs
.
	`New
("encrypt: SSE-C key must be 256 bit†ong")

117 
s£
 :ğ
s£c
{}

118 
	`cİy
(
s£
[:], 
key
)

119  
s£
, 
n


120 
	}
}

127 
func
 
	$SSE
(
s£
 
S”v”Side
) ServerSide {

128 
s£
 =ğ
n
 || s£.
	`Ty³
(è!ğ
SSEC
 {

129  
s£


131 
s£
, 
ok
 :ğs£.(
s£cCİy
); ok {

132  
	`s£c
(
s£
)

134  
s£


135 
	}
}

143 
func
 
	$SSECİy
(
s£
 
S”v”Side
) ServerSide {

144 
s£
 =ğ
n
 || s£.
	`Ty³
(è!ğ
SSEC
 {

145  
s£


147 
s£
, 
ok
 :ğs£.(
s£c
); ok {

148  
	`s£cCİy
(
s£
)

150  
s£


151 
	}
}

153 
ty³
 
	gs£c
 [32]
by‹


155 
	$func
 (
s
 
s£c
è
	$Ty³
(è
Ty³
 {  
SSEC
 
	}
}

157 
	$func
 (
s
 
s£c
è
	$M¬sh®
(
h
 
h‰p
.
H—d”
) {

158 
keyMD5
 :ğ
md5
.
	`Sum
(
s
[:])

159 
h
.
	`S‘
(
s£Cu¡om”AlgÜ™hm
, "AES256")

160 
h
.
	`S‘
(
s£Cu¡om”Key
, 
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
s
[:]))

161 
h
.
	`S‘
(
s£Cu¡om”KeyMD5
, 
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
keyMD5
[:]))

162 
	}
}

164 
ty³
 
s£cCİy
 [32]
by‹


166 
	$func
 (
s
 
s£cCİy
è
	$Ty³
(è
Ty³
 {  
SSEC
 
	}
}

168 
	$func
 (
s
 
s£cCİy
è
	$M¬sh®
(
h
 
h‰p
.
H—d”
) {

169 
keyMD5
 :ğ
md5
.
	`Sum
(
s
[:])

170 
h
.
	`S‘
(
s£CİyCu¡om”AlgÜ™hm
, "AES256")

171 
h
.
	`S‘
(
s£CİyCu¡om”Key
, 
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
s
[:]))

172 
h
.
	`S‘
(
s£CİyCu¡om”KeyMD5
, 
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
keyMD5
[:]))

173 
	}
}

175 
ty³
 
s3
 struct{}

177 
	$func
 (
s
 
s3
è
	$Ty³
(è
Ty³
 {  
S3
 
	}
}

179 
	$func
 (
s
 
s3
è
	$M¬sh®
(
h
 
h‰p
.
H—d”
è{ h.
	`S‘
(
s£G’”icH—d”
, "AES256"è
	}
}

181 
ty³
 
kms
 struct {

182 
key
 
¡ršg


183 
	mcÚ‹xt
 []
by‹


184 
hasCÚ‹xt
 
	mboŞ


187 
	$func
 (
s
 
kms
è
	$Ty³
(è
Ty³
 {  
KMS
 
	}
}

189 
	$func
 (
s
 
kms
è
	$M¬sh®
(
h
 
h‰p
.
H—d”
) {

190 
h
.
	`S‘
(
s£G’”icH—d”
, "aws:kms")

191 
h
.
	`S‘
(
s£KmsKeyID
, 
s
.
key
)

192 
s
.
hasCÚ‹xt
 {

193 
h
.
	`S‘
(
s£Enüy±iÚCÚ‹xt
, 
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
s
.
cÚ‹xt
))

195 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/policy/bucket-policy-condition.go

18 
·ckage
 
pŞicy


20 
	gimpÜt
 "github.com/minio/minio-go/pkg/set"

23 
ty³
 
CÚd™iÚKeyM­
 
	gm­
[
¡ršg
]
	g£t
.
SŒšgS‘


26 
	$func
 (
ckm
 
CÚd™iÚKeyM­
è
	$Add
(
key
 
¡ršg
, 
v®ue
 
£t
.
SŒšgS‘
) {

27 
v
, 
ok
 :ğ
ckm
[
key
]; ok {

28 
ckm
[
key
] = 
v
.
	`UniÚ
(
v®ue
)

30 
ckm
[
key
] = 
£t
.
	`CİySŒšgS‘
(
v®ue
)

32 
	}
}

35 
	$func
 (
ckm
 
CÚd™iÚKeyM­
è
	$Remove
(
key
 
¡ršg
, 
v®ue
 
£t
.
SŒšgS‘
) {

36 
v
, 
ok
 :ğ
ckm
[
key
]; ok {

37 
v®ue
 !ğ
n
 {

38 
ckm
[
key
] = 
v
.
	`Difã»nû
(
v®ue
)

41 
ckm
[
key
].
	`IsEm±y
() {

42 
	`d–‘e
(
ckm
, 
key
)

45 
	}
}

48 
	$func
 (
ckm
 
CÚd™iÚKeyM­
è
	$RemoveKey
(
key
 
¡ršg
) {

49 
_
, 
ok
 :ğ
ckm
[
key
]; ok {

50 
	`d–‘e
(
ckm
, 
key
)

52 
	}
}

55 
func
 
	$CİyCÚd™iÚKeyM­
(
cÚdKeyM­
 
CÚd™iÚKeyM­
) ConditionKeyMap {

56 
out
 :ğ
	`make
(
CÚd™iÚKeyM­
)

58 
k
, 
v
 :ğ
¿nge
 
cÚdKeyM­
 {

59 
out
[
k
] = 
£t
.
	`CİySŒšgS‘
(
v
)

62  
out


63 
	}
}

66 
func
 
	$m”geCÚd™iÚKeyM­
(
cÚdKeyM­1
 
CÚd™iÚKeyM­
, 
cÚdKeyM­2
 ConditionKeyMap) ConditionKeyMap {

67 
out
 :ğ
	`CİyCÚd™iÚKeyM­
(
cÚdKeyM­1
)

69 
k
, 
v
 :ğ
¿nge
 
cÚdKeyM­2
 {

70 
ev
, 
ok
 :ğ
out
[
k
]; ok {

71 
out
[
k
] = 
ev
.
	`UniÚ
(
v
)

73 
out
[
k
] = 
£t
.
	`CİySŒšgS‘
(
v
)

77  
out


78 
	}
}

81 
ty³
 
CÚd™iÚM­
 
	gm­
[
¡ršg
]
CÚd™iÚKeyM­


84 
	$func
 (
cÚd
 
CÚd™iÚM­
è
	$Add
(
cÚdKey
 
¡ršg
, 
cÚdKeyM­
 
CÚd™iÚKeyM­
) {

85 
v
, 
ok
 :ğ
cÚd
[
cÚdKey
]; ok {

86 
cÚd
[
cÚdKey
] = 
	`m”geCÚd™iÚKeyM­
(
v
, 
cÚdKeyM­
)

88 
cÚd
[
cÚdKey
] = 
	`CİyCÚd™iÚKeyM­
(
cÚdKeyM­
)

90 
	}
}

93 
	$func
 (
cÚd
 
CÚd™iÚM­
è
	$Remove
(
cÚdKey
 
¡ršg
) {

94 
_
, 
ok
 :ğ
cÚd
[
cÚdKey
]; ok {

95 
	`d–‘e
(
cÚd
, 
cÚdKey
)

97 
	}
}

100 
func
 
	$m”geCÚd™iÚM­
(
cÚdM­1
 
CÚd™iÚM­
, 
cÚdM­2
 ConditionMap) ConditionMap {

101 
out
 :ğ
	`make
(
CÚd™iÚM­
)

103 
k
, 
v
 :ğ
¿nge
 
cÚdM­1
 {

104 
out
[
k
] = 
	`CİyCÚd™iÚKeyM­
(
v
)

107 
k
, 
v
 :ğ
¿nge
 
cÚdM­2
 {

108 
ev
, 
ok
 :ğ
out
[
k
]; ok {

109 
out
[
k
] = 
	`m”geCÚd™iÚKeyM­
(
ev
, 
v
)

111 
out
[
k
] = 
	`CİyCÚd™iÚKeyM­
(
v
)

115  
out


116 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/policy/bucket-policy-condition_test.go

18 
·ckage
 
pŞicy


20 
impÜt
 (

28 
func
 
	$Te¡CÚd™iÚKeyM­Add
(
t
 *
‹¡šg
.
T
) {

29 
cÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

30 
‹¡Ca£s
 := []struct {

31 
key
 
¡ršg


32 
v®ue
 
£t
.
SŒšgS‘


33 
ex³ùedResuÉ
 
¡ršg


36 {"s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"), `{"s3:prefix":["hello"]}`},

38 {"s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"), `{"s3:prefix":["hello"]}`},

40 {"s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("world"), `{"s3:prefix":["hello","world"]}`},

43 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

44 
cÚdKeyM­
.
	`Add
(
‹¡Ca£
.
key
,e¡Ca£.
v®ue
)

45 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
cÚdKeyM­
);ƒ¼ !ğ
n
 {

46 
t
.
	`F©®f
("UÇbËØm¬sh® CÚd™iÚKeyM­ØJSON, %s", 
”r
)

48 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

49 
t
.
	`F©®f
("ÿ£: %+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

53 
	}
}

56 
func
 
	$Te¡CÚd™iÚKeyM­Remove
(
t
 *
‹¡šg
.
T
) {

57 
cÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

58 
cÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello", "world"))

60 
‹¡Ca£s
 := []struct {

61 
key
 
¡ršg


62 
v®ue
 
£t
.
SŒšgS‘


63 
ex³ùedResuÉ
 
¡ršg


66 {"s3:my´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"), `{"s3:prefix":["hello","world"]}`},

68 {"s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"), `{"s3:prefix":["world"]}`},

70 {"s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("world"), `{}`},

73 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

74 
cÚdKeyM­
.
	`Remove
(
‹¡Ca£
.
key
,e¡Ca£.
v®ue
)

75 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
cÚdKeyM­
);ƒ¼ !ğ
n
 {

76 
t
.
	`F©®f
("UÇbËØm¬sh® CÚd™iÚKeyM­ØJSON, %s", 
”r
)

78 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

79 
t
.
	`F©®f
("ÿ£: %+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

83 
	}
}

86 
func
 
	$Te¡CÚd™iÚKeyM­RemoveKey
(
t
 *
‹¡šg
.
T
) {

87 
cÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

88 
cÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello", "world"))

90 
‹¡Ca£s
 := []struct {

91 
key
 
¡ršg


92 
ex³ùedResuÉ
 
¡ršg


100 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

101 
cÚdKeyM­
.
	`RemoveKey
(
‹¡Ca£
.
key
)

102 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
cÚdKeyM­
);ƒ¼ !ğ
n
 {

103 
t
.
	`F©®f
("UÇbËØm¬sh® CÚd™iÚKeyM­ØJSON, %s", 
”r
)

105 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

106 
t
.
	`F©®f
("ÿ£: %+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

110 
	}
}

113 
func
 
	$Te¡CİyCÚd™iÚKeyM­
(
t
 *
‹¡šg
.
T
) {

114 
em±yCÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

115 
nÚEm±yCÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

116 
nÚEm±yCÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello", "world"))

118 
‹¡Ca£s
 := []struct {

119 
cÚdKeyM­
 
CÚd™iÚKeyM­


120 
ex³ùedResuÉ
 
¡ršg


123 {
em±yCÚdKeyM­
, `{}`},

125 {
nÚEm±yCÚdKeyM­
, `{"s3:prefix":["hello","world"]}`},

128 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

129 
cÚdKeyM­
 :ğ
	`CİyCÚd™iÚKeyM­
(
‹¡Ca£
.condKeyMap)

130 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
cÚdKeyM­
);ƒ¼ !ğ
n
 {

131 
t
.
	`F©®f
("UÇbËØm¬sh® CÚd™iÚKeyM­ØJSON, %s", 
”r
)

133 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

134 
t
.
	`F©®f
("ÿ£: %+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

138 
	}
}

141 
func
 
	$Te¡M”geCÚd™iÚKeyM­
(
t
 *
‹¡šg
.
T
) {

142 
cÚdKeyM­1
 :ğ
	`make
(
CÚd™iÚKeyM­
)

143 
cÚdKeyM­1
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

145 
cÚdKeyM­2
 :ğ
	`make
(
CÚd™iÚKeyM­
)

146 
cÚdKeyM­2
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("world"))

148 
cÚdKeyM­3
 :ğ
	`make
(
CÚd™iÚKeyM­
)

149 
cÚdKeyM­3
.
	`Add
("s3:my´efix", 
£t
.
	`C»©eSŒšgS‘
("world"))

151 
‹¡Ca£s
 := []struct {

152 
cÚdKeyM­1
 
CÚd™iÚKeyM­


153 
cÚdKeyM­2
 
CÚd™iÚKeyM­


154 
ex³ùedResuÉ
 
¡ršg


157 {
	`make
(
CÚd™iÚKeyM­
), make(ConditionKeyMap), `{}`},

159 {
	`make
(
CÚd™iÚKeyM­
), 
cÚdKeyM­1
, `{"s3:prefix":["hello"]}`},

161 {
cÚdKeyM­1
, 
	`make
(
CÚd™iÚKeyM­
), `{"s3:prefix":["hello"]}`},

163 {
cÚdKeyM­1
, condKeyMap1, `{"s3:prefix":["hello"]}`},

165 {
cÚdKeyM­1
, 
cÚdKeyM­2
, `{"s3:prefix":["hello","world"]}`},

167 {
cÚdKeyM­1
, 
cÚdKeyM­3
, `{"s3:myprefix":["world"],"s3:prefix":["hello"]}`},

170 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

171 
cÚdKeyM­
 :ğ
	`m”geCÚd™iÚKeyM­
(
‹¡Ca£
.
cÚdKeyM­1
,e¡Ca£.
cÚdKeyM­2
)

172 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
cÚdKeyM­
);ƒ¼ !ğ
n
 {

173 
t
.
	`F©®f
("UÇbËØm¬sh® CÚd™iÚKeyM­ØJSON, %s", 
”r
)

175 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

176 
t
.
	`F©®f
("ÿ£: %+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

180 
	}
}

183 
func
 
	$Te¡CÚd™iÚM­Add
(
t
 *
‹¡šg
.
T
) {

184 
cÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

186 
cÚdKeyM­1
 :ğ
	`make
(
CÚd™iÚKeyM­
)

187 
cÚdKeyM­1
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

189 
cÚdKeyM­2
 :ğ
	`make
(
CÚd™iÚKeyM­
)

190 
cÚdKeyM­2
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello", "world"))

192 
‹¡Ca£s
 := []struct {

193 
key
 
¡ršg


194 
v®ue
 
CÚd™iÚKeyM­


195 
ex³ùedResuÉ
 
¡ršg


198 {"SŒšgEqu®s", 
cÚdKeyM­1
, `{"StringEquals":{"s3:prefix":["hello"]}}`},

200 {"SŒšgEqu®s", 
cÚdKeyM­1
, `{"StringEquals":{"s3:prefix":["hello"]}}`},

202 {"SŒšgEqu®s", 
cÚdKeyM­2
, `{"StringEquals":{"s3:prefix":["hello","world"]}}`},

205 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

206 
cÚdM­
.
	`Add
(
‹¡Ca£
.
key
,e¡Ca£.
v®ue
)

207 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
cÚdM­
);ƒ¼ !ğ
n
 {

208 
t
.
	`F©®f
("UÇbËØm¬sh® CÚd™iÚKeyM­ØJSON, %s", 
”r
)

210 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

211 
t
.
	`F©®f
("ÿ£: %+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

215 
	}
}

218 
func
 
	$Te¡CÚd™iÚM­Remove
(
t
 *
‹¡šg
.
T
) {

219 
cÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

220 
cÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

221 
cÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello", "world"))

222 
cÚdM­
.
	`Add
("SŒšgEqu®s", 
cÚdKeyM­
)

224 
‹¡Ca£s
 := []struct {

225 
key
 
¡ršg


226 
ex³ùedResuÉ
 
¡ršg


234 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

235 
cÚdM­
.
	`Remove
(
‹¡Ca£
.
key
)

236 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
cÚdM­
);ƒ¼ !ğ
n
 {

237 
t
.
	`F©®f
("UÇbËØm¬sh® CÚd™iÚKeyM­ØJSON, %s", 
”r
)

239 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

240 
t
.
	`F©®f
("ÿ£: %+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

244 
	}
}

247 
func
 
	$Te¡M”geCÚd™iÚM­
(
t
 *
‹¡šg
.
T
) {

248 
cÚdKeyM­1
 :ğ
	`make
(
CÚd™iÚKeyM­
)

249 
cÚdKeyM­1
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

250 
cÚdM­1
 :ğ
	`make
(
CÚd™iÚM­
)

251 
cÚdM­1
.
	`Add
("SŒšgEqu®s", 
cÚdKeyM­1
)

253 
cÚdKeyM­2
 :ğ
	`make
(
CÚd™iÚKeyM­
)

254 
cÚdKeyM­2
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("world"))

255 
cÚdM­2
 :ğ
	`make
(
CÚd™iÚM­
)

256 
cÚdM­2
.
	`Add
("SŒšgEqu®s", 
cÚdKeyM­2
)

258 
cÚdM­3
 :ğ
	`make
(
CÚd™iÚM­
)

259 
cÚdM­3
.
	`Add
("SŒšgNÙEqu®s", 
cÚdKeyM­2
)

261 
‹¡Ca£s
 := []struct {

262 
cÚdM­1
 
CÚd™iÚM­


263 
cÚdM­2
 
CÚd™iÚM­


264 
ex³ùedResuÉ
 
¡ršg


267 {
	`make
(
CÚd™iÚM­
), make(ConditionMap), `{}`},

269 {
	`make
(
CÚd™iÚM­
), 
cÚdM­1
, `{"StringEquals":{"s3:prefix":["hello"]}}`},

271 {
cÚdM­1
, 
	`make
(
CÚd™iÚM­
), `{"StringEquals":{"s3:prefix":["hello"]}}`},

273 {
cÚdM­1
, condMap1, `{"StringEquals":{"s3:prefix":["hello"]}}`},

275 {
cÚdM­1
, 
cÚdM­2
, `{"StringEquals":{"s3:prefix":["hello","world"]}}`},

277 {
cÚdM­1
, 
cÚdM­3
, `{"StringEquals":{"s3:prefix":["hello"]},"StringNotEquals":{"s3:prefix":["world"]}}`},

280 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

281 
cÚdM­
 :ğ
	`m”geCÚd™iÚM­
(
‹¡Ca£
.
cÚdM­1
,e¡Ca£.
cÚdM­2
)

282 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
cÚdM­
);ƒ¼ !ğ
n
 {

283 
t
.
	`F©®f
("UÇbËØm¬sh® CÚd™iÚKeyM­ØJSON, %s", 
”r
)

285 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

286 
t
.
	`F©®f
("ÿ£: %+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

290 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/policy/bucket-policy.go

18 
·ckage
 
pŞicy


20 
impÜt
 (

30 
ty³
 
Buck‘PŞicy
 
¡ršg


34 
Buck‘PŞicyNÚe
 
	gBuck‘PŞicy
 = "none"

35 
Buck‘PŞicyR—dOÆy
 = "readonly"

36 
Buck‘PŞicyR—dWr™e
 = "readwrite"

37 
Buck‘PŞicyWr™eOÆy
 = "writeonly"

41 
	$func
 (
p
 
Buck‘PŞicy
è
	$IsV®idBuck‘PŞicy
(è
boŞ
 {

42 
p
 {

43 
Buck‘PŞicyNÚe
, 
Buck‘PŞicyR—dOÆy
, 
Buck‘PŞicyR—dWr™e
, 
Buck‘PŞicyWr™eOÆy
:

44  
Œue


46  
çl£


47 
	}
}

50 cÚ¡ 
awsResourûP»fix
 = "arn:aws:s3:::"

53 
v¬
 
commÚBuck‘AùiÚs
 = 
£t
.
C»©eSŒšgS‘
("s3:GetBucketLocation")

56 
v¬
 
»adOÆyBuck‘AùiÚs
 = 
£t
.
C»©eSŒšgS‘
("s3:ListBucket")

59 
v¬
 
wr™eOÆyBuck‘AùiÚs
 = 
£t
.
C»©eSŒšgS‘
("s3:ListBucketMultipartUploads")

62 
v¬
 
»adOÆyObjeùAùiÚs
 = 
£t
.
C»©eSŒšgS‘
("s3:GetObject")

65 
v¬
 
wr™eOÆyObjeùAùiÚs
 = 
£t
.
C»©eSŒšgS‘
("s3:AbortMultipartUpload", "s3:DeleteObject", "s3:ListMultipartUploadParts", "s3:PutObject")

68 
v¬
 
	g»adWr™eObjeùAùiÚs
 = 
»adOÆyObjeùAùiÚs
.
	$UniÚ
(
wr™eOÆyObjeùAùiÚs
)

71 
v¬
 
v®idAùiÚs
 = 
commÚBuck‘AùiÚs
.

72 
	`UniÚ
(
»adOÆyBuck‘AùiÚs
).

73 
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
).

74 
	`UniÚ
(
»adOÆyObjeùAùiÚs
).

75 
	$UniÚ
(
wr™eOÆyObjeùAùiÚs
)

77 
v¬
 
¡¬tsW™hFunc
 = 
	$func
(
»sourû
 
¡ršg
, 
»sourûP»fix
 sŒšgè
boŞ
 {

78  
¡ršgs
.
	`HasP»fix
(
»sourû
, 
»sourûP»fix
)

79 
	}
}

82 
ty³
 
U£r
 struct {

83 
AWS
 
	m£t
.
	mSŒšgS‘
 `
	mjsÚ
:"AWS,omitempty"`

84 
CªÚiÿlU£r
 
£t
.
SŒšgS‘
 `
jsÚ
:"CanonicalUser,omitempty"`

90 
	$func
 (
u
 *
U£r
è
	$Unm¬sh®JSON
(
d©a
 []
by‹
è
”rÜ
 {

93 
ty³
 
AlŸsU£r
 
U£r


94 
v¬
 
au
 
AlŸsU£r


95 
”r
 :ğ
jsÚ
.
	`Unm¬sh®
(
d©a
, &
au
)

96 
”r
 =ğ
n
 {

97 *
u
 = 
	`U£r
(
au
)

98  
n


102 
v¬
 
¡r
 
¡ršg


103 
”r
 = 
jsÚ
.
	`Unm¬sh®
(
d©a
, &
¡r
)

104 
”r
 =ğ
n
 {

105 
¡r
 != "*" {

106  
”rÜs
.
	`New
("unrecognized Principal field")

108 *
u
 = 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")}

109  
n


111  
”r


112 
	}
}

115 
ty³
 
S‹m’t
 struct {

116 
AùiÚs
 
£t
.
SŒšgS‘
 `
jsÚ
:"Action"`

117 
CÚd™iÚs
 
CÚd™iÚM­
 `
jsÚ
:"Condition,omitempty"`

118 
Efãù
 
¡ršg


119 
Pršc®
 
U£r
 `
jsÚ
:"Principal"`

120 
Resourûs
 
£t
.
SŒšgS‘
 `
jsÚ
:"Resource"`

121 
Sid
 
¡ršg


125 
ty³
 
Buck‘AcûssPŞicy
 struct {

126 
V”siÚ
 
¡ršg


127 
S‹m’ts
 []
S‹m’t
 `
jsÚ
:"Statement"`

131 
func
 
	$isV®idS‹m’t
(
¡©em’t
 
S‹m’t
, 
buck‘Name
 
¡ršg
è
boŞ
 {

132 
¡©em’t
.
AùiÚs
.
	`IÁ”£ùiÚ
(
v®idAùiÚs
).
	`IsEm±y
() {

133  
çl£


136 
¡©em’t
.
Efãù
 != "Allow" {

137  
çl£


140 
¡©em’t
.
Pršc®
.
AWS
 =ğ
n
 || !¡©em’t.Pršc®.AWS.
	`CÚšs
("*") {

141  
çl£


144 
buck‘Resourû
 :ğ
awsResourûP»fix
 + 
buck‘Name


145 
¡©em’t
.
Resourûs
.
	`CÚšs
(
buck‘Resourû
) {

146  
Œue


149 
¡©em’t
.
Resourûs
.
	`FuncM©ch
(
¡¬tsW™hFunc
, 
buck‘Resourû
+"/").
	`IsEm±y
() {

150  
çl£


153  
Œue


154 
	}
}

157 
func
 
	$ÃwBuck‘S‹m’t
(
pŞicy
 
Buck‘PŞicy
, 
buck‘Name
 
¡ršg
, 
´efix
 sŒšgè(
¡©em’ts
 []
S‹m’t
) {

158 
¡©em’ts
 = []
S‹m’t
{}

159 
pŞicy
 =ğ
Buck‘PŞicyNÚe
 || 
buck‘Name
 == "" {

160  
¡©em’ts


163 
buck‘Resourû
 :ğ
£t
.
	`C»©eSŒšgS‘
(
awsResourûP»fix
 + 
buck‘Name
)

165 
¡©em’t
 :ğ
S‹m’t
{

166 
AùiÚs
: 
commÚBuck‘AùiÚs
,

167 
Efãù
: "Allow",

168 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

169 
Resourûs
: 
buck‘Resourû
,

170 
Sid
: "",

172 
¡©em’ts
 = 
	`­³nd
(¡©em’ts, 
¡©em’t
)

174 
pŞicy
 =ğ
Buck‘PŞicyR—dOÆy
 ||…Şicy =ğ
Buck‘PŞicyR—dWr™e
 {

175 
¡©em’t
 = 
S‹m’t
{

176 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

177 
Efãù
: "Allow",

178 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

179 
Resourûs
: 
buck‘Resourû
,

180 
Sid
: "",

182 
´efix
 != "" {

183 
cÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

184 
cÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
(
´efix
))

185 
cÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

186 
cÚdM­
.
	`Add
("SŒšgEqu®s", 
cÚdKeyM­
)

187 
¡©em’t
.
CÚd™iÚs
 = 
cÚdM­


189 
¡©em’ts
 = 
	`­³nd
(¡©em’ts, 
¡©em’t
)

192 
pŞicy
 =ğ
Buck‘PŞicyWr™eOÆy
 ||…Şicy =ğ
Buck‘PŞicyR—dWr™e
 {

193 
¡©em’t
 = 
S‹m’t
{

194 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

195 
Efãù
: "Allow",

196 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

197 
Resourûs
: 
buck‘Resourû
,

198 
Sid
: "",

200 
¡©em’ts
 = 
	`­³nd
(¡©em’ts, 
¡©em’t
)

203  
¡©em’ts


204 
	}
}

207 
func
 
	$ÃwObjeùS‹m’t
(
pŞicy
 
Buck‘PŞicy
, 
buck‘Name
 
¡ršg
, 
´efix
 sŒšgè(
¡©em’ts
 []
S‹m’t
) {

208 
¡©em’ts
 = []
S‹m’t
{}

209 
pŞicy
 =ğ
Buck‘PŞicyNÚe
 || 
buck‘Name
 == "" {

210  
¡©em’ts


213 
¡©em’t
 :ğ
S‹m’t
{

214 
Efãù
: "Allow",

215 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

216 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
(
awsResourûP»fix
 + 
buck‘Name
 + "/" + 
´efix
 + "*"),

217 
Sid
: "",

220 
pŞicy
 =ğ
Buck‘PŞicyR—dOÆy
 {

221 
¡©em’t
.
AùiÚs
 = 
»adOÆyObjeùAùiÚs


222 } 
pŞicy
 =ğ
Buck‘PŞicyWr™eOÆy
 {

223 
¡©em’t
.
AùiÚs
 = 
wr™eOÆyObjeùAùiÚs


224 } 
pŞicy
 =ğ
Buck‘PŞicyR—dWr™e
 {

225 
¡©em’t
.
AùiÚs
 = 
»adWr™eObjeùAùiÚs


228 
¡©em’ts
 = 
	`­³nd
(¡©em’ts, 
¡©em’t
)

229  
¡©em’ts


230 
	}
}

233 
func
 
	$ÃwS‹m’ts
(
pŞicy
 
Buck‘PŞicy
, 
buck‘Name
 
¡ršg
, 
´efix
 sŒšgè(
¡©em’ts
 []
S‹m’t
) {

234 
¡©em’ts
 = []
S‹m’t
{}

235 
ns
 :ğ
	`ÃwBuck‘S‹m’t
(
pŞicy
, 
buck‘Name
, 
´efix
)

236 
¡©em’ts
 = 
	`­³nd
(¡©em’ts, 
ns
...)

238 
ns
 = 
	`ÃwObjeùS‹m’t
(
pŞicy
, 
buck‘Name
, 
´efix
)

239 
¡©em’ts
 = 
	`­³nd
(¡©em’ts, 
ns
...)

241  
¡©em’ts


242 
	}
}

245 
func
 
	$g‘InU£PŞicy
(
¡©em’ts
 []
S‹m’t
, 
buck‘Name
 
¡ršg
, 
´efix
 sŒšgè(
»adOÆyInU£
, 
wr™eOÆyInU£
 
boŞ
) {

246 
»sourûP»fix
 :ğ
awsResourûP»fix
 + 
buck‘Name
 + "/"

247 
objeùResourû
 :ğ
awsResourûP»fix
 + 
buck‘Name
 + "/" + 
´efix
 + "*"

249 
_
, 
s
 :ğ
¿nge
 
¡©em’ts
 {

250 !
s
.
Resourûs
.
	`CÚšs
(
objeùResourû
è&& !s.Resourûs.
	`FuncM©ch
(
¡¬tsW™hFunc
, 
»sourûP»fix
).
	`IsEm±y
() {

251 
s
.
AùiÚs
.
	`IÁ”£ùiÚ
(
»adOÆyObjeùAùiÚs
).
	`Equ®s
(readOnlyObjectActions) {

252 
»adOÆyInU£
 = 
Œue


255 
s
.
AùiÚs
.
	`IÁ”£ùiÚ
(
wr™eOÆyObjeùAùiÚs
).
	`Equ®s
(writeOnlyObjectActions) {

256 
wr™eOÆyInU£
 = 
Œue


259 
»adOÆyInU£
 && 
wr™eOÆyInU£
 {

264  
»adOÆyInU£
, 
wr™eOÆyInU£


265 
	}
}

268 
func
 
	$»moveObjeùAùiÚs
(
¡©em’t
 
S‹m’t
, 
objeùResourû
 
¡ršg
) Statement {

269 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

270 
	`Ën
(
¡©em’t
.
Resourûs
) > 1 {

271 
¡©em’t
.
Resourûs
.
	`Remove
(
objeùResourû
)

273 
¡©em’t
.
AùiÚs
 = s‹m’t.AùiÚs.
	`Difã»nû
(
»adOÆyObjeùAùiÚs
)

274 
¡©em’t
.
AùiÚs
 = s‹m’t.AùiÚs.
	`Difã»nû
(
wr™eOÆyObjeùAùiÚs
)

278  
¡©em’t


279 
	}
}

282 
func
 
	$»moveBuck‘AùiÚs
(
¡©em’t
 
S‹m’t
, 
´efix
 
¡ršg
, 
buck‘Resourû
 sŒšg, 
»adOÆyInU£
, 
wr™eOÆyInU£
 
boŞ
) Statement {

283 
»moveR—dOÆy
 :ğ
	`func
() {

284 !
¡©em’t
.
AùiÚs
.
	`IÁ”£ùiÚ
(
»adOÆyBuck‘AùiÚs
).
	`Equ®s
(readOnlyBucketActions) {

288 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

289 
¡©em’t
.
AùiÚs
 = s‹m’t.AùiÚs.
	`Difã»nû
(
»adOÆyBuck‘AùiÚs
)

293 
´efix
 != "" {

294 
¡ršgEqu®sV®ue
 :ğ
¡©em’t
.
CÚd™iÚs
["StringEquals"]

295 
v®ues
 :ğ
£t
.
	`NewSŒšgS‘
()

296 
¡ršgEqu®sV®ue
 !ğ
n
 {

297 
v®ues
 = 
¡ršgEqu®sV®ue
["s3:prefix"]

298 
v®ues
 =ğ
n
 {

299 
v®ues
 = 
£t
.
	`NewSŒšgS‘
()

303 
v®ues
.
	`Remove
(
´efix
)

305 
¡ršgEqu®sV®ue
 !ğ
n
 {

306 
v®ues
.
	`IsEm±y
() {

307 
	`d–‘e
(
¡ršgEqu®sV®ue
, "s3:prefix")

309 
	`Ën
(
¡ršgEqu®sV®ue
) == 0 {

310 
	`d–‘e
(
¡©em’t
.
CÚd™iÚs
, "StringEquals")

314 
	`Ën
(
¡©em’t
.
CÚd™iÚs
) == 0 {

315 
¡©em’t
.
CÚd™iÚs
 = 
n


316 
¡©em’t
.
AùiÚs
 = s‹m’t.AùiÚs.
	`Difã»nû
(
»adOÆyBuck‘AùiÚs
)

321 
»moveWr™eOÆy
 :ğ
	`func
() {

322 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

323 
¡©em’t
.
AùiÚs
 = s‹m’t.AùiÚs.
	`Difã»nû
(
wr™eOÆyBuck‘AùiÚs
)

327 
	`Ën
(
¡©em’t
.
Resourûs
) > 1 {

328 
¡©em’t
.
Resourûs
.
	`Remove
(
buck‘Resourû
)

330 !
»adOÆyInU£
 {

331 
	`»moveR—dOÆy
()

334 !
wr™eOÆyInU£
 {

335 
	`»moveWr™eOÆy
()

339  
¡©em’t


340 
	}
}

344 
func
 
»moveS‹m’ts
(
¡©em’ts
 []
S‹m’t
, 
buck‘Name
 
¡ršg
, 
´efix
 sŒšgè[]
	gS‹m’t
 {

345 
	gbuck‘Resourû
 :ğ
awsResourûP»fix
 + 
buck‘Name


346 
objeùResourû
 :ğ
awsResourûP»fix
 + 
buck‘Name
 + "/" + 
´efix
 + "*"

347 
»adOÆyInU£
, 
	gwr™eOÆyInU£
 :ğ
g‘InU£PŞicy
(
¡©em’ts
, 
buck‘Name
, 
´efix
)

349 
	gout
 :ğ[]
S‹m’t
{}

350 
»adOÆyBuck‘S‹m’ts
 :ğ[]
S‹m’t
{}

351 
s3P»fixV®ues
 :ğ
£t
.
NewSŒšgS‘
()

353 
_
, 
	g¡©em’t
 :ğ
¿nge
 
¡©em’ts
 {

354 !
isV®idS‹m’t
(
¡©em’t
, 
buck‘Name
) {

355 
out
 = 
­³nd
(out, 
¡©em’t
)

359 
	g¡©em’t
.
	gResourûs
.
CÚšs
(
buck‘Resourû
) {

360 
	g¡©em’t
.
	gCÚd™iÚs
 !ğ
n
 {

361 
¡©em’t
 = 
»moveBuck‘AùiÚs
(¡©em’t, 
´efix
, 
buck‘Resourû
, 
çl£
, false)

363 
	g¡©em’t
 = 
»moveBuck‘AùiÚs
(
¡©em’t
, 
´efix
, 
buck‘Resourû
, 
»adOÆyInU£
, 
wr™eOÆyInU£
)

365 } 
	g¡©em’t
.
	gResourûs
.
CÚšs
(
objeùResourû
) {

366 
	g¡©em’t
 = 
»moveObjeùAùiÚs
(
¡©em’t
, 
objeùResourû
)

369 !
	g¡©em’t
.
	gAùiÚs
.
IsEm±y
() {

370 
	g¡©em’t
.
	gResourûs
.
CÚšs
(
buck‘Resourû
) &&

371 
	g¡©em’t
.
	gAùiÚs
.
IÁ”£ùiÚ
(
»adOÆyBuck‘AùiÚs
).
Equ®s
(readOnlyBucketActions) &&

372 
	g¡©em’t
.
	gEfãù
 == "Allow" &&

373 
¡©em’t
.
Pršc®
.
AWS
.
CÚšs
("*") {

375 
¡©em’t
.
CÚd™iÚs
 !ğ
n
 {

376 
¡ršgEqu®sV®ue
 :ğ
¡©em’t
.
CÚd™iÚs
["StringEquals"]

377 
v®ues
 :ğ
£t
.
NewSŒšgS‘
()

378 
¡ršgEqu®sV®ue
 !ğ
n
 {

379 
v®ues
 = 
¡ršgEqu®sV®ue
["s3:prefix"]

380 
v®ues
 =ğ
n
 {

381 
v®ues
 = 
£t
.
NewSŒšgS‘
()

384 
s3P»fixV®ues
 = s3P»fixV®ues.
UniÚ
(
v®ues
.
AµlyFunc
(
func
(
v
 
¡ršg
) string {

385  
buck‘Resourû
 + "/" + 
v
 + "*"

387 } !
s3P»fixV®ues
.
IsEm±y
() {

388 
»adOÆyBuck‘S‹m’ts
 = 
­³nd
Ô—dOÆyBuck‘S‹m’ts, 
¡©em’t
)

392 
	gout
 = 
­³nd
(
out
, 
¡©em’t
)

396 
	gskBuck‘S‹m’t
 :ğ
Œue


397 
»sourûP»fix
 :ğ
awsResourûP»fix
 + 
buck‘Name
 + "/"

398 
_
, 
	g¡©em’t
 :ğ
¿nge
 
out
 {

399 !
¡©em’t
.
Resourûs
.
FuncM©ch
(
¡¬tsW™hFunc
, 
»sourûP»fix
).
IsEm±y
() &&

400 
s3P»fixV®ues
.
IÁ”£ùiÚ
(
¡©em’t
.
Resourûs
).
IsEm±y
() {

401 
skBuck‘S‹m’t
 = 
çl£


406 
	g_
, 
	g¡©em’t
 :ğ
¿nge
 
»adOÆyBuck‘S‹m’ts
 {

407 
skBuck‘S‹m’t
 &&

408 
¡©em’t
.
Resourûs
.
CÚšs
(
buck‘Resourû
) &&

409 
¡©em’t
.
Efãù
 == "Allow" &&

410 
¡©em’t
.
Pršc®
.
AWS
.
CÚšs
("*") &&

411 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

415 
out
 = 
­³nd
(out, 
¡©em’t
)

418 
Ën
(
out
) == 1 {

419 
¡©em’t
 :ğ
out
[0]

420 
¡©em’t
.
Resourûs
.
CÚšs
(
buck‘Resourû
) &&

421 
¡©em’t
.
AùiÚs
.
IÁ”£ùiÚ
(
commÚBuck‘AùiÚs
).
Equ®s
(commonBucketActions) &&

422 
¡©em’t
.
Efãù
 == "Allow" &&

423 
¡©em’t
.
Pršc®
.
AWS
.
CÚšs
("*") &&

424 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

425 
out
 = []
S‹m’t
{}

429  
out


436 
func
 
­³ndS‹m’t
(
¡©em’ts
 []
S‹m’t
, 
¡©em’t
 S‹m’tè[]
	gS‹m’t
 {

437 
	gi
, 
	gs
 :ğ
¿nge
 
¡©em’ts
 {

438 
s
.
AùiÚs
.
Equ®s
(
¡©em’t
.Actions) &&

439 
s
.
Efãù
 =ğ
¡©em’t
.Effect &&

440 
s
.
Pršc®
.
AWS
.
Equ®s
(
¡©em’t
.Principal.AWS) &&

441 
»æeù
.
D“pEqu®
(
s
.
CÚd™iÚs
, 
¡©em’t
.Conditions) {

442 
	g¡©em’ts
[
i
].
	gResourûs
 = 
s
.
Resourûs
.
UniÚ
(
¡©em’t
.Resources)

443  
¡©em’ts


444 } 
	gs
.
	gResourûs
.
Equ®s
(
¡©em’t
.
Resourûs
) &&

445 
	gs
.
	gEfãù
 =ğ
¡©em’t
.
Efãù
 &&

446 
s
.
Pršc®
.
AWS
.
Equ®s
(
¡©em’t
.Principal.AWS) &&

447 
»æeù
.
D“pEqu®
(
s
.
CÚd™iÚs
, 
¡©em’t
.Conditions) {

448 
	g¡©em’ts
[
i
].
	gAùiÚs
 = 
s
.
AùiÚs
.
UniÚ
(
¡©em’t
.Actions)

449  
¡©em’ts


452 
	gs
.
	gResourûs
.
IÁ”£ùiÚ
(
¡©em’t
.
Resourûs
).
Equ®s
(statement.Resources) &&

453 
	gs
.
	gAùiÚs
.
IÁ”£ùiÚ
(
¡©em’t
.
AùiÚs
).
Equ®s
(statement.Actions) &&

454 
	gs
.
	gEfãù
 =ğ
¡©em’t
.
Efãù
 &&

455 
s
.
Pršc®
.
AWS
.
IÁ”£ùiÚ
(
¡©em’t
.Pršc®.AWS).
Equ®s
(statement.Principal.AWS) {

456 
»æeù
.
D“pEqu®
(
s
.
CÚd™iÚs
, 
¡©em’t
.Conditions) {

457  
¡©em’ts


459 
s
.
CÚd™iÚs
 !ğ
n
 && 
¡©em’t
.Conditions !=‚il {

460 
s
.
Resourûs
.
Equ®s
(
¡©em’t
.Resources) {

461 
¡©em’ts
[
i
].
CÚd™iÚs
 = 
m”geCÚd™iÚM­
(
s
.CÚd™iÚs, 
¡©em’t
.Conditions)

462  
	g¡©em’ts


468 !(
	g¡©em’t
.
	gAùiÚs
.
IsEm±y
(è&& s‹m’t.
	gResourûs
.IsEmpty()) {

469  
­³nd
(
¡©em’ts
, 
¡©em’t
)

472  
	g¡©em’ts


476 
func
 
­³ndS‹m’ts
(
¡©em’ts
 []
S‹m’t
,‡µ’dS‹m’t []S‹m’tè[]
	gS‹m’t
 {

477 
	g_
, 
	gs
 :ğ
¿nge
 
­³ndS‹m’ts
 {

478 
¡©em’ts
 = 
­³ndS‹m’t
(¡©em’ts, 
s
)

481  
	g¡©em’ts


485 
func
 
	$g‘Buck‘PŞicy
(
¡©em’t
 
S‹m’t
, 
´efix
 
¡ršg
è(
commÚFound
, 
»adOÆy
, 
wr™eOÆy
 
boŞ
) {

486 !(
¡©em’t
.
Efãù
 =ğ"AÎow" && s‹m’t.
Pršc®
.
AWS
.
	`CÚšs
("*")) {

487  
commÚFound
, 
»adOÆy
, 
wr™eOÆy


490 
¡©em’t
.
AùiÚs
.
	`IÁ”£ùiÚ
(
commÚBuck‘AùiÚs
).
	`Equ®s
(commonBucketActions) &&

491 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

492 
commÚFound
 = 
Œue


495 
¡©em’t
.
AùiÚs
.
	`IÁ”£ùiÚ
(
wr™eOÆyBuck‘AùiÚs
).
	`Equ®s
(writeOnlyBucketActions) &&

496 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

497 
wr™eOÆy
 = 
Œue


500 
¡©em’t
.
AùiÚs
.
	`IÁ”£ùiÚ
(
»adOÆyBuck‘AùiÚs
).
	`Equ®s
(readOnlyBucketActions) {

501 
´efix
 !ğ"" && 
¡©em’t
.
CÚd™iÚs
 !ğ
n
 {

502 
¡ršgEqu®sV®ue
, 
ok
 :ğ
¡©em’t
.
CÚd™iÚs
["StringEquals"]; ok {

503 
s3P»fixV®ues
, 
ok
 :ğ
¡ršgEqu®sV®ue
["s3:prefix"]; ok {

504 
s3P»fixV®ues
.
	`CÚšs
(
´efix
) {

505 
»adOÆy
 = 
Œue


508 } 
¡ršgNÙEqu®sV®ue
, 
ok
 :ğ
¡©em’t
.
CÚd™iÚs
["StringNotEquals"]; ok {

509 
s3P»fixV®ues
, 
ok
 :ğ
¡ršgNÙEqu®sV®ue
["s3:prefix"]; ok {

510 !
s3P»fixV®ues
.
	`CÚšs
(
´efix
) {

511 
»adOÆy
 = 
Œue


515 } 
´efix
 =ğ"" && 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

516 
»adOÆy
 = 
Œue


517 } 
´efix
 !ğ"" && 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

518 
»adOÆy
 = 
Œue


522  
commÚFound
, 
»adOÆy
, 
wr™eOÆy


523 
	}
}

526 
func
 
	$g‘ObjeùPŞicy
(
¡©em’t
 
S‹m’t
è(
»adOÆy
 
boŞ
, 
wr™eOÆy
 bool) {

527 
¡©em’t
.
Efãù
 == "Allow" &&

528 
¡©em’t
.
Pršc®
.
AWS
.
	`CÚšs
("*") &&

529 
¡©em’t
.
CÚd™iÚs
 =ğ
n
 {

530 
¡©em’t
.
AùiÚs
.
	`IÁ”£ùiÚ
(
»adOÆyObjeùAùiÚs
).
	`Equ®s
(readOnlyObjectActions) {

531 
»adOÆy
 = 
Œue


533 
¡©em’t
.
AùiÚs
.
	`IÁ”£ùiÚ
(
wr™eOÆyObjeùAùiÚs
).
	`Equ®s
(writeOnlyObjectActions) {

534 
wr™eOÆy
 = 
Œue


538  
»adOÆy
, 
wr™eOÆy


539 
	}
}

542 
func
 
	$G‘PŞicy
(
¡©em’ts
 []
S‹m’t
, 
buck‘Name
 
¡ršg
, 
´efix
 sŒšgè
Buck‘PŞicy
 {

543 
buck‘Resourû
 :ğ
awsResourûP»fix
 + 
buck‘Name


544 
objeùResourû
 :ğ
awsResourûP»fix
 + 
buck‘Name
 + "/" + 
´efix
 + "*"

546 
buck‘CommÚFound
 :ğ
çl£


547 
buck‘R—dOÆy
 :ğ
çl£


548 
buck‘Wr™eOÆy
 :ğ
çl£


549 
m©chedResourû
 := ""

550 
objR—dOÆy
 :ğ
çl£


551 
objWr™eOÆy
 :ğ
çl£


553 
_
, 
s
 :ğ
¿nge
 
¡©em’ts
 {

554 
m©chedObjResourûs
 :ğ
£t
.
	`NewSŒšgS‘
()

555 
s
.
Resourûs
.
	`CÚšs
(
objeùResourû
) {

556 
m©chedObjResourûs
.
	`Add
(
objeùResourû
)

558 
m©chedObjResourûs
 = 
s
.
Resourûs
.
	`FuncM©ch
(
»sourûM©ch
, 
objeùResourû
)

560 !
m©chedObjResourûs
.
	`IsEm±y
() {

561 
»adOÆy
, 
wr™eOÆy
 :ğ
	`g‘ObjeùPŞicy
(
s
)

562 
»sourû
 :ğ
¿nge
 
m©chedObjResourûs
 {

563 
	`Ën
(
m©chedResourû
è<†’(
»sourû
) {

564 
objR—dOÆy
 = 
»adOÆy


565 
objWr™eOÆy
 = 
wr™eOÆy


566 
m©chedResourû
 = 
»sourû


567 } 
	`Ën
(
m©chedResourû
è=ğËn(
»sourû
) {

568 
objR—dOÆy
 = objR—dOÆy || 
»adOÆy


569 
objWr™eOÆy
 = objWr™eOÆy || 
wr™eOÆy


570 
m©chedResourû
 = 
»sourû


574 
s
.
Resourûs
.
	`CÚšs
(
buck‘Resourû
) {

575 
commÚFound
, 
»adOÆy
, 
wr™eOÆy
 :ğ
	`g‘Buck‘PŞicy
(
s
, 
´efix
)

576 
buck‘CommÚFound
 = buck‘CommÚFound || 
commÚFound


577 
buck‘R—dOÆy
 = buck‘R—dOÆy || 
»adOÆy


578 
buck‘Wr™eOÆy
 = buck‘Wr™eOÆy || 
wr™eOÆy


582 
pŞicy
 :ğ
Buck‘PŞicyNÚe


583 
buck‘CommÚFound
 {

584 
buck‘R—dOÆy
 && 
buck‘Wr™eOÆy
 && 
objR—dOÆy
 && 
objWr™eOÆy
 {

585 
pŞicy
 = 
Buck‘PŞicyR—dWr™e


586 } 
buck‘R—dOÆy
 && 
objR—dOÆy
 {

587 
pŞicy
 = 
Buck‘PŞicyR—dOÆy


588 } 
buck‘Wr™eOÆy
 && 
objWr™eOÆy
 {

589 
pŞicy
 = 
Buck‘PŞicyWr™eOÆy


593  
pŞicy


594 
	}
}

597 
func
 
	$G‘PŞic›s
(
¡©em’ts
 []
S‹m’t
, 
buck‘Name
, 
´efix
 
¡ršg
è
m­
[¡ršg]
Buck‘PŞicy
 {

598 
pŞicyRuËs
 :ğ
m­
[
¡ršg
]
Buck‘PŞicy
{}

599 
objResourûs
 :ğ
£t
.
	`NewSŒšgS‘
()

601 
_
, 
s
 :ğ
¿nge
 
¡©em’ts
 {

602 
r
 :ğ
¿nge
 
s
.
Resourûs
 {

603 
¡ršgs
.
	`HasP»fix
(
r
, 
awsResourûP»fix
+
buck‘Name
+"/"+
´efix
) {

604 
objResourûs
.
	`Add
(
r
)

610 
r
 :ğ
¿nge
 
objResourûs
 {

612 
a¡”isk
 := ""

613 
¡ršgs
.
	`HasSuffix
(
r
, "*") {

614 
r
 =„[:
	`Ën
(r)-1]

615 
a¡”isk
 = "*"

617 
v¬
 
objeùP©h
 
¡ršg


618 
	`Ën
(
r
è>ğËn(
awsResourûP»fix
+
buck‘Name
)+1 {

619 
objeùP©h
 = 
r
[
	`Ën
(
awsResourûP»fix
+
buck‘Name
)+1:]

621 
p
 :ğ
	`G‘PŞicy
(
¡©em’ts
, 
buck‘Name
, 
objeùP©h
)

622 
pŞicyRuËs
[
buck‘Name
+"/"+
objeùP©h
+
a¡”isk
] = 
p


624  
pŞicyRuËs


625 
	}
}

628 
func
 
S‘PŞicy
(
¡©em’ts
 []
S‹m’t
, 
pŞicy
 
Buck‘PŞicy
, 
buck‘Name
 
¡ršg
, 
´efix
 sŒšgè[]
	gS‹m’t
 {

629 
	gout
 :ğ
»moveS‹m’ts
(
¡©em’ts
, 
buck‘Name
, 
´efix
)

632 
	gns
 :ğ
ÃwS‹m’ts
(
pŞicy
, 
buck‘Name
, 
´efix
)

636 
	grv
 :ğ
­³ndS‹m’ts
(
out
, 
ns
)

640  
	grv


644 
func
 
	$»sourûM©ch
(
·‰”n
, 
»sourû
 
¡ršg
è
boŞ
 {

645 
·‰”n
 == "" {

646  
»sourû
 =ğ
·‰”n


648 
·‰”n
 == "*" {

649  
Œue


651 
·¹s
 :ğ
¡ršgs
.
	`S¶™
(
·‰”n
, "*")

652 
	`Ën
(
·¹s
) == 1 {

653  
»sourû
 =ğ
·‰”n


655 
tGlob
 :ğ
¡ršgs
.
	`HasSuffix
(
·‰”n
, "*")

656 
’d
 :ğ
	`Ën
(
·¹s
) - 1

657 !
¡ršgs
.
	`HasP»fix
(
»sourû
, 
·¹s
[0]) {

658  
çl£


660 
i
 :ğ1; i < 
’d
; i++ {

661 !
¡ršgs
.
	`CÚšs
(
»sourû
, 
·¹s
[
i
]) {

662  
çl£


664 
idx
 :ğ
¡ršgs
.
	`Index
(
»sourû
, 
·¹s
[
i
]è+ 
	`Ën
(parts[i])

665 
»sourû
 =„esourû[
idx
:]

667  
tGlob
 || 
¡ršgs
.
	`HasSuffix
(
»sourû
, 
·¹s
[
’d
])

668 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/policy/bucket-policy_test.go

18 
·ckage
 
pŞicy


20 
impÜt
 (

32 
func
 
	$Te¡Unm¬sh®Buck‘PŞicy
(
t
 *
‹¡šg
.
T
) {

33 
v¬
 
‹¡Ca£s
 = []struct {

34 
pŞicyD©a
 
¡ršg


35 
shouldSucûed
 
boŞ


38 {
pŞicyD©a
: `{

50 }`, 
shouldSucûed
: 
Œue
},

52 {
pŞicyD©a
: `{

63 }`, 
shouldSucûed
: 
Œue
},

65 {
pŞicyD©a
: `{

81 }`, 
shouldSucûed
: 
Œue
},

83 {
pŞicyD©a
: `{

109 }`, 
shouldSucûed
: 
Œue
},

111 {
pŞicyD©a
: `{

126 }`, 
shouldSucûed
: 
Œue
},

128 {
pŞicyD©a
: `{

153 }`, 
shouldSucûed
: 
Œue
},

156 {
pŞicyD©a
: `{

168 }`, 
shouldSucûed
: 
Œue
},

170 {
pŞicyD©a
: `{

191 }`, 
shouldSucûed
: 
Œue
},

193 {
pŞicyD©a
: `{

213 }`, 
shouldSucûed
: 
Œue
},

216 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

217 
v¬
 
pŞicy
 
Buck‘AcûssPŞicy


218 
”r
 :ğ
jsÚ
.
	`Unm¬sh®
([]
	`by‹
(
‹¡Ca£
.
pŞicyD©a
), &
pŞicy
)

219 
‹¡Ca£
.
shouldSucûed
 && 
”r
 !ğ
n
 {

220 
t
.
	`F©®f
("Te¡ %d:ƒx³ùedØsucûed buˆ™ ha ªƒ¼Ü: %v", 
i
+1, 
”r
)

222 !
‹¡Ca£
.
shouldSucûed
 && 
”r
 =ğ
n
 {

223 
t
.
	`F©®f
("Te¡ %d:ƒx³ùedØç buˆsucûeded", 
i
+1)

226 
	}
}

229 
func
 
	$Te¡IsV®idS‹m’t
(
t
 *
‹¡šg
.
T
) {

230 
‹¡Ca£s
 := []struct {

231 
¡©em’t
 
S‹m’t


232 
buck‘Name
 
¡ršg


233 
ex³ùedResuÉ
 
boŞ


236 {
S‹m’t
{}, "", 
çl£
},

238 {
S‹m’t
{}, "mybuck‘", 
çl£
},

240 {
S‹m’t
{

241 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

242 
Efãù
: "Allow",

243 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

244 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

245 }, "", 
çl£
},

247 {
S‹m’t
{

248 
AùiÚs
: 
£t
.
	`C»©eSŒšgS‘
("s3:ListBucketVersions"),

249 
Efãù
: "Allow",

250 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

251 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

252 }, "mybuck‘", 
çl£
},

254 {
S‹m’t
{

255 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

256 
Efãù
: "Deny",

257 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

258 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

259 }, "mybuck‘", 
çl£
},

261 {
S‹m’t
{

262 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

263 
Efãù
: "Allow",

264 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

265 }, "mybuck‘", 
çl£
},

267 {
S‹m’t
{

268 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

269 
Efãù
: "Allow",

270 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:iam::AccountNumberWithoutHyphens:root")},

271 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

272 }, "mybuck‘", 
çl£
},

274 {
S‹m’t
{

275 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

276 
Efãù
: "Allow",

277 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

278 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

279 }, "mybuck‘", 
çl£
},

281 {
S‹m’t
{

282 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

283 
Efãù
: "Allow",

284 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

285 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybuckettest/myobject"),

286 }, "mybuck‘", 
çl£
},

288 {
S‹m’t
{

289 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

290 
Efãù
: "Allow",

291 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

292 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/myobject"),

293 }, "mybuck‘", 
Œue
},

295 {
S‹m’t
{

296 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

297 
Efãù
: "Allow",

298 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

299 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

300 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/myobject"),

301 }, "mybuck‘", 
Œue
},

304 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

305 
»suÉ
 :ğ
	`isV®idS‹m’t
(
‹¡Ca£
.
¡©em’t
,e¡Ca£.
buck‘Name
);„esuÉ !ğ‹¡Ca£.
ex³ùedResuÉ
 {

306 
t
.
	`F©®f
("%+v:ƒx³ùed: %t, gÙ: %t", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
»suÉ
)

309 
	}
}

312 
func
 
	$Te¡NewS‹m’ts
(
t
 *
‹¡šg
.
T
) {

313 
‹¡Ca£s
 := []struct {

314 
pŞicy
 
Buck‘PŞicy


315 
buck‘Name
 
¡ršg


316 
´efix
 
¡ršg


317 
ex³ùedResuÉ
 
¡ršg


320 {
Buck‘PŞicyNÚe
, "", "", `[]`},

322 {
Buck‘PŞicyNÚe
, "mybucket", "", `[]`},

324 {
Buck‘PŞicyNÚe
, "", "hello", `[]`},

326 {
Buck‘PŞicyNÚe
, "mybucket", "hello", `[]`},

328 {
Buck‘PŞicyR—dOÆy
, "", "", `[]`},

330 {
Buck‘PŞicyR—dOÆy
, "mybucket", "", `[{"Action":["s3:GetBucketLocation"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:GetObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

332 {
Buck‘PŞicyR—dOÆy
, "", "hello", `[]`},

334 {
Buck‘PŞicyR—dOÆy
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucket"],"Condition":{"StringEquals":{"s3:prefix":["hello"]}},"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:GetObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

336 {
Buck‘PŞicyR—dWr™e
, "", "", `[]`},

338 {
Buck‘PŞicyR—dWr™e
, "mybucket", "", `[{"Action":["s3:GetBucketLocation"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:GetObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

340 {
Buck‘PŞicyR—dWr™e
, "", "hello", `[]`},

342 {
Buck‘PŞicyR—dWr™e
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucket"],"Condition":{"StringEquals":{"s3:prefix":["hello"]}},"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:GetObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

344 {
Buck‘PŞicyWr™eOÆy
, "", "", `[]`},

346 {
Buck‘PŞicyWr™eOÆy
, "mybucket", "", `[{"Action":["s3:GetBucketLocation"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

348 {
Buck‘PŞicyWr™eOÆy
, "", "hello", `[]`},

350 {
Buck‘PŞicyWr™eOÆy
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

353 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

354 
¡©em’ts
 :ğ
	`ÃwS‹m’ts
(
‹¡Ca£
.
pŞicy
,e¡Ca£.
buck‘Name
,e¡Ca£.
´efix
)

355 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
¡©em’ts
);ƒ¼ =ğ
n
 {

356 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

357 
t
.
	`F©®f
("%+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

361 
	}
}

364 
func
 
	$Te¡G‘InU£PŞicy
(
t
 *
‹¡šg
.
T
) {

365 
‹¡Ca£s
 := []struct {

366 
¡©em’ts
 []
S‹m’t


367 
buck‘Name
 
¡ršg


368 
´efix
 
¡ršg


369 
ex³ùedResuÉ1
 
boŞ


370 
ex³ùedResuÉ2
 
boŞ


373 {[]
S‹m’t
{}, "", "", 
çl£
, false},

375 {[]
S‹m’t
{{

376 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

377 
Efãù
: "Allow",

378 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

379 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

380 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

381 }}, "", "", 
çl£
, false},

383 {[]
S‹m’t
{{

384 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

385 
Efãù
: "Allow",

386 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

387 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

388 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

389 }}, "mybuck‘", "", 
çl£
, false},

391 {[]
S‹m’t
{{

392 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

393 
Efãù
: "Allow",

394 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

395 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

396 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

397 }}, "", "h–lo", 
çl£
, false},

399 {[]
S‹m’t
{}, "mybuck‘", "", 
çl£
, false},

401 {[]
S‹m’t
{}, "mybuck‘", "h–lo", 
çl£
, false},

403 {[]
S‹m’t
{}, "", "h–lo", 
çl£
, false},

405 {[]
S‹m’t
{{

406 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

407 
Efãù
: "Allow",

408 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

409 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

410 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

411 }}, "mybuck‘", "h–lo", 
çl£
, false},

413 {[]
S‹m’t
{{

414 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

415 
Efãù
: "Allow",

416 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

417 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

418 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

419 }}, "mybuck‘", "", 
çl£
, false},

421 {[]
S‹m’t
{{

422 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

423 
Efãù
: "Allow",

424 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

425 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

426 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

427 }}, "mybuck‘", "h–lo", 
çl£
, false},

429 {[]
S‹m’t
{{

430 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

431 
Efãù
: "Allow",

432 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

433 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

434 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

436 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

437 
Efãù
: "Allow",

438 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

439 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

440 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket/world"),

441 }}, "mybuck‘", "", 
çl£
, false},

443 {[]
S‹m’t
{{

444 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

445 
Efãù
: "Allow",

446 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

447 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

448 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

450 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

451 
Efãù
: "Allow",

452 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

453 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

454 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket/world"),

455 }}, "mybuck‘", "h–lo", 
çl£
, false},

457 {[]
S‹m’t
{{

458 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

459 
Efãù
: "Allow",

460 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

461 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

462 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

463 }}, "mybuck‘", "h–lo", 
Œue
, 
çl£
},

465 {[]
S‹m’t
{{

466 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

467 
Efãù
: "Allow",

468 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

469 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

470 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

471 }}, "mybuck‘", "h–lo", 
çl£
, 
Œue
},

473 {[]
S‹m’t
{{

474 
AùiÚs
: 
»adWr™eObjeùAùiÚs
,

475 
Efãù
: "Allow",

476 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

477 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

478 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

479 }}, "mybuck‘", "h–lo", 
Œue
,rue},

481 {[]
S‹m’t
{{

482 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

483 
Efãù
: "Allow",

484 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

485 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

486 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

488 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

489 
Efãù
: "Allow",

490 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

491 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

492 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/ground"),

493 }}, "mybuck‘", "h–lo", 
Œue
,rue},

496 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

497 
»suÉ1
, 
»suÉ2
 :ğ
	`g‘InU£PŞicy
(
‹¡Ca£
.
¡©em’ts
,e¡Ca£.
buck‘Name
,e¡Ca£.
´efix
)

498 !(
»suÉ1
 =ğ
‹¡Ca£
.
ex³ùedResuÉ1
 && 
»suÉ2
 =ğ‹¡Ca£.
ex³ùedResuÉ2
) {

499 
t
.
	`F©®f
("%+v:ƒx³ùed: [%t,%t], gÙ: [%t,%t]", 
‹¡Ca£
,

500 
‹¡Ca£
.
ex³ùedResuÉ1
,e¡Ca£.
ex³ùedResuÉ2
,

501 
»suÉ1
, 
»suÉ2
)

504 
	}
}

507 
func
 
	$Te¡RemoveS‹m’ts
(
t
 *
‹¡šg
.
T
) {

508 
unknownCÚdM­1
 :ğ
	`make
(
CÚd™iÚM­
)

509 
unknownCÚdKeyM­1
 :ğ
	`make
(
CÚd™iÚKeyM­
)

510 
unknownCÚdKeyM­1
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

511 
unknownCÚdM­1
.
	`Add
("SŒšgNÙEqu®s", 
unknownCÚdKeyM­1
)

513 
unknownCÚdM­11
 :ğ
	`make
(
CÚd™iÚM­
)

514 
unknownCÚdKeyM­11
 :ğ
	`make
(
CÚd™iÚKeyM­
)

515 
unknownCÚdKeyM­11
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

516 
unknownCÚdM­11
.
	`Add
("SŒšgNÙEqu®s", 
unknownCÚdKeyM­11
)

518 
unknownCÚdM­12
 :ğ
	`make
(
CÚd™iÚM­
)

519 
unknownCÚdKeyM­12
 :ğ
	`make
(
CÚd™iÚKeyM­
)

520 
unknownCÚdKeyM­12
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

521 
unknownCÚdM­12
.
	`Add
("SŒšgNÙEqu®s", 
unknownCÚdKeyM­12
)

523 
knownCÚdM­1
 :ğ
	`make
(
CÚd™iÚM­
)

524 
knownCÚdKeyM­1
 :ğ
	`make
(
CÚd™iÚKeyM­
)

525 
knownCÚdKeyM­1
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

526 
knownCÚdM­1
.
	`Add
("SŒšgEqu®s", 
knownCÚdKeyM­1
)

528 
knownCÚdM­11
 :ğ
	`make
(
CÚd™iÚM­
)

529 
knownCÚdKeyM­11
 :ğ
	`make
(
CÚd™iÚKeyM­
)

530 
knownCÚdKeyM­11
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

531 
knownCÚdM­11
.
	`Add
("SŒšgEqu®s", 
knownCÚdKeyM­11
)

533 
knownCÚdM­12
 :ğ
	`make
(
CÚd™iÚM­
)

534 
knownCÚdKeyM­12
 :ğ
	`make
(
CÚd™iÚKeyM­
)

535 
knownCÚdKeyM­12
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

536 
knownCÚdM­12
.
	`Add
("SŒšgEqu®s", 
knownCÚdKeyM­12
)

538 
knownCÚdM­13
 :ğ
	`make
(
CÚd™iÚM­
)

539 
knownCÚdKeyM­13
 :ğ
	`make
(
CÚd™iÚKeyM­
)

540 
knownCÚdKeyM­13
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

541 
knownCÚdM­13
.
	`Add
("SŒšgEqu®s", 
knownCÚdKeyM­13
)

543 
knownCÚdM­14
 :ğ
	`make
(
CÚd™iÚM­
)

544 
knownCÚdKeyM­14
 :ğ
	`make
(
CÚd™iÚKeyM­
)

545 
knownCÚdKeyM­14
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

546 
knownCÚdM­14
.
	`Add
("SŒšgEqu®s", 
knownCÚdKeyM­14
)

548 
knownCÚdM­2
 :ğ
	`make
(
CÚd™iÚM­
)

549 
knownCÚdKeyM­2
 :ğ
	`make
(
CÚd™iÚKeyM­
)

550 
knownCÚdKeyM­2
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello", "world"))

551 
knownCÚdM­2
.
	`Add
("SŒšgEqu®s", 
knownCÚdKeyM­2
)

553 
‹¡Ca£s
 := []struct {

554 
¡©em’ts
 []
S‹m’t


555 
buck‘Name
 
¡ršg


556 
´efix
 
¡ršg


557 
ex³ùedResuÉ
 
¡ršg


560 {[]
S‹m’t
{}, "", "", `[]`},

562 {[]
S‹m’t
{{

563 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

564 
Efãù
: "Allow",

565 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

566 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

567 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

570 {[]
S‹m’t
{{

571 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

572 
Efãù
: "Allow",

573 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

574 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

575 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

578 {[]
S‹m’t
{{

579 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

580 
Efãù
: "Allow",

581 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

582 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

583 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

586 {[]
S‹m’t
{}, "mybucket", "", `[]`},

588 {[]
S‹m’t
{}, "mybucket", "hello", `[]`},

590 {[]
S‹m’t
{}, "", "hello", `[]`},

592 {[]
S‹m’t
{{

593 
AùiÚs
: 
£t
.
	`C»©eSŒšgS‘
("s3:ListBucketVersions", "s3:ListAllMyBuckets"),

594 
Efãù
: "Allow",

595 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

596 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

599 {[]
S‹m’t
{{

600 
AùiÚs
: 
£t
.
	`C»©eSŒšgS‘
("s3:ListBucketVersions", "s3:ListAllMyBuckets"),

601 
Efãù
: "Allow",

602 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

603 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

606 {[]
S‹m’t
{{

607 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

608 
Efãù
: "Deny",

609 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

610 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

611 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

614 {[]
S‹m’t
{{

615 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

616 
Efãù
: "Deny",

617 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

618 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

619 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

622 {[]
S‹m’t
{{

623 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

624 
Efãù
: "Allow",

625 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:iam::AccountNumberWithoutHyphens:root")},

626 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

627 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

630 {[]
S‹m’t
{{

631 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

632 
Efãù
: "Allow",

633 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:iam::AccountNumberWithoutHyphens:root")},

634 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

635 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

638 {[]
S‹m’t
{{

639 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

640 
Efãù
: "Allow",

641 
Pršc®
: 
U£r
{
CªÚiÿlU£r
: 
£t
.
	`C»©eSŒšgS‘
("649262f44b8145cb")},

642 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

643 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

646 {[]
S‹m’t
{{

647 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

648 
Efãù
: "Allow",

649 
Pršc®
: 
U£r
{
CªÚiÿlU£r
: 
£t
.
	`C»©eSŒšgS‘
("649262f44b8145cb")},

650 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

651 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

654 {[]
S‹m’t
{{

655 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

656 
Efãù
: "Allow",

657 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

658 
CÚd™iÚs
: 
unknownCÚdM­1
,

659 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

662 {[]
S‹m’t
{{

663 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

664 
Efãù
: "Allow",

665 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

666 
CÚd™iÚs
: 
unknownCÚdM­1
,

667 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

670 {[]
S‹m’t
{{

671 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

672 
Efãù
: "Allow",

673 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

674 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

675 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

678 {[]
S‹m’t
{{

679 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

680 
Efãù
: "Allow",

681 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

682 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

683 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

686 {[]
S‹m’t
{{

687 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

688 
Efãù
: "Allow",

689 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

690 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

693 {[]
S‹m’t
{{

694 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

695 
Efãù
: "Allow",

696 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

697 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

700 {[]
S‹m’t
{{

701 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
).UniÚ(
commÚBuck‘AùiÚs
),

702 
Efãù
: "Allow",

703 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

704 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

707 {[]
S‹m’t
{{

708 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
).UniÚ(
commÚBuck‘AùiÚs
),

709 
Efãù
: "Allow",

710 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

711 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

714 {[]
S‹m’t
{{

715 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

716 
Efãù
: "Allow",

717 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

718 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

720 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

721 
Efãù
: "Allow",

722 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

723 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

726 {[]
S‹m’t
{{

727 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

728 
Efãù
: "Allow",

729 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

730 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

732 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

733 
Efãù
: "Allow",

734 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

735 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

738 {[]
S‹m’t
{{

739 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

740 
Efãù
: "Allow",

741 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

742 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

744 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

745 
Efãù
: "Allow",

746 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

747 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

750 {[]
S‹m’t
{{

751 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

752 
Efãù
: "Allow",

753 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

754 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

756 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

757 
Efãù
: "Allow",

758 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

759 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

762 {[]
S‹m’t
{{

763 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

764 
Efãù
: "Allow",

765 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

766 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

768 
AùiÚs
: 
»adWr™eObjeùAùiÚs
,

769 
Efãù
: "Allow",

770 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

771 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

774 {[]
S‹m’t
{{

775 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

776 
Efãù
: "Allow",

777 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

778 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

780 
AùiÚs
: 
»adWr™eObjeùAùiÚs
,

781 
Efãù
: "Allow",

782 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

783 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

786 {[]
S‹m’t
{{

787 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

788 
Efãù
: "Allow",

789 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

790 
CÚd™iÚs
: 
knownCÚdM­1
,

791 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

793 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

794 
Efãù
: "Allow",

795 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

796 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

799 {[]
S‹m’t
{{

800 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

801 
Efãù
: "Allow",

802 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

803 
CÚd™iÚs
: 
knownCÚdM­1
,

804 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

806 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

807 
Efãù
: "Allow",

808 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

809 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

812 {[]
S‹m’t
{{

813 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

814 
Efãù
: "Allow",

815 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

816 
CÚd™iÚs
: 
knownCÚdM­2
,

817 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

819 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

820 
Efãù
: "Allow",

821 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

822 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

825 {[]
S‹m’t
{{

826 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

827 
Efãù
: "Allow",

828 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

829 
CÚd™iÚs
: 
unknownCÚdM­1
,

830 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

832 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

833 
Efãù
: "Allow",

834 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

835 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

838 {[]
S‹m’t
{{

839 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

840 
Efãù
: "Allow",

841 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

842 
CÚd™iÚs
: 
unknownCÚdM­1
,

843 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

845 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

846 
Efãù
: "Allow",

847 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

848 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

851 {[]
S‹m’t
{{

852 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

853 
Efãù
: "Allow",

854 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

855 
CÚd™iÚs
: 
knownCÚdM­11
,

856 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

858 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

859 
Efãù
: "Allow",

860 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

861 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

864 {[]
S‹m’t
{{

865 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

866 
Efãù
: "Allow",

867 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

868 
CÚd™iÚs
: 
knownCÚdM­11
,

869 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

871 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

872 
Efãù
: "Allow",

873 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

874 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

877 {[]
S‹m’t
{{

878 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

879 
Efãù
: "Allow",

880 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

881 
CÚd™iÚs
: 
unknownCÚdM­11
,

882 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

884 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

885 
Efãù
: "Allow",

886 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

887 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

890 {[]
S‹m’t
{{

891 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

892 
Efãù
: "Allow",

893 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

894 
CÚd™iÚs
: 
unknownCÚdM­11
,

895 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

897 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

898 
Efãù
: "Allow",

899 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

900 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

903 {[]
S‹m’t
{{

904 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

905 
Efãù
: "Allow",

906 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

907 
CÚd™iÚs
: 
knownCÚdM­12
,

908 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

910 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

911 
Efãù
: "Allow",

912 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

913 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

916 {[]
S‹m’t
{{

917 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

918 
Efãù
: "Allow",

919 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

920 
CÚd™iÚs
: 
knownCÚdM­12
,

921 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

923 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

924 
Efãù
: "Allow",

925 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

926 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

929 {[]
S‹m’t
{{

930 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

931 
Efãù
: "Allow",

932 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

933 
CÚd™iÚs
: 
unknownCÚdM­12
,

934 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

936 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

937 
Efãù
: "Allow",

938 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

939 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

942 {[]
S‹m’t
{{

943 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

944 
Efãù
: "Allow",

945 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

946 
CÚd™iÚs
: 
unknownCÚdM­12
,

947 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

949 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

950 
Efãù
: "Allow",

951 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

952 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/world"),

955 {[]
S‹m’t
{{

956 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

957 
Efãù
: "Allow",

958 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

959 
CÚd™iÚs
: 
knownCÚdM­1
,

960 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

962 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

963 
Efãù
: "Allow",

964 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

965 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

968 {[]
S‹m’t
{{

969 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

970 
Efãù
: "Allow",

971 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

972 
CÚd™iÚs
: 
knownCÚdM­1
,

973 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

975 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

976 
Efãù
: "Allow",

977 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

978 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

981 {[]
S‹m’t
{{

982 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

983 
Efãù
: "Allow",

984 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

985 
CÚd™iÚs
: 
unknownCÚdM­1
,

986 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

988 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

989 
Efãù
: "Allow",

990 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

991 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

994 {[]
S‹m’t
{{

995 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

996 
Efãù
: "Allow",

997 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

998 
CÚd™iÚs
: 
unknownCÚdM­1
,

999 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1001 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

1002 
Efãù
: "Allow",

1003 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1004 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1007 {[]
S‹m’t
{{

1008 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1009 
Efãù
: "Allow",

1010 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1011 
CÚd™iÚs
: 
knownCÚdM­13
,

1012 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1014 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

1015 
Efãù
: "Allow",

1016 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1017 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1020 {[]
S‹m’t
{{

1021 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1022 
Efãù
: "Allow",

1023 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1024 
CÚd™iÚs
: 
knownCÚdM­13
,

1025 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1027 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

1028 
Efãù
: "Allow",

1029 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1030 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1033 {[]
S‹m’t
{{

1034 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1035 
Efãù
: "Allow",

1036 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1037 
CÚd™iÚs
: 
unknownCÚdM­1
,

1038 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1040 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

1041 
Efãù
: "Allow",

1042 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1043 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1046 {[]
S‹m’t
{{

1047 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1048 
Efãù
: "Allow",

1049 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1050 
CÚd™iÚs
: 
unknownCÚdM­1
,

1051 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1053 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

1054 
Efãù
: "Allow",

1055 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1056 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1059 {[]
S‹m’t
{{

1060 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1061 
Efãù
: "Allow",

1062 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1063 
CÚd™iÚs
: 
knownCÚdM­14
,

1064 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1066 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

1067 
Efãù
: "Allow",

1068 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1069 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1072 {[]
S‹m’t
{{

1073 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1074 
Efãù
: "Allow",

1075 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1076 
CÚd™iÚs
: 
knownCÚdM­13
,

1077 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1079 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

1080 
Efãù
: "Allow",

1081 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1082 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1085 {[]
S‹m’t
{{

1086 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1087 
Efãù
: "Allow",

1088 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1089 
CÚd™iÚs
: 
unknownCÚdM­1
,

1090 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1092 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

1093 
Efãù
: "Allow",

1094 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1095 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1098 {[]
S‹m’t
{{

1099 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1100 
Efãù
: "Allow",

1101 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1102 
CÚd™iÚs
: 
unknownCÚdM­1
,

1103 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1105 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

1106 
Efãù
: "Allow",

1107 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1108 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1112 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

1113 
¡©em’ts
 :ğ
	`»moveS‹m’ts
(
‹¡Ca£
.¡©em’ts,e¡Ca£.
buck‘Name
,e¡Ca£.
´efix
)

1114 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
¡©em’ts
);ƒ¼ !ğ
n
 {

1115 
t
.
	`F©®f
("uÇbËƒncodšgØjsÚ, %s", 
”r
)

1116 } 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

1117 
t
.
	`F©®f
("%+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

1120 
	}
}

1123 
func
 
	$Te¡Aµ’dS‹m’t
(
t
 *
‹¡šg
.
T
) {

1124 
cÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

1125 
cÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1126 
cÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

1127 
cÚdM­
.
	`Add
("SŒšgEqu®s", 
cÚdKeyM­
)

1129 
cÚdM­1
 :ğ
	`make
(
CÚd™iÚM­
)

1130 
cÚdKeyM­1
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1131 
cÚdKeyM­1
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("world"))

1132 
cÚdM­1
.
	`Add
("SŒšgEqu®s", 
cÚdKeyM­1
)

1134 
unknownCÚdM­1
 :ğ
	`make
(
CÚd™iÚM­
)

1135 
unknownCÚdKeyM­1
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1136 
unknownCÚdKeyM­1
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("world"))

1137 
unknownCÚdM­1
.
	`Add
("SŒšgNÙEqu®s", 
unknownCÚdKeyM­1
)

1139 
‹¡Ca£s
 := []struct {

1140 
¡©em’ts
 []
S‹m’t


1141 
¡©em’t
 
S‹m’t


1142 
ex³ùedResuÉ
 
¡ršg


1145 {[]
S‹m’t
{}, Statement{}, `[]`},

1147 {[]
S‹m’t
{{

1148 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1149 
Efãù
: "Allow",

1150 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1151 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1152 }}, 
S‹m’t
{}, `[{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""}]`},

1154 {[]
S‹m’t
{}, Statement{

1155 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1156 
Efãù
: "Allow",

1157 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1158 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1161 {[]
S‹m’t
{{

1162 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1163 
Efãù
: "Allow",

1164 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1165 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1166 }}, 
S‹m’t
{

1167 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1168 
Efãù
: "Allow",

1169 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1170 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1173 {[]
S‹m’t
{{

1174 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1175 
Efãù
: "Allow",

1176 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1177 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1178 }}, 
S‹m’t
{

1179 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1180 
Efãù
: "Allow",

1181 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1182 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

1185 {[]
S‹m’t
{{

1186 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1187 
Efãù
: "Allow",

1188 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1189 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1190 }}, 
S‹m’t
{

1191 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1192 
Efãù
: "Allow",

1193 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1194 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1197 {[]
S‹m’t
{{

1198 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1199 
Efãù
: "Allow",

1200 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1201 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket", "arn:aws:s3:::testbucket"),

1202 }}, 
S‹m’t
{

1203 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1204 
Efãù
: "Allow",

1205 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1206 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1209 {[]
S‹m’t
{{

1210 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1211 
Efãù
: "Allow",

1212 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1213 
CÚd™iÚs
: 
cÚdM­
,

1214 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket", "arn:aws:s3:::testbucket"),

1215 }}, 
S‹m’t
{

1216 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1217 
Efãù
: "Allow",

1218 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1219 
CÚd™iÚs
: 
cÚdM­
,

1220 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1223 {[]
S‹m’t
{{

1224 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1225 
Efãù
: "Allow",

1226 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1227 
CÚd™iÚs
: 
cÚdM­
,

1228 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket", "arn:aws:s3:::testbucket"),

1229 }}, 
S‹m’t
{

1230 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1231 
Efãù
: "Allow",

1232 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1233 
CÚd™iÚs
: 
cÚdM­1
,

1234 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1237 {[]
S‹m’t
{{

1238 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1239 
Efãù
: "Allow",

1240 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1241 
CÚd™iÚs
: 
cÚdM­
,

1242 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1243 }}, 
S‹m’t
{

1244 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1245 
Efãù
: "Allow",

1246 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1247 
CÚd™iÚs
: 
cÚdM­1
,

1248 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1251 {[]
S‹m’t
{{

1252 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1253 
Efãù
: "Allow",

1254 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1255 
CÚd™iÚs
: 
unknownCÚdM­1
,

1256 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1257 }}, 
S‹m’t
{

1258 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1259 
Efãù
: "Allow",

1260 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1261 
CÚd™iÚs
: 
cÚdM­1
,

1262 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1265 {[]
S‹m’t
{{

1266 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1267 
Efãù
: "Allow",

1268 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1269 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket", "arn:aws:s3:::testbucket"),

1270 }}, 
S‹m’t
{

1271 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1272 
Efãù
: "Allow",

1273 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1274 
CÚd™iÚs
: 
cÚdM­
,

1275 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1278 {[]
S‹m’t
{{

1279 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1280 
Efãù
: "Allow",

1281 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1282 
CÚd™iÚs
: 
cÚdM­
,

1283 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket", "arn:aws:s3:::testbucket"),

1284 }}, 
S‹m’t
{

1285 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1286 
Efãù
: "Allow",

1287 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1288 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1291 {[]
S‹m’t
{{

1292 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1293 
Efãù
: "Allow",

1294 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1295 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1296 }}, 
S‹m’t
{

1297 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

1298 
Efãù
: "Allow",

1299 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1300 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1304 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

1305 
¡©em’ts
 :ğ
	`­³ndS‹m’t
(
‹¡Ca£
.¡©em’ts,e¡Ca£.
¡©em’t
)

1306 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
¡©em’ts
);ƒ¼ !ğ
n
 {

1307 
t
.
	`F©®f
("uÇbËƒncodšgØjsÚ, %s", 
”r
)

1308 } 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

1309 
t
.
	`F©®f
("%+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

1312 
	}
}

1315 
func
 
	$Te¡G‘Buck‘PŞicy
(
t
 *
‹¡šg
.
T
) {

1316 
h–loCÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

1317 
h–loCÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1318 
h–loCÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

1319 
h–loCÚdM­
.
	`Add
("SŒšgEqu®s", 
h–loCÚdKeyM­
)

1321 
wÜldCÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

1322 
wÜldCÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1323 
wÜldCÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("world"))

1324 
wÜldCÚdM­
.
	`Add
("SŒšgEqu®s", 
wÜldCÚdKeyM­
)

1326 
nÙH–loCÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

1327 
nÙH–loCÚdM­
.
	`Add
("SŒšgNÙEqu®s", 
wÜldCÚdKeyM­
)

1329 
‹¡Ca£s
 := []struct {

1330 
¡©em’t
 
S‹m’t


1331 
´efix
 
¡ršg


1332 
ex³ùedResuÉ1
 
boŞ


1333 
ex³ùedResuÉ2
 
boŞ


1334 
ex³ùedResuÉ3
 
boŞ


1337 {
S‹m’t
{

1338 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1339 
Efãù
: "Deny",

1340 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1341 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1342 }, "", 
çl£
, false, false},

1344 {
S‹m’t
{

1345 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1346 
Efãù
: "Deny",

1347 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1348 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1349 }, "h–lo", 
çl£
, false, false},

1351 {
S‹m’t
{

1352 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1353 
Efãù
: "Allow",

1354 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:iam::AccountNumberWithoutHyphens:root")},

1355 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1356 }, "", 
çl£
, false, false},

1358 {
S‹m’t
{

1359 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1360 
Efãù
: "Allow",

1361 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:iam::AccountNumberWithoutHyphens:root")},

1362 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1363 }, "h–lo", 
çl£
, false, false},

1366 {
S‹m’t
{

1367 
AùiÚs
: 
commÚBuck‘AùiÚs
,

1368 
Efãù
: "Allow",

1369 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1370 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1371 }, "", 
Œue
, 
çl£
, false},

1373 {
S‹m’t
{

1374 
AùiÚs
: 
commÚBuck‘AùiÚs
,

1375 
Efãù
: "Allow",

1376 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1377 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1378 }, "h–lo", 
Œue
, 
çl£
, false},

1381 {
S‹m’t
{

1382 
AùiÚs
: 
commÚBuck‘AùiÚs
,

1383 
Efãù
: "Allow",

1384 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1385 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

1386 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1387 }, "", 
çl£
, false, false},

1389 {
S‹m’t
{

1390 
AùiÚs
: 
commÚBuck‘AùiÚs
,

1391 
Efãù
: "Allow",

1392 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1393 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

1394 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1395 }, "h–lo", 
çl£
, false, false},

1397 {
S‹m’t
{

1398 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1399 
Efãù
: "Allow",

1400 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1401 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1402 }, "", 
çl£
, f®£, 
Œue
},

1404 {
S‹m’t
{

1405 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1406 
Efãù
: "Allow",

1407 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1408 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1409 }, "h–lo", 
çl£
, f®£, 
Œue
},

1411 {
S‹m’t
{

1412 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1413 
Efãù
: "Allow",

1414 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1415 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

1416 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1417 }, "", 
çl£
, false, false},

1419 {
S‹m’t
{

1420 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1421 
Efãù
: "Allow",

1422 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1423 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

1424 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1425 }, "h–lo", 
çl£
, false, false},

1427 {
S‹m’t
{

1428 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1429 
Efãù
: "Allow",

1430 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1431 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1432 }, "", 
çl£
, 
Œue
, false},

1434 {
S‹m’t
{

1435 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1436 
Efãù
: "Allow",

1437 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1438 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1439 }, "h–lo", 
çl£
, 
Œue
, false},

1441 {
S‹m’t
{

1442 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1443 
Efãù
: "Allow",

1444 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1445 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

1446 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1447 }, "", 
çl£
, false, false},

1449 {
S‹m’t
{

1450 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1451 
Efãù
: "Allow",

1452 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1453 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

1454 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1455 }, "h–lo", 
çl£
, false, false},

1457 {
S‹m’t
{

1458 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1459 
Efãù
: "Allow",

1460 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1461 
CÚd™iÚs
: 
h–loCÚdM­
,

1462 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1463 }, "", 
çl£
, false, false},

1465 {
S‹m’t
{

1466 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1467 
Efãù
: "Allow",

1468 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1469 
CÚd™iÚs
: 
h–loCÚdM­
,

1470 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1471 }, "h–lo", 
çl£
, 
Œue
, false},

1474 {
S‹m’t
{

1475 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1476 
Efãù
: "Allow",

1477 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1478 
CÚd™iÚs
: 
wÜldCÚdM­
,

1479 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1480 }, "", 
çl£
, false, false},

1482 {
S‹m’t
{

1483 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1484 
Efãù
: "Allow",

1485 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1486 
CÚd™iÚs
: 
wÜldCÚdM­
,

1487 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1488 }, "h–lo", 
çl£
, false, false},

1491 {
S‹m’t
{

1492 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1493 
Efãù
: "Allow",

1494 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1495 
CÚd™iÚs
: 
nÙH–loCÚdM­
,

1496 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1497 }, "", 
çl£
, false, false},

1499 {
S‹m’t
{

1500 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1501 
Efãù
: "Allow",

1502 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1503 
CÚd™iÚs
: 
nÙH–loCÚdM­
,

1504 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1505 }, "h–lo", 
çl£
, 
Œue
, false},

1508 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

1509 
commÚFound
, 
»adOÆy
, 
wr™eOÆy
 :ğ
	`g‘Buck‘PŞicy
(
‹¡Ca£
.
¡©em’t
,e¡Ca£.
´efix
)

1510 !(
‹¡Ca£
.
ex³ùedResuÉ1
 =ğ
commÚFound
 &&e¡Ca£.
ex³ùedResuÉ2
 =ğ
»adOÆy
 &&e¡Ca£.
ex³ùedResuÉ3
 =ğ
wr™eOÆy
) {

1511 
t
.
	`F©®f
("%+v:ƒx³ùed: [%t,%t,%t], gÙ: [%t,%t,%t]", 
‹¡Ca£
,

1512 
‹¡Ca£
.
ex³ùedResuÉ1
,e¡Ca£.
ex³ùedResuÉ2
,e¡Ca£.
ex³ùedResuÉ3
,

1513 
commÚFound
, 
»adOÆy
, 
wr™eOÆy
)

1516 
	}
}

1519 
func
 
	$Te¡G‘ObjeùPŞicy
(
t
 *
‹¡šg
.
T
) {

1520 
‹¡Ca£s
 := []struct {

1521 
¡©em’t
 
S‹m’t


1522 
ex³ùedResuÉ1
 
boŞ


1523 
ex³ùedResuÉ2
 
boŞ


1526 {
S‹m’t
{

1527 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

1528 
Efãù
: "Deny",

1529 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1530 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1531 }, 
çl£
, false},

1533 {
S‹m’t
{

1534 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

1535 
Efãù
: "Allow",

1536 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:iam::AccountNumberWithoutHyphens:root")},

1537 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1538 }, 
çl£
, false},

1540 {
S‹m’t
{

1541 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

1542 
Efãù
: "Allow",

1543 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1544 
CÚd™iÚs
: 
	`make
(
CÚd™iÚM­
),

1545 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1546 }, 
çl£
, false},

1548 {
S‹m’t
{

1549 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

1550 
Efãù
: "Allow",

1551 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1552 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1553 }, 
Œue
, 
çl£
},

1555 {
S‹m’t
{

1556 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

1557 
Efãù
: "Allow",

1558 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1559 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1560 }, 
çl£
, 
Œue
},

1562 {
S‹m’t
{

1563 
AùiÚs
: 
»adOÆyObjeùAùiÚs
.
	`UniÚ
(
wr™eOÆyObjeùAùiÚs
),

1564 
Efãù
: "Allow",

1565 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1566 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/hello*"),

1567 }, 
Œue
,rue},

1570 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

1571 
»adOÆy
, 
wr™eOÆy
 :ğ
	`g‘ObjeùPŞicy
(
‹¡Ca£
.
¡©em’t
)

1572 !(
‹¡Ca£
.
ex³ùedResuÉ1
 =ğ
»adOÆy
 &&e¡Ca£.
ex³ùedResuÉ2
 =ğ
wr™eOÆy
) {

1573 
t
.
	`F©®f
("%+v:ƒx³ùed: [%t,%t], gÙ: [%t,%t]", 
‹¡Ca£
,

1574 
‹¡Ca£
.
ex³ùedResuÉ1
,e¡Ca£.
ex³ùedResuÉ2
,

1575 
»adOÆy
, 
wr™eOÆy
)

1578 
	}
}

1581 
func
 
	$Te¡Li¡Buck‘PŞic›s
(
t
 *
‹¡šg
.
T
) {

1584 
dowÆßdCÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

1585 
dowÆßdCÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1586 
dowÆßdCÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("download"))

1587 
dowÆßdCÚdM­
.
	`Add
("SŒšgEqu®s", 
dowÆßdCÚdKeyM­
)

1590 
dowÆßdU¶ßdCÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

1591 
dowÆßdU¶ßdCÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1592 
dowÆßdU¶ßdCÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("both"))

1593 
dowÆßdU¶ßdCÚdM­
.
	`Add
("SŒšgEqu®s", 
dowÆßdU¶ßdCÚdKeyM­
)

1595 
commÚS‘AùiÚs
 :ğ
commÚBuck‘AùiÚs
.
	`UniÚ
(
»adOÆyBuck‘AùiÚs
)

1596 
‹¡Ca£s
 := []struct {

1597 
¡©em’ts
 []
S‹m’t


1598 
buck‘Name
 
¡ršg


1599 
´efix
 
¡ršg


1600 
ex³ùedResuÉ
 
m­
[
¡ršg
]
Buck‘PŞicy


1603 {[]
S‹m’t
{}, "", "", 
m­
[
¡ršg
]
Buck‘PŞicy
{}},

1605 {[]
S‹m’t
{{

1606 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1607 
Efãù
: "Allow",

1608 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1609 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1610 }}, "", "", 
m­
[
¡ršg
]
Buck‘PŞicy
{}},

1612 {[]
S‹m’t
{}, "mybuck‘", "", 
m­
[
¡ršg
]
Buck‘PŞicy
{}},

1614 {[]
S‹m’t
{

1616 
AùiÚs
: 
commÚBuck‘AùiÚs
,

1617 
Efãù
: "Allow",

1618 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1619 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1622 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1623 
Efãù
: "Allow",

1624 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1625 
CÚd™iÚs
: 
dowÆßdCÚdM­
,

1626 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1629 
AùiÚs
: 
»adOÆyObjeùAùiÚs
,

1630 
Efãù
: "Allow",

1631 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1632 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/download*"),

1633 }}, "mybuck‘", "", 
m­
[
¡ršg
]
Buck‘PŞicy
{"mybuck‘/dowÆßd*": 
Buck‘PŞicyR—dOÆy
}},

1634 {[]
S‹m’t
{

1636 
AùiÚs
: 
commÚS‘AùiÚs
.
	`UniÚ
(
»adOÆyObjeùAùiÚs
),

1637 
Efãù
: "Allow",

1638 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1639 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket", "arn:aws:s3:::mybucket/*"),

1640 }}, "mybuck‘", "", 
m­
[
¡ršg
]
Buck‘PŞicy
{"mybuck‘/*": 
Buck‘PŞicyR—dOÆy
}},

1642 {[]
S‹m’t
{

1644 
AùiÚs
: 
commÚBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1645 
Efãù
: "Allow",

1646 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1647 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1650 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
,

1651 
Efãù
: "Allow",

1652 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1653 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/upload*"),

1654 }}, "mybuck‘", "", 
m­
[
¡ršg
]
Buck‘PŞicy
{"mybuck‘/u¶ßd*": 
Buck‘PŞicyWr™eOÆy
}},

1656 {[]
S‹m’t
{

1658 
AùiÚs
: 
commÚBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1659 
Efãù
: "Allow",

1660 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1661 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1664 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1665 
Efãù
: "Allow",

1666 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1667 
CÚd™iÚs
: 
dowÆßdU¶ßdCÚdM­
,

1668 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1671 
AùiÚs
: 
wr™eOÆyObjeùAùiÚs
.
	`UniÚ
(
»adOÆyObjeùAùiÚs
),

1672 
Efãù
: "Allow",

1673 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1674 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket/both*"),

1675 }}, "mybuck‘", "", 
m­
[
¡ršg
]
Buck‘PŞicy
{"mybuck‘/bÙh*": 
Buck‘PŞicyR—dWr™e
}},

1678 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

1679 
pŞicyRuËs
 :ğ
	`G‘PŞic›s
(
‹¡Ca£
.
¡©em’ts
,e¡Ca£.
buck‘Name
, "")

1680 !
»æeù
.
	`D“pEqu®
(
‹¡Ca£
.
ex³ùedResuÉ
, 
pŞicyRuËs
) {

1681 
t
.
	`F©®f
("%+v:\Àex³ùed: %+v, gÙ: %+v", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
pŞicyRuËs
)

1684 
	}
}

1687 
func
 
	$Te¡G‘PŞicy
(
t
 *
‹¡šg
.
T
) {

1688 
h–loCÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

1689 
h–loCÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1690 
h–loCÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

1691 
h–loCÚdM­
.
	`Add
("SŒšgEqu®s", 
h–loCÚdKeyM­
)

1693 
‹¡Ca£s
 := []struct {

1694 
¡©em’ts
 []
S‹m’t


1695 
buck‘Name
 
¡ršg


1696 
´efix
 
¡ršg


1697 
ex³ùedResuÉ
 
Buck‘PŞicy


1700 {[]
S‹m’t
{}, "", "", 
Buck‘PŞicyNÚe
},

1702 {[]
S‹m’t
{{

1703 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1704 
Efãù
: "Allow",

1705 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1706 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1707 }}, "", "", 
Buck‘PŞicyNÚe
},

1709 {[]
S‹m’t
{}, "mybuck‘", "", 
Buck‘PŞicyNÚe
},

1711 {[]
S‹m’t
{{

1712 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1713 
Efãù
: "Allow",

1714 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1715 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

1716 }}, "mybuck‘", "", 
Buck‘PŞicyNÚe
},

1718 {[]
S‹m’t
{{

1719 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1720 
Efãù
: "Allow",

1721 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1722 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

1723 }}, "mybuck‘", "h–lo", 
Buck‘PŞicyNÚe
},

1725 {[]
S‹m’t
{{

1726 
AùiÚs
: 
commÚBuck‘AùiÚs
,

1727 
Efãù
: "Allow",

1728 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1729 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1730 }}, "mybuck‘", "", 
Buck‘PŞicyNÚe
},

1732 {[]
S‹m’t
{{

1733 
AùiÚs
: 
commÚBuck‘AùiÚs
,

1734 
Efãù
: "Allow",

1735 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1736 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1737 }}, "mybuck‘", "h–lo", 
Buck‘PŞicyNÚe
},

1739 {[]
S‹m’t
{{

1740 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1741 
Efãù
: "Allow",

1742 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1743 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1744 }}, "mybuck‘", "", 
Buck‘PŞicyNÚe
},

1746 {[]
S‹m’t
{{

1747 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1748 
Efãù
: "Allow",

1749 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1750 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1751 }}, "mybuck‘", "h–lo", 
Buck‘PŞicyNÚe
},

1753 {[]
S‹m’t
{{

1754 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1755 
Efãù
: "Allow",

1756 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1757 
CÚd™iÚs
: 
h–loCÚdM­
,

1758 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1759 }}, "mybuck‘", "", 
Buck‘PŞicyNÚe
},

1761 {[]
S‹m’t
{{

1762 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1763 
Efãù
: "Allow",

1764 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1765 
CÚd™iÚs
: 
h–loCÚdM­
,

1766 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1767 }}, "mybuck‘", "h–lo", 
Buck‘PŞicyNÚe
},

1769 {[]
S‹m’t
{{

1770 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1771 
Efãù
: "Allow",

1772 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1773 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1774 }}, "mybuck‘", "", 
Buck‘PŞicyNÚe
},

1776 {[]
S‹m’t
{{

1777 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1778 
Efãù
: "Allow",

1779 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1780 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1781 }}, "mybuck‘", "h–lo", 
Buck‘PŞicyNÚe
},

1783 {[]
S‹m’t
{{

1784 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1785 
Efãù
: "Allow",

1786 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1787 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1788 }}, "mybuck‘", "", 
Buck‘PŞicyNÚe
},

1790 {[]
S‹m’t
{{

1791 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1792 
Efãù
: "Allow",

1793 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1794 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1795 }}, "mybuck‘", "h–lo", 
Buck‘PŞicyNÚe
},

1797 {[]
S‹m’t
{{

1798 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1799 
Efãù
: "Allow",

1800 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1801 
CÚd™iÚs
: 
h–loCÚdM­
,

1802 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1803 }}, "mybuck‘", "", 
Buck‘PŞicyNÚe
},

1805 {[]
S‹m’t
{{

1806 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
.
	`UniÚ
(
wr™eOÆyBuck‘AùiÚs
),

1807 
Efãù
: "Allow",

1808 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1809 
CÚd™iÚs
: 
h–loCÚdM­
,

1810 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1811 }}, "mybuck‘", "h–lo", 
Buck‘PŞicyNÚe
},

1814 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

1815 
pŞicy
 :ğ
	`G‘PŞicy
(
‹¡Ca£
.
¡©em’ts
,e¡Ca£.
buck‘Name
,e¡Ca£.
´efix
)

1816 
‹¡Ca£
.
ex³ùedResuÉ
 !ğ
pŞicy
 {

1817 
t
.
	`F©®f
("%+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
pŞicy
)

1820 
	}
}

1823 
func
 
	$Te¡S‘PŞicy
(
t
 *
‹¡šg
.
T
) {

1824 
h–loCÚdM­
 :ğ
	`make
(
CÚd™iÚM­
)

1825 
h–loCÚdKeyM­
 :ğ
	`make
(
CÚd™iÚKeyM­
)

1826 
h–loCÚdKeyM­
.
	`Add
("s3:´efix", 
£t
.
	`C»©eSŒšgS‘
("hello"))

1827 
h–loCÚdM­
.
	`Add
("SŒšgEqu®s", 
h–loCÚdKeyM­
)

1829 
‹¡Ca£s
 := []struct {

1830 
¡©em’ts
 []
S‹m’t


1831 
pŞicy
 
Buck‘PŞicy


1832 
buck‘Name
 
¡ršg


1833 
´efix
 
¡ršg


1834 
ex³ùedResuÉ
 
¡ršg


1837 {[]
S‹m’t
{}, 
Buck‘PŞicyNÚe
, "", "", `[]`},

1839 {[]
S‹m’t
{{

1840 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1841 
Efãù
: "Allow",

1842 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1843 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1844 }}, 
Buck‘PŞicyNÚe
, "", "", `[{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""}]`},

1846 {[]
S‹m’t
{}, 
Buck‘PŞicyNÚe
, "mybucket", "", `[]`},

1848 {[]
S‹m’t
{}, 
Buck‘PŞicyNÚe
, "", "hello", `[]`},

1850 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dOÆy
, "", "", `[]`},

1852 {[]
S‹m’t
{{

1853 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1854 
Efãù
: "Allow",

1855 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1856 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

1857 }}, 
Buck‘PŞicyR—dOÆy
, "", "", `[{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::testbucket"],"Sid":""}]`},

1859 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dOÆy
, "mybucket", "", `[{"Action":["s3:GetBucketLocation","s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:GetObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

1861 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dOÆy
, "", "hello", `[]`},

1863 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dOÆy
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucket"],"Condition":{"StringEquals":{"s3:prefix":["hello"]}},"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:GetObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

1865 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dOÆy
, "", "", `[]`},

1867 {[]
S‹m’t
{{

1868 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1869 
Efãù
: "Allow",

1870 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1871 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

1872 }}, 
Buck‘PŞicyWr™eOÆy
, "", "", `[{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::testbucket"],"Sid":""}]`},

1874 {[]
S‹m’t
{}, 
Buck‘PŞicyWr™eOÆy
, "mybucket", "", `[{"Action":["s3:GetBucketLocation","s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

1876 {[]
S‹m’t
{}, 
Buck‘PŞicyWr™eOÆy
, "", "hello", `[]`},

1878 {[]
S‹m’t
{}, 
Buck‘PŞicyWr™eOÆy
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation","s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

1880 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dWr™e
, "", "", `[]`},

1882 {[]
S‹m’t
{{

1883 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1884 
Efãù
: "Allow",

1885 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1886 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::testbucket"),

1887 }}, 
Buck‘PŞicyR—dWr™e
, "", "", `[{"Action":["s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::testbucket"],"Sid":""}]`},

1889 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dWr™e
, "mybucket", "", `[{"Action":["s3:GetBucketLocation","s3:ListBucket","s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:GetObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

1891 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dWr™e
, "", "hello", `[]`},

1893 {[]
S‹m’t
{}, 
Buck‘PŞicyR—dWr™e
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation","s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucket"],"Condition":{"StringEquals":{"s3:prefix":["hello"]}},"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:GetObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

1895 {[]
S‹m’t
{{

1896 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1897 
Efãù
: "Allow",

1898 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1899 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1900 }}, 
Buck‘PŞicyR—dOÆy
, "mybucket", "", `[{"Action":["s3:GetBucketLocation","s3:ListBucket"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:GetObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

1902 {[]
S‹m’t
{{

1903 
AùiÚs
: 
wr™eOÆyBuck‘AùiÚs
,

1904 
Efãù
: "Allow",

1905 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1906 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1907 }}, 
Buck‘PŞicyR—dOÆy
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucket"],"Condition":{"StringEquals":{"s3:prefix":["hello"]}},"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:GetObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

1909 {[]
S‹m’t
{{

1910 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1911 
Efãù
: "Allow",

1912 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1913 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1914 }}, 
Buck‘PŞicyWr™eOÆy
, "mybucket", "", `[{"Action":["s3:GetBucketLocation","s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

1916 {[]
S‹m’t
{{

1917 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1918 
Efãù
: "Allow",

1919 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1920 
CÚd™iÚs
: 
h–loCÚdM­
,

1921 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1922 }}, 
Buck‘PŞicyWr™eOÆy
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation","s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

1925 {[]
S‹m’t
{{

1926 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1927 
Efãù
: "Allow",

1928 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1929 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1930 }}, 
Buck‘PŞicyR—dWr™e
, "mybucket", "", `[{"Action":["s3:GetBucketLocation","s3:ListBucket","s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:GetObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/*"],"Sid":""}]`},

1932 {[]
S‹m’t
{{

1933 
AùiÚs
: 
»adOÆyBuck‘AùiÚs
,

1934 
Efãù
: "Allow",

1935 
Pršc®
: 
U£r
{
AWS
: 
£t
.
	`C»©eSŒšgS‘
("*")},

1936 
CÚd™iÚs
: 
h–loCÚdM­
,

1937 
Resourûs
: 
£t
.
	`C»©eSŒšgS‘
("arn:aws:s3:::mybucket"),

1938 }}, 
Buck‘PŞicyR—dWr™e
, "mybucket", "hello", `[{"Action":["s3:GetBucketLocation","s3:ListBucketMultipartUploads"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:ListBucket"],"Condition":{"StringEquals":{"s3:prefix":["hello"]}},"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket"],"Sid":""},{"Action":["s3:AbortMultipartUpload","s3:DeleteObject","s3:GetObject","s3:ListMultipartUploadParts","s3:PutObject"],"Effect":"Allow","Principal":{"AWS":["*"]},"Resource":["arn:aws:s3:::mybucket/hello*"],"Sid":""}]`},

1941 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

1942 
¡©em’ts
 :ğ
	`S‘PŞicy
(
‹¡Ca£
.¡©em’ts,e¡Ca£.
pŞicy
,e¡Ca£.
buck‘Name
,e¡Ca£.
´efix
)

1943 
d©a
, 
”r
 :ğ
jsÚ
.
	`M¬sh®
(
¡©em’ts
);ƒ¼ !ğ
n
 {

1944 
t
.
	`F©®f
("uÇbËƒncodšgØjsÚ, %s", 
”r
)

1945 } 
	`¡ršg
(
d©a
è!ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

1946 
t
.
	`F©®f
("%+v:ƒx³ùed: %s, gÙ: %s", 
‹¡Ca£
,e¡Ca£.
ex³ùedResuÉ
, 
	`¡ršg
(
d©a
))

1949 
	}
}

1952 
func
 
	$Te¡IsV®idBuck‘PŞicy
(
t
 *
‹¡šg
.
T
) {

1953 
‹¡Ca£s
 := []struct {

1954 
šputPŞicy
 
Buck‘PŞicy


1955 
ex³ùedResuÉ
 
boŞ


1958 {
	`Buck‘PŞicy
("nÚe"), 
Œue
},

1959 {
	`Buck‘PŞicy
("»adÚly"), 
Œue
},

1960 {
	`Buck‘PŞicy
("»adwr™e"), 
Œue
},

1961 {
	`Buck‘PŞicy
("wr™eÚly"), 
Œue
},

1963 {
	`Buck‘PŞicy
("»adwr™eÚly"), 
çl£
},

1964 {
	`Buck‘PŞicy
("wr™”—d"), 
çl£
},

1967 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

1968 
aùu®ResuÉ
 :ğ
‹¡Ca£
.
šputPŞicy
.
	`IsV®idBuck‘PŞicy
()

1969 
‹¡Ca£
.
ex³ùedResuÉ
 !ğ
aùu®ResuÉ
 {

1970 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed IsV®idBuck‘…ŞicyØb'%v' fÜ…Şicy \"%s\", buˆš¡—d found iˆtØb'%v'", 
i
+1, 
‹¡Ca£
.
ex³ùedResuÉ
,e¡Ca£.
šputPŞicy
, 
aùu®ResuÉ
)

1973 
	}
}

1976 
func
 
	$Te¡Buck‘PŞicyResourûM©ch
(
t
 *
‹¡šg
.
T
) {

1979 
g’”©eS‹m’t
 :ğ
	`func
(
»sourû
 
¡ršg
è
S‹m’t
 {

1980 
¡©em’t
 :ğ
S‹m’t
{}

1981 
¡©em’t
.
Resourûs
 = 
£t
.
	`C»©eSŒšgS‘
(
»sourû
)

1982  
¡©em’t


1986 
g’”©eResourû
 :ğ
	`func
(
buck‘Name
, 
objeùName
 
¡ršg
) string {

1987  
awsResourûP»fix
 + 
buck‘Name
 + "/" + 
objeùName


1990 
‹¡Ca£s
 := []struct {

1991 
»sourûToM©ch
 
¡ršg


1992 
¡©em’t
 
S‹m’t


1993 
ex³ùedResourûM©ch
 
boŞ


1997 {
	`g’”©eResourû
("mšio-buck‘", ""), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/*")), 
Œue
},

1998 {
	`g’”©eResourû
("mšio-buck‘", ""), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/*")), 
Œue
},

1999 {
	`g’”©eResourû
("mšio-buck‘", ""), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/*")), 
Œue
},

2000 {
	`g’”©eResourû
("mšio-buck‘", ""), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/*")), 
Œue
},

2003 {
	`g’”©eResourû
("mšio-buck‘", "ouut.txt"), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/oo*")), 
çl£
},

2006 {
	`g’”©eResourû
("mšio-buck‘", "oÙput.txt"), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/oo*")), 
Œue
},

2009 {
	`g’”©eResourû
("mšio-buck‘", "oİ-buck‘/my-fe"), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/oo*")), 
Œue
},

2011 {
	`g’”©eResourû
("mšio-buck‘", "AsŸ/IndŸ/1.pjg"), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/AsŸ/J­ª/*")), 
çl£
},

2013 {
	`g’”©eResourû
("mšio-buck‘", "AsŸ/IndŸ/1.pjg"), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
, "mšio-buck‘"+"/AsŸ/J­ª/*")), 
çl£
},

2016 {
	`g’”©eResourû
("mšio-buck‘", "Aäiÿ/Bih¬/IndŸ/design_šfo.doc/Bih¬"), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
,

2017 "mšio-buck‘"+"/*/IndŸ/*/Bih¬")), 
Œue
},

2020 {
	`g’”©eResourû
("mšio-buck‘", "AsŸ/Chša/IndŸ/S‹s/Bih¬/ouut.txt"), 
	`g’”©eS‹m’t
(
fmt
.
	`S´štf
("%s%s", 
awsResourûP»fix
,

2021 "mšio-buck‘"+"/*/IndŸ/*/Bih¬/*")), 
Œue
},

2023 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

2024 
»sourûs
 :ğ
‹¡Ca£
.
¡©em’t
.
Resourûs
.
	`FuncM©ch
(
»sourûM©ch
,e¡Ca£.
»sourûToM©ch
)

2025 
aùu®ResourûM©ch
 :ğ
»sourûs
.
	`Equ®s
(
‹¡Ca£
.
¡©em’t
.
Resourûs
)

2026 
‹¡Ca£
.
ex³ùedResourûM©ch
 !ğ
aùu®ResourûM©ch
 {

2027 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed Resourû m©chØb`%v`, buˆš¡—d found iˆtØb`%v`", 
i
+1, 
‹¡Ca£
.
ex³ùedResourûM©ch
, 
aùu®ResourûM©ch
)

2030 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-streaming.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

35 
	g¡»amšgSignAlgÜ™hm
 = "STREAMING-AWS4-HMAC-SHA256-PAYLOAD"

36 
¡»amšgPaylßdHdr
 = "AWS4-HMAC-SHA256-PAYLOAD"

37 
em±ySHA256
 = "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"

38 
·ylßdChunkSize
 = 64 * 1024

39 
chunkSigCÚ¡L’
 = 17

40 
sigÇtu»SŒL’
 = 64

41 
ülfL’
 = 2

46 
v¬
 
ignÜedSŒ—mšgH—d”s
 = 
m­
[
¡ršg
]
boŞ
{

47 "AuthÜiz©iÚ": 
Œue
,

48 "U£r-Ag’t": 
Œue
,

49 "CÚ‹Á-Ty³": 
Œue
,

53 
func
 
	$g‘SigÃdChunkL’gth
(
chunkD©aSize
 
št64
) int64 {

54  
	`št64
(
	`Ën
(
fmt
.
	`S´štf
("%x", 
chunkD©aSize
))) +

55 
chunkSigCÚ¡L’
 +

56 
sigÇtu»SŒL’
 +

57 
ülfL’
 +

58 
chunkD©aSize
 +

59 
ülfL’


60 
	}
}

63 
func
 
	$g‘SŒ—mL’gth
(
d©aL’
, 
chunkSize
 
št64
) int64 {

64 
d©aL’
 <= 0 {

68 
chunksCouÁ
 :ğ
	`št64
(
d©aL’
 / 
chunkSize
)

69 
»maššgBy‹s
 :ğ
	`št64
(
d©aL’
 % 
chunkSize
)

70 
¡»amL’
 :ğ
	`št64
(0)

71 
¡»amL’
 +ğ
chunksCouÁ
 * 
	`g‘SigÃdChunkL’gth
(
chunkSize
)

72 
»maššgBy‹s
 > 0 {

73 
¡»amL’
 +ğ
	`g‘SigÃdChunkL’gth
(
»maššgBy‹s
)

75 
¡»amL’
 +ğ
	`g‘SigÃdChunkL’gth
(0)

76  
¡»amL’


77 
	}
}

81 
func
 
	$budChunkSŒšgToSign
(
t
 
time
.
Time
, 
»giÚ
, 
´eviousSig
 
¡ršg
, 
chunkD©a
 []
by‹
) string {

82 
¡ršgToSignP¬ts
 :ğ[]
¡ršg
{

83 
¡»amšgPaylßdHdr
,

84 
t
.
	`FÜm©
(
iso8601D©eFÜm©
),

85 
	`g‘Scİe
(
»giÚ
, 
t
),

86 
´eviousSig
,

87 
em±ySHA256
,

88 
hex
.
	`EncodeToSŒšg
(
	`sum256
(
chunkD©a
)),

91  
¡ršgs
.
	`Još
(
¡ršgToSignP¬ts
, "\n")

92 
	}
}

96 
func
 
	$´•¬eSŒ—mšgReque¡
(
»q
 *
h‰p
.
Reque¡
, 
£ssiÚTok’
 
¡ršg
, 
d©aL’
 
št64
, 
time¡amp
 
time
.
Time
) {

98 
»q
.
H—d”
.
	`S‘
("X-Amz-CÚ‹Á-Sha256", 
¡»amšgSignAlgÜ™hm
)

99 
£ssiÚTok’
 != "" {

100 
»q
.
H—d”
.
	`S‘
("X-Amz-Secur™y-Tok’", 
£ssiÚTok’
)

103 
»q
.
H—d”
.
	`S‘
("X-Amz-D©e", 
time¡amp
.
	`FÜm©
(
iso8601D©eFÜm©
))

105 
»q
.
CÚ‹ÁL’gth
 = 
	`g‘SŒ—mL’gth
(
d©aL’
, 
	`št64
(
·ylßdChunkSize
))

106 
»q
.
H—d”
.
	`S‘
("x-amz-decoded-cÚ‹Á-Ëngth", 
¡rcÚv
.
	`FÜm©IÁ
(
d©aL’
, 10))

107 
	}
}

111 
func
 
budChunkH—d”
(
chunkL’
 
št64
, 
sigÇtu»
 
¡ršg
è[]
	gby‹
 {

112  []
by‹
(
¡rcÚv
.
FÜm©IÁ
(
chunkL’
, 16è+ ";chunk-sigÇtu»=" + 
sigÇtu»
 + "\r\n")

116 
func
 
	$budChunkSigÇtu»
(
chunkD©a
 []
by‹
, 
»qTime
 
time
.
Time
, 
»giÚ
,

117 
´eviousSigÇtu»
, 
£ü‘AcûssKey
 
¡ršg
) string {

119 
chunkSŒšgToSign
 :ğ
	`budChunkSŒšgToSign
(
»qTime
, 
»giÚ
,

120 
´eviousSigÇtu»
, 
chunkD©a
)

121 
signšgKey
 :ğ
	`g‘SignšgKey
(
£ü‘AcûssKey
, 
»giÚ
, 
»qTime
)

122  
	`g‘SigÇtu»
(
signšgKey
, 
chunkSŒšgToSign
)

123 
	}
}

126 
	$func
 (
s
 *
SŒ—mšgR—d”
è
	$£tS“dSigÇtu»
(
»q
 *
h‰p
.
Reque¡
) {

128 
ÿnÚiÿlReque¡
 :ğ
	`g‘CªÚiÿlReque¡
(*
»q
, 
ignÜedSŒ—mšgH—d”s
)

131 
¡ršgToSign
 :ğ
	`g‘SŒšgToSignV4
(
s
.
»qTime
, s.
»giÚ
, 
ÿnÚiÿlReque¡
)

133 
signšgKey
 :ğ
	`g‘SignšgKey
(
s
.
£ü‘AcûssKey
, s.
»giÚ
, s.
»qTime
)

136 
s
.
£edSigÇtu»
 = 
	`g‘SigÇtu»
(
signšgKey
, 
¡ršgToSign
)

137 
	}
}

141 
ty³
 
SŒ—mšgR—d”
 struct {

142 
acûssKeyID
 
¡ršg


143 
£ü‘AcûssKey
 
¡ršg


144 
£ssiÚTok’
 
¡ršg


145 
»giÚ
 
¡ršg


146 
´evSigÇtu»
 
¡ršg


147 
£edSigÇtu»
 
¡ršg


148 
cÚ‹ÁL’
 
št64


149 
ba£R—dClo£r
 
	mio
.
R—dClo£r


150 
by‹sR—d
 
št64


151 
buf
 
	mby‹s
.
Bufãr


152 
	mchunkBuf
 []
by‹


153 
chunkBufL’
 

154 
dÚe
 
boŞ


155 
»qTime
 
	mtime
.
Time


156 
chunkNum
 

157 
tÙ®Chunks
 

158 
Ï¡ChunkSize
 

162 
	$func
 (
s
 *
SŒ—mšgR—d”
è
	$signChunk
(
chunkL’
 ) {

164 
sigÇtu»
 :ğ
	`budChunkSigÇtu»
(
s
.
chunkBuf
[:
chunkL’
], s.
»qTime
,

165 
s
.
»giÚ
, s.
´evSigÇtu»
, s.
£ü‘AcûssKey
)

168 
s
.
´evSigÇtu»
 = 
sigÇtu»


171 
chunkHdr
 :ğ
	`budChunkH—d”
(
	`št64
(
chunkL’
), 
sigÇtu»
)

172 
s
.
buf
.
	`Wr™e
(
chunkHdr
)

175 
s
.
buf
.
	`Wr™e
(s.
chunkBuf
[:
chunkL’
])

178 
s
.
buf
.
	`Wr™e
([]
	`by‹
("\r\n"))

181 
s
.
chunkBufL’
 = 0

182 
s
.
chunkNum
++

183 
	}
}

187 
	$func
 (
s
 *
SŒ—mšgR—d”
è
	$£tSŒ—mšgAuthH—d”
(
»q
 *
h‰p
.
Reque¡
) {

188 
üed’tŸl
 :ğ
	`G‘C»d’tŸl
(
s
.
acûssKeyID
, s.
»giÚ
, s.
»qTime
)

189 
authP¬ts
 :ğ[]
¡ršg
{

190 
signV4AlgÜ™hm
 + " C»d’tŸl=" + 
üed’tŸl
,

191 "SigÃdH—d”s=" + 
	`g‘SigÃdH—d”s
(*
»q
, 
ignÜedSŒ—mšgH—d”s
),

192 "SigÇtu»=" + 
s
.
£edSigÇtu»
,

196 
auth
 :ğ
¡ršgs
.
	`Još
(
authP¬ts
, ",")

197 
»q
.
H—d”
.
	`S‘
("AuthÜiz©iÚ", 
auth
)

198 
	}
}

202 
func
 
SŒ—mšgSignV4
(
»q
 *
h‰p
.
Reque¡
, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£ssiÚTok’
,

203 
»giÚ
 
¡ršg
, 
d©aL’
 
št64
, 
»qTime
 
time
.
Time
è*
	gh‰p
.
	gReque¡
 {

206 
´•¬eSŒ—mšgReque¡
(
»q
, 
£ssiÚTok’
, 
d©aL’
, 
»qTime
)

208 
	g»q
.
	gBody
 =ğ
n
 {

209 
»q
.
Body
 = 
iout
.
NİClo£r
(
by‹s
.
NewR—d”
([]
by‹
("")))

212 
	g¡R—d”
 :ğ&
SŒ—mšgR—d”
{

213 
ba£R—dClo£r
: 
»q
.
Body
,

214 
acûssKeyID
:‡ccessKeyID,

215 
£ü‘AcûssKey
: secretAccessKey,

216 
£ssiÚTok’
: sessionToken,

217 
»giÚ
:„egion,

218 
»qTime
:„eqTime,

219 
chunkBuf
: 
make
([]
by‹
, 
·ylßdChunkSize
),

220 
cÚ‹ÁL’
: 
d©aL’
,

221 
chunkNum
: 1,

222 
tÙ®Chunks
: ((
d©aL’
+
·ylßdChunkSize
-1)/payloadChunkSize) + 1,

223 
Ï¡ChunkSize
: (
d©aL’
 % 
·ylßdChunkSize
),

229 
¡R—d”
.
£tS“dSigÇtu»
(
»q
)

232 
¡R—d”
.
£tSŒ—mšgAuthH—d”
(
»q
)

236 
¡R—d”
.
´evSigÇtu»
 = stR—d”.
£edSigÇtu»


237 
»q
.
Body
 = 
¡R—d”


239  
»q


244 
	$func
 (
s
 *
SŒ—mšgR—d”
è
	$R—d
(
buf
 []
by‹
è(, 
”rÜ
) {

248 
s
.
dÚe
:

252 
s
.
buf
.
	`L’
(è< 
	`Ën
(buf):

253 
s
.
chunkBufL’
 = 0

255 
n1
, 
”r
 :ğ
s
.
ba£R—dClo£r
.
	`R—d
(s.
chunkBuf
[s.
chunkBufL’
:])

267 
n1
 > 0 {

268 
s
.
chunkBufL’
 +ğ
n1


269 
s
.
by‹sR—d
 +ğ
	`št64
(
n1
)

271 
s
.
chunkBufL’
 =ğ
·ylßdChunkSize
 ||

272 (
s
.
chunkNum
 =ğs.
tÙ®Chunks
-1 &&

273 
s
.
chunkBufL’
 =ğs.
Ï¡ChunkSize
) {

275 
s
.
	`signChunk
(s.
chunkBufL’
)

279 
”r
 !ğ
n
 {

280 
”r
 =ğ
io
.
EOF
 {

283 
s
.
dÚe
 = 
Œue


287 
s
.
by‹sR—d
 !ğs.
cÚ‹ÁL’
 {

288  0, 
io
.
E¼UÃx³ùedEOF


292 
s
.
	`signChunk
(0)

295  0, 
”r


300  
s
.
buf
.
	`R—d
(buf)

301 
	}
}

304 
	$func
 (
s
 *
SŒ—mšgR—d”
è
	$Clo£
(è
”rÜ
 {

305  
s
.
ba£R—dClo£r
.
	`Clo£
()

306 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-streaming_test.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

27 
func
 
	$Te¡G‘S“dSigÇtu»
(
t
 *
‹¡šg
.
T
) {

28 
acûssKeyID
 := "AKIAIOSFODNN7EXAMPLE"

29 
£ü‘AcûssKeyID
 := "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

30 
d©aL’
 := 66560

31 
d©a
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("a"), 
d©aL’
)

32 
body
 :ğ
iout
.
	`NİClo£r
(
by‹s
.
	`NewR—d”
(
d©a
))

34 
»q
 :ğ
	`NewReque¡
("PUT", "/exam¶ebuck‘/chunkObjeù.txt", 
body
)

35 
»q
.
H—d”
.
	`S‘
("x-amz-storage-class", "REDUCED_REDUNDANCY")

36 
»q
.
Ho¡
 = "s3.amazonaws.com"

38 
»qTime
, 
”r
 :ğ
time
.
	`P¬£
("20060102T150405Z", "20130524T000000Z")

39 
”r
 !ğ
n
 {

40 
t
.
	`F©®f
("FaedØ·r£im- %v", 
”r
)

43 
»q
 = 
	`SŒ—mšgSignV4
Ôeq, 
acûssKeyID
, 
£ü‘AcûssKeyID
, "", "us-—¡-1", 
	`št64
(
d©aL’
), 
»qTime
)

44 
aùu®S“dSigÇtu»
 :ğ
»q
.
Body
.(*
SŒ—mšgR—d”
).
£edSigÇtu»


46 
ex³ùedS“dSigÇtu»
 := "38cab3af09aa15ddf29e26e36236f60fb6bfb6243a20797ae9a8183674526079"

47 
aùu®S“dSigÇtu»
 !ğ
ex³ùedS“dSigÇtu»
 {

48 
t
.
	`E¼Üf
("Ex³ùed % buˆ»ûived %s", 
ex³ùedS“dSigÇtu»
, 
aùu®S“dSigÇtu»
)

50 
	}
}

52 
func
 
	$Te¡ChunkSigÇtu»
(
t
 *
‹¡šg
.
T
) {

53 
chunkD©a
 :ğ
by‹s
.
	`R•—t
([]
	`by‹
("a"), 65536)

54 
»qTime
, 
_
 :ğ
time
.
	`P¬£
(
iso8601D©eFÜm©
, "20130524T000000Z")

55 
´eviousSigÇtu»
 := "4f232c4386841ef735655705268965c44a0e4690baa4adea153f7db9fa80a0a9"

56 
loÿtiÚ
 := "us-east-1"

57 
£ü‘AcûssKeyID
 := "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

58 
ex³ùedSigÇtu»
 := "ad80c730a21e5b8d04586a2213dd63b9a0e99e0e2307b0ade35a65485a288648"

59 
aùu®SigÇtu»
 :ğ
	`budChunkSigÇtu»
(
chunkD©a
, 
»qTime
, 
loÿtiÚ
, 
´eviousSigÇtu»
, 
£ü‘AcûssKeyID
)

60 
aùu®SigÇtu»
 !ğ
ex³ùedSigÇtu»
 {

61 
t
.
	`E¼Üf
("Ex³ùed % buˆ»ûived %s", 
ex³ùedSigÇtu»
, 
aùu®SigÇtu»
)

63 
	}
}

65 
func
 
	$Te¡S‘SŒ—mšgAuthÜiz©iÚ
(
t
 *
‹¡šg
.
T
) {

66 
loÿtiÚ
 := "us-east-1"

67 
£ü‘AcûssKeyID
 := "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

68 
acûssKeyID
 := "AKIAIOSFODNN7EXAMPLE"

70 
»q
 :ğ
	`NewReque¡
("PUT", "/exam¶ebuck‘/chunkObjeù.txt", 
n
)

71 
»q
.
H—d”
.
	`S‘
("x-amz-storage-class", "REDUCED_REDUNDANCY")

72 
»q
.
Ho¡
 = ""

73 
»q
.
URL
.
Ho¡
 = "s3.amazonaws.com"

75 
d©aL’
 :ğ
	`št64
(65 * 1024)

76 
»qTime
, 
_
 :ğ
time
.
	`P¬£
(
iso8601D©eFÜm©
, "20130524T000000Z")

77 
»q
 = 
	`SŒ—mšgSignV4
Ôeq, 
acûssKeyID
, 
£ü‘AcûssKeyID
, "", 
loÿtiÚ
, 
d©aL’
, 
»qTime
)

79 
ex³ùedAuthÜiz©iÚ
 := "AWS4-HMAC-SHA256 Credential=AKIAIOSFODNN7EXAMPLE/20130524/us-east-1/s3/aws4_request,SignedHeaders=host;x-amz-content-sha256;x-amz-date;x-amz-decoded-content-length;x-amz-storage-class,Signature=38cab3af09aa15ddf29e26e36236f60fb6bfb6243a20797ae9a8183674526079"

81 
aùu®AuthÜiz©iÚ
 :ğ
»q
.
H—d”
.
	`G‘
("Authorization")

82 
aùu®AuthÜiz©iÚ
 !ğ
ex³ùedAuthÜiz©iÚ
 {

83 
t
.
	`E¼Üf
("Ex³ùed % buˆ»ûived %s", 
ex³ùedAuthÜiz©iÚ
, 
aùu®AuthÜiz©iÚ
)

85 
	}
}

87 
func
 
	$Te¡SŒ—mšgR—d”
(
t
 *
‹¡šg
.
T
) {

88 
»qTime
, 
_
 :ğ
time
.
	`P¬£
("20060102T150405Z", "20130524T000000Z")

89 
loÿtiÚ
 := "us-east-1"

90 
£ü‘AcûssKeyID
 := "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY"

91 
acûssKeyID
 := "AKIAIOSFODNN7EXAMPLE"

92 
d©aL’
 :ğ
	`št64
(65 * 1024)

94 
»q
 :ğ
	`NewReque¡
("PUT", "/exam¶ebuck‘/chunkObjeù.txt", 
n
)

95 
»q
.
H—d”
.
	`S‘
("x-amz-storage-class", "REDUCED_REDUNDANCY")

96 
»q
.
CÚ‹ÁL’gth
 = 65 * 1024

97 
»q
.
Ho¡
 = ""

98 
»q
.
URL
.
Ho¡
 = "s3.amazonaws.com"

100 
ba£R—d”
 :ğ
iout
.
	`NİClo£r
(
by‹s
.
	`NewR—d”
(by‹s.
	`R•—t
([]
	`by‹
("a"), 65*1024)))

101 
»q
.
Body
 = 
ba£R—d”


102 
»q
 = 
	`SŒ—mšgSignV4
Ôeq, 
acûssKeyID
, 
£ü‘AcûssKeyID
, "", 
loÿtiÚ
, 
d©aL’
, 
»qTime
)

104 
b
, 
”r
 :ğ
iout
.
	`R—dAÎ
(
»q
.
Body
)

105 
”r
 !ğ
n
 {

106 
t
.
	`E¼Üf
("Ex³ùed‚Ø”rÜ buˆ»ûived %v %d", 
”r
, 
	`Ën
(
b
))

108 
»q
.
Body
.
	`Clo£
()

109 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-v2.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

38 
	gsignV2AlgÜ™hm
 = "AWS"

42 
func
 
	$’codeURL2P©h
(
»q
 *
h‰p
.
Reque¡
, 
vœtu®Ho¡
 
boŞ
è(
·th
 
¡ršg
) {

43 
vœtu®Ho¡
 {

44 
»qHo¡
 :ğ
	`g‘Ho¡Addr
(
»q
)

45 
dÙPos
 :ğ
¡ršgs
.
	`Index
(
»qHo¡
, ".")

46 
dÙPos
 > -1 {

47 
buck‘Name
 :ğ
»qHo¡
[:
dÙPos
]

48 
·th
 = "/" + 
buck‘Name


49 
·th
 +ğ
»q
.
URL
.
P©h


50 
·th
 = 
s3uts
.
	`EncodeP©h
(path)

54 
·th
 = 
s3uts
.
	`EncodeP©h
(
»q
.
URL
.
P©h
)

56 
	}
}

60 
func
 
P»SignV2
(
»q
 
h‰p
.
Reque¡
, 
acûssKeyID
, 
£ü‘AcûssKey
 
¡ršg
, 
expœes
 
št64
, 
vœtu®Ho¡
 
boŞ
è*
	gh‰p
.
	gReque¡
 {

62 
	gacûssKeyID
 =ğ"" || 
£ü‘AcûssKey
 == "" {

63  &
»q


66 
d
 :ğ
time
.
Now
().
UTC
()

68 
•ochExpœes
 :ğ
d
.
Unix
(è+ 
expœes


71 
expœesSŒ
 :ğ
»q
.
H—d”
.
G‘
("Expœes"); 
	gexpœesSŒ
 == "" {

72 
»q
.
H—d”
.
S‘
("Expœes", 
¡rcÚv
.
FÜm©IÁ
(
•ochExpœes
, 10))

76 
¡ršgToSign
 :ğ
´eSŒšgToSignV2
(
»q
, 
vœtu®Ho¡
)

77 
	ghm
 :ğ
hmac
.
New
(
sha1
.New, []
by‹
(
£ü‘AcûssKey
))

78 
	ghm
.
Wr™e
([]
by‹
(
¡ršgToSign
))

81 
	gsigÇtu»
 :ğ
ba£64
.
StdEncodšg
.
EncodeToSŒšg
(
hm
.
Sum
(
n
))

83 
qu”y
 :ğ
»q
.
URL
.
Qu”y
()

85 
¡ršgs
.
CÚšs
(
g‘Ho¡Addr
(&
»q
), ".storage.googleapis.com") {

86 
	gqu”y
.
S‘
("GoogËAcûssId", 
acûssKeyID
)

88 
	gqu”y
.
S‘
("AWSAcûssKeyId", 
acûssKeyID
)

92 
	gqu”y
.
S‘
("Expœes", 
¡rcÚv
.
FÜm©IÁ
(
•ochExpœes
, 10))

95 
	g»q
.
	gURL
.
	gRawQu”y
 = 
s3uts
.
Qu”yEncode
(
qu”y
)

98 
»q
.
URL
.
RawQu”y
 +ğ"&SigÇtu»=" + 
s3uts
.
EncodeP©h
(
sigÇtu»
)

101  &
»q


106 
func
 
	$Po¡P»signSigÇtu»V2
(
pŞicyBa£64
, 
£ü‘AcûssKey
 
¡ršg
) string {

107 
hm
 :ğ
hmac
.
	`New
(
sha1
.
New
, []
	`by‹
(
£ü‘AcûssKey
))

108 
hm
.
	`Wr™e
([]
	`by‹
(
pŞicyBa£64
))

109 
sigÇtu»
 :ğ
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
hm
.
	`Sum
(
n
))

110  
sigÇtu»


111 
	}
}

130 
func
 
SignV2
(
»q
 
h‰p
.
Reque¡
, 
acûssKeyID
, 
£ü‘AcûssKey
 
¡ršg
, 
vœtu®Ho¡
 
boŞ
è*
	gh‰p
.
	gReque¡
 {

132 
	gacûssKeyID
 =ğ"" || 
£ü‘AcûssKey
 == "" {

133  &
»q


137 
d
 :ğ
time
.
Now
().
UTC
()

140 
d©e
 :ğ
»q
.
H—d”
.
G‘
("D©e"); 
	gd©e
 == "" {

141 
»q
.
H—d”
.
S‘
("D©e", 
d
.
FÜm©
(
h‰p
.
TimeFÜm©
))

145 
¡ršgToSign
 :ğ
¡ršgToSignV2
(
»q
, 
vœtu®Ho¡
)

146 
	ghm
 :ğ
hmac
.
New
(
sha1
.New, []
by‹
(
£ü‘AcûssKey
))

147 
	ghm
.
Wr™e
([]
by‹
(
¡ršgToSign
))

150 
	gauthH—d”
 :ğ
Ãw
(
by‹s
.
Bufãr
)

151 
authH—d”
.
Wr™eSŒšg
(
fmt
.
S´štf
("% %s:", 
signV2AlgÜ™hm
, 
acûssKeyID
))

152 
	g’cod”
 :ğ
ba£64
.
NewEncod”
(ba£64.
StdEncodšg
, 
authH—d”
)

153 
	g’cod”
.
Wr™e
(
hm
.
Sum
(
n
))

154 
	g’cod”
.
Clo£
()

157 
	g»q
.
	gH—d”
.
S‘
("AuthÜiz©iÚ", 
authH—d”
.
SŒšg
())

159  &
	g»q


170 
func
 
	$´eSŒšgToSignV2
(
»q
 
h‰p
.
Reque¡
, 
vœtu®Ho¡
 
boŞ
è
¡ršg
 {

171 
buf
 :ğ
	`Ãw
(
by‹s
.
Bufãr
)

173 
	`wr™eP»SignV2H—d”s
(
buf
, 
»q
)

175 
	`wr™eCªÚiÿlizedH—d”s
(
buf
, 
»q
)

177 
	`wr™eCªÚiÿlizedResourû
(
buf
, 
»q
, 
vœtu®Ho¡
)

178  
buf
.
	`SŒšg
()

179 
	}
}

182 
func
 
	$wr™eP»SignV2H—d”s
(
buf
 *
by‹s
.
Bufãr
, 
»q
 
h‰p
.
Reque¡
) {

183 
buf
.
	`Wr™eSŒšg
(
»q
.
M‘hod
 + "\n")

184 
buf
.
	`Wr™eSŒšg
(
»q
.
H—d”
.
	`G‘
("Content-Md5") + "\n")

185 
buf
.
	`Wr™eSŒšg
(
»q
.
H—d”
.
	`G‘
("Content-Type") + "\n")

186 
buf
.
	`Wr™eSŒšg
(
»q
.
H—d”
.
	`G‘
("Expires") + "\n")

187 
	}
}

197 
func
 
	$¡ršgToSignV2
(
»q
 
h‰p
.
Reque¡
, 
vœtu®Ho¡
 
boŞ
è
¡ršg
 {

198 
buf
 :ğ
	`Ãw
(
by‹s
.
Bufãr
)

200 
	`wr™eSignV2H—d”s
(
buf
, 
»q
)

202 
	`wr™eCªÚiÿlizedH—d”s
(
buf
, 
»q
)

204 
	`wr™eCªÚiÿlizedResourû
(
buf
, 
»q
, 
vœtu®Ho¡
)

205  
buf
.
	`SŒšg
()

206 
	}
}

209 
func
 
	$wr™eSignV2H—d”s
(
buf
 *
by‹s
.
Bufãr
, 
»q
 
h‰p
.
Reque¡
) {

210 
buf
.
	`Wr™eSŒšg
(
»q
.
M‘hod
 + "\n")

211 
buf
.
	`Wr™eSŒšg
(
»q
.
H—d”
.
	`G‘
("Content-Md5") + "\n")

212 
buf
.
	`Wr™eSŒšg
(
»q
.
H—d”
.
	`G‘
("Content-Type") + "\n")

213 
buf
.
	`Wr™eSŒšg
(
»q
.
H—d”
.
	`G‘
("Date") + "\n")

214 
	}
}

217 
func
 
	$wr™eCªÚiÿlizedH—d”s
(
buf
 *
by‹s
.
Bufãr
, 
»q
 
h‰p
.
Reque¡
) {

218 
v¬
 
´ÙoH—d”s
 []
¡ršg


219 
v®s
 :ğ
	`make
(
m­
[
¡ršg
][]string)

220 
k
, 
vv
 :ğ
¿nge
 
»q
.
H—d”
 {

222 
lk
 :ğ
¡ršgs
.
	`ToLow”
(
k
)

223 
¡ršgs
.
	`HasP»fix
(
lk
, "x-amz") {

224 
´ÙoH—d”s
 = 
	`­³nd
ÕrÙoH—d”s, 
lk
)

225 
v®s
[
lk
] = 
vv


228 
sÜt
.
	`SŒšgs
(
´ÙoH—d”s
)

229 
_
, 
k
 :ğ
¿nge
 
´ÙoH—d”s
 {

230 
buf
.
	`Wr™eSŒšg
(
k
)

231 
buf
.
	`Wr™eBy‹
(':')

232 
idx
, 
v
 :ğ
¿nge
 
v®s
[
k
] {

233 
idx
 > 0 {

234 
buf
.
	`Wr™eBy‹
(',')

236 
¡ršgs
.
	`CÚšs
(
v
, "\n") {

242 
buf
.
	`Wr™eSŒšg
(
v
)

244 
buf
.
	`Wr™eSŒšg
(
v
)

247 
buf
.
	`Wr™eBy‹
('\n')

249 
	}
}

256 
v¬
 
	g»sourûLi¡
 = []
¡ršg
{

286 
func
 
	$wr™eCªÚiÿlizedResourû
(
buf
 *
by‹s
.
Bufãr
, 
»q
 
h‰p
.
Reque¡
, 
vœtu®Ho¡
 
boŞ
) {

288 
»que¡URL
 :ğ
»q
.
URL


290 
buf
.
	`Wr™eSŒšg
(
	`’codeURL2P©h
(&
»q
, 
vœtu®Ho¡
))

291 
»que¡URL
.
RawQu”y
 != "" {

292 
v¬
 
n
 

293 
v®s
, 
_
 :ğ
u¾
.
	`P¬£Qu”y
(
»que¡URL
.
RawQu”y
)

296 
_
, 
»sourû
 :ğ
¿nge
 
»sourûLi¡
 {

297 
vv
, 
ok
 :ğ
v®s
[
»sourû
]; ok && 
	`Ën
(vv) > 0 {

298 
n
++

300 
n
 {

302 
buf
.
	`Wr™eBy‹
('?')

305 
buf
.
	`Wr™eBy‹
('&')

307 
buf
.
	`Wr™eSŒšg
(
»sourû
)

309 
	`Ën
(
vv
[0]) > 0 {

310 
buf
.
	`Wr™eBy‹
('=')

311 
buf
.
	`Wr™eSŒšg
(
vv
[0])

316 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-v2_test.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

26 
func
 
	$Te¡ResourûLi¡SÜtšg
(
t
 *
‹¡šg
.
T
) {

27 
sÜ‹dResourûLi¡
 :ğ
	`make
([]
¡ršg
, 
	`Ën
(
»sourûLi¡
))

28 
	`cİy
(
sÜ‹dResourûLi¡
, 
»sourûLi¡
)

29 
sÜt
.
	`SŒšgs
(
sÜ‹dResourûLi¡
)

30 
i
 :ğ0; i < 
	`Ën
(
»sourûLi¡
); i++ {

31 
»sourûLi¡
[
i
] !ğ
sÜ‹dResourûLi¡
[i] {

32 
t
.
	`E¼Üf
("Ex³ùed„esourûLi¡[%d] = \"%s\",„esourûLi¡ i nÙ cÜ»ùly sÜ‹d.", 
i
, 
sÜ‹dResourûLi¡
[i])

36 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-v4.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

34 
	gsignV4AlgÜ™hm
 = "AWS4-HMAC-SHA256"

35 
iso8601D©eFÜm©
 = "20060102T150405Z"

36 
yyyymmdd
 = "20060102"

74 
v¬
 
v4IgnÜedH—d”s
 = 
m­
[
¡ršg
]
boŞ
{

75 "AuthÜiz©iÚ": 
Œue
,

76 "CÚ‹Á-Ty³": 
Œue
,

77 "CÚ‹Á-L’gth": 
Œue
,

78 "U£r-Ag’t": 
Œue
,

82 
func
 
g‘SignšgKey
(
£ü‘
, 
loc
 
¡ršg
, 
t
 
time
.
Time
è[]
	gby‹
 {

83 
	gd©e
 :ğ
sumHMAC
([]
by‹
("AWS4"+
£ü‘
), []by‹(
t
.
FÜm©
(
yyyymmdd
)))

84 
	gloÿtiÚ
 :ğ
sumHMAC
(
d©e
, []
by‹
(
loc
))

85 
	g£rviû
 :ğ
sumHMAC
(
loÿtiÚ
, []
by‹
("s3"))

86 
	gsignšgKey
 :ğ
sumHMAC
(
£rviû
, []
by‹
("aws4_request"))

87  
	gsignšgKey


91 
func
 
	$g‘SigÇtu»
(
signšgKey
 []
by‹
, 
¡ršgToSign
 
¡ršg
) string {

92  
hex
.
	`EncodeToSŒšg
(
	`sumHMAC
(
signšgKey
, []
	`by‹
(
¡ršgToSign
)))

93 
	}
}

97 
func
 
	$g‘Scİe
(
loÿtiÚ
 
¡ršg
, 
t
 
time
.
Time
) string {

98 
scİe
 :ğ
¡ršgs
.
	`Još
([]
¡ršg
{

99 
t
.
	`FÜm©
(
yyyymmdd
),

100 
loÿtiÚ
,

104  
scİe


105 
	}
}

108 
func
 
	$G‘C»d’tŸl
(
acûssKeyID
, 
loÿtiÚ
 
¡ršg
, 
t
 
time
.
Time
) string {

109 
scİe
 :ğ
	`g‘Scİe
(
loÿtiÚ
, 
t
)

110  
acûssKeyID
 + "/" + 
scİe


111 
	}
}

115 
func
 
	$g‘HashedPaylßd
(
»q
 
h‰p
.
Reque¡
è
¡ršg
 {

116 
hashedPaylßd
 :ğ
»q
.
H—d”
.
	`G‘
("X-Amz-Content-Sha256")

117 
hashedPaylßd
 == "" {

119 
hashedPaylßd
 = 
unsigÃdPaylßd


121  
hashedPaylßd


122 
	}
}

126 
func
 
	$g‘CªÚiÿlH—d”s
(
»q
 
h‰p
.
Reque¡
, 
ignÜedH—d”s
 
m­
[
¡ršg
]
boŞ
) string {

127 
v¬
 
h—d”s
 []
¡ršg


128 
v®s
 :ğ
	`make
(
m­
[
¡ršg
][]string)

129 
k
, 
vv
 :ğ
¿nge
 
»q
.
H—d”
 {

130 
_
, 
ok
 :ğ
ignÜedH—d”s
[
h‰p
.
	`CªÚiÿlH—d”Key
(
k
)]; ok {

133 
h—d”s
 = 
	`­³nd
(h—d”s, 
¡ršgs
.
	`ToLow”
(
k
))

134 
v®s
[
¡ršgs
.
	`ToLow”
(
k
)] = 
vv


136 
h—d”s
 = 
	`­³nd
(headers, "host")

137 
sÜt
.
	`SŒšgs
(
h—d”s
)

139 
v¬
 
buf
 
by‹s
.
Bufãr


142 
_
, 
k
 :ğ
¿nge
 
h—d”s
 {

143 
buf
.
	`Wr™eSŒšg
(
k
)

144 
buf
.
	`Wr™eBy‹
(':')

146 
k
 == "host":

147 
buf
.
	`Wr™eSŒšg
(
	`g‘Ho¡Addr
(&
»q
))

148 
çÎthrough


150 
idx
, 
v
 :ğ
¿nge
 
v®s
[
k
] {

151 
idx
 > 0 {

152 
buf
.
	`Wr™eBy‹
(',')

154 
buf
.
	`Wr™eSŒšg
(
v
)

156 
buf
.
	`Wr™eBy‹
('\n')

159  
buf
.
	`SŒšg
()

160 
	}
}

165 
func
 
	$g‘SigÃdH—d”s
(
»q
 
h‰p
.
Reque¡
, 
ignÜedH—d”s
 
m­
[
¡ršg
]
boŞ
) string {

166 
v¬
 
h—d”s
 []
¡ršg


167 
k
 :ğ
¿nge
 
»q
.
H—d”
 {

168 
_
, 
ok
 :ğ
ignÜedH—d”s
[
h‰p
.
	`CªÚiÿlH—d”Key
(
k
)]; ok {

171 
h—d”s
 = 
	`­³nd
(h—d”s, 
¡ršgs
.
	`ToLow”
(
k
))

173 
h—d”s
 = 
	`­³nd
(headers, "host")

174 
sÜt
.
	`SŒšgs
(
h—d”s
)

175  
¡ršgs
.
	`Još
(
h—d”s
, ";")

176 
	}
}

187 
func
 
	$g‘CªÚiÿlReque¡
(
»q
 
h‰p
.
Reque¡
, 
ignÜedH—d”s
 
m­
[
¡ršg
]
boŞ
) string {

188 
»q
.
URL
.
RawQu”y
 = 
¡ršgs
.
	`R•Ïû
Ôeq.URL.
	`Qu”y
().
	`Encode
(), "+", "%20", -1)

189 
ÿnÚiÿlReque¡
 :ğ
¡ršgs
.
	`Još
([]
¡ršg
{

190 
»q
.
M‘hod
,

191 
s3uts
.
	`EncodeP©h
(
»q
.
URL
.
P©h
),

192 
»q
.
URL
.
RawQu”y
,

193 
	`g‘CªÚiÿlH—d”s
(
»q
, 
ignÜedH—d”s
),

194 
	`g‘SigÃdH—d”s
(
»q
, 
ignÜedH—d”s
),

195 
	`g‘HashedPaylßd
(
»q
),

197  
ÿnÚiÿlReque¡


198 
	}
}

201 
func
 
	$g‘SŒšgToSignV4
(
t
 
time
.
Time
, 
loÿtiÚ
, 
ÿnÚiÿlReque¡
 
¡ršg
) string {

202 
¡ršgToSign
 :ğ
signV4AlgÜ™hm
 + "\n" + 
t
.
	`FÜm©
(
iso8601D©eFÜm©
) + "\n"

203 
¡ršgToSign
 = sŒšgToSigÀ+ 
	`g‘Scİe
(
loÿtiÚ
, 
t
) + "\n"

204 
¡ršgToSign
 = sŒšgToSigÀ+ 
hex
.
	`EncodeToSŒšg
(
	`sum256
([]
	`by‹
(
ÿnÚiÿlReque¡
)))

205  
¡ršgToSign


206 
	}
}

210 
func
 
P»SignV4
(
»q
 
h‰p
.
Reque¡
, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£ssiÚTok’
, 
loÿtiÚ
 
¡ršg
, 
expœes
 
št64
è*
	gh‰p
.
	gReque¡
 {

212 
	gacûssKeyID
 =ğ"" || 
£ü‘AcûssKey
 == "" {

213  &
»q


217 
t
 :ğ
time
.
Now
().
UTC
()

220 
üed’tŸl
 :ğ
G‘C»d’tŸl
(
acûssKeyID
, 
loÿtiÚ
, 
t
)

223 
	gsigÃdH—d”s
 :ğ
g‘SigÃdH—d”s
(
»q
, 
v4IgnÜedH—d”s
)

226 
	gqu”y
 :ğ
»q
.
URL
.
Qu”y
()

227 
qu”y
.
S‘
("X-Amz-AlgÜ™hm", 
signV4AlgÜ™hm
)

228 
	gqu”y
.
S‘
("X-Amz-D©e", 
t
.
FÜm©
(
iso8601D©eFÜm©
))

229 
	gqu”y
.
S‘
("X-Amz-Expœes", 
¡rcÚv
.
FÜm©IÁ
(
expœes
, 10))

230 
	gqu”y
.
S‘
("X-Amz-SigÃdH—d”s", 
sigÃdH—d”s
)

231 
	gqu”y
.
S‘
("X-Amz-C»d’tŸl", 
üed’tŸl
)

233 
	g£ssiÚTok’
 != "" {

234 
qu”y
.
S‘
("X-Amz-Secur™y-Tok’", 
£ssiÚTok’
)

236 
»q
.
URL
.
RawQu”y
 = 
qu”y
.
Encode
()

239 
ÿnÚiÿlReque¡
 :ğ
g‘CªÚiÿlReque¡
(
»q
, 
v4IgnÜedH—d”s
)

242 
	g¡ršgToSign
 :ğ
g‘SŒšgToSignV4
(
t
, 
loÿtiÚ
, 
ÿnÚiÿlReque¡
)

245 
	gsignšgKey
 :ğ
g‘SignšgKey
(
£ü‘AcûssKey
, 
loÿtiÚ
, 
t
)

248 
	gsigÇtu»
 :ğ
g‘SigÇtu»
(
signšgKey
, 
¡ršgToSign
)

251 
	g»q
.
	gURL
.
	gRawQu”y
 +ğ"&X-Amz-SigÇtu»=" + 
sigÇtu»


253  &
»q


258 
func
 
	$Po¡P»signSigÇtu»V4
(
pŞicyBa£64
 
¡ršg
, 
t
 
time
.
Time
, 
£ü‘AcûssKey
, 
loÿtiÚ
 string) string {

260 
signšgkey
 :ğ
	`g‘SignšgKey
(
£ü‘AcûssKey
, 
loÿtiÚ
, 
t
)

262 
sigÇtu»
 :ğ
	`g‘SigÇtu»
(
signšgkey
, 
pŞicyBa£64
)

263  
sigÇtu»


264 
	}
}

268 
func
 
SignV4
(
»q
 
h‰p
.
Reque¡
, 
acûssKeyID
, 
£ü‘AcûssKey
, 
£ssiÚTok’
, 
loÿtiÚ
 
¡ršg
è*
	gh‰p
.
	gReque¡
 {

270 
	gacûssKeyID
 =ğ"" || 
£ü‘AcûssKey
 == "" {

271  &
»q


275 
t
 :ğ
time
.
Now
().
UTC
()

278 
»q
.
H—d”
.
S‘
("X-Amz-D©e", 
t
.
FÜm©
(
iso8601D©eFÜm©
))

281 
	g£ssiÚTok’
 != "" {

282 
»q
.
H—d”
.
S‘
("X-Amz-Secur™y-Tok’", 
£ssiÚTok’
)

286 
ÿnÚiÿlReque¡
 :ğ
g‘CªÚiÿlReque¡
(
»q
, 
v4IgnÜedH—d”s
)

289 
	g¡ršgToSign
 :ğ
g‘SŒšgToSignV4
(
t
, 
loÿtiÚ
, 
ÿnÚiÿlReque¡
)

292 
	gsignšgKey
 :ğ
g‘SignšgKey
(
£ü‘AcûssKey
, 
loÿtiÚ
, 
t
)

295 
	güed’tŸl
 :ğ
G‘C»d’tŸl
(
acûssKeyID
, 
loÿtiÚ
, 
t
)

298 
	gsigÃdH—d”s
 :ğ
g‘SigÃdH—d”s
(
»q
, 
v4IgnÜedH—d”s
)

301 
	gsigÇtu»
 :ğ
g‘SigÇtu»
(
signšgKey
, 
¡ršgToSign
)

304 
	g·¹s
 :ğ[]
¡ršg
{

305 
signV4AlgÜ™hm
 + " C»d’tŸl=" + 
üed’tŸl
,

306 "SigÃdH—d”s=" + 
sigÃdH—d”s
,

307 "SigÇtu»=" + 
sigÇtu»
,

311 
auth
 :ğ
¡ršgs
.
Još
(
·¹s
, ", ")

312 
	g»q
.
	gH—d”
.
S‘
("AuthÜiz©iÚ", 
auth
)

314  &
	g»q


	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-v4_test.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

27 
func
 
	$Te¡Reque¡Ho¡
(
t
 *
‹¡šg
.
T
) {

28 
»q
, 
_
 :ğ
	`budReque¡
("dynamodb", "us-east-1", "{}")

29 
»q
.
URL
.
RawQu”y
 = "Foo=z&Foo=o&Foo=m&Foo=a"

30 
»q
.
Ho¡
 = "myhost"

31 
ÿnÚiÿlH—d”s
 :ğ
	`g‘CªÚiÿlH—d”s
(*
»q
, 
v4IgnÜedH—d”s
)

33 !
¡ršgs
.
	`CÚšs
(
ÿnÚiÿlH—d”s
, "ho¡:"+
»q
.
Ho¡
) {

34 
t
.
	`E¼Üf
("canonical host header invalid")

36 
	}
}

38 
func
 
budReque¡
(
£rviûName
, 
»giÚ
, 
body
 
¡ršg
è(*
	gh‰p
.
	gReque¡
, 
	gio
.
	gR—dS“k”
) {

39 
	g’dpošt
 :ğ"h‰ps://" + 
£rviûName
 + "." + 
»giÚ
 + ".amazonaws.com"

40 
»ad”
 :ğ
¡ršgs
.
NewR—d”
(
body
)

41 
»q
, 
	g_
 :ğ
h‰p
.
NewReque¡
("POST", 
’dpošt
, 
»ad”
)

42 
	g»q
.
	gURL
.
	gO·que
 = "//example.org/bucket/key-._~,!@#$%^&*()"

43 
»q
.
H—d”
.
Add
("X-Amz-Target", "prefix.Operation")

44 
	g»q
.
	gH—d”
.
Add
("Content-Type", "application/x-amz-json-1.0")

45 
	g»q
.
	gH—d”
.
Add
("CÚ‹Á-L’gth", 
¡ršg
(
Ën
(
body
)))

46 
	g»q
.
	gH—d”
.
Add
("X-Amz-Meta-Other-Header", "some-value=!@#$%^&* (+)")

47 
	g»q
.
	gH—d”
.
Add
("X-Amz-Meta-Other-Header_With_Underscore", "some-value=!@#$%^&* (+)")

48 
	g»q
.
	gH—d”
.
Add
("X-amz-Meta-Other-Header_With_Underscore", "some-value=!@#$%^&* (+)")

49  
	g»q
, 
	g»ad”


	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature_test.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

27 
func
 
	$Te¡SigÇtu»C®cuÏtiÚV4
(
t
 *
‹¡šg
.
T
) {

28 
»q
, 
”r
 :ğ
h‰p
.
	`NewReque¡
("GET", "h‰ps://s3.amazÚaws.com", 
n
)

29 
”r
 !ğ
n
 {

30 
t
.
	`F©®
("E¼Ü:", 
”r
)

32 
»q
 = 
	`SignV4
(*req, "", "", "", "us-east-1")

33 
»q
.
H—d”
.
	`G‘
("Authorization") != "" {

34 
t
.
	`F©®
("Error:‡nonymous credentials should‚ot have Authorization header.")

37 
»q
 = 
	`P»SignV4
(*req, "", "", "", "us-east-1", 0)

38 
¡ršgs
.
	`CÚšs
(
»q
.
URL
.
RawQu”y
, "X-Amz-Signature") {

39 
t
.
	`F©®
("Error:‡nonymous credentials should‚ot have Signature query„esource.")

42 
»q
 = 
	`SignV4
(*req, "ACCESS-KEY", "SECRET-KEY", "", "us-east-1")

43 
»q
.
H—d”
.
	`G‘
("Authorization") == "" {

44 
t
.
	`F©®
("Error:‚ormal credentials should have Authorization header.")

47 
»q
 = 
	`P»SignV4
(*req, "ACCESS-KEY", "SECRET-KEY", "", "us-east-1", 0)

48 !
¡ršgs
.
	`CÚšs
(
»q
.
URL
.
RawQu”y
, "X-Amz-Signature") {

49 
t
.
	`F©®
("Error:‚ormal credentials should have Signature query„esource.")

51 
	}
}

53 
func
 
	$Te¡SigÇtu»C®cuÏtiÚV2
(
t
 *
‹¡šg
.
T
) {

55 
v¬
 
‹¡Ca£s
 = []struct {

56 
’dpoštURL
 
¡ršg


57 
vœtu®Ho¡
 
boŞ


59 {
’dpoštURL
: "h‰ps://s3.amazÚaws.com/", 
vœtu®Ho¡
: 
çl£
},

60 {
’dpoštURL
: "h‰ps://‹¡buck‘.s3.amazÚaws.com/", 
vœtu®Ho¡
: 
Œue
},

63 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

64 
»q
, 
”r
 :ğ
h‰p
.
	`NewReque¡
("GET", 
‹¡Ca£
.
’dpoštURL
, 
n
)

65 
”r
 !ğ
n
 {

66 
t
.
	`F©®f
("Te¡ %d, E¼Ü: %v", 
i
+1, 
”r
)

69 
»q
 = 
	`SignV2
(*»q, "", "", 
‹¡Ca£
.
vœtu®Ho¡
)

70 
»q
.
H—d”
.
	`G‘
("Authorization") != "" {

71 
t
.
	`F©®f
("Te¡ %d, E¼Ü:‡nÚymou üed’tŸl should‚Ù havAuthÜiz©iÚ h—d”.", 
i
+1)

74 
»q
 = 
	`P»SignV2
(*»q, "", "", 0, 
‹¡Ca£
.
vœtu®Ho¡
)

75 
¡ršgs
.
	`CÚšs
(
»q
.
URL
.
RawQu”y
, "Signature") {

76 
t
.
	`F©®f
("Te¡ %d, E¼Ü:‡nÚymou üed’tŸl should‚Ù havSigÇtu» qu”y„esourû.", 
i
+1)

79 
»q
 = 
	`SignV2
(*»q, "ACCESS-KEY", "SECRET-KEY", 
‹¡Ca£
.
vœtu®Ho¡
)

80 
»q
.
H—d”
.
	`G‘
("Authorization") == "" {

81 
t
.
	`F©®f
("Te¡ %d, E¼Ü:‚Üm® c»d’tŸl should havAuthÜiz©iÚ h—d”.", 
i
+1)

84 
»q
 = 
	`P»SignV2
(*»q, "ACCESS-KEY", "SECRET-KEY", 0, 
‹¡Ca£
.
vœtu®Ho¡
)

85 !
¡ršgs
.
	`CÚšs
(
»q
.
URL
.
RawQu”y
, "Signature") {

86 
t
.
	`F©®f
("Te¡ %d, E¼Ü:‚Üm® c»d’tŸl should‚Ù havSigÇtu» qu”y„esourû.", 
i
+1)

89 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/test-utils_test.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

54 
func
 
NewReque¡
(
m‘hod
, 
rg‘
 
¡ršg
, 
body
 
io
.
R—d”
è*
	gh‰p
.
	gReque¡
 {

55 
	gm‘hod
 == "" {

56 
m‘hod
 = "GET"

58 
	g»q
, 
	g”r
 :ğ
h‰p
.
R—dReque¡
(
bufio
.
NewR—d”
(
¡ršgs
.NewR—d”(
m‘hod
 + " " + 
rg‘
 + " HTTP/1.0\r\n\r\n")))

59 
”r
 !ğ
n
 {

60 
·nic
("šv®id NewReque¡‡rgum’ts; " + 
”r
.
E¼Ü
())

64 
»q
.
PrÙo
 = "HTTP/1.1"

65 
»q
.
PrÙoMšÜ
 = 1

66 
»q
.
Clo£
 = 
çl£


68 
body
 !ğ
n
 {

69 
v
 :ğ
body
.(
ty³
) {

70 *
by‹s
.
Bufãr
:

71 
»q
.
CÚ‹ÁL’gth
 = 
št64
(
v
.
L’
())

72 *
by‹s
.
R—d”
:

73 
»q
.
CÚ‹ÁL’gth
 = 
št64
(
v
.
L’
())

74 *
¡ršgs
.
R—d”
:

75 
»q
.
CÚ‹ÁL’gth
 = 
št64
(
v
.
L’
())

77 
»q
.
CÚ‹ÁL’gth
 = -1

79 
rc
, 
	gok
 :ğ
body
.(
io
.
R—dClo£r
); ok {

80 
	g»q
.
	gBody
 = 
rc


82 
	g»q
.
	gBody
 = 
iout
.
NİClo£r
(
body
)

89 
	g»q
.
	gRemÙeAddr
 = "192.0.2.1:1234"

91 
»q
.
Ho¡
 == "" {

92 
»q
.
Ho¡
 = "example.com"

95 
	g¡ršgs
.
HasP»fix
(
rg‘
, "https://") {

96 
	g»q
.
	gTLS
 = &
s
.
CÚÃùiÚS‹
{

97 
V”siÚ
: 
s
.
V”siÚTLS12
,

98 
HªdshakeCom¶‘e
: 
Œue
,

99 
S”v”Name
: 
»q
.
Ho¡
,

103  
	g»q


	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/utils.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

27 cÚ¡ 
	gunsigÃdPaylßd
 = "UNSIGNED-PAYLOAD"

30 
func
 
sum256
(
d©a
 []
by‹
) []byte {

31 
hash
 :ğ
sha256
.
New
()

32 
hash
.
Wr™e
(
d©a
)

33  
hash
.
Sum
(
n
)

37 
func
 
sumHMAC
(
key
 []
by‹
, 
d©a
 []by‹è[]
	gby‹
 {

38 
	ghash
 :ğ
hmac
.
New
(
sha256
.New, 
key
)

39 
	ghash
.
Wr™e
(
d©a
)

40  
	ghash
.
Sum
(
n
)

44 
func
 
	$g‘Ho¡Addr
(
»q
 *
h‰p
.
Reque¡
è
¡ršg
 {

45 
»q
.
Ho¡
 != "" {

46  
»q
.
Ho¡


48  
»q
.
URL
.
Ho¡


49 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/utils_test.go

18 
·ckage
 
s3sigÃr


20 
impÜt
 (

28 
func
 
	$Te¡EncodeURL2P©h
(
t
 *
‹¡šg
.
T
) {

29 
ty³
 
u¾SŒšgs
 struct {

30 
vœtu®Ho¡
 
boŞ


31 
buck‘Name
 
¡ršg


32 
objName
 
¡ršg


33 
’codedObjName
 
¡ršg


36 
wªt
 :ğ[]
u¾SŒšgs
{

38 
vœtu®Ho¡
: 
Œue
,

39 
buck‘Name
: "bucketName",

40 
objName
: "æœ¬èª",

41 
’codedObjName
: "%E6%9C%AC%E8%AA%9E",

44 
vœtu®Ho¡
: 
Œue
,

45 
buck‘Name
: "bucketName",

46 
objName
: "æœ¬èª.1",

47 
’codedObjName
: "%E6%9C%AC%E8%AA%9E.1",

50 
vœtu®Ho¡
: 
Œue
,

51 
objName
: ">123>3123123",

52 
buck‘Name
: "bucketName",

53 
’codedObjName
: "%3E123%3E3123123",

56 
vœtu®Ho¡
: 
Œue
,

57 
buck‘Name
: "bucketName",

58 
objName
: "test 1 2.txt",

59 
’codedObjName
: "test%201%202.txt",

62 
vœtu®Ho¡
: 
çl£
,

63 
buck‘Name
: "test.bucketName",

64 
objName
: "test++ 1.txt",

65 
’codedObjName
: "test%2B%2B%201.txt",

69 
i
, 
o
 :ğ
¿nge
 
wªt
 {

70 
v¬
 
ho¡URL
 
¡ršg


71 
o
.
vœtu®Ho¡
 {

72 
ho¡URL
 = 
fmt
.
	`S´štf
("h‰ps://%s.s3.amazÚaws.com/%s", 
o
.
buck‘Name
, o.
objName
)

74 
ho¡URL
 = 
fmt
.
	`S´štf
("h‰ps://s3.amazÚaws.com/%s/%s", 
o
.
buck‘Name
, o.
objName
)

76 
u
, 
”r
 :ğ
u¾
.
	`P¬£
(
ho¡URL
)

77 
”r
 !ğ
n
 {

78 
t
.
	`F©®f
("Te¡ %d, E¼Ü: %v", 
i
+1, 
”r
)

80 
ex³ùedP©h
 :ğ"/" + 
o
.
buck‘Name
 + "/" + o.
’codedObjName


81 
foundP©h
 :ğ
	`’codeURL2P©h
(&
h‰p
.
Reque¡
{
URL
: 
u
}, 
o
.
vœtu®Ho¡
); foundP©h !ğ
ex³ùedP©h
 {

82 
t
.
	`F©®f
("Te¡ %d, E¼Ü:ƒx³ùed = `%v`, found = `%v`", 
i
+1, 
ex³ùedP©h
, 
foundP©h
)

86 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3utils/utils.go

18 
·ckage
 
s3uts


20 
impÜt
 (

33 
v¬
 
	g£Áš–URL
 = 
u¾
.
URL
{}

36 
func
 
	$IsV®idDomaš
(
ho¡
 
¡ršg
è
boŞ
 {

38 
ho¡
 = 
¡ršgs
.
	`TrimS·û
(host)

39 
	`Ën
(
ho¡
) == 0 ||†en(host) > 255 {

40  
çl£


43 
ho¡
[
	`Ën
(host)-1:] == "-" || host[:1] == "-" {

44  
çl£


47 
ho¡
[
	`Ën
(host)-1:] == "_" || host[:1] == "_" {

48  
çl£


51 
ho¡
[
	`Ën
(host)-1:] == "." || host[:1] == "." {

52  
çl£


55 
¡ršgs
.
	`CÚšsAny
(
ho¡
, "`~!@#$%^&*()+={}[]|\\\"';:><?/") {

56  
çl£


60  
Œue


61 
	}
}

64 
func
 
	$IsV®idIP
(

 
¡ršg
è
boŞ
 {

65  
Ãt
.
	`P¬£IP
(

è!ğ
n


66 
	}
}

71 
func
 
	$IsVœtu®Ho¡SuµÜ‹d
(
’dpoštURL
 
u¾
.
URL
, 
buck‘Name
 
¡ršg
è
boŞ
 {

72 
’dpoštURL
 =ğ
£Áš–URL
 {

73  
çl£


77 
’dpoštURL
.
Scheme
 =ğ"h‰ps" && 
¡ršgs
.
	`CÚšs
(
buck‘Name
, ".") {

78  
çl£


81  
	`IsAmazÚEndpošt
(
’dpoštURL
è|| 
	`IsGoogËEndpošt
(endpointURL)

82 
	}
}

87 
v¬
 
	gamazÚS3Ho¡Hyph’
 = 
»gexp
.
Mu¡Compe
(`^
s3
-(.*?)\.
amazÚaws
\.
com$
`)

90 
v¬
 
amazÚS3Ho¡Du®Sck
 = 
»gexp
.
Mu¡Compe
(`^
s3
\.
du®¡ack
\.(.*?)\.
amazÚaws
\.
com$
`)

93 
v¬
 
amazÚS3Ho¡DÙ
 = 
»gexp
.
Mu¡Compe
(`^
s3
\.(.*?)\.
amazÚaws
\.
com$
`)

96 
v¬
 
amazÚS3ChšaHo¡
 = 
»gexp
.
Mu¡Compe
(`^
s3
\.(
ú
.*?)\.
amazÚaws
\.
com
\.
ú$
`)

99 
func
 
	$G‘RegiÚFromURL
(
’dpoštURL
 
u¾
.
URL
è
¡ršg
 {

100 
’dpoštURL
 =ğ
£Áš–URL
 {

103 
’dpoštURL
.
Ho¡
 == "s3-external-1.amazonaws.com" {

106 
	`IsAmazÚGovCloudEndpošt
(
’dpoštURL
) {

109 
·¹s
 :ğ
amazÚS3Ho¡Du®Sck
.
	`FšdSŒšgSubm©ch
(
’dpoštURL
.
Ho¡
)

110 
	`Ën
(
·¹s
) > 1 {

111  
·¹s
[1]

113 
·¹s
 = 
amazÚS3Ho¡Hyph’
.
	`FšdSŒšgSubm©ch
(
’dpoštURL
.
Ho¡
)

114 
	`Ën
(
·¹s
) > 1 {

115  
·¹s
[1]

117 
·¹s
 = 
amazÚS3ChšaHo¡
.
	`FšdSŒšgSubm©ch
(
’dpoštURL
.
Ho¡
)

118 
	`Ën
(
·¹s
) > 1 {

119  
·¹s
[1]

121 
·¹s
 = 
amazÚS3Ho¡DÙ
.
	`FšdSŒšgSubm©ch
(
’dpoštURL
.
Ho¡
)

122 
	`Ën
(
·¹s
) > 1 {

123  
·¹s
[1]

126 
	}
}

129 
func
 
	$IsAmazÚEndpošt
(
’dpoštURL
 
u¾
.
URL
è
boŞ
 {

130 
’dpoštURL
.
Ho¡
 == "s3-external-1.amazonaws.com" ||ƒndpointURL.Host == "s3.amazonaws.com" {

131  
Œue


133  
	`G‘RegiÚFromURL
(
’dpoštURL
) != ""

134 
	}
}

137 
func
 
	$IsAmazÚGovCloudEndpošt
(
’dpoštURL
 
u¾
.
URL
è
boŞ
 {

138 
’dpoštURL
 =ğ
£Áš–URL
 {

139  
çl£


141  (
’dpoštURL
.
Ho¡
 == "s3-us-gov-west-1.amazonaws.com" ||

142 
	`IsAmazÚFIPSGovCloudEndpošt
(
’dpoštURL
))

143 
	}
}

147 
func
 
	$IsAmazÚFIPSGovCloudEndpošt
(
’dpoštURL
 
u¾
.
URL
è
boŞ
 {

148 
’dpoštURL
 =ğ
£Áš–URL
 {

149  
çl£


151  
’dpoštURL
.
Ho¡
 == "s3-fips-us-gov-west-1.amazonaws.com" ||

152 
’dpoštURL
.
Ho¡
 == "s3-fips.dualstack.us-gov-west-1.amazonaws.com"

153 
	}
}

157 
func
 
	$IsAmazÚFIPSUSEa¡We¡Endpošt
(
’dpoštURL
 
u¾
.
URL
è
boŞ
 {

158 
’dpoštURL
 =ğ
£Áš–URL
 {

159  
çl£


161 
’dpoštURL
.
Ho¡
 {

171  
çl£


173  
Œue


174 
	}
}

178 
func
 
	$IsAmazÚFIPSEndpošt
(
’dpoštURL
 
u¾
.
URL
è
boŞ
 {

179  
	`IsAmazÚFIPSUSEa¡We¡Endpošt
(
’dpoštURL
è|| 
	`IsAmazÚFIPSGovCloudEndpošt
(endpointURL)

180 
	}
}

183 
func
 
	$IsGoogËEndpošt
(
’dpoštURL
 
u¾
.
URL
è
boŞ
 {

184 
’dpoštURL
 =ğ
£Áš–URL
 {

185  
çl£


187  
’dpoštURL
.
Ho¡
 == "storage.googleapis.com"

188 
	}
}

191 
func
 
	$³rûÁEncodeSÏsh
(
s
 
¡ršg
) string {

192  
¡ršgs
.
	`R•Ïû
(
s
, "/", "%2F", -1)

193 
	}
}

198 
func
 
	$Qu”yEncode
(
v
 
u¾
.
V®ues
è
¡ršg
 {

199 
v
 =ğ
n
 {

202 
v¬
 
buf
 
by‹s
.
Bufãr


203 
keys
 :ğ
	`make
([]
¡ršg
, 0, 
	`Ën
(
v
))

204 
k
 :ğ
¿nge
 
v
 {

205 
keys
 = 
	`­³nd
(keys, 
k
)

207 
sÜt
.
	`SŒšgs
(
keys
)

208 
_
, 
k
 :ğ
¿nge
 
keys
 {

209 
vs
 :ğ
v
[
k
]

210 
´efix
 :ğ
	`³rûÁEncodeSÏsh
(
	`EncodeP©h
(
k
)) + "="

211 
_
, 
v
 :ğ
¿nge
 
vs
 {

212 
buf
.
	`L’
() > 0 {

213 
buf
.
	`Wr™eBy‹
('&')

215 
buf
.
	`Wr™eSŒšg
(
´efix
)

216 
buf
.
	`Wr™eSŒšg
(
	`³rûÁEncodeSÏsh
(
	`EncodeP©h
(
v
)))

219  
buf
.
	`SŒšg
()

220 
	}
}

223 
v¬
 
»£rvedObjeùNames
 = 
»gexp
.
Mu¡Compe
("^[a-zA-Z0-9-_.~/]+$")

232 
func
 
	$EncodeP©h
(
·thName
 
¡ršg
) string {

233 
»£rvedObjeùNames
.
	`M©chSŒšg
(
·thName
) {

234  
·thName


236 
v¬
 
’codedP©hÇme
 
¡ršg


237 
_
, 
s
 :ğ
¿nge
 
·thName
 {

238 'A' <ğ
s
 && s <= 'Z' || 'a' <= s && s <= 'z' || '0' <= s && s <= '9' {

239 
’codedP©hÇme
 =ƒncodedP©hÇm+ 
	`¡ršg
(
s
)

242 
s
 {

244 
’codedP©hÇme
 =ƒncodedP©hÇm+ 
	`¡ršg
(
s
)

247 
Ën
 :ğ
utf8
.
	`RuÃL’
(
s
)

248 
Ën
 < 0 {

250  
·thName


252 
u
 :ğ
	`make
([]
by‹
, 
Ën
)

253 
utf8
.
	`EncodeRuÃ
(
u
, 
s
)

254 
_
, 
r
 :ğ
¿nge
 
u
 {

255 
hex
 :ğhex.
	`EncodeToSŒšg
([]
by‹
{
r
})

256 
’codedP©hÇme
 =ƒncodedP©hÇm+ "%" + 
¡ršgs
.
	`ToUµ”
(
hex
)

260  
’codedP©hÇme


261 
	}
}

265 
v¬
 (

266 
v®idBuck‘Name
 = 
»gexp
.
Mu¡Compe
(`^[
A
-
Za
-
z0
-9][A-Za-z0-9\.\-\
_
\:]{1,61}[A-Za-z0-9]
$
`)

267 
v®idBuck‘NameSŒiù
 = 
»gexp
.
Mu¡Compe
(`^[
a
-
z0
-9][a-z0-9\.\-]{1,61}[a-z0-9]
$
`)

268 
Add»ss
 = 
»gexp
.
Mu¡Compe
(`^(\
d
+\.){3}\d+
$
`)

272 
func
 
	$checkBuck‘NameCommÚ
(
buck‘Name
 
¡ršg
, 
¡riù
 
boŞ
è(
”r
 
”rÜ
) {

273 
¡ršgs
.
	`TrimS·û
(
buck‘Name
) == "" {

274  
”rÜs
.
	`New
("Bucket‚ame cannot beƒmpty")

276 
	`Ën
(
buck‘Name
) < 3 {

277  
”rÜs
.
	`New
("Bucket‚ame cannot be smallerhan 3 characters")

279 
	`Ën
(
buck‘Name
) > 63 {

280  
”rÜs
.
	`New
("Bucket‚ame cannot be greaterhan 63 characters")

282 
Add»ss
.
	`M©chSŒšg
(
buck‘Name
) {

283  
”rÜs
.
	`New
("Bucket‚ame cannot be‡n ip‡ddress")

285 
¡ršgs
.
	`CÚšs
(
buck‘Name
, "..") {

286  
”rÜs
.
	`New
("Bucket‚ame contains invalid characters")

288 
¡riù
 {

289 !
v®idBuck‘NameSŒiù
.
	`M©chSŒšg
(
buck‘Name
) {

290 
”r
 = 
”rÜs
.
	`New
("Bucket‚ame contains invalid characters")

292  
”r


294 !
v®idBuck‘Name
.
	`M©chSŒšg
(
buck‘Name
) {

295 
”r
 = 
”rÜs
.
	`New
("Bucket‚ame contains invalid characters")

297  
”r


298 
	}
}

301 
func
 
	$CheckV®idBuck‘Name
(
buck‘Name
 
¡ršg
è(
”r
 
”rÜ
) {

302  
	`checkBuck‘NameCommÚ
(
buck‘Name
, 
çl£
)

303 
	}
}

308 
func
 
	$CheckV®idBuck‘NameSŒiù
(
buck‘Name
 
¡ršg
è(
”r
 
”rÜ
) {

309  
	`checkBuck‘NameCommÚ
(
buck‘Name
, 
Œue
)

310 
	}
}

314 
func
 
	$CheckV®idObjeùNameP»fix
(
objeùName
 
¡ršg
è
”rÜ
 {

315 
	`Ën
(
objeùName
) > 1024 {

316  
”rÜs
.
	`New
("Object‚ame cannot be greaterhan 1024 characters")

318 !
utf8
.
	`V®idSŒšg
(
objeùName
) {

319  
”rÜs
.
	`New
("Object‚ame with‚on UTF-8 strings‡re‚ot supported")

321  
n


322 
	}
}

326 
func
 
	$CheckV®idObjeùName
(
objeùName
 
¡ršg
è
”rÜ
 {

327 
¡ršgs
.
	`TrimS·û
(
objeùName
) == "" {

328  
”rÜs
.
	`New
("Object‚ame cannot beƒmpty")

330  
	`CheckV®idObjeùNameP»fix
(
objeùName
)

331 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3utils/utils_test.go

18 
·ckage
 
s3uts


20 
impÜt
 (

27 
func
 
	$Te¡G‘RegiÚFromURL
(
t
 *
‹¡šg
.
T
) {

28 
‹¡Ca£s
 := []struct {

29 
u
 
u¾
.
URL


30 
ex³ùedRegiÚ
 
¡ršg


33 
u
: 
u¾
.
URL
{
Ho¡
: "storage.googleapis.com"},

34 
ex³ùedRegiÚ
: "",

37 
u
: 
u¾
.
URL
{
Ho¡
: "s3.cn-north-1.amazonaws.com.cn"},

38 
ex³ùedRegiÚ
: "cn-north-1",

41 
u
: 
u¾
.
URL
{
Ho¡
: "s3.cn-northwest-1.amazonaws.com.cn"},

42 
ex³ùedRegiÚ
: "cn-northwest-1",

45 
u
: 
u¾
.
URL
{
Ho¡
: "s3-fips-us-gov-west-1.amazonaws.com"},

46 
ex³ùedRegiÚ
: "us-gov-west-1",

49 
u
: 
u¾
.
URL
{
Ho¡
: "s3-us-gov-west-1.amazonaws.com"},

50 
ex³ùedRegiÚ
: "us-gov-west-1",

53 
u
: 
u¾
.
URL
{
Ho¡
: "192.168.1.1"},

54 
ex³ùedRegiÚ
: "",

57 
u
: 
u¾
.
URL
{
Ho¡
: "s3-eu-west-1.amazonaws.com"},

58 
ex³ùedRegiÚ
: "eu-west-1",

61 
u
: 
u¾
.
URL
{
Ho¡
: "s3.eu-west-1.amazonaws.com"},

62 
ex³ùedRegiÚ
: "eu-west-1",

65 
u
: 
u¾
.
URL
{
Ho¡
: "s3.dualstack.eu-west-1.amazonaws.com"},

66 
ex³ùedRegiÚ
: "eu-west-1",

69 
u
: 
u¾
.
URL
{
Ho¡
: "s3.amazonaws.com"},

70 
ex³ùedRegiÚ
: "",

73 
u
: 
u¾
.
URL
{
Ho¡
: "s3-external-1.amazonaws.com"},

74 
ex³ùedRegiÚ
: "",

78 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

79 
»giÚ
 :ğ
	`G‘RegiÚFromURL
(
‹¡Ca£
.
u
)

80 
‹¡Ca£
.
ex³ùedRegiÚ
 !ğ
»giÚ
 {

81 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed„egiÚ %s, gÙ %s", 
i
+1, 
‹¡Ca£
.
ex³ùedRegiÚ
, 
»giÚ
)

84 
	}
}

87 
func
 
	$Te¡IsV®idDomaš
(
t
 *
‹¡šg
.
T
) {

88 
‹¡Ca£s
 := []struct {

90 
ho¡
 
¡ršg


92 
»suÉ
 
boŞ


94 {"s3.amazÚaws.com", 
Œue
},

95 {"s3.ú-nÜth-1.amazÚaws.com.ú", 
Œue
},

96 {"s3.ú-nÜthwe¡-1.amazÚaws.com.ú", 
Œue
},

97 {"s3.amazÚaws.com_", 
çl£
},

98 {"%$$$", 
çl£
},

99 {"s3.amz.‹¡.com", 
Œue
},

100 {"s3.%%", 
çl£
},

101 {"loÿlho¡", 
Œue
},

102 {"-loÿlho¡", 
çl£
},

103 {"", 
çl£
},

104 {"\À\t", 
çl£
},

105 {" ", 
çl£
},

108 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

109 
»suÉ
 :ğ
	`IsV®idDomaš
(
‹¡Ca£
.
ho¡
)

110 
‹¡Ca£
.
»suÉ
 !=„esult {

111 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed isV®idDomaše¡Øb'%v', buˆfound '%v' in¡—d", 
i
+1, 
‹¡Ca£
.
»suÉ
,„esult)

114 
	}
}

117 
func
 
	$Te¡IsV®idIP
(
t
 *
‹¡šg
.
T
) {

118 
‹¡Ca£s
 := []struct {

120 

 
¡ršg


122 
»suÉ
 
boŞ


124 {"192.168.1.1", 
Œue
},

125 {"192.168.1", 
çl£
},

126 {"192.168.1.1.1", 
çl£
},

127 {"-192.168.1.1", 
çl£
},

128 {"260.192.1.1", 
çl£
},

131 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

132 
»suÉ
 :ğ
	`IsV®idIP
(
‹¡Ca£
.

)

133 
‹¡Ca£
.
»suÉ
 !=„esult {

134 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed isV®idIPØb'%v' fÜ iÅuˆ\"%s\", buˆfound iˆtØb'%v' in¡—d", 
i
+1, 
‹¡Ca£
.
»suÉ
,e¡Ca£.

,„esult)

138 
	}
}

141 
func
 
	$Te¡IsVœtu®Ho¡SuµÜ‹d
(
t
 *
‹¡šg
.
T
) {

142 
‹¡Ca£s
 := []struct {

143 
u¾
 
¡ršg


144 
buck‘
 
¡ršg


146 
»suÉ
 
boŞ


148 {"h‰ps://s3.amazÚaws.com", "my-buck‘", 
Œue
},

149 {"h‰ps://s3.ú-nÜth-1.amazÚaws.com.ú", "my-buck‘", 
Œue
},

150 {"h‰ps://s3.amazÚaws.com", "my-buck‘.", 
çl£
},

151 {"h‰ps://amazÚs3.amazÚaws.com", "my-buck‘.", 
çl£
},

152 {"h‰ps://¡Üage.googË­is.com/", "my-buck‘", 
Œue
},

153 {"h‰ps://my¡Üage.googË­is.com/", "my-buck‘", 
çl£
},

156 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

157 
u
, 
”r
 :ğ
u¾
.
	`P¬£
(
‹¡Ca£
.url)

158 
”r
 !ğ
n
 {

159 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
)

161 
»suÉ
 :ğ
	`IsVœtu®Ho¡SuµÜ‹d
(*
u
, 
‹¡Ca£
.
buck‘
)

162 
‹¡Ca£
.
»suÉ
 !=„esult {

163 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed isVœtu®Ho¡SuµÜ‹dØb'%v' fÜ iÅuˆu¾ \"%s\"‡nd buck‘ \"%s\", buˆfound iˆtØb'%v' in¡—d", 
i
+1, 
‹¡Ca£
.
»suÉ
,e¡Ca£.
u¾
,e¡Ca£.
buck‘
,„esult)

166 
	}
}

169 
func
 
	$Te¡IsAmazÚEndpošt
(
t
 *
‹¡šg
.
T
) {

170 
‹¡Ca£s
 := []struct {

171 
u¾
 
¡ršg


173 
»suÉ
 
boŞ


175 {"h‰ps://192.168.1.1", 
çl£
},

176 {"192.168.1.1", 
çl£
},

177 {"h‰p://¡Üage.googË­is.com", 
çl£
},

178 {"h‰ps://¡Üage.googË­is.com", 
çl£
},

179 {"¡Üage.googË­is.com", 
çl£
},

180 {"s3.amazÚaws.com", 
çl£
},

181 {"h‰ps://amazÚs3.amazÚaws.com", 
çl£
},

182 {"-192.168.1.1", 
çl£
},

183 {"260.192.1.1", 
çl£
},

184 {"h‰ps://s3-.amazÚaws.com", 
çl£
},

185 {"h‰ps://s3..amazÚaws.com", 
çl£
},

186 {"h‰ps://s3.du®¡ack.us-we¡-1.amazÚaws.com.ú", 
çl£
},

187 {"h‰ps://s3..us-we¡-1.amazÚaws.com.ú", 
çl£
},

189 {"h‰ps://s3.amazÚaws.com", 
Œue
},

190 {"h‰ps://s3-ex‹º®-1.amazÚaws.com", 
Œue
},

191 {"h‰ps://s3.ú-nÜth-1.amazÚaws.com.ú", 
Œue
},

192 {"h‰ps://s3-us-we¡-1.amazÚaws.com", 
Œue
},

193 {"h‰ps://s3.us-we¡-1.amazÚaws.com", 
Œue
},

194 {"h‰ps://s3.du®¡ack.us-we¡-1.amazÚaws.com", 
Œue
},

197 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

198 
u
, 
”r
 :ğ
u¾
.
	`P¬£
(
‹¡Ca£
.url)

199 
”r
 !ğ
n
 {

200 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
)

202 
»suÉ
 :ğ
	`IsAmazÚEndpošt
(*
u
)

203 
‹¡Ca£
.
»suÉ
 !=„esult {

204 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed isAmazÚEndpošˆtØb'%v' fÜ iÅuˆ\"%s\", buˆfound iˆtØb'%v' in¡—d", 
i
+1, 
‹¡Ca£
.
»suÉ
,e¡Ca£.
u¾
,„esult)

208 
	}
}

211 
func
 
	$Te¡IsGoogËEndpošt
(
t
 *
‹¡šg
.
T
) {

212 
‹¡Ca£s
 := []struct {

213 
u¾
 
¡ršg


215 
»suÉ
 
boŞ


217 {"192.168.1.1", 
çl£
},

218 {"h‰ps://192.168.1.1", 
çl£
},

219 {"s3.amazÚaws.com", 
çl£
},

220 {"h‰p://s3.amazÚaws.com", 
çl£
},

221 {"h‰ps://s3.amazÚaws.com", 
çl£
},

222 {"h‰ps://s3.ú-nÜth-1.amazÚaws.com.ú", 
çl£
},

223 {"-192.168.1.1", 
çl£
},

224 {"260.192.1.1", 
çl£
},

226 {"h‰p://¡Üage.googË­is.com", 
Œue
},

227 {"h‰ps://¡Üage.googË­is.com", 
Œue
},

230 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

231 
u
, 
”r
 :ğ
u¾
.
	`P¬£
(
‹¡Ca£
.url)

232 
”r
 !ğ
n
 {

233 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
)

235 
»suÉ
 :ğ
	`IsGoogËEndpošt
(*
u
)

236 
‹¡Ca£
.
»suÉ
 !=„esult {

237 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed isGoogËEndpošˆtØb'%v' fÜ iÅuˆ\"%s\", buˆfound iˆtØb'%v' in¡—d", 
i
+1, 
‹¡Ca£
.
»suÉ
,e¡Ca£.
u¾
,„esult)

241 
	}
}

243 
func
 
	$Te¡P”ûÁEncodeSÏsh
(
t
 *
‹¡šg
.
T
) {

244 
‹¡Ca£s
 := []struct {

245 
šput
 
¡ršg


246 
ouut
 
¡ršg


255 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

256 
»ûivedOuut
 :ğ
	`³rûÁEncodeSÏsh
(
‹¡Ca£
.
šput
)

257 
‹¡Ca£
.
ouut
 !ğ
»ûivedOuut
 {

258 
t
.
	`E¼Üf
(

260 
i
+1, 
‹¡Ca£
.
šput
,e¡Ca£.
ouut
,

261 
»ûivedOuut
,

266 
	}
}

269 
func
 
	$Te¡Qu”yEncode
(
t
 *
‹¡šg
.
T
) {

270 
‹¡Ca£s
 := []struct {

271 
qu”yKey
 
¡ršg


272 
v®ueToEncode
 []
¡ršg


274 
»suÉ
 
¡ršg


276 {"´efix", []
¡ršg
{"test@123", "test@456"}, "prefix=test%40123&prefix=test%40456"},

277 {"@´efix", []
¡ršg
{"test@123"}, "%40prefix=test%40123"},

278 {"@´efix", []
¡ršg
{"a/b/c/"}, "%40prefix=a%2Fb%2Fc%2F"},

279 {"´efix", []
¡ršg
{"test#123"}, "prefix=test%23123"},

280 {"´efix#", []
¡ršg
{"test#123"}, "prefix%23=test%23123"},

281 {"´efix", []
¡ršg
{"test123"}, "prefix=test123"},

282 {"´efix", []
¡ršg
{"testæœ¬èª123", "test123"}, "prefix=test%E6%9C%AC%E8%AA%9E123&prefix=test123"},

285 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

286 
u¾V®ues
 :ğ
	`make
(
u¾
.
V®ues
)

287 
_
, 
v®ueToEncode
 :ğ
¿nge
 
‹¡Ca£
.valueToEncode {

288 
u¾V®ues
.
	`Add
(
‹¡Ca£
.
qu”yKey
, 
v®ueToEncode
)

290 
»suÉ
 :ğ
	`Qu”yEncode
(
u¾V®ues
)

291 
‹¡Ca£
.
»suÉ
 !=„esult {

292 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed qu”yEncod»suÉØb\"%s\", buˆfound iˆtØb\"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
»suÉ
,„esult)

295 
	}
}

298 
func
 
	$Te¡EncodeP©h
(
t
 *
‹¡šg
.
T
) {

299 
‹¡Ca£s
 := []struct {

301 
šputSŒ
 
¡ršg


303 
»suÉ
 
¡ršg


314 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

315 
»suÉ
 :ğ
	`EncodeP©h
(
‹¡Ca£
.
šputSŒ
)

316 
‹¡Ca£
.
»suÉ
 !=„esult {

317 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed qu”yEncod»suÉØb\"%s\", buˆfound iˆtØb\"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
»suÉ
,„esult)

320 
	}
}

323 
func
 
	$Te¡IsV®idBuck‘Name
(
t
 *
‹¡šg
.
T
) {

324 
‹¡Ca£s
 := []struct {

326 
buck‘Name
 
¡ršg


328 
”r
 
”rÜ


330 
shouldPass
 
boŞ


332 {".mybuck‘", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

333 {"$mybuck‘", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

334 {"mybuck‘-", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

335 {"my", 
”rÜs
.
	`New
("Buck‘‚amÿÂÙ bsm®Ë¸thª 3 ch¬aù”s"), 
çl£
},

336 {"", 
”rÜs
.
	`New
("Buck‘‚amÿÂÙ bem±y"), 
çl£
},

337 {"my..buck‘", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

338 {"192.168.1.168", 
”rÜs
.
	`New
("Buck‘‚amÿÂÙ bª i°add»ss"), 
çl£
},

339 {":buck‘Çme", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

340 {"_buck‘Name", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

341 {"my.buck‘.com", 
n
, 
Œue
},

342 {"my-buck‘", 
n
, 
Œue
},

343 {"123my-buck‘", 
n
, 
Œue
},

344 {"Mybuck‘", 
n
, 
Œue
},

345 {"My_buck‘", 
n
, 
Œue
},

346 {"My:buck‘", 
n
, 
Œue
},

349 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

350 
”r
 :ğ
	`CheckV®idBuck‘Name
(
‹¡Ca£
.
buck‘Name
)

351 
”r
 !ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

352 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
.
	`E¼Ü
())

354 
”r
 =ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

355 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™h <ERROR> \"%s\", buˆ·s£d in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
())

358 
”r
 !ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

359 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

360 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™hƒ¼Ü \"%s\", buˆš¡—d faed w™hƒ¼Ü \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
(),ƒrr.Error())

366 
	}
}

369 
func
 
	$Te¡IsV®idBuck‘NameSŒiù
(
t
 *
‹¡šg
.
T
) {

370 
‹¡Ca£s
 := []struct {

372 
buck‘Name
 
¡ršg


374 
”r
 
”rÜ


376 
shouldPass
 
boŞ


378 {".mybuck‘", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

379 {"$mybuck‘", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

380 {"mybuck‘-", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

381 {"my", 
”rÜs
.
	`New
("Buck‘‚amÿÂÙ bsm®Ë¸thª 3 ch¬aù”s"), 
çl£
},

382 {"", 
”rÜs
.
	`New
("Buck‘‚amÿÂÙ bem±y"), 
çl£
},

383 {"my..buck‘", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

384 {"192.168.1.168", 
”rÜs
.
	`New
("Buck‘‚amÿÂÙ bª i°add»ss"), 
çl£
},

385 {"Mybuck‘", 
”rÜs
.
	`New
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

386 {"my.buck‘.com", 
n
, 
Œue
},

387 {"my-buck‘", 
n
, 
Œue
},

388 {"123my-buck‘", 
n
, 
Œue
},

391 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

392 
”r
 :ğ
	`CheckV®idBuck‘NameSŒiù
(
‹¡Ca£
.
buck‘Name
)

393 
”r
 !ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

394 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
.
	`E¼Ü
())

396 
”r
 =ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

397 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™h <ERROR> \"%s\", buˆ·s£d in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
())

400 
”r
 !ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

401 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

402 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™hƒ¼Ü \"%s\", buˆš¡—d faed w™hƒ¼Ü \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
(),ƒrr.Error())

408 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/set/stringset.go

18 
·ckage
 
£t


20 
impÜt
 (

27 
ty³
 
SŒšgS‘
 
	gm­
[
¡ršg
]struct{}

30 
	$func
 (
£t
 
SŒšgS‘
è
	`ToSliû
(è[]
¡ršg
 {

31 
keys
 :ğ
	`make
([]
¡ršg
, 0, 
	`Ën
(
£t
))

32 
k
 :ğ
¿nge
 
£t
 {

33 
keys
 = 
	`­³nd
(keys, 
k
)

35 
sÜt
.
	`SŒšgs
(
keys
)

36  
keys


37 
	}
}

40 
	$func
 (
£t
 
SŒšgS‘
è
	$IsEm±y
(è
boŞ
 {

41  
	`Ën
(
£t
) == 0

42 
	}
}

45 
	$func
 (
£t
 
SŒšgS‘
è
	$Add
(
s
 
¡ršg
) {

46 
£t
[
s
] = struct{}{}

47 
	}
}

50 
	$func
 (
£t
 
SŒšgS‘
è
	$Remove
(
s
 
¡ršg
) {

51 
	`d–‘e
(
£t
, 
s
)

52 
	}
}

55 
	$func
 (
£t
 
SŒšgS‘
è
	$CÚšs
(
s
 
¡ršg
è
boŞ
 {

56 
_
, 
ok
 :ğ
£t
[
s
]

57  
ok


58 
	}
}

65 
	$func
 (
£t
 
SŒšgS‘
è
	`FuncM©ch
(
m©chFn
 
	$func
(
¡ršg
, sŒšgè
boŞ
, 
m©chSŒšg
 sŒšgè
SŒšgS‘
 {

66 
n£t
 :ğ
	`NewSŒšgS‘
()

67 
k
 :ğ
¿nge
 
£t
 {

68 
	`m©chFn
(
k
, 
m©chSŒšg
) {

69 
n£t
.
	`Add
(
k
)

72  
n£t


73 
	}
}

79 
	$func
 (
£t
 
SŒšgS‘
è
	`AµlyFunc
(
­¶yFn
 
	$func
(
¡ršg
è¡ršgè
SŒšgS‘
 {

80 
n£t
 :ğ
	`NewSŒšgS‘
()

81 
k
 :ğ
¿nge
 
£t
 {

82 
n£t
.
	`Add
(
	`­¶yFn
(
k
))

84  
n£t


85 
	}
}

88 
	$func
 (
£t
 
SŒšgS‘
è
	$Equ®s
(
s£t
 
SŒšgS‘
è
boŞ
 {

91 
	`Ën
(
£t
è!ğËn(
s£t
) {

92  
çl£


96 
k
 :ğ
¿nge
 
£t
 {

97 
_
, 
ok
 :ğ
s£t
[
k
]; !ok {

98  
çl£


102  
Œue


103 
	}
}

106 
	$func
 (
£t
 
SŒšgS‘
è
	$IÁ”£ùiÚ
(
s£t
 
SŒšgS‘
) StringSet {

107 
n£t
 :ğ
	`NewSŒšgS‘
()

108 
k
 :ğ
¿nge
 
£t
 {

109 
_
, 
ok
 :ğ
s£t
[
k
]; ok {

110 
n£t
.
	`Add
(
k
)

114  
n£t


115 
	}
}

118 
	$func
 (
£t
 
SŒšgS‘
è
	$Difã»nû
(
s£t
 
SŒšgS‘
) StringSet {

119 
n£t
 :ğ
	`NewSŒšgS‘
()

120 
k
 :ğ
¿nge
 
£t
 {

121 
_
, 
ok
 :ğ
s£t
[
k
]; !ok {

122 
n£t
.
	`Add
(
k
)

126  
n£t


127 
	}
}

130 
	$func
 (
£t
 
SŒšgS‘
è
	$UniÚ
(
s£t
 
SŒšgS‘
) StringSet {

131 
n£t
 :ğ
	`NewSŒšgS‘
()

132 
k
 :ğ
¿nge
 
£t
 {

133 
n£t
.
	`Add
(
k
)

136 
k
 :ğ
¿nge
 
s£t
 {

137 
n£t
.
	`Add
(
k
)

140  
n£t


141 
	}
}

144 
	$func
 (
£t
 
SŒšgS‘
è
	`M¬sh®JSON
(è([]
by‹
, 
”rÜ
) {

145  
jsÚ
.
	`M¬sh®
(
£t
.
	`ToSliû
())

146 
	}
}

152 
	$func
 (
£t
 *
SŒšgS‘
è
	$Unm¬sh®JSON
(
d©a
 []
by‹
è
”rÜ
 {

153 
¦
 :ğ[]
¡ršg
{}

154 
v¬
 
”r
 
”rÜ


155 
”r
 = 
jsÚ
.
	`Unm¬sh®
(
d©a
, &
¦
);ƒ¼ =ğ
n
 {

156 *
£t
 = 
	`make
(
SŒšgS‘
)

157 
_
, 
s
 :ğ
¿nge
 
¦
 {

158 
£t
.
	`Add
(
s
)

161 
v¬
 
s
 
¡ršg


162 
”r
 = 
jsÚ
.
	`Unm¬sh®
(
d©a
, &
s
);ƒ¼ =ğ
n
 {

163 *
£t
 = 
	`make
(
SŒšgS‘
)

164 
£t
.
	`Add
(
s
)

168  
”r


169 
	}
}

172 
	$func
 (
£t
 
SŒšgS‘
è
	$SŒšg
(è
¡ršg
 {

173  
fmt
.
	`S´štf
("%s", 
£t
.
	`ToSliû
())

174 
	}
}

177 
func
 
	$NewSŒšgS‘
(è
SŒšgS‘
 {

178  
	`make
(
SŒšgS‘
)

179 
	}
}

182 
func
 
	$C»©eSŒšgS‘
(
¦
 ...
¡ršg
è
SŒšgS‘
 {

183 
£t
 :ğ
	`make
(
SŒšgS‘
)

184 
_
, 
k
 :ğ
¿nge
 
¦
 {

185 
£t
.
	`Add
(
k
)

187  
£t


188 
	}
}

191 
func
 
	$CİySŒšgS‘
(
£t
 
SŒšgS‘
) StringSet {

192 
n£t
 :ğ
	`NewSŒšgS‘
()

193 
k
, 
v
 :ğ
¿nge
 
£t
 {

194 
n£t
[
k
] = 
v


196  
n£t


197 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/set/stringset_test.go

18 
·ckage
 
£t


20 
impÜt
 (

27 
func
 
	$Te¡NewSŒšgS‘
(
t
 *
‹¡šg
.
T
) {

28 
ss
 :ğ
	`NewSŒšgS‘
(); !ss.
	`IsEm±y
() {

29 
t
.
	`F©®f
("expected:rue, got: false")

31 
	}
}

34 
func
 
	$Te¡C»©eSŒšgS‘
(
t
 *
‹¡šg
.
T
) {

35 
ss
 :ğ
	`C»©eSŒšgS‘
("foo")

36 
¡r
 :ğ
ss
.
	`SŒšg
(); sŒ !ğ`[
foo
]` {

37 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", `["foo"]`, 
¡r
)

39 
	}
}

42 
func
 
	$Te¡CİySŒšgS‘
(
t
 *
‹¡šg
.
T
) {

43 
ss
 :ğ
	`C»©eSŒšgS‘
("foo")

44 
sscİy
 :ğ
	`CİySŒšgS‘
(
ss
)

45 !
ss
.
	`Equ®s
(
sscİy
) {

46 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
ss
, 
sscİy
)

48 
	}
}

51 
func
 
	$Te¡SŒšgS‘Add
(
t
 *
‹¡šg
.
T
) {

52 
‹¡Ca£s
 := []struct {

53 
v®ue
 
¡ršg


54 
ex³ùedResuÉ
 
¡ršg


57 {"foo", `[
foo
]`},

59 {"foo", `[
foo
]`},

61 {"b¬", `[
b¬
 
foo
]`},

64 
ss
 :ğ
	`NewSŒšgS‘
()

65 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

66 
ss
.
	`Add
(
‹¡Ca£
.
v®ue
)

67 
¡r
 :ğ
ss
.
	`SŒšg
(); sŒ !ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

68 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
¡r
)

71 
	}
}

74 
func
 
	$Te¡SŒšgS‘Remove
(
t
 *
‹¡šg
.
T
) {

75 
ss
 :ğ
	`C»©eSŒšgS‘
("foo", "bar")

76 
‹¡Ca£s
 := []struct {

77 
v®ue
 
¡ršg


78 
ex³ùedResuÉ
 
¡ršg


81 {"baz", `[
b¬
 
foo
]`},

83 {"foo", `[
b¬
]`},

85 {"foo", `[
b¬
]`},

90 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

91 
ss
.
	`Remove
(
‹¡Ca£
.
v®ue
)

92 
¡r
 :ğ
ss
.
	`SŒšg
(); sŒ !ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

93 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
¡r
)

96 
	}
}

99 
func
 
	$Te¡SŒšgS‘CÚšs
(
t
 *
‹¡šg
.
T
) {

100 
ss
 :ğ
	`C»©eSŒšgS‘
("foo")

101 
‹¡Ca£s
 := []struct {

102 
v®ue
 
¡ršg


103 
ex³ùedResuÉ
 
boŞ


106 {"b¬", 
çl£
},

108 {"foo", 
Œue
},

110 {"Foo", 
çl£
},

113 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

114 
»suÉ
 :ğ
ss
.
	`CÚšs
(
‹¡Ca£
.
v®ue
);„esuÉ !ğ‹¡Ca£.
ex³ùedResuÉ
 {

115 
t
.
	`F©®f
("ex³ùed: %t, gÙ: %t", 
‹¡Ca£
.
ex³ùedResuÉ
, 
»suÉ
)

118 
	}
}

121 
func
 
	$Te¡SŒšgS‘FuncM©ch
(
t
 *
‹¡šg
.
T
) {

122 
ss
 :ğ
	`C»©eSŒšgS‘
("foo", "bar")

123 
‹¡Ca£s
 := []struct {

124 
m©chFn
 
	`func
(
¡ršg
, sŒšgè
boŞ


125 
v®ue
 
¡ršg


126 
ex³ùedResuÉ
 
¡ršg


129 {
	`func
(
£tV®ue
 
¡ršg
, 
com·»V®ue
 sŒšgè
boŞ
 {

130  
¡ršgs
.
	`ToUµ”
(
£tV®ue
è=ğ¡ršgs.ToUµ”(
com·»V®ue
)

131 }, "B¬", `[
b¬
]`},

133 {
	`func
(
£tV®ue
 
¡ršg
, 
com·»V®ue
 sŒšgè
boŞ
 {

134  
¡ršgs
.
	`HasP»fix
(
com·»V®ue
, 
£tV®ue
)

135 }, "foob¬", `[
foo
]`},

138 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

139 
s
 :ğ
ss
.
	`FuncM©ch
(
‹¡Ca£
.
m©chFn
,e¡Ca£.
v®ue
)

140 
»suÉ
 :ğ
s
.
	`SŒšg
();„esuÉ !ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

141 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
»suÉ
)

144 
	}
}

147 
func
 
	$Te¡SŒšgS‘AµlyFunc
(
t
 *
‹¡šg
.
T
) {

148 
ss
 :ğ
	`C»©eSŒšgS‘
("foo", "bar")

149 
‹¡Ca£s
 := []struct {

150 
­¶yFn
 
	`func
(
¡ršg
) string

151 
ex³ùedResuÉ
 
¡ršg


154 {
	`func
(
£tV®ue
 
¡ršg
è¡ršg {  "mybuck‘/" + s‘V®u}, `[
mybuck‘
/
b¬
 mybuck‘/
foo
]`},

156 {
	`func
(
£tV®ue
 
¡ršg
è¡ršg {  s‘V®ue[1:] }, `[
¬
 
oo
]`},

159 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

160 
s
 :ğ
ss
.
	`AµlyFunc
(
‹¡Ca£
.
­¶yFn
)

161 
»suÉ
 :ğ
s
.
	`SŒšg
();„esuÉ !ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

162 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
»suÉ
)

165 
	}
}

168 
func
 
	$Te¡SŒšgS‘Equ®s
(
t
 *
‹¡šg
.
T
) {

169 
‹¡Ca£s
 := []struct {

170 
£t1
 
SŒšgS‘


171 
£t2
 
SŒšgS‘


172 
ex³ùedResuÉ
 
boŞ


175 {
	`C»©eSŒšgS‘
("foo", "b¬"), C»©eSŒšgS‘("foo", "b¬"), 
Œue
},

177 {
	`C»©eSŒšgS‘
("foo", "b¬"), C»©eSŒšgS‘("foo", "b¬", "baz"), 
çl£
},

179 {
	`C»©eSŒšgS‘
("foo", "b¬"), C»©eSŒšgS‘("b¬"), 
çl£
},

182 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

183 
»suÉ
 :ğ
‹¡Ca£
.
£t1
.
	`Equ®s
Ñe¡Ca£.
£t2
);„esuÉ !ğ‹¡Ca£.
ex³ùedResuÉ
 {

184 
t
.
	`F©®f
("ex³ùed: %t, gÙ: %t", 
‹¡Ca£
.
ex³ùedResuÉ
, 
»suÉ
)

187 
	}
}

190 
func
 
	$Te¡SŒšgS‘IÁ”£ùiÚ
(
t
 *
‹¡šg
.
T
) {

191 
‹¡Ca£s
 := []struct {

192 
£t1
 
SŒšgS‘


193 
£t2
 
SŒšgS‘


194 
ex³ùedResuÉ
 
SŒšgS‘


197 {
	`C»©eSŒšgS‘
("foo", "bar"), CreateStringSet("foo", "bar"), CreateStringSet("foo", "bar")},

199 {
	`C»©eSŒšgS‘
("foo", "bar", "baz"), CreateStringSet("foo", "bar"), CreateStringSet("foo", "bar")},

201 {
	`C»©eSŒšgS‘
("foo", "baz"), CreateStringSet("baz", "bar"), CreateStringSet("baz")},

203 {
	`C»©eSŒšgS‘
("foo", "baz"), C»©eSŒšgS‘("poo", "b¬"), 
	`NewSŒšgS‘
()},

206 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

207 
»suÉ
 :ğ
‹¡Ca£
.
£t1
.
	`IÁ”£ùiÚ
Ñe¡Ca£.
£t2
); !»suÉ.
	`Equ®s
Ñe¡Ca£.
ex³ùedResuÉ
) {

208 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
»suÉ
)

211 
	}
}

214 
func
 
	$Te¡SŒšgS‘Difã»nû
(
t
 *
‹¡šg
.
T
) {

215 
‹¡Ca£s
 := []struct {

216 
£t1
 
SŒšgS‘


217 
£t2
 
SŒšgS‘


218 
ex³ùedResuÉ
 
SŒšgS‘


221 {
	`C»©eSŒšgS‘
("foo", "b¬"), C»©eSŒšgS‘("foo", "b¬"), 
	`NewSŒšgS‘
()},

223 {
	`C»©eSŒšgS‘
("foo", "bar", "baz"), CreateStringSet("foo", "bar"), CreateStringSet("baz")},

225 {
	`C»©eSŒšgS‘
("foo", "baz"), CreateStringSet("baz", "bar"), CreateStringSet("foo")},

227 {
	`C»©eSŒšgS‘
("foo", "baz"), CreateStringSet("poo", "bar"), CreateStringSet("foo", "baz")},

230 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

231 
»suÉ
 :ğ
‹¡Ca£
.
£t1
.
	`Difã»nû
Ñe¡Ca£.
£t2
); !»suÉ.
	`Equ®s
Ñe¡Ca£.
ex³ùedResuÉ
) {

232 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
»suÉ
)

235 
	}
}

238 
func
 
	$Te¡SŒšgS‘UniÚ
(
t
 *
‹¡šg
.
T
) {

239 
‹¡Ca£s
 := []struct {

240 
£t1
 
SŒšgS‘


241 
£t2
 
SŒšgS‘


242 
ex³ùedResuÉ
 
SŒšgS‘


245 {
	`C»©eSŒšgS‘
("foo", "bar"), CreateStringSet("foo", "bar"), CreateStringSet("foo", "bar")},

247 {
	`C»©eSŒšgS‘
("foo", "bar", "baz"), CreateStringSet("foo", "bar"), CreateStringSet("foo", "bar", "baz")},

249 {
	`C»©eSŒšgS‘
("foo", "baz"), CreateStringSet("baz", "bar"), CreateStringSet("foo", "baz", "bar")},

251 {
	`C»©eSŒšgS‘
("foo", "baz"), CreateStringSet("poo", "bar"), CreateStringSet("foo", "baz", "poo", "bar")},

254 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

255 
»suÉ
 :ğ
‹¡Ca£
.
£t1
.
	`UniÚ
Ñe¡Ca£.
£t2
); !»suÉ.
	`Equ®s
Ñe¡Ca£.
ex³ùedResuÉ
) {

256 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
»suÉ
)

259 
	}
}

262 
func
 
	$Te¡SŒšgS‘M¬sh®JSON
(
t
 *
‹¡šg
.
T
) {

263 
‹¡Ca£s
 := []struct {

264 
£t
 
SŒšgS‘


265 
ex³ùedResuÉ
 
¡ršg


268 {
	`C»©eSŒšgS‘
("foo", "bar"), `["bar","foo"]`},

270 {
	`NewSŒšgS‘
(), "[]"},

273 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

274 
»suÉ
, 
_
 :ğ
‹¡Ca£
.
£t
.
	`M¬sh®JSON
(); 
	`¡ršg
ÔesuÉè!ğ‹¡Ca£.
ex³ùedResuÉ
 {

275 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
	`¡ršg
(
»suÉ
))

278 
	}
}

281 
func
 
	$Te¡SŒšgS‘Unm¬sh®JSON
(
t
 *
‹¡šg
.
T
) {

282 
‹¡Ca£s
 := []struct {

283 
d©a
 []
by‹


284 
ex³ùedResuÉ
 
¡ršg


287 {[]
	`by‹
(`["b¬","foo"]`), `[
b¬
 
foo
]`},

289 {[]
	`by‹
(`"b¬"`), `[
b¬
]`},

291 {[]
	`by‹
(`[]`), `[]`},

293 {[]
	`by‹
(`""`), `[]`},

296 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

297 
v¬
 
£t
 
SŒšgS‘


298 
£t
.
	`Unm¬sh®JSON
(
‹¡Ca£
.
d©a
)

299 
»suÉ
 :ğ
£t
.
	`SŒšg
();„esuÉ !ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

300 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
»suÉ
)

303 
	}
}

306 
func
 
	$Te¡SŒšgS‘SŒšg
(
t
 *
‹¡šg
.
T
) {

307 
‹¡Ca£s
 := []struct {

308 
£t
 
SŒšgS‘


309 
ex³ùedResuÉ
 
¡ršg


312 {
	`NewSŒšgS‘
(), `[]`},

314 {
	`C»©eSŒšgS‘
(""), `[]`},

316 {
	`C»©eSŒšgS‘
("foo"), `[
foo
]`},

319 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

320 
¡r
 :ğ
‹¡Ca£
.
£t
.
	`SŒšg
(); sŒ !ğ‹¡Ca£.
ex³ùedResuÉ
 {

321 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
¡r
)

324 
	}
}

327 
func
 
	$Te¡SŒšgS‘ToSliû
(
t
 *
‹¡šg
.
T
) {

328 
‹¡Ca£s
 := []struct {

329 
£t
 
SŒšgS‘


330 
ex³ùedResuÉ
 
¡ršg


333 {
	`NewSŒšgS‘
(), `[]`},

335 {
	`C»©eSŒšgS‘
(""), `[]`},

337 {
	`C»©eSŒšgS‘
("foo"), `[
foo
]`},

339 {
	`C»©eSŒšgS‘
("foo", "b¬"), `[
b¬
 
foo
]`},

342 
_
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

343 
s¦iû
 :ğ
‹¡Ca£
.
£t
.
	`ToSliû
()

344 
¡r
 :ğ
fmt
.
	`S´štf
("%s", 
s¦iû
); sŒ !ğ
‹¡Ca£
.
ex³ùedResuÉ
 {

345 
t
.
	`F©®f
("ex³ùed: %s, gÙ: %s", 
‹¡Ca£
.
ex³ùedResuÉ
, 
¡r
)

348 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/post-policy.go

18 
·ckage
 
mšio


20 
impÜt
 (

28 cÚ¡ 
	gexpœ©iÚD©eFÜm©
 = "2006-01-02T15:04:05.999Z"

41 
ty³
 
pŞicyCÚd™iÚ
 struct {

42 
m©chTy³
 
¡ršg


43 
cÚd™iÚ
 
¡ršg


44 
v®ue
 
¡ršg


49 
ty³
 
Po¡PŞicy
 struct {

51 
expœ©iÚ
 
time
.
Time


53 
cÚd™iÚs
 []
pŞicyCÚd™iÚ


56 
cÚ‹ÁL’gthRªge
 struct {

57 
mš
 
št64


58 
max
 
št64


62 
fÜmD©a
 
m­
[
¡ršg
]string

66 
func
 
NewPo¡PŞicy
(è*
Po¡PŞicy
 {

67 
p
 :ğ&
Po¡PŞicy
{}

68 
p
.
cÚd™iÚs
 = 
make
([]
pŞicyCÚd™iÚ
, 0)

69 
	gp
.
	gfÜmD©a
 = 
make
(
m­
[
¡ršg
]string)

70  
p


74 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘Expœes
(
t
 
time
.
Time
è
”rÜ
 {

75 
t
.
	`IsZ”o
() {

76  
	`E¼Inv®idArgum’t
("Noƒxpiryime set.")

78 
p
.
expœ©iÚ
 = 
t


79  
n


80 
	}
}

83 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘Key
(
key
 
¡ršg
è
”rÜ
 {

84 
¡ršgs
.
	`TrimS·û
(
key
) == "" || key == "" {

85  
	`E¼Inv®idArgum’t
("Object‚ame isƒmpty.")

87 
pŞicyCÚd
 :ğ
pŞicyCÚd™iÚ
{

88 
m©chTy³
: "eq",

89 
cÚd™iÚ
: "$key",

90 
v®ue
: 
key
,

92 
”r
 :ğ
p
.
	`addNewPŞicy
(
pŞicyCÚd
);ƒ¼ !ğ
n
 {

93  
”r


95 
p
.
fÜmD©a
["key"] = 
key


96  
n


97 
	}
}

101 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘KeyS¹sW™h
(
keyS¹sW™h
 
¡ršg
è
”rÜ
 {

102 
¡ršgs
.
	`TrimS·û
(
keyS¹sW™h
) == "" || keyStartsWith == "" {

103  
	`E¼Inv®idArgum’t
("Object…refix isƒmpty.")

105 
pŞicyCÚd
 :ğ
pŞicyCÚd™iÚ
{

106 
m©chTy³
: "starts-with",

107 
cÚd™iÚ
: "$key",

108 
v®ue
: 
keyS¹sW™h
,

110 
”r
 :ğ
p
.
	`addNewPŞicy
(
pŞicyCÚd
);ƒ¼ !ğ
n
 {

111  
”r


113 
p
.
fÜmD©a
["key"] = 
keyS¹sW™h


114  
n


115 
	}
}

118 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘Buck‘
(
buck‘Name
 
¡ršg
è
”rÜ
 {

119 
¡ršgs
.
	`TrimS·û
(
buck‘Name
) == "" || bucketName == "" {

120  
	`E¼Inv®idArgum’t
("Bucket‚ame isƒmpty.")

122 
pŞicyCÚd
 :ğ
pŞicyCÚd™iÚ
{

123 
m©chTy³
: "eq",

124 
cÚd™iÚ
: "$bucket",

125 
v®ue
: 
buck‘Name
,

127 
”r
 :ğ
p
.
	`addNewPŞicy
(
pŞicyCÚd
);ƒ¼ !ğ
n
 {

128  
”r


130 
p
.
fÜmD©a
["buck‘"] = 
buck‘Name


131  
n


132 
	}
}

136 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘CÚ‹ÁTy³
(
cÚ‹ÁTy³
 
¡ršg
è
”rÜ
 {

137 
¡ršgs
.
	`TrimS·û
(
cÚ‹ÁTy³
) == "" || contentType == "" {

138  
	`E¼Inv®idArgum’t
("No contentype specified.")

140 
pŞicyCÚd
 :ğ
pŞicyCÚd™iÚ
{

141 
m©chTy³
: "eq",

142 
cÚd™iÚ
: "$Content-Type",

143 
v®ue
: 
cÚ‹ÁTy³
,

145 
”r
 :ğ
p
.
	`addNewPŞicy
(
pŞicyCÚd
);ƒ¼ !ğ
n
 {

146  
”r


148 
p
.
fÜmD©a
["CÚ‹Á-Ty³"] = 
cÚ‹ÁTy³


149  
n


150 
	}
}

154 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘CÚ‹ÁL’gthRªge
(
mš
, 
max
 
št64
è
”rÜ
 {

155 
mš
 > 
max
 {

156  
	`E¼Inv®idArgum’t
("Minimum†imit is†argerhan maximum†imit.")

158 
mš
 < 0 {

159  
	`E¼Inv®idArgum’t
("Minimum†imit cannot be‚egative.")

161 
max
 < 0 {

162  
	`E¼Inv®idArgum’t
("Maximum†imit cannot be‚egative.")

164 
p
.
cÚ‹ÁL’gthRªge
.
mš
 = min

165 
p
.
cÚ‹ÁL’gthRªge
.
max
 = max

166  
n


167 
	}
}

171 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘SucûssStusAùiÚ
(
¡©us
 
¡ršg
è
”rÜ
 {

172 
¡ršgs
.
	`TrimS·û
(
¡©us
) == "" || status == "" {

173  
	`E¼Inv®idArgum’t
("Status isƒmpty")

175 
pŞicyCÚd
 :ğ
pŞicyCÚd™iÚ
{

176 
m©chTy³
: "eq",

177 
cÚd™iÚ
: "$success_action_status",

178 
v®ue
: 
¡©us
,

180 
”r
 :ğ
p
.
	`addNewPŞicy
(
pŞicyCÚd
);ƒ¼ !ğ
n
 {

181  
”r


183 
p
.
fÜmD©a
["sucûss_aùiÚ_¡©us"] = 
¡©us


184  
n


185 
	}
}

189 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘U£rM‘ad©a
(
key
 
¡ršg
, 
v®ue
 sŒšgè
”rÜ
 {

190 
¡ršgs
.
	`TrimS·û
(
key
) == "" || key == "" {

191  
	`E¼Inv®idArgum’t
("Key isƒmpty")

193 
¡ršgs
.
	`TrimS·û
(
v®ue
) == "" || value == "" {

194  
	`E¼Inv®idArgum’t
("Value isƒmpty")

196 
h—d”Name
 :ğ
fmt
.
	`S´štf
("x-amz-m‘a-%s", 
key
)

197 
pŞicyCÚd
 :ğ
pŞicyCÚd™iÚ
{

198 
m©chTy³
: "eq",

199 
cÚd™iÚ
: 
fmt
.
	`S´štf
("$%s", 
h—d”Name
),

200 
v®ue
: value,

202 
”r
 :ğ
p
.
	`addNewPŞicy
(
pŞicyCÚd
);ƒ¼ !ğ
n
 {

203  
”r


205 
p
.
fÜmD©a
[
h—d”Name
] = 
v®ue


206  
n


207 
	}
}

211 
	$func
 (
p
 *
Po¡PŞicy
è
	$S‘U£rD©a
(
key
 
¡ršg
, 
v®ue
 sŒšgè
”rÜ
 {

212 
key
 == "" {

213  
	`E¼Inv®idArgum’t
("Key isƒmpty")

215 
v®ue
 == "" {

216  
	`E¼Inv®idArgum’t
("Value isƒmpty")

218 
h—d”Name
 :ğ
fmt
.
	`S´štf
("x-amz-%s", 
key
)

219 
pŞicyCÚd
 :ğ
pŞicyCÚd™iÚ
{

220 
m©chTy³
: "eq",

221 
cÚd™iÚ
: 
fmt
.
	`S´štf
("$%s", 
h—d”Name
),

222 
v®ue
: value,

224 
”r
 :ğ
p
.
	`addNewPŞicy
(
pŞicyCÚd
);ƒ¼ !ğ
n
 {

225  
”r


227 
p
.
fÜmD©a
[
h—d”Name
] = 
v®ue


228  
n


229 
	}
}

232 
	$func
 (
p
 *
Po¡PŞicy
è
	$addNewPŞicy
(
pŞicyCÚd
 
pŞicyCÚd™iÚ
è
”rÜ
 {

233 
pŞicyCÚd
.
m©chTy³
 =ğ"" ||…ŞicyCÚd.
cÚd™iÚ
 =ğ"" ||…ŞicyCÚd.
v®ue
 == "" {

234  
	`E¼Inv®idArgum’t
("Policy fields‡reƒmpty.")

236 
p
.
cÚd™iÚs
 = 
	`­³nd
Õ.cÚd™iÚs, 
pŞicyCÚd
)

237  
n


238 
	}
}

241 
	$func
 (
p
 
Po¡PŞicy
è
	$SŒšg
(è
¡ršg
 {

242  
	`¡ršg
(
p
.
	`m¬sh®JSON
())

243 
	}
}

246 
	$func
 (
p
 
Po¡PŞicy
è
	`m¬sh®JSON
(è[]
by‹
 {

247 
expœ©iÚSŒ
 := `"expiration":"` +….expiration.Format(expirationDateFormat) + `"`

248 
v¬
 
cÚd™iÚsSŒ
 
¡ršg


249 
cÚd™iÚs
 :ğ[]
¡ršg
{}

250 
_
, 
po
 :ğ
¿nge
 
p
.
cÚd™iÚs
 {

251 
cÚd™iÚs
 = 
	`­³nd
(cÚd™iÚs, 
fmt
.
	`S´štf
("[\"%s\",\"%s\",\"%s\"]", 
po
.
m©chTy³
,…o.
cÚd™iÚ
,…o.
v®ue
))

253 
p
.
cÚ‹ÁL’gthRªge
.
mš
 !ğ0 ||….cÚ‹ÁL’gthRªge.
max
 != 0 {

254 
cÚd™iÚs
 = 
	`­³nd
(cÚd™iÚs, 
fmt
.
	`S´štf
("[\"content-length-range\", %d, %d]",

255 
p
.
cÚ‹ÁL’gthRªge
.
mš
,….cÚ‹ÁL’gthRªge.
max
))

257 
	`Ën
(
cÚd™iÚs
) > 0 {

258 
cÚd™iÚsSŒ
 = `"cÚd™iÚs":[` + 
¡ršgs
.
	`Još
(
cÚd™iÚs
, ",") + "]"

260 
»tSŒ
 := "{"

261 
»tSŒ
 =„‘SŒ + 
expœ©iÚSŒ
 + ","

262 
»tSŒ
 =„‘SŒ + 
cÚd™iÚsSŒ


263 
»tSŒ
 =„etStr + "}"

264  []
	`by‹
(
»tSŒ
)

265 
	}
}

268 
	$func
 (
p
 
Po¡PŞicy
è
	$ba£64
(è
¡ršg
 {

269  
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
p
.
	`m¬sh®JSON
())

270 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/retry-continous.go

18 
·ckage
 
mšio


20 
	gimpÜt
 "time"

23 
	$func
 (
c
 
Cl›Á
è
	`ÃwR‘ryTim”CÚtšous
(
un™
 
time
.
Du¿tiÚ
, 
ÿp
ime.Du¿tiÚ, 
j™‹r
 
æßt64
, 
dÚeCh
 
chª
 struct{}) <-chan {

24 
©‹m±Ch
 :ğ
	`make
(
chª
 )

27 
j™‹r
 < 
NoJ™‹r
 {

28 
j™‹r
 = 
NoJ™‹r


30 
j™‹r
 > 
MaxJ™‹r
 {

31 
j™‹r
 = 
MaxJ™‹r


36 
expÚ’tŸlBackoffWa™
 :ğ
	`func
(
©‹m±
 è
time
.
Du¿tiÚ
 {

38 
maxA‰em±
 := 30

39 
©‹m±
 > 
maxA‰em±
 {

40 
©‹m±
 = 
maxA‰em±


43 
¦“p
 :ğ
un™
 * 
time
.
	`Du¿tiÚ
(1<<
	`ušt
(
©‹m±
))

44 
¦“p
 > 
ÿp
 {

45 
¦“p
 = 
ÿp


47 
j™‹r
 !ğ
NoJ™‹r
 {

48 
¦“p
 -ğ
time
.
	`Du¿tiÚ
(
c
.
¿ndom
.
	`Flßt64
(è* 
	`æßt64
(¦“pè* 
j™‹r
)

50  
¦“p


53 
go
 
	`func
() {

54 
deãr
 
	`şo£
(
©‹m±Ch
)

55 
v¬
 
ÃxtBackoff
 

57 
£Ëù
 {

59 
©‹m±Ch
 <- 
ÃxtBackoff
:

60 
ÃxtBackoff
++

61 <-
dÚeCh
:

65 
time
.
	`SË•
(
	`expÚ’tŸlBackoffWa™
(
ÃxtBackoff
))

68  
©‹m±Ch


69 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/retry.go

18 
·ckage
 
mšio


20 
impÜt
 (

29 
v¬
 
	gMaxR‘ry
 = 10

32 cÚ¡ 
MaxJ™‹r
 = 1.0

35 cÚ¡ 
NoJ™‹r
 = 0.0

39 cÚ¡ 
DeçuÉR‘ryUn™
 = 
time
.
SecÚd


43 cÚ¡ 
DeçuÉR‘ryC­
 = 
time
.
SecÚd
 * 30

47 
	$func
 (
c
 
Cl›Á
è
	`ÃwR‘ryTim”
(
maxR‘ry
 , 
un™
 
time
.
Du¿tiÚ
, 
ÿp
ime.Du¿tiÚ, 
j™‹r
 
æßt64
, 
dÚeCh
 
chª
 struct{}) <-chan {

48 
©‹m±Ch
 :ğ
	`make
(
chª
 )

52 
expÚ’tŸlBackoffWa™
 :ğ
	`func
(
©‹m±
 è
time
.
Du¿tiÚ
 {

54 
j™‹r
 < 
NoJ™‹r
 {

55 
j™‹r
 = 
NoJ™‹r


57 
j™‹r
 > 
MaxJ™‹r
 {

58 
j™‹r
 = 
MaxJ™‹r


62 
¦“p
 :ğ
un™
 * 
time
.
	`Du¿tiÚ
(1<<
	`ušt
(
©‹m±
))

63 
¦“p
 > 
ÿp
 {

64 
¦“p
 = 
ÿp


66 
j™‹r
 !ğ
NoJ™‹r
 {

67 
¦“p
 -ğ
time
.
	`Du¿tiÚ
(
c
.
¿ndom
.
	`Flßt64
(è* 
	`æßt64
(¦“pè* 
j™‹r
)

69  
¦“p


72 
go
 
	`func
() {

73 
deãr
 
	`şo£
(
©‹m±Ch
)

74 
i
 :ğ0; i < 
maxR‘ry
; i++ {

75 
£Ëù
 {

77 
©‹m±Ch
 <- 
i
 + 1:

78 <-
dÚeCh
:

82 
time
.
	`SË•
(
	`expÚ’tŸlBackoffWa™
(
i
))

85  
©‹m±Ch


86 
	}
}

90 
func
 
	$isHTTPReqE¼ÜR‘ryabË
(
”r
 
”rÜ
è
boŞ
 {

91 
”r
 =ğ
n
 {

92  
çl£


94 
e
 :ğ
”r
.(
ty³
) {

95 *
u¾
.
E¼Ü
:

96 
e
.
E¼
.(
ty³
) {

97 *
Ãt
.
DNSE¼Ü
, *Ãt.
OpE¼Ü
,‚‘.
UnknownN‘wÜkE¼Ü
:

98  
Œue


100 
¡ršgs
.
	`CÚšs
(
”r
.
	`E¼Ü
(), "Connection closed by foreign host") {

101  
Œue


102 } 
¡ršgs
.
	`CÚšs
(
”r
.
	`E¼Ü
(), "net/http: TLS handshakeimeout") {

104  
Œue


105 } 
¡ršgs
.
	`CÚšs
(
”r
.
	`E¼Ü
(), "i/oimeout") {

107  
Œue


108 } 
¡ršgs
.
	`CÚšs
(
”r
.
	`E¼Ü
(), "connectionimed out") {

110  
Œue


111 } 
¡ršgs
.
	`CÚšs
(
”r
.
	`E¼Ü
(), "net/http: HTTP/1.xransport connection broken") {

113  
Œue


116  
çl£


117 
	}
}

120 
v¬
 
	g»ŒyabËS3Codes
 = 
m­
[
¡ršg
]struct{}{

135 
func
 
	$isS3CodeR‘ryabË
(
s3Code
 
¡ršg
è(
ok
 
boŞ
) {

136 
_
, 
ok
 = 
»ŒyabËS3Codes
[
s3Code
]

137  
ok


138 
	}
}

141 
v¬
 
	g»ŒyabËHTTPStusCodes
 = 
m­
[]struct{}{

143 
h‰p
.
StusIÁ”ÇlS”v”E¼Ü
: {},

144 
h‰p
.
StusBadG©eway
: {},

145 
h‰p
.
StusS”viûUÇvaabË
: {},

150 
func
 
	$isHTTPStusR‘ryabË
(
h‰pStusCode
 è(
ok
 
boŞ
) {

151 
_
, 
ok
 = 
»ŒyabËHTTPStusCodes
[
h‰pStusCode
]

152  
ok


153 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/s3-endpoints.go

18 
·ckage
 
mšio


21 
v¬
 
	gawsS3EndpoštM­
 = 
m­
[
¡ršg
]string{

45 
func
 
	$g‘S3Endpošt
(
buck‘LoÿtiÚ
 
¡ršg
è(
s3Endpošt
 string) {

46 
s3Endpošt
, 
ok
 :ğ
awsS3EndpoštM­
[
buck‘LoÿtiÚ
]

47 !
ok
 {

49 
s3Endpošt
 = "s3.dualstack.us-east-1.amazonaws.com"

51  
s3Endpošt


52 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/s3-error.go

18 
·ckage
 
mšio


22 
v¬
 
	gs3E¼ÜRe¥Ú£M­
 = 
m­
[
¡ršg
]string{

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/test-utils_test.go

18 
·ckage
 
mšio


20 
impÜt
 (

31 
ty³
 
APIE¼Ü
 struct {

32 
Code
 
¡ršg


33 
DesütiÚ
 
¡ršg


34 
HTTPStusCode
 

38 
func
 
g’”©eE¼ÜRe¥Ú£
(
»¥
 *
h‰p
.
Re¥Ú£
, 
APIE¼
 
APIE¼Ü
, 
buck‘Name
 
¡ršg
è*
	gh‰p
.
	gRe¥Ú£
 {

40 
	g”rÜRe¥Ú£
 :ğ
g‘APIE¼ÜRe¥Ú£
(
APIE¼
, 
buck‘Name
)

41 
	g’codedE¼ÜRe¥Ú£
 :ğ
’codeRe¥Ú£
(
”rÜRe¥Ú£
)

43 
»¥
.
StusCode
 = 
APIE¼
.
HTTPStusCode


44 
»¥
.
Body
 = 
iout
.
NİClo£r
(
by‹s
.
NewBufãr
(
’codedE¼ÜRe¥Ú£
))

46  
»¥


51 
func
 
	$g‘APIE¼ÜRe¥Ú£
(
”r
 
APIE¼Ü
, 
buck‘Name
 
¡ršg
è
E¼ÜRe¥Ú£
 {

52 
v¬
 
”rRe¥
 = 
E¼ÜRe¥Ú£
{}

53 
”rRe¥
.
Code
 = 
”r
.Code

54 
”rRe¥
.
Mes§ge
 = 
”r
.
DesütiÚ


55 
”rRe¥
.
Buck‘Name
 = 
buck‘Name


56  
”rRe¥


57 
	}
}

60 
func
 
’codeRe¥Ú£
(
»¥Ú£
 
š‹rçû
{}è[]
	gby‹
 {

61 
v¬
 
by‹sBufãr
 
	gby‹s
.
Bufãr


62 
	gby‹sBufãr
.
Wr™eSŒšg
(
xml
.
H—d”
)

63 
	g’code
 :ğ
xml
.
NewEncod”
(&
by‹sBufãr
)

64 
’code
.
Encode
(
»¥Ú£
)

65  
by‹sBufãr
.
By‹s
()

69 
func
 
	$mu¡P¬£BoŞ
(
¡r
 
¡ršg
è
boŞ
 {

70 
b
, 
”r
 :ğ
¡rcÚv
.
	`P¬£BoŞ
(
¡r
)

71 
”r
 !ğ
n
 {

72  
çl£


74  
b


75 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/transport.go

20 
·ckage
 
mšio


22 
impÜt
 (

31 
v¬
 
DeçuÉT¿n¥Üt
 
	gh‰p
.
	gRoundTr³r
 = &
h‰p
.
T¿n¥Üt
{

32 
Proxy
: 
h‰p
.
ProxyFromEnvœÚm’t
,

33 
DŸlCÚ‹xt
: (&
Ãt
.
DŸËr
{

34 
Timeout
: 30 * 
time
.
SecÚd
,

35 
K“pAlive
: 30 * 
time
.
SecÚd
,

36 
Du®Sck
: 
Œue
,

37 }).
DŸlCÚ‹xt
,

38 
MaxIdËCÚns
: 100,

39 
MaxIdËCÚnsP”Ho¡
: 100,

40 
IdËCÚnTimeout
: 90 * 
time
.
SecÚd
,

41 
TLSHªdshakeTimeout
: 10 * 
time
.
SecÚd
,

42 
Ex³ùCÚtšueTimeout
: 1 * 
time
.
SecÚd
,

49 
Di§bËCom´essiÚ
: 
Œue
,

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/utils.go

18 
·ckage
 
mšio


20 
impÜt
 (

39 
func
 
xmlDecod”
(
body
 
io
.
R—d”
, 
v
 
š‹rçû
{}è
	g”rÜ
 {

40 
	gd
 :ğ
xml
.
NewDecod”
(
body
)

41  
d
.
Decode
(
v
)

45 
func
 
	$sum256Hex
(
d©a
 []
by‹
è
¡ršg
 {

46 
hash
 :ğ
sha256
.
	`New
()

47 
hash
.
	`Wr™e
(
d©a
)

48  
hex
.
	`EncodeToSŒšg
(
hash
.
	`Sum
(
n
))

49 
	}
}

52 
func
 
	$sumMD5Ba£64
(
d©a
 []
by‹
è
¡ršg
 {

53 
hash
 :ğ
md5
.
	`New
()

54 
hash
.
	`Wr™e
(
d©a
)

55  
ba£64
.
StdEncodšg
.
	`EncodeToSŒšg
(
hash
.
	`Sum
(
n
))

56 
	}
}

59 
func
 
g‘EndpoštURL
(
’dpošt
 
¡ršg
, 
£cu»
 
boŞ
è(*
	gu¾
.
	gURL
, 
	g”rÜ
) {

60 
	g¡ršgs
.
CÚšs
(
’dpošt
, ":") {

61 
	gho¡
, 
	g_
, 
	g”r
 :ğ
Ãt
.
S¶™Ho¡PÜt
(
’dpošt
)

62 
”r
 !ğ
n
 {

63  
n
, 
”r


65 !
s3uts
.
IsV®idIP
(
ho¡
è&& !s3uts.
IsV®idDomaš
(host) {

66 
msg
 :ğ"Endpošt: " + 
’dpošt
 + " does‚ot follow ip‡ddress or domain‚ame standards."

67  
n
, 
E¼Inv®idArgum’t
(
msg
)

70 !
	gs3uts
.
IsV®idIP
(
’dpošt
è&& !s3uts.
IsV®idDomaš
(endpoint) {

71 
	gmsg
 :ğ"Endpošt: " + 
’dpošt
 + " does‚ot follow ip‡ddress or domain‚ame standards."

72  
n
, 
E¼Inv®idArgum’t
(
msg
)

76 
	gscheme
 := "https"

77 !
£cu»
 {

78 
scheme
 = "http"

82 
’dpoštURLSŒ
 :ğ
scheme
 + "://" + 
’dpošt


83 
’dpoštURL
, 
	g”r
 :ğ
u¾
.
P¬£
(
’dpoštURLSŒ
)

84 
”r
 !ğ
n
 {

85  
n
, 
”r


89 
”r
 :ğ
isV®idEndpoštURL
(*
’dpoštURL
); 
	g”r
 !ğ
n
 {

90  
n
, 
”r


92  
’dpoštURL
, 
	gn


100 
func
 
	$şo£Re¥Ú£
(
»¥
 *
h‰p
.
Re¥Ú£
) {

105 
»¥
 !ğ
n
 &&„e¥.
Body
 !=‚il {

110 
io
.
	`Cİy
(
iout
.
Disÿrd
, 
»¥
.
Body
)

111 
»¥
.
Body
.
	`Clo£
()

113 
	}
}

115 
v¬
 (

117 
em±ySHA256Hex
 = "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"

120 
£Áš–URL
 = 
u¾
.
URL
{}

124 
func
 
	$isV®idEndpoštURL
(
’dpoštURL
 
u¾
.
URL
è
”rÜ
 {

125 
’dpoštURL
 =ğ
£Áš–URL
 {

126  
	`E¼Inv®idArgum’t
("Endpoint url cannot beƒmpty.")

128 
’dpoštURL
.
P©h
 != "/" &&ƒndpointURL.Path != "" {

129  
	`E¼Inv®idArgum’t
("Endpoint url cannot have fully qualified…aths.")

131 
¡ršgs
.
	`CÚšs
(
’dpoštURL
.
Ho¡
, ".s3.amazonaws.com") {

132 !
s3uts
.
	`IsAmazÚEndpošt
(
’dpoštURL
) {

133  
	`E¼Inv®idArgum’t
("Amazon S3ƒndpoint should be 's3.amazonaws.com'.")

136 
¡ršgs
.
	`CÚšs
(
’dpoštURL
.
Ho¡
, ".googleapis.com") {

137 !
s3uts
.
	`IsGoogËEndpošt
(
’dpoštURL
) {

138  
	`E¼Inv®idArgum’t
("Google Cloud Storageƒndpoint should be 'storage.googleapis.com'.")

141  
n


142 
	}
}

145 
func
 
	$isV®idExpœy
(
expœes
 
time
.
Du¿tiÚ
è
”rÜ
 {

146 
expœeSecÚds
 :ğ
	`št64
(
expœes
 / 
time
.
SecÚd
)

147 
expœeSecÚds
 < 1 {

148  
	`E¼Inv®idArgum’t
("Expires cannot be†esserhan 1 second.")

150 
expœeSecÚds
 > 604800 {

151  
	`E¼Inv®idArgum’t
("Expires cannot be greaterhan 7 days.")

153  
n


154 
	}
}

157 
func
 
	$şÚeH—d”
(
h
 
h‰p
.
H—d”
) http.Header {

158 
h2
 :ğ
	`make
(
h‰p
.
H—d”
, 
	`Ën
(
h
))

159 
k
, 
vv
 :ğ
¿nge
 
h
 {

160 
vv2
 :ğ
	`make
([]
¡ršg
, 
	`Ën
(
vv
))

161 
	`cİy
(
vv2
, 
vv
)

162 
h2
[
k
] = 
vv2


164  
h2


165 
	}
}

171 
func
 
	$f‹rH—d”
(
h—d”
 
h‰p
.
H—d”
, 
f‹rKeys
 []
¡ršg
è(
f‹»dH—d”
 http.Header) {

172 
f‹»dH—d”
 = 
	`şÚeH—d”
(
h—d”
)

173 
_
, 
key
 :ğ
¿nge
 
f‹rKeys
 {

174 
f‹»dH—d”
.
	`D–
(
key
)

176  
f‹»dH—d”


177 
	}
}

180 
v¬
 
»gC»d
 = 
»gexp
.
Mu¡Compe
("Credential=([A-Z0-9]+)/")

183 
v¬
 
»gSign
 = 
»gexp
.
Mu¡Compe
("Signature=([[0-9a-f]+)")

186 
func
 
	$»daùSigÇtu»
(
ÜigAuth
 
¡ršg
) string {

187 !
¡ršgs
.
	`HasP»fix
(
ÜigAuth
, 
signV4AlgÜ™hm
) {

196 
ÃwAuth
 :ğ
»gC»d
.
	`R•ÏûAÎSŒšg
(
ÜigAuth
, "Credential=**REDACTED**/")

199  
»gSign
.
	`R•ÏûAÎSŒšg
(
ÃwAuth
, "Signature=**REDACTED**")

200 
	}
}

208 
func
 
	$g‘DeçuÉLoÿtiÚ
(
u
 
u¾
.
URL
, 
»giÚOv”ride
 
¡ršg
è(
loÿtiÚ
 string) {

209 
»giÚOv”ride
 != "" {

210  
»giÚOv”ride


212 
»giÚ
 :ğ
s3uts
.
	`G‘RegiÚFromURL
(
u
)

213 
»giÚ
 == "" {

214 
»giÚ
 = "us-east-1"

216  
»giÚ


217 
	}
}

219 
v¬
 
suµÜ‹dH—d”s
 = []
¡ršg
{

231 
func
 
	$isStÜageCÏssH—d”
(
h—d”Key
 
¡ršg
è
boŞ
 {

232  
¡ršgs
.
	`ToLow”
(
amzStÜageCÏss
è=ğ¡ršgs.ToLow”(
h—d”Key
)

233 
	}
}

236 
func
 
	$isSnd¬dH—d”
(
h—d”Key
 
¡ršg
è
boŞ
 {

237 
key
 :ğ
¡ršgs
.
	`ToLow”
(
h—d”Key
)

238 
_
, 
h—d”
 :ğ
¿nge
 
suµÜ‹dH—d”s
 {

239 
¡ršgs
.
	`ToLow”
(
h—d”
è=ğ
key
 {

240  
Œue


243  
çl£


244 
	}
}

247 
v¬
 
s£H—d”s
 = []
¡ršg
{

257 
func
 
	$isSSEH—d”
(
h—d”Key
 
¡ršg
è
boŞ
 {

258 
key
 :ğ
¡ršgs
.
	`ToLow”
(
h—d”Key
)

259 
_
, 
h
 :ğ
¿nge
 
s£H—d”s
 {

260 
¡ršgs
.
	`ToLow”
(
h
è=ğ
key
 {

261  
Œue


264  
çl£


265 
	}
}

268 
func
 
	$isAmzH—d”
(
h—d”Key
 
¡ršg
è
boŞ
 {

269 
key
 :ğ
¡ršgs
.
	`ToLow”
(
h—d”Key
)

271  
¡ršgs
.
	`HasP»fix
(
key
, "x-amz-m‘a-"è|| sŒšgs.HasP»fix(key, "x-amz-g¿Á-"è|| key =ğ"x-amz-aş" || 
	`isSSEH—d”
(
h—d”Key
)

272 
	}
}

	@/home1/irteamsu/go/src/github.com/jazzsir/minio-go/utils_test.go

18 
·ckage
 
mšio


20 
impÜt
 (

32 
func
 
	$Te¡RedaùSigÇtu»
(
t
 *
‹¡šg
.
T
) {

33 
‹¡Ca£s
 := []struct {

34 
authV®ue
 
¡ršg


35 
ex³ùedRedaùedAuthV®ue
 
¡ršg


38 
authV®ue
: "AWS 1231313:888x000231==",

39 
ex³ùedRedaùedAuthV®ue
: "AWS **REDACTED**:**REDACTED**",

42 
authV®ue
: "AWS4-HMAC-SHA256 Credential=12312313/20170613/us-east-1/s3/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=02131231312313213",

43 
ex³ùedRedaùedAuthV®ue
: "AWS4-HMAC-SHA256 Credential=**REDACTED**/20170613/us-east-1/s3/aws4_request, SignedHeaders=host;x-amz-content-sha256;x-amz-date, Signature=**REDACTED**",

47 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

48 
»daùedAuthV®ue
 :ğ
	`»daùSigÇtu»
(
‹¡Ca£
.
authV®ue
)

49 
»daùedAuthV®ue
 !ğ
‹¡Ca£
.
ex³ùedRedaùedAuthV®ue
 {

50 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed %s, gÙ %s", 
i
+1, 
‹¡Ca£
.
ex³ùedRedaùedAuthV®ue
, 
»daùedAuthV®ue
)

53 
	}
}

57 
func
 
	$Te¡F‹rH—d”
(
t
 *
‹¡šg
.
T
) {

58 
h—d”
 :ğ
h‰p
.
H—d”
{}

59 
h—d”
.
	`S‘
("Content-Type", "binary/octet-stream")

60 
h—d”
.
	`S‘
("Content-Encoding", "gzip")

61 
ÃwH—d”
 :ğ
	`f‹rH—d”
(
h—d”
, []
¡ršg
{"Content-Type"})

62 
	`Ën
(
ÃwH—d”
) > 1 {

63 
t
.
	`F©®f
("UÃx³ùed sizoàth»tuºed h—d”, should b1, gÙ %d", 
	`Ën
(
ÃwH—d”
))

65 
ÃwH—d”
.
	`G‘
("Content-Encoding") != "gzip" {

66 
t
.
	`F©®f
("UÃx³ùed cÚ‹Á-’codšg v®ue,ƒx³ùed 'gz', gÙ %s", 
ÃwH—d”
.
	`G‘
("Content-Encoding"))

68 
	}
}

71 
func
 
	$Te¡G‘EndpoštURL
(
t
 *
‹¡šg
.
T
) {

72 
‹¡Ca£s
 := []struct {

74 
’dPošt
 
¡ršg


75 
£cu»
 
boŞ


78 
»suÉ
 
¡ršg


79 
”r
 
”rÜ


81 
shouldPass
 
boŞ


83 {"s3.amazÚaws.com", 
Œue
, "h‰ps://s3.amazÚaws.com", 
n
,rue},

84 {"s3.ú-nÜth-1.amazÚaws.com.ú", 
Œue
, "h‰ps://s3.ú-nÜth-1.amazÚaws.com.ú", 
n
,rue},

85 {"s3.ú-nÜthwe¡-1.amazÚaws.com.ú", 
Œue
, "h‰ps://s3.ú-nÜthwe¡-1.amazÚaws.com.ú", 
n
,rue},

86 {"s3.amazÚaws.com", 
çl£
, "h‰p://s3.amazÚaws.com", 
n
, 
Œue
},

87 {"s3.ú-nÜth-1.amazÚaws.com.ú", 
çl£
, "h‰p://s3.ú-nÜth-1.amazÚaws.com.ú", 
n
, 
Œue
},

88 {"s3.ú-nÜthwe¡-1.amazÚaws.com.ú", 
çl£
, "h‰p://s3.ú-nÜthwe¡-1.amazÚaws.com.ú", 
n
, 
Œue
},

89 {"192.168.1.1:9000", 
çl£
, "h‰p://192.168.1.1:9000", 
n
, 
Œue
},

90 {"192.168.1.1:9000", 
Œue
, "h‰ps://192.168.1.1:9000", 
n
,rue},

91 {"s3.amazÚaws.com:443", 
Œue
, "h‰ps://s3.amazÚaws.com:443", 
n
,rue},

92 {"13333.123123.-", 
Œue
, "", 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Endpošt: % dÛ nÙ fŞlow i°add»s Ü domaš‚am¡ªd¬ds.", "13333.123123.-")), 
çl£
},

93 {"13333.123123.-", 
Œue
, "", 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Endpošt: % dÛ nÙ fŞlow i°add»s Ü domaš‚am¡ªd¬ds.", "13333.123123.-")), 
çl£
},

94 {"¡Üage.googË­is.com:4000", 
Œue
, "", 
	`E¼Inv®idArgum’t
("GoogË Cloud StÜag’dpošˆshould b'¡Üage.googË­is.com'."), 
çl£
},

95 {"s3.¯mzza.-", 
Œue
, "", 
	`E¼Inv®idArgum’t
(
fmt
.
	`S´štf
("Endpošt: % dÛ nÙ fŞlow i°add»s Ü domaš‚am¡ªd¬ds.", "s3.¯mzza.-")), 
çl£
},

96 {"", 
Œue
, "", 
	`E¼Inv®idArgum’t
("Endpošt: dÛ nÙ fŞlow i°add»s Ü domaš‚am¡ªd¬ds."), 
çl£
},

99 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

100 
»suÉ
, 
”r
 :ğ
	`g‘EndpoštURL
(
‹¡Ca£
.
’dPošt
,e¡Ca£.
£cu»
)

101 
”r
 !ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

102 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
.
	`E¼Ü
())

104 
”r
 =ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

105 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™h <ERROR> \"%s\", buˆ·s£d in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
())

108 
”r
 !ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

109 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

110 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™hƒ¼Ü \"%s\", buˆš¡—d faed w™hƒ¼Ü \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
(),ƒrr.Error())

115 
”r
 =ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

116 
‹¡Ca£
.
»suÉ
 !ğ»suÉ.
	`SŒšg
() {

117 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedh»suÉ U¾Øb\"%s\", buˆfound \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
»suÉ
,„esuÉ.
	`SŒšg
())

121 
	}
}

124 
func
 
	$Te¡IsV®idEndpoštURL
(
t
 *
‹¡šg
.
T
) {

125 
‹¡Ca£s
 := []struct {

126 
u¾
 
¡ršg


127 
”r
 
”rÜ


129 
shouldPass
 
boŞ


131 {"", 
	`E¼Inv®idArgum’t
("Endpošˆu¾ cªnÙ bem±y."), 
çl£
},

132 {"/", 
n
, 
Œue
},

133 {"h‰ps://s3.amazÚaws.com", 
n
, 
Œue
},

134 {"h‰ps://s3.ú-nÜth-1.amazÚaws.com.ú", 
n
, 
Œue
},

135 {"h‰ps://s3-us-gov-we¡-1.amazÚaws.com", 
n
, 
Œue
},

136 {"h‰ps://s3-fs-us-gov-we¡-1.amazÚaws.com", 
n
, 
Œue
},

137 {"h‰ps://s3.amazÚaws.com/", 
n
, 
Œue
},

138 {"h‰ps://¡Üage.googË­is.com/", 
n
, 
Œue
},

139 {"h‰ps://z3.amazÚaws.com", 
n
, 
Œue
},

140 {"h‰ps://myb®ªûr.us-—¡-1.–b.amazÚaws.com", 
n
, 
Œue
},

141 {"192.168.1.1", 
	`E¼Inv®idArgum’t
("Endpošˆu¾ cªnÙ havfuÎy qu®if›d…©hs."), 
çl£
},

142 {"h‰ps://amazÚ.googË­is.com/", 
	`E¼Inv®idArgum’t
("GoogË Cloud StÜag’dpošˆshould b'¡Üage.googË­is.com'."), 
çl£
},

143 {"h‰ps://¡Üage.googË­is.com/buck‘/", 
	`E¼Inv®idArgum’t
("Endpošˆu¾ cªnÙ havfuÎy qu®if›d…©hs."), 
çl£
},

144 {"h‰ps://s3.amazÚaws.com/buck‘/objeù", 
	`E¼Inv®idArgum’t
("Endpošˆu¾ cªnÙ havfuÎy qu®if›d…©hs."), 
çl£
},

147 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

148 
v¬
 
u
 
u¾
.
URL


149 
‹¡Ca£
.
u¾
 == "" {

150 
u
 = 
£Áš–URL


152 
u1
, 
”r
 :ğ
u¾
.
	`P¬£
(
‹¡Ca£
.url)

153 
”r
 !ğ
n
 {

154 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
)

156 
u
 = *
u1


158 
”r
 :ğ
	`isV®idEndpoštURL
(
u
)

159 
”r
 !ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

160 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
)

162 
”r
 =ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

163 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™h <ERROR> \"%s\", buˆ·s£d in¡—d", 
i
+1, 
‹¡Ca£
.
”r
)

166 
”r
 !ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

167 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

168 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™hƒ¼Ü \"%s\", buˆš¡—d faed w™hƒ¼Ü \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
”r
,ƒrr)

173 
	}
}

175 
func
 
	$Te¡DeçuÉBuck‘LoÿtiÚ
(
t
 *
‹¡šg
.
T
) {

176 
‹¡Ca£s
 := []struct {

177 
’dpoštURL
 
u¾
.
URL


178 
»giÚOv”ride
 
¡ršg


179 
ex³ùedLoÿtiÚ
 
¡ršg


183 
’dpoštURL
: 
u¾
.
URL
{
Ho¡
: "s3-fips-us-gov-west-1.amazonaws.com"},

184 
»giÚOv”ride
: "us-west-1",

185 
ex³ùedLoÿtiÚ
: "us-west-1",

189 
’dpoštURL
: 
u¾
.
URL
{
Ho¡
: "s3-fips-us-gov-west-1.amazonaws.com"},

190 
»giÚOv”ride
: "",

191 
ex³ùedLoÿtiÚ
: "us-gov-west-1",

195 
’dpoštURL
: 
u¾
.
URL
{
Ho¡
: "s3.amazonaws.com"},

196 
»giÚOv”ride
: "us-west-1",

197 
ex³ùedLoÿtiÚ
: "us-west-1",

201 
’dpoštURL
: 
u¾
.
URL
{
Ho¡
: "s3.cn-north-1.amazonaws.com.cn"},

202 
»giÚOv”ride
: "",

203 
ex³ùedLoÿtiÚ
: "cn-north-1",

207 
’dpoštURL
: 
u¾
.
URL
{
Ho¡
: "s3.cn-northwest-1.amazonaws.com.cn"},

208 
»giÚOv”ride
: "",

209 
ex³ùedLoÿtiÚ
: "cn-northwest-1",

213 
’dpoštURL
: 
u¾
.
URL
{
Ho¡
: "s3.amazonaws.com"},

214 
»giÚOv”ride
: "",

215 
ex³ùedLoÿtiÚ
: "us-east-1",

219 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

220 
»tLoÿtiÚ
 :ğ
	`g‘DeçuÉLoÿtiÚ
(
‹¡Ca£
.
’dpoštURL
,e¡Ca£.
»giÚOv”ride
)

221 
‹¡Ca£
.
ex³ùedLoÿtiÚ
 !ğ
»tLoÿtiÚ
 {

222 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùed†oÿtiÚ %s, gÙ %s", 
i
+1, 
‹¡Ca£
.
ex³ùedLoÿtiÚ
, 
»tLoÿtiÚ
)

225 
	}
}

228 
func
 
	$Te¡IsV®idExpœy
(
t
 *
‹¡šg
.
T
) {

229 
‹¡Ca£s
 := []struct {

231 
du¿tiÚ
 
time
.
Du¿tiÚ


233 
”r
 
”rÜ


235 
shouldPass
 
boŞ


237 {100 * 
time
.
Mli£cÚd
, 
	`E¼Inv®idArgum’t
("Expœe ÿÂÙ bËs£¸thª 1 secÚd."), 
çl£
},

238 {604801 * 
time
.
SecÚd
, 
	`E¼Inv®idArgum’t
("Expœe ÿÂÙ bg»©”hª 7 days."), 
çl£
},

239 {0 * 
time
.
SecÚd
, 
	`E¼Inv®idArgum’t
("Expœe ÿÂÙ bËs£¸thª 1 secÚd."), 
çl£
},

240 {1 * 
time
.
SecÚd
, 
n
, 
Œue
},

241 {10000 * 
time
.
SecÚd
, 
n
, 
Œue
},

242 {999 * 
time
.
SecÚd
, 
n
, 
Œue
},

245 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

246 
”r
 :ğ
	`isV®idExpœy
(
‹¡Ca£
.
du¿tiÚ
)

247 
”r
 !ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

248 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
.
	`E¼Ü
())

250 
”r
 =ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

251 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™h <ERROR> \"%s\", buˆ·s£d in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
())

254 
”r
 !ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

255 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

256 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™hƒ¼Ü \"%s\", buˆš¡—d faed w™hƒ¼Ü \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
(),ƒrr.Error())

261 
	}
}

264 
func
 
	$Te¡IsV®idBuck‘Name
(
t
 *
‹¡šg
.
T
) {

265 
‹¡Ca£s
 := []struct {

267 
buck‘Name
 
¡ršg


269 
”r
 
”rÜ


271 
shouldPass
 
boŞ


273 {".mybuck‘", 
	`E¼Inv®idBuck‘Name
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

274 {"mybuck‘.", 
	`E¼Inv®idBuck‘Name
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

275 {"mybuck‘-", 
	`E¼Inv®idBuck‘Name
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

276 {"my", 
	`E¼Inv®idBuck‘Name
("Buck‘‚amÿÂÙ bsm®Ë¸thª 3 ch¬aù”s"), 
çl£
},

277 {"", 
	`E¼Inv®idBuck‘Name
("Buck‘‚amÿÂÙ bem±y"), 
çl£
},

278 {"my..buck‘", 
	`E¼Inv®idBuck‘Name
("Buck‘‚amcÚš šv®id ch¬aù”s"), 
çl£
},

279 {"my.buck‘.com", 
n
, 
Œue
},

280 {"my-buck‘", 
n
, 
Œue
},

281 {"123my-buck‘", 
n
, 
Œue
},

284 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

285 
”r
 :ğ
s3uts
.
	`CheckV®idBuck‘Name
(
‹¡Ca£
.
buck‘Name
)

286 
”r
 !ğ
n
 && 
‹¡Ca£
.
shouldPass
 {

287 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed w™h: <ERROR> %s", 
i
+1, 
”r
.
	`E¼Ü
())

289 
”r
 =ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

290 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™h <ERROR> \"%s\", buˆ·s£d in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
())

293 
”r
 !ğ
n
 && !
‹¡Ca£
.
shouldPass
 {

294 
”r
.
	`E¼Ü
(è!ğ
‹¡Ca£
.err.Error() {

295 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØç w™hƒ¼Ü \"%s\", buˆš¡—d faed w™hƒ¼Ü \"%s\" in¡—d", 
i
+1, 
‹¡Ca£
.
”r
.
	`E¼Ü
(),ƒrr.Error())

301 
	}
}

304 
func
 
	$Te¡IsSnd¬dH—d”
(
t
 *
‹¡šg
.
T
) {

305 
‹¡Ca£s
 := []struct {

307 
h—d”
 
¡ršg


309 
ex³ùedV®ue
 
boŞ


311 {"cÚ‹Á-’codšg", 
Œue
},

312 {"cÚ‹Á-ty³", 
Œue
},

313 {"ÿche-cÚŒŞ", 
Œue
},

314 {"cÚ‹Á-di¥os™iÚ", 
Œue
},

315 {"cÚ‹Á-Ïnguage", 
Œue
},

316 {"¿ndom-h—d”", 
çl£
},

319 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

320 
aùu®
 :ğ
	`isSnd¬dH—d”
(
‹¡Ca£
.
h—d”
)

321 
aùu®
 !ğ
‹¡Ca£
.
ex³ùedV®ue
 {

322 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed", 
i
+1)

326 
	}
}

329 
func
 
	$Te¡IsSSEH—d”
(
t
 *
‹¡šg
.
T
) {

330 
‹¡Ca£s
 := []struct {

332 
h—d”
 
¡ršg


334 
ex³ùedV®ue
 
boŞ


336 {"x-amz-£rv”-side-’üy±iÚ", 
Œue
},

337 {"x-amz-£rv”-side-’üy±iÚ-aws-kms-key-id", 
Œue
},

338 {"x-amz-£rv”-side-’üy±iÚ-cÚ‹xt", 
Œue
},

339 {"x-amz-£rv”-side-’üy±iÚ-cu¡om”-®gÜ™hm", 
Œue
},

340 {"x-amz-£rv”-side-’üy±iÚ-cu¡om”-key", 
Œue
},

341 {"x-amz-£rv”-side-’üy±iÚ-cu¡om”-key-MD5", 
Œue
},

342 {"¿ndom-h—d”", 
çl£
},

345 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

346 
aùu®
 :ğ
	`isSSEH—d”
(
‹¡Ca£
.
h—d”
)

347 
aùu®
 !ğ
‹¡Ca£
.
ex³ùedV®ue
 {

348 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed", 
i
+1)

351 
	}
}

354 
func
 
	$Te¡IsAmzH—d”
(
t
 *
‹¡šg
.
T
) {

355 
‹¡Ca£s
 := []struct {

357 
h—d”
 
¡ršg


359 
ex³ùedV®ue
 
boŞ


361 {"x-amz-iv", 
çl£
},

362 {"x-amz-key", 
çl£
},

363 {"x-amz-m©desc", 
çl£
},

364 {"x-amz-m‘a-x-amz-iv", 
Œue
},

365 {"x-amz-m‘a-x-amz-key", 
Œue
},

366 {"x-amz-m‘a-x-amz-m©desc", 
Œue
},

367 {"x-amz-aş", 
Œue
},

368 {"¿ndom-h—d”", 
çl£
},

371 
i
, 
‹¡Ca£
 :ğ
¿nge
 
‹¡Ca£s
 {

372 
aùu®
 :ğ
	`isAmzH—d”
(
‹¡Ca£
.
h—d”
)

373 
aùu®
 !ğ
‹¡Ca£
.
ex³ùedV®ue
 {

374 
t
.
	`E¼Üf
("Te¡ %d: Ex³ùedØ·ss, buˆçed", 
i
+1)

378 
	}
}

	@
1
.
1
/usr/include
134
10450
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/.travis.yml
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-compose-object.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-compose-object_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-datatypes.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-error-response.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-error-response_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-lifecycle.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-object-acl.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-object-context.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-object-file.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-object.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-options.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-get-policy.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-list.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-notification.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-presigned.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-bucket.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-common.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-context.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-copy.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-file-context.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-file.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-multipart.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object-streaming.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-put-object_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-remove.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-s3-datatypes.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-select.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api-stat.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/api_unit_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/appveyor.yml
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/bucket-cache.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/bucket-cache_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/bucket-notification.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/constants.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/core.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/core_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/docs/validator.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/minio/listenbucketnotification.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/bucketexists.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/composeobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/copyobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fgetobject-context.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fgetobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fputencrypted-object.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fputobject-context.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/fputobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/get-encrypted-object.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getbucketlifecycle.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getbucketnotification.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getbucketpolicy.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getobject-client-encryption.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getobject-context.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/getobjectacl.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listbuckets.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listincompleteuploads.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listobjects-N.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listobjects.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/listobjectsV2.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/makebucket.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/presignedgetobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/presignedheadobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/presignedpostpolicy.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/presignedputobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/put-encrypted-object.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-client-encryption.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-context.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-getobject-sse.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-progress.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-s3-accelerate.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject-streaming.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/putobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removeallbucketnotification.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removebucket.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removeincompleteupload.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removeobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/removeobjects.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/selectobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/setbucketlifecycle.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/setbucketnotification.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/setbucketpolicy.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/examples/s3/statobject.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/functional_tests.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/get-options_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/hook-reader.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/chain.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/chain_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/credentials.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/credentials_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/doc.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/env_aws.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/env_minio.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/env_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/file_aws_credentials.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/file_minio_client.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/file_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/iam_aws.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/iam_aws_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/signature-type.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/static.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/static_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/sts_client_grants.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/credentials/sts_web_identity.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/encrypt/server-side.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/policy/bucket-policy-condition.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/policy/bucket-policy-condition_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/policy/bucket-policy.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/policy/bucket-policy_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-streaming.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-streaming_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-v2.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-v2_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-v4.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature-v4_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/request-signature_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/test-utils_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/utils.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3signer/utils_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3utils/utils.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/s3utils/utils_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/set/stringset.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/pkg/set/stringset_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/post-policy.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/retry-continous.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/retry.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/s3-endpoints.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/s3-error.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/test-utils_test.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/transport.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/utils.go
/home1/irteamsu/go/src/github.com/jazzsir/minio-go/utils_test.go
